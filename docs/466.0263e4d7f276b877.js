(self.webpackChunkcomms=self.webpackChunkcomms||[]).push([[466],{3466:(J,Qt,ut)=>{"use strict";ut.r(Qt),ut.d(Qt,{FunctionalTrainerModule:()=>u_});var ft=ut(6814),b=ut(6538);function Pt(i,t,e,s,o,c,l){try{var d=i[c](l),f=d.value}catch(p){return void e(p)}d.done?t(f):Promise.resolve(f).then(s,o)}function at(i){return function(){var t=this,e=arguments;return new Promise(function(s,o){var c=i.apply(t,e);function l(f){Pt(c,s,o,l,d,"next",f)}function d(f){Pt(c,s,o,l,d,"throw",f)}l(void 0)})}}var u=ut(4946),Ft=ut(6990);const fe="14.7.77";var Oe=ut(9884);const Je=new WeakSet,Re=new WeakMap,ts=new WeakMap,Ue=new WeakMap,dn=new WeakMap,gs=new WeakMap,ve=new WeakMap,Gn=new WeakMap,Ke=new WeakMap,es=new WeakMap,Tn={construct:()=>Tn},bi=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Jr=(i,t)=>{const e=[];let s=i.replace(/^[\s]+/,""),o=s.match(bi);for(;null!==o;){const c=o[1].slice(1,-1),l=o[0].replace(/([\s]+)?;?$/,"").replace(c,new URL(c,t).toString());e.push(l),s=s.slice(o[0].length).replace(/^[\s]+/,""),o=s.match(bi)}return[e.join(";"),s]},Kr=i=>{if(void 0!==i&&!Array.isArray(i))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},to=i=>{if(!(i=>{try{new new Proxy(i,Tn)}catch{return!1}return!0})(i))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===i.prototype||"object"!=typeof i.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},rn=(i,t)=>{const e=i.get(t);if(void 0===e)throw new Error("A value with the given key could not be found.");return e},qt=(i,t)=>{const e=Array.from(i).filter(t);if(e.length>1)throw Error("More than one element was found.");if(0===e.length)throw Error("No element was found.");const[s]=e;return i.delete(s),s},K=(i,t,e,s)=>{const o=rn(i,t),c=qt(o,l=>l[0]===e&&l[1]===s);return 0===o.size&&i.delete(t),c},ht=i=>rn(ve,i),Z=i=>{if(Je.has(i))throw new Error("The AudioNode is already stored.");Je.add(i),ht(i).forEach(t=>t(!0))},wt=i=>"port"in i,ct=i=>{if(!Je.has(i))throw new Error("The AudioNode is not stored.");Je.delete(i),ht(i).forEach(t=>t(!1))},At=(i,t)=>{!wt(i)&&t.every(e=>0===e.size)&&ct(i)},Cs={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},Jt=(i,t)=>i.context===t,ms=i=>{try{i.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Me=()=>new DOMException("","IndexSizeError"),fn=i=>{var t;i.getChannelData=(t=i.getChannelData,e=>{try{return t.call(i,e)}catch(s){throw 12===s.code?Me():s}})},Qi={numberOfChannels:1},ce=-34028234663852886e22,ke=-ce,ie=i=>Je.has(i),el={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},Ce=i=>rn(Re,i),ss=i=>rn(Ue,i),Ki=(i,t)=>{const{activeInputs:e}=Ce(i);e.forEach(o=>o.forEach(([c])=>{t.includes(i)||Ki(c,[...t,i])}));const s=(i=>"playbackRate"in i)(i)?[i.playbackRate]:wt(i)?Array.from(i.parameters.values()):(i=>"frequency"in i&&"gain"in i)(i)?[i.Q,i.detune,i.frequency,i.gain]:(i=>"offset"in i)(i)?[i.offset]:(i=>!("frequency"in i)&&"gain"in i)(i)?[i.gain]:(i=>"detune"in i&&"frequency"in i)(i)?[i.detune,i.frequency]:(i=>"pan"in i)(i)?[i.pan]:[];for(const o of s){const c=ss(o);void 0!==c&&c.activeInputs.forEach(([l])=>Ki(l,t))}ie(i)&&ct(i)},Ci=i=>{Ki(i.destination,[])},Ai=i=>"context"in i,Zs=i=>Ai(i[0]),Hs=(i,t,e,s)=>{for(const o of i)if(e(o)){if(s)return!1;throw Error("The set contains at least one similar element.")}return i.add(t),!0},nl=(i,t,[e,s],o)=>{Hs(i,[t,e,s],c=>c[0]===t&&c[1]===e,o)},sl=(i,[t,e,s],o)=>{const c=i.get(t);void 0===c?i.set(t,new Set([[e,s]])):Hs(c,[e,s],l=>l[0]===e,o)},Ys=i=>"inputs"in i,tr=(i,t,e,s)=>{if(Ys(t)){const o=t.inputs[s];return i.connect(o,e,0),[o,e,0]}return i.connect(t,e,s),[t,e,s]},il=(i,t,e)=>{for(const s of i)if(s[0]===t&&s[1]===e)return i.delete(s),s;return null},rl=(i,t)=>{if(!ht(i).delete(t))throw new Error("Missing the expected event listener.")},ol=(i,t,e)=>{const s=rn(i,t),o=qt(s,c=>c[0]===e);return 0===s.size&&i.delete(t),o},er=(i,t,e,s)=>{Ys(t)?i.disconnect(t.inputs[s],e,0):i.disconnect(t,e,s)},ne=i=>rn(ts,i),nr=i=>rn(dn,i),Qs=i=>Gn.has(i),Si=i=>!Je.has(i),al=(i,t)=>new Promise(e=>{if(null!==t)e(!0);else{const s=i.createScriptProcessor(256,1,1),o=i.createGain(),c=i.createBuffer(1,2,44100),l=c.getChannelData(0);l[0]=1,l[1]=1;const d=i.createBufferSource();d.buffer=c,d.loop=!0,d.connect(s).connect(i.destination),d.connect(o),d.disconnect(o),s.onaudioprocess=f=>{const p=f.inputBuffer.getChannelData(0);Array.prototype.some.call(p,g=>1===g)?e(!0):e(!1),d.stop(),s.onaudioprocess=null,d.disconnect(s),s.disconnect(i.destination)},d.start()}}),sr=(i,t)=>{const e=new Map;for(const s of i)for(const o of s){const c=e.get(o);e.set(o,void 0===c?1:c+1)}e.forEach((s,o)=>t(o,s))},so=i=>"context"in i,Ba=(i,t,e,s,o)=>{const[c,l]=((i,t,e,s)=>{const{activeInputs:o,passiveInputs:c}=Ce(t),l=il(o[s],i,e);return null===l?[K(c,i,e,s)[2],!1]:[l[2],!0]})(i,e,s,o);if(null!==c&&(rl(i,c),l&&!t&&!Qs(i)&&er(ne(i),ne(e),s,o)),ie(e)){const{activeInputs:d}=Ce(e);At(e,d)}},Ga=(i,t,e,s)=>{const[o,c]=((i,t,e)=>{const{activeInputs:s,passiveInputs:o}=ss(t),c=il(s,i,e);return null===c?[ol(o,i,e)[1],!1]:[c[2],!0]})(i,e,s);null!==o&&(rl(i,o),c&&!t&&!Qs(i)&&ne(i).disconnect(nr(e),s))};class ul{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach((s,o)=>t.call(e,s,o,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const jd={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function ro(i,t,e,s,o){if("function"==typeof i.copyFromChannel)0===t[e].byteLength&&(t[e]=new Float32Array(128)),i.copyFromChannel(t[e],s,o);else{const c=i.getChannelData(s);if(0===t[e].byteLength)t[e]=c.slice(o,o+128);else{const l=new Float32Array(c.buffer,o*Float32Array.BYTES_PER_ELEMENT,128);t[e].set(l)}}}const ir=(i,t,e,s,o)=>{"function"==typeof i.copyToChannel?0!==t[e].byteLength&&i.copyToChannel(t[e],s,o):0!==t[e].byteLength&&i.getChannelData(s).set(t[e],o)},oo=(i,t)=>{const e=[];for(let s=0;s<i;s+=1){const o=[],c="number"==typeof t?t:t[s];for(let l=0;l<c;l+=1)o.push(new Float32Array(128));e.push(o)}return e},Hd=function(){var i=at(function*(t,e,s,o,c,l,d){const f=null===e?128*Math.ceil(t.context.length/128):e.length,p=o.channelCount*o.numberOfInputs,g=c.reduce((D,I)=>D+I,0),y=0===g?null:s.createBuffer(g,f,s.sampleRate);if(void 0===l)throw new Error("Missing the processor constructor.");const x=Ce(t),A=yield((i,t)=>{const e=rn(es,i),s=ne(t);return rn(e,s)})(s,t),w=oo(o.numberOfInputs,o.channelCount),S=oo(o.numberOfOutputs,c),F=Array.from(t.parameters.keys()).reduce((D,I)=>({...D,[I]:new Float32Array(128)}),{});for(let D=0;D<f;D+=128){if(o.numberOfInputs>0&&null!==e)for(let I=0;I<o.numberOfInputs;I+=1)for(let B=0;B<o.channelCount;B+=1)ro(e,w[I],B,B,D);void 0!==l.parameterDescriptors&&null!==e&&l.parameterDescriptors.forEach(({name:I},B)=>{ro(e,F,I,p+B,D)});for(let I=0;I<o.numberOfInputs;I+=1)for(let B=0;B<c[I];B+=1)0===S[I][B].byteLength&&(S[I][B]=new Float32Array(128));try{const I=w.map((z,M)=>0===x.activeInputs[M].size?[]:z),B=d(D/s.sampleRate,s.sampleRate,()=>A.process(I,S,F));if(null!==y)for(let z=0,M=0;z<o.numberOfOutputs;z+=1){for(let P=0;P<c[z];P+=1)ir(y,S[z],P,M+P,D);M+=c[z]}if(!B)break}catch(I){t.dispatchEvent(new ErrorEvent("processorerror",{colno:I.colno,filename:I.filename,lineno:I.lineno,message:I.message}));break}}return y});return function(e,s,o,c,l,d,f){return i.apply(this,arguments)}}(),dl={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Xd={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},gl={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Kd={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},tf={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Za=i=>{const{port1:t,port2:e}=new MessageChannel;return new Promise(s=>{const o=()=>{e.onmessage=null,t.close(),e.close(),s()};e.onmessage=()=>o();try{t.postMessage(i,[i])}catch{}finally{o()}})},wl={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},rr=(i,t,e)=>{const s=t[e];if(void 0===s)throw i();return s},af={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},pf={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},xe=()=>new DOMException("","InvalidStateError"),or=()=>new DOMException("","InvalidAccessError"),Dl={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},pn=(i,t,e,s,o,c,l,d,f,p,g)=>{const y=p.length;let x=d;for(let A=0;A<y;A+=1){let w=e[0]*p[A];for(let S=1;S<o;S+=1){const F=x-S&f-1;w+=e[S]*c[F],w-=i[S]*l[F]}for(let S=o;S<s;S+=1)w+=e[S]*c[x-S&f-1];for(let S=o;S<t;S+=1)w-=i[S]*l[x-S&f-1];c[x]=p[A],l[x]=w,x=x+1&f-1,g[A]=w}return x},re={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},$s=i=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const e=i.decodeAudioData(t.buffer,()=>{});return void 0!==e&&(e.catch(()=>{}),!0)}catch{}return!1},Wt=(i,t,e)=>{const s=t[e];void 0!==s&&s!==i[e]&&(i[e]=s)},Ae=(i,t)=>{Wt(i,t,"channelCount"),Wt(i,t,"channelCountMode"),Wt(i,t,"channelInterpretation")},Ja=i=>"function"==typeof i.getFloatTimeDomainData,ue=(i,t,e)=>{const s=t[e];void 0!==s&&s!==i[e].value&&(i[e].value=s)},cr=i=>{var t;i.start=(t=i.start,(e=0,s=0,o)=>{if("number"==typeof o&&o<0||s<0||e<0)throw new RangeError("The parameters can't be negative.");t.call(i,e,s,o)})},ur=i=>{var t;i.stop=(t=i.stop,(e=0)=>{if(e<0)throw new RangeError("The parameter can't be negative.");t.call(i,e)})},nc=(i,t)=>null===i?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(i*t))))),Mf=function(){var i=at(function*(t,e){const s=yield(i=>new Promise((t,e)=>{const{port1:s,port2:o}=new MessageChannel;s.onmessage=({data:c})=>{s.close(),o.close(),t(c)},s.onmessageerror=({data:c})=>{s.close(),o.close(),e(c)},o.postMessage(i)}))(e);return new t(s)});return function(e,s){return i.apply(this,arguments)}}(),Ll=(i,t)=>{const e=i.createBiquadFilter();return Ae(e,t),ue(e,t,"Q"),ue(e,t,"detune"),ue(e,t,"frequency"),ue(e,t,"gain"),Wt(e,t,"type"),e},hr=(i,t)=>{const e=i.createChannelSplitter(t.numberOfOutputs);return Ae(e,t),(i=>{const t=i.numberOfOutputs;Object.defineProperty(i,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw xe()}}),Object.defineProperty(i,"channelCountMode",{get:()=>"explicit",set:e=>{if("explicit"!==e)throw xe()}}),Object.defineProperty(i,"channelInterpretation",{get:()=>"discrete",set:e=>{if("discrete"!==e)throw xe()}})})(e),e},Xs=(i,t)=>(i.connect=t.connect.bind(t),i.disconnect=t.disconnect.bind(t),i),Bl=(i,t)=>{const e=i.createDelay(t.maxDelayTime);return Ae(e,t),ue(e,t,"delayTime"),e},on=(i,t)=>{const e=i.createGain();return Ae(e,t),ue(e,t,"gain"),e};function jn(i,t){const e=t[0]*t[0]+t[1]*t[1];return[(i[0]*t[0]+i[1]*t[1])/e,(i[1]*t[0]-i[0]*t[1])/e]}function Gl(i,t){return[i[0]*t[0]-i[1]*t[1],i[0]*t[1]+i[1]*t[0]]}function Wl(i,t){let e=[0,0];for(let s=i.length-1;s>=0;s-=1)e=Gl(e,t),e[0]+=i[s];return e}const Rt=(i,t,e,s)=>i.createScriptProcessor(t,e,s),Xt=()=>new DOMException("","NotSupportedError"),fo={numberOfChannels:1},Mi={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Ut={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},mo={disableNormalization:!1},jl={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},fr=()=>new DOMException("","UnknownError"),zf={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Ql=(i,t,e)=>void 0===i.copyFromChannel?i.getChannelData(e)[0]:(i.copyFromChannel(t,e),t[0]),$l=i=>{if(null===i)return!1;const t=i.length;return t%2!=0?0!==i[Math.floor(t/2)]:i[t/2-1]+i[t/2]!==0},le=(i,t,e,s)=>{let o=i;for(;!o.hasOwnProperty(t);)o=Object.getPrototypeOf(o);const{get:c,set:l}=Object.getOwnPropertyDescriptor(o,t);Object.defineProperty(i,t,{get:e(c),set:s(l)})},oc=(i,t,e)=>{try{i.setValueAtTime(t,e)}catch(s){if(9!==s.code)throw s;oc(i,t,e+1e-7)}},gr=i=>{const t=i.createOscillator();try{t.start(-1)}catch(e){return e instanceof RangeError}return!1},Ks=i=>{const t=i.createBuffer(1,1,44100),e=i.createBufferSource();e.buffer=t,e.start(),e.stop();try{return e.stop(),!0}catch{return!1}},ti=i=>{const t=i.createOscillator();try{t.stop(-1)}catch(e){return e instanceof RangeError}return!1},ei=(i,t)=>{const e=t.createGain();i.connect(e);const s=(o=i.disconnect,()=>{o.call(i,e),i.removeEventListener("ended",s)});var o;i.addEventListener("ended",s),Xs(i,e),i.stop=(o=>{let c=!1;return(l=0)=>{if(c)try{o.call(i,l)}catch{e.gain.setValueAtTime(0,l)}else o.call(i,l),c=!0}})(i.stop)},ki=(i,t)=>e=>{const s={value:i};return Object.defineProperties(e,{currentTarget:s,target:s}),"function"==typeof t?t.call(i,e):t.handleEvent.call(i,e)},Xf=(i=Hs,(t,e,[s,o,c],l)=>{i(t[o],[e,s,c],d=>d[0]===e&&d[1]===s,l)}),Jf=(i=>(t,e,[s,o,c],l)=>{const d=t.get(s);void 0===d?t.set(s,new Set([[o,e,c]])):i(d,[o,e,c],f=>f[0]===o&&f[1]===e,l)})(Hs),Kf=(i=>(t,e,s,o)=>i(t[o],c=>c[0]===e&&c[1]===s))(qt),Xl=new WeakMap,Ao=(i=>t=>{var e;return null!==(e=i.get(t))&&void 0!==e?e:0})(Xl),Pe=((i,t)=>(e,s)=>{const o=t.get(e);if(void 0!==o)return o;const c=i.get(e);if(void 0!==c)return c;try{const l=s();return l instanceof Promise?(i.set(e,l),l.catch(()=>!1).then(d=>(i.delete(e),t.set(e,d),d))):(t.set(e,l),l)}catch{return t.set(e,!1),!1}})(new Map,new WeakMap),On=typeof window>"u"?null:window,_=((i,t)=>(e,s)=>{const o=e.createAnalyser();if(Ae(o,s),!(s.maxDecibels>s.minDecibels))throw t();return Wt(o,s,"fftSize"),Wt(o,s,"maxDecibels"),Wt(o,s,"minDecibels"),Wt(o,s,"smoothingTimeConstant"),i(Ja,()=>Ja(o))||(i=>{i.getFloatTimeDomainData=t=>{const e=new Uint8Array(t.length);i.getByteTimeDomainData(e);const s=Math.max(e.length,i.fftSize);for(let o=0;o<s;o+=1)t[o]=.0078125*(e[o]-128);return t}})(o),o})(Pe,Me),Os=(i=>t=>{const e=i(t);if(null===e.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return e.renderer})(Ce),be=((i,t,e)=>function(){var s=at(function*(o,c,l){const d=i(o);yield Promise.all(d.activeInputs.map((f,p)=>Array.from(f).map(function(){var g=at(function*([y,x]){const w=yield t(y).render(y,c),S=o.context.destination;!e(y)&&(o!==S||!e(o))&&w.connect(l,x,p)});return function(y){return g.apply(this,arguments)}}())).reduce((f,p)=>[...f,...p],[]))});return function(o,c,l){return s.apply(this,arguments)}}())(Ce,Os,Qs),Mn=((i,t,e)=>()=>{const s=new WeakMap,o=function(){var c=at(function*(l,d){let f=t(l);return Jt(f,d)||(f=i(d,{channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,fftSize:f.fftSize,maxDecibels:f.maxDecibels,minDecibels:f.minDecibels,smoothingTimeConstant:f.smoothingTimeConstant})),s.set(d,f),yield e(l,d,f),f});return function(d,f){return c.apply(this,arguments)}}();return{render(c,l){const d=s.get(l);return void 0!==d?Promise.resolve(d):o(c,l)}}})(_,ne,be),nt=(i=>t=>{const e=i.get(t);if(void 0===e)throw xe();return e})(gs),Ne=(i=>null===i?null:i.hasOwnProperty("OfflineAudioContext")?i.OfflineAudioContext:i.hasOwnProperty("webkitOfflineAudioContext")?i.webkitOfflineAudioContext:null)(On),Yt=(i=>t=>null!==i&&t instanceof i)(Ne),Jl=new WeakMap,Ms=(i=>class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(e,s,o){if(null!==s){let c=this._listeners.get(s);void 0===c&&(c=i(this,s),"function"==typeof s&&this._listeners.set(s,c)),this._nativeEventTarget.addEventListener(e,c,o)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,s,o){const c=null===s?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(e,void 0===c?null:c,o)}})(ki),_s=(i=>null===i?null:i.hasOwnProperty("AudioContext")?i.AudioContext:i.hasOwnProperty("webkitAudioContext")?i.webkitAudioContext:null)(On),cc=(i=>t=>null!==i&&t instanceof i)(_s),uc=(i=>t=>null!==i&&"function"==typeof i.AudioNode&&t instanceof i.AudioNode)(On),Kl=(i=>t=>null!==i&&"function"==typeof i.AudioParam&&t instanceof i.AudioParam)(On),Ni=(i=>null===i?null:i.hasOwnProperty("AudioWorkletNode")?i.AudioWorkletNode:null)(On),zt=((i,t,e,s,o,c,l,d,f,p,g,y,x,A,w,S)=>class extends p{constructor(D,I,B,z){super(B),this._context=D,this._nativeAudioNode=B;const M=g(D);y(M)&&!0!==e(al,()=>al(M,S))&&(i=>{const t=new Map;var e;i.connect=(e=i.connect.bind(i),(s,o=0,c=0)=>{const l=so(s)?e(s,o,c):e(s,o),d=t.get(s);return void 0===d?t.set(s,[{input:c,output:o}]):d.every(f=>f.input!==c||f.output!==o)&&d.push({input:c,output:o}),l}),i.disconnect=(e=>(s,o,c)=>{if(e.apply(i),void 0===s)t.clear();else if("number"==typeof s)for(const[l,d]of t){const f=d.filter(p=>p.output!==s);0===f.length?t.delete(l):t.set(l,f)}else if(t.has(s))if(void 0===o)t.delete(s);else{const l=t.get(s);if(void 0!==l){const d=l.filter(f=>f.output!==o&&(f.input!==c||void 0===c));0===d.length?t.delete(s):t.set(s,d)}}for(const[l,d]of t)d.forEach(f=>{so(l)?i.connect(l,f.output,f.input):i.connect(l,f.output)})})(i.disconnect)})(B),ts.set(this,B),ve.set(this,new Set),"closed"!==D.state&&I&&Z(this),i(this,z,B)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(D){this._nativeAudioNode.channelCount=D}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(D){this._nativeAudioNode.channelCountMode=D}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(D){this._nativeAudioNode.channelInterpretation=D}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(D,I=0,B=0){if(I<0||I>=this._nativeAudioNode.numberOfOutputs)throw o();const z=g(this._context),M=w(z);if(x(D)||A(D))throw c();if(Ai(D)){const N=ne(D);try{const U=tr(this._nativeAudioNode,N,I,B),Q=Si(this);(M||Q)&&this._nativeAudioNode.disconnect(...U),"closed"!==this.context.state&&!Q&&Si(D)&&Z(D)}catch(U){throw 12===U.code?c():U}if(t(this,D,I,B,M)){const U=f([this],D);sr(U,s(M))}return D}const P=nr(D);if("playbackRate"===P.name&&1024===P.maxValue)throw l();try{this._nativeAudioNode.connect(P,I),(M||Si(this))&&this._nativeAudioNode.disconnect(P,I)}catch(N){throw 12===N.code?c():N}if(((i,t,e,s)=>{const{activeInputs:o,passiveInputs:c}=ss(t),{outputs:l}=Ce(i),d=ht(i),f=p=>{const g=ne(i),y=nr(t);if(p){const x=ol(c,i,e);nl(o,i,x,!1),!s&&!Qs(i)&&g.connect(y,e)}else{const x=((i,t,e)=>qt(i,s=>s[0]===t&&s[1]===e))(o,i,e);sl(c,x,!1),!s&&!Qs(i)&&g.disconnect(y,e)}};return!!Hs(l,[t,e],p=>p[0]===t&&p[1]===e,!0)&&(d.add(f),ie(i)?nl(o,i,[e,f],!0):sl(c,[i,e,f],!0),!0)})(this,D,I,M)){const N=f([this],D);sr(N,s(M))}}disconnect(D,I,B){let z;const M=g(this._context),P=w(M);if(void 0===D)z=((i,t)=>{const e=Ce(i),s=[];for(const o of e.outputs)Zs(o)?Ba(i,t,...o):Ga(i,t,...o),s.push(o[0]);return e.outputs.clear(),s})(this,P);else if("number"==typeof D){if(D<0||D>=this.numberOfOutputs)throw o();z=((i,t,e)=>{const s=Ce(i),o=[];for(const c of s.outputs)c[1]===e&&(Zs(c)?Ba(i,t,...c):Ga(i,t,...c),o.push(c[0]),s.outputs.delete(c));return o})(this,P,D)}else{if(void 0!==I&&(I<0||I>=this.numberOfOutputs)||Ai(D)&&void 0!==B&&(B<0||B>=D.numberOfInputs))throw o();if(z=((i,t,e,s,o)=>{const c=Ce(i);return Array.from(c.outputs).filter(l=>!(l[0]!==e||void 0!==s&&l[1]!==s||void 0!==o&&l[2]!==o)).map(l=>(Zs(l)?Ba(i,t,...l):Ga(i,t,...l),c.outputs.delete(l),l[0]))})(this,P,D,I,B),0===z.length)throw c()}for(const R of z){const N=f([this],R);sr(N,d)}}})((i=>(t,e,s)=>{const o=[];for(let c=0;c<s.numberOfInputs;c+=1)o.push(new Set);i.set(t,{activeInputs:o,outputs:new Set,passiveInputs:new WeakMap,renderer:e})})(Re),((i,t,e,s,o,c,l,d,f,p,g,y,x)=>{const A=new WeakMap;return(w,S,F,D,I)=>{const{activeInputs:B,passiveInputs:z}=c(S),{outputs:M}=c(w),P=d(w),R=N=>{const j=f(S),U=f(w);if(N){const Q=K(z,w,F,D);i(B,w,Q,!1),!I&&!y(w)&&e(U,j,F,D),x(S)&&Z(S)}else{const Q=s(B,w,F,D);t(z,D,Q,!1),!I&&!y(w)&&o(U,j,F,D);const G=l(S);if(0===G)g(S)&&At(S,B);else{const et=A.get(S);void 0!==et&&clearTimeout(et),A.set(S,setTimeout(()=>{g(S)&&At(S,B)},1e3*G))}}};return!!p(M,[S,F,D],N=>N[0]===S&&N[1]===F&&N[2]===D,!0)&&(P.add(R),g(w)?i(B,w,[F,D,R],!0):t(z,D,[w,F,R],!0),!0)}})(Xf,Jf,tr,Kf,er,Ce,Ao,ht,ne,Hs,ie,Qs,Si),Pe,((i,t,e,s,o,c)=>l=>(d,f)=>{const p=i.get(d);if(void 0===p){if(!l&&c(d)){const g=s(d),{outputs:y}=e(d);for(const x of y)if(Zs(x)){const A=s(x[0]);t(g,A,x[1],x[2])}else{const A=o(x[0]);g.disconnect(A,x[1])}}i.set(d,f)}else i.set(d,p+f)})(Gn,er,Ce,ne,nr,ie),Me,or,Xt,((i,t,e,s,o,c,l,d)=>(f,p)=>{const g=t.get(f);if(void 0===g)throw new Error("Missing the expected cycle count.");const y=c(f.context),x=d(y);if(g===p){if(t.delete(f),!x&&l(f)){const A=s(f),{outputs:w}=e(f);for(const S of w)if(Zs(S)){const F=s(S[0]);i(A,F,S[1],S[2])}else{const F=o(S[0]);A.connect(F,S[1])}}}else t.set(f,g-p)})(tr,Gn,Ce,ne,nr,nt,ie,Yt),((i,t,e)=>function s(o,c){const l=Ai(c)?c:e(i,c);if((i=>"delayTime"in i)(l))return[];if(o[0]===l)return[o];if(o.includes(l))return[];const{outputs:d}=t(l);return Array.from(d).map(f=>s([...o,l],f[0])).reduce((f,p)=>f.concat(p),[])})(Jl,Ce,rn),Ms,nt,cc,uc,Kl,Yt,Ni),tp=((i,t,e,s,o,c)=>class extends i{constructor(d,f){const p=o(d),g={...Cs,...f},y=s(p,g);super(d,!1,y,c(p)?t():null),this._nativeAnalyserNode=y}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(d){this._nativeAnalyserNode.fftSize=d}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(d){const f=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=d,!(d>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=f,e()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(d){const f=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=d,!(this._nativeAnalyserNode.maxDecibels>d))throw this._nativeAnalyserNode.minDecibels=f,e()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(d){this._nativeAnalyserNode.smoothingTimeConstant=d}getByteFrequencyData(d){this._nativeAnalyserNode.getByteFrequencyData(d)}getByteTimeDomainData(d){this._nativeAnalyserNode.getByteTimeDomainData(d)}getFloatFrequencyData(d){this._nativeAnalyserNode.getFloatFrequencyData(d)}getFloatTimeDomainData(d){this._nativeAnalyserNode.getFloatTimeDomainData(d)}})(zt,Mn,Me,_,nt,Yt),lc=new WeakSet,th=(i=>null===i?null:i.hasOwnProperty("AudioBuffer")?i.AudioBuffer:null)(On),eh=(i=>t=>(i[0]=t,i[0]))(new Uint32Array(1)),hc=((i,t)=>e=>{e.copyFromChannel=(s,o,c=0)=>{const l=i(c),d=i(o);if(d>=e.numberOfChannels)throw t();const f=e.length,p=e.getChannelData(d),g=s.length;for(let y=l<0?-l:0;y+l<f&&y<g;y+=1)s[y]=p[y+l]},e.copyToChannel=(s,o,c=0)=>{const l=i(c),d=i(o);if(d>=e.numberOfChannels)throw t();const f=e.length,p=e.getChannelData(d),g=s.length;for(let y=l<0?-l:0;y+l<f&&y<g;y+=1)p[y+l]=s[y]}})(eh,Me),Zn=(i=>t=>{var e;t.copyFromChannel=(e=t.copyFromChannel,(s,o,c=0)=>{const l=i(c),d=i(o);if(l<t.length)return e.call(t,s,d,l)}),t.copyToChannel=(e=>(s,o,c=0)=>{const l=i(c),d=i(o);if(l<t.length)return e.call(t,s,d,l)})(t.copyToChannel)})(eh),ep=((i,t,e,s,o,c,l,d)=>{let f=null;return class Em{constructor(g){if(null===o)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:y,numberOfChannels:x,sampleRate:A}={...Qi,...g};null===f&&(f=new o(1,1,44100));const w=null!==s&&t(c,c)?new s({length:y,numberOfChannels:x,sampleRate:A}):f.createBuffer(x,y,A);if(0===w.numberOfChannels)throw e();return"function"!=typeof w.copyFromChannel?(l(w),fn(w)):t(ms,()=>ms(w))||d(w),i.add(w),w}static[Symbol.hasInstance](g){return null!==g&&"object"==typeof g&&Object.getPrototypeOf(g)===Em.prototype||i.has(g)}}})(lc,Pe,Xt,th,Ne,(i=>()=>{if(null===i)return!1;try{new i({length:1,sampleRate:44100})}catch{return!1}return!0})(th),hc,Zn),So=(i=>(t,e)=>{const s=i(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(s).connect(t.destination);const o=()=>{e.removeEventListener("ended",o),e.disconnect(s),s.disconnect()};e.addEventListener("ended",o)})(on),nh=((i,t,e)=>function(){var s=at(function*(o,c,l){const d=t(o);yield Promise.all(Array.from(d.activeInputs).map(function(){var f=at(function*([p,g]){const x=yield i(p).render(p,c);e(p)||x.connect(l,g)});return function(p){return f.apply(this,arguments)}}()))});return function(o,c,l){return s.apply(this,arguments)}}())(Os,ss,Qs),is=(i=>(t,e,s)=>i(e,t,s))(nh),Fi=((i,t,e,s,o,c,l,d,f,p,g)=>(y,x)=>{const A=y.createBufferSource();return Ae(A,x),ue(A,x,"playbackRate"),Wt(A,x,"buffer"),Wt(A,x,"loop"),Wt(A,x,"loopEnd"),Wt(A,x,"loopStart"),t(e,()=>e(y))||(i=>{i.start=(t=>{let e=!1;return(s=0,o=0,c)=>{if(e)throw xe();t.call(i,s,o,c),e=!0}})(i.start)})(A),t(s,()=>s(y))||(i=>{var t;i.start=(t=i.start,(e=0,s=0,o)=>{const c=i.buffer,l=null===c?s:Math.min(c.duration,s);null!==c&&l>c.duration-.5/i.context.sampleRate?t.call(i,e,0,0):t.call(i,e,l,o)})})(A),t(o,()=>o(y))||p(A,y),t(c,()=>c(y))||cr(A),t(l,()=>l(y))||g(A,y),t(d,()=>d(y))||ur(A),i(y,A),A})(So,Pe,i=>{const t=i.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},i=>{const t=i.createBufferSource(),e=i.createBuffer(1,1,44100);t.buffer=e;try{t.start(0,1)}catch{return!1}return!0},i=>{const t=i.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},gr,Ks,ti,0,(i=>(t,e)=>{const s=e.createBuffer(1,1,44100);null===t.buffer&&(t.buffer=s),i(t,"buffer",o=>()=>{const c=o.call(t);return c===s?null:c},o=>c=>o.call(t,null===c?s:c))})(le),ei),je=((i,t)=>(e,s,o)=>(i(s).replay(o),t(s,e,o)))((i=>t=>{const e=i(t);if(null===e.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return e.renderer})(ss),nh),np=((i,t,e,s,o)=>()=>{const c=new WeakMap;let l=null,d=null;const f=function(){var p=at(function*(g,y){let x=e(g);const A=Jt(x,y);return A||(x=t(y,{buffer:x.buffer,channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation,loop:x.loop,loopEnd:x.loopEnd,loopStart:x.loopStart,playbackRate:x.playbackRate.value}),null!==l&&x.start(...l),null!==d&&x.stop(d)),c.set(y,x),A?yield i(y,g.playbackRate,x.playbackRate):yield s(y,g.playbackRate,x.playbackRate),yield o(g,y,x),x});return function(y,x){return p.apply(this,arguments)}}();return{set start(p){l=p},set stop(p){d=p},render(p,g){const y=c.get(g);return void 0!==y?Promise.resolve(y):f(p,g)}}})(is,Fi,ne,je,be),Hn=((i,t,e,s,o,c,l,d,f,p,g,y,x)=>(A,w,S,F=null,D=null)=>{const I=S.value,B=new Oe.AutomationEventList(I),z=w?(i=>({replay(t){for(const e of i)if("exponentialRampToValue"===e.type){const{endTime:s,value:o}=e;t.exponentialRampToValueAtTime(o,s)}else if("linearRampToValue"===e.type){const{endTime:s,value:o}=e;t.linearRampToValueAtTime(o,s)}else if("setTarget"===e.type){const{startTime:s,target:o,timeConstant:c}=e;t.setTargetAtTime(o,s,c)}else if("setValue"===e.type){const{startTime:s,value:o}=e;t.setValueAtTime(o,s)}else{if("setValueCurve"!==e.type)throw new Error("Can't apply an unknown automation.");{const{duration:s,startTime:o,values:c}=e;t.setValueCurveAtTime(c,o,s)}}}}))(B):null,M={get defaultValue(){return I},get maxValue(){return null===F?S.maxValue:F},get minValue(){return null===D?S.minValue:D},get value(){return S.value},set value(P){S.value=P,M.setValueAtTime(P,A.context.currentTime)},cancelAndHoldAtTime(P){if("function"==typeof S.cancelAndHoldAtTime)null===z&&B.flush(A.context.currentTime),B.add(o(P)),S.cancelAndHoldAtTime(P);else{const R=Array.from(B).pop();null===z&&B.flush(A.context.currentTime),B.add(o(P));const N=Array.from(B).pop();S.cancelScheduledValues(P),R!==N&&void 0!==N&&("exponentialRampToValue"===N.type?S.exponentialRampToValueAtTime(N.value,N.endTime):"linearRampToValue"===N.type?S.linearRampToValueAtTime(N.value,N.endTime):"setValue"===N.type?S.setValueAtTime(N.value,N.startTime):"setValueCurve"===N.type&&S.setValueCurveAtTime(N.values,N.startTime,N.duration))}return M},cancelScheduledValues:P=>(null===z&&B.flush(A.context.currentTime),B.add(c(P)),S.cancelScheduledValues(P),M),exponentialRampToValueAtTime(P,R){if(0===P)throw new RangeError;if(!Number.isFinite(R)||R<0)throw new RangeError;const N=A.context.currentTime;return null===z&&B.flush(N),0===Array.from(B).length&&(B.add(p(I,N)),S.setValueAtTime(I,N)),B.add(l(P,R)),S.exponentialRampToValueAtTime(P,R),M},linearRampToValueAtTime(P,R){const N=A.context.currentTime;return null===z&&B.flush(N),0===Array.from(B).length&&(B.add(p(I,N)),S.setValueAtTime(I,N)),B.add(d(P,R)),S.linearRampToValueAtTime(P,R),M},setTargetAtTime:(P,R,N)=>(null===z&&B.flush(A.context.currentTime),B.add(f(P,R,N)),S.setTargetAtTime(P,R,N),M),setValueAtTime:(P,R)=>(null===z&&B.flush(A.context.currentTime),B.add(p(P,R)),S.setValueAtTime(P,R),M),setValueCurveAtTime(P,R,N){const j=P instanceof Float32Array?P:new Float32Array(P);if(null!==y&&"webkitAudioContext"===y.name){const U=R+N,Q=A.context.sampleRate,G=Math.ceil(R*Q),et=Math.floor(U*Q),ot=et-G,rt=new Float32Array(ot);for(let lt=0;lt<ot;lt+=1){const xt=(j.length-1)/N*((G+lt)/Q-R),yt=Math.floor(xt),Ot=Math.ceil(xt);rt[lt]=yt===Ot?j[yt]:(1-(xt-yt))*j[yt]+(1-(Ot-xt))*j[Ot]}null===z&&B.flush(A.context.currentTime),B.add(g(rt,R,N)),S.setValueCurveAtTime(rt,R,N);const it=et/Q;it<U&&x(M,rt[rt.length-1],it),x(M,j[j.length-1],U)}else null===z&&B.flush(A.context.currentTime),B.add(g(j,R,N)),S.setValueCurveAtTime(j,R,N);return M}};return e.set(M,S),t.set(M,A),i(M,z),M})((i=>(t,e)=>{i.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})})(Ue),Jl,dn,0,Oe.createCancelAndHoldAutomationEvent,Oe.createCancelScheduledValuesAutomationEvent,Oe.createExponentialRampToValueAutomationEvent,Oe.createLinearRampToValueAutomationEvent,Oe.createSetTargetAutomationEvent,Oe.createSetValueAutomationEvent,Oe.createSetValueCurveAutomationEvent,_s,oc),Yn=((i,t,e,s,o,c,l,d)=>class extends i{constructor(p,g){const y=c(p),x={...el,...g},A=o(y,x),w=l(y),S=w?t():null;super(p,!1,A,S),this._audioBufferSourceNodeRenderer=S,this._isBufferNullified=!1,this._isBufferSet=null!==x.buffer,this._nativeAudioBufferSourceNode=A,this._onended=null,this._playbackRate=e(this,w,A.playbackRate,ke,ce)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(p){if(this._nativeAudioBufferSourceNode.buffer=p,null!==p){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(p){this._nativeAudioBufferSourceNode.loop=p}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(p){this._nativeAudioBufferSourceNode.loopEnd=p}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(p){this._nativeAudioBufferSourceNode.loopStart=p}get onended(){return this._onended}set onended(p){const g="function"==typeof p?d(this,p):null;this._nativeAudioBufferSourceNode.onended=g;const y=this._nativeAudioBufferSourceNode.onended;this._onended=null!==y&&y===g?p:y}get playbackRate(){return this._playbackRate}start(p=0,g=0,y){if(this._nativeAudioBufferSourceNode.start(p,g,y),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===y?[p,g]:[p,g,y]),"closed"!==this.context.state){Z(this);const x=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",x),ie(this)&&ct(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",x)}}stop(p=0){this._nativeAudioBufferSourceNode.stop(p),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=p)}})(zt,np,Hn,xe,Fi,nt,Yt,ki),sp=((i,t,e,s,o,c,l,d)=>class extends i{constructor(p,g){const y=c(p),x=l(y),A=o(y,g,x);super(p,!1,A,x?t(d):null),this._isNodeOfNativeOfflineAudioContext=x,this._nativeAudioDestinationNode=A}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(p){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(p>this._nativeAudioDestinationNode.maxChannelCount)throw e();this._nativeAudioDestinationNode.channelCount=p}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(p){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=p}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(zt,i=>{const t=new WeakMap,e=function(){var s=at(function*(o,c){const l=c.destination;return t.set(c,l),yield i(o,c,l),l});return function(c,l){return s.apply(this,arguments)}}();return{render(s,o){const c=t.get(o);return void 0!==c?Promise.resolve(c):e(s,o)}}},Me,xe,((i,t)=>(e,s,o)=>{const c=e.destination;if(c.channelCount!==s)try{c.channelCount=s}catch{}o&&"explicit"!==c.channelCountMode&&(c.channelCountMode="explicit"),0===c.maxChannelCount&&Object.defineProperty(c,"maxChannelCount",{value:s});const l=i(e,{channelCount:s,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:1});return t(l,"channelCount",d=>()=>d.call(l),d=>f=>{d.call(l,f);try{c.channelCount=f}catch(p){if(f>c.maxChannelCount)throw p}}),t(l,"channelCountMode",d=>()=>d.call(l),d=>f=>{d.call(l,f),c.channelCountMode=f}),t(l,"channelInterpretation",d=>()=>d.call(l),d=>f=>{d.call(l,f),c.channelInterpretation=f}),Object.defineProperty(l,"maxChannelCount",{get:()=>c.maxChannelCount}),l.connect(c),l})(on,le),nt,Yt,be),ip=((i,t,e,s,o)=>()=>{const c=new WeakMap,l=function(){var d=at(function*(f,p){let g=e(f);const y=Jt(g,p);return y||(g=t(p,{Q:g.Q.value,channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,detune:g.detune.value,frequency:g.frequency.value,gain:g.gain.value,type:g.type})),c.set(p,g),y?(yield i(p,f.Q,g.Q),yield i(p,f.detune,g.detune),yield i(p,f.frequency,g.frequency),yield i(p,f.gain,g.gain)):(yield s(p,f.Q,g.Q),yield s(p,f.detune,g.detune),yield s(p,f.frequency,g.frequency),yield s(p,f.gain,g.gain)),yield o(f,p,g),g});return function(p,g){return d.apply(this,arguments)}}();return{render(d,f){const p=c.get(f);return void 0!==p?Promise.resolve(p):l(d,f)}}})(is,Ll,ne,je,be),ni=(i=>(t,e)=>i.set(t,e))(Xl),rp=((i,t,e,s,o,c,l,d)=>class extends i{constructor(p,g){const y=c(p),x={...dl,...g},A=o(y,x),w=l(y);super(p,!1,A,w?e():null),this._Q=t(this,w,A.Q,ke,ce),this._detune=t(this,w,A.detune,1200*Math.log2(ke),-1200*Math.log2(ke)),this._frequency=t(this,w,A.frequency,p.sampleRate/2,0),this._gain=t(this,w,A.gain,40*Math.log10(ke),ce),this._nativeBiquadFilterNode=A,d(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(p){this._nativeBiquadFilterNode.type=p}getFrequencyResponse(p,g,y){try{this._nativeBiquadFilterNode.getFrequencyResponse(p,g,y)}catch(x){throw 11===x.code?s():x}if(p.length!==g.length||g.length!==y.length)throw s()}})(zt,Hn,ip,or,Ll,nt,Yt,ni),ks=((i,t)=>(e,s,o)=>{const c=new Set;return e.connect=(l=e.connect,(d,f=0,p=0)=>{const g=0===c.size;if(t(d))return l.call(e,d,f,p),i(c,[d,f,p],y=>y[0]===d&&y[1]===f&&y[2]===p,!0),g&&s(),d;l.call(e,d,f),i(c,[d,f],y=>y[0]===d&&y[1]===f,!0),g&&s()}),e.disconnect=(l=>(d,f,p)=>{const g=c.size>0;if(void 0===d)l.apply(e),c.clear();else if("number"==typeof d){l.call(e,d);for(const x of c)x[1]===d&&c.delete(x)}else{t(d)?l.call(e,d,f,p):l.call(e,d,f);for(const x of c)x[0]===d&&(void 0===f||x[1]===f)&&(void 0===p||x[2]===p)&&c.delete(x)}g&&0===c.size&&o()})(e.disconnect),e;var l})(Hs,uc),sh=((i,t)=>(e,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw i()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw i()}});const o=e.createBufferSource();t(s,()=>{const d=s.numberOfInputs;for(let f=0;f<d;f+=1)o.connect(s,0,f)},()=>o.disconnect(s))})(xe,ks),ys=((i,t)=>(e,s)=>{const o=e.createChannelMerger(s.numberOfInputs);return null!==i&&"webkitAudioContext"===i.name&&t(e,o),Ae(o,s),o})(_s,sh),op=((i,t,e)=>()=>{const s=new WeakMap,o=function(){var c=at(function*(l,d){let f=t(l);return Jt(f,d)||(f=i(d,{channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,numberOfInputs:f.numberOfInputs})),s.set(d,f),yield e(l,d,f),f});return function(d,f){return c.apply(this,arguments)}}();return{render(c,l){const d=s.get(l);return void 0!==d?Promise.resolve(d):o(c,l)}}})(ys,ne,be),ap=((i,t,e,s,o)=>class extends i{constructor(l,d){const f=s(l),p={...Xd,...d};super(l,!1,e(f,p),o(f)?t():null)}})(zt,op,ys,nt,Yt),dc=((i,t,e)=>()=>{const s=new WeakMap,o=function(){var c=at(function*(l,d){let f=t(l);return Jt(f,d)||(f=i(d,{channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,numberOfOutputs:f.numberOfOutputs})),s.set(d,f),yield e(l,d,f),f});return function(d,f){return c.apply(this,arguments)}}();return{render(c,l){const d=s.get(l);return void 0!==d?Promise.resolve(d):o(c,l)}}})(hr,ne,be),_r=((i,t,e,s,o,c)=>class extends i{constructor(d,f){const p=s(d),g=(i=>({...i,channelCount:i.numberOfOutputs}))({...gl,...f});super(d,!1,e(p,g),o(p)?t():null)}})(zt,dc,hr,nt,Yt),To=((i,t,e,s)=>(o,{offset:c,...l})=>{const d=o.createBuffer(1,2,44100),f=t(o,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),p=e(o,{...l,gain:c}),g=d.getChannelData(0);g[0]=1,g[1]=1,f.buffer=d,f.loop=!0;const y={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(w){p.channelCount=w},get channelCountMode(){return p.channelCountMode},set channelCountMode(w){p.channelCountMode=w},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(w){p.channelInterpretation=w},get context(){return p.context},get inputs(){return[]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get offset(){return p.gain},get onended(){return f.onended},set onended(w){f.onended=w},addEventListener:(...w)=>f.addEventListener(w[0],w[1],w[2]),dispatchEvent:(...w)=>f.dispatchEvent(w[0]),removeEventListener:(...w)=>f.removeEventListener(w[0],w[1],w[2]),start(w=0){f.start.call(f,w)},stop(w=0){f.stop.call(f,w)}};return i(o,f),s(Xs(y,p),()=>f.connect(p),()=>f.disconnect(p))})(So,Fi,on,ks),Ei=((i,t,e,s,o)=>(c,l)=>{if(void 0===c.createConstantSource)return e(c,l);const d=c.createConstantSource();return Ae(d,l),ue(d,l,"offset"),t(s,()=>s(c))||cr(d),t(o,()=>o(c))||ur(d),i(c,d),d})(So,Pe,To,gr,ti),ih=((i,t,e,s,o)=>()=>{const c=new WeakMap;let l=null,d=null;const f=function(){var p=at(function*(g,y){let x=e(g);const A=Jt(x,y);return A||(x=t(y,{channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation,offset:x.offset.value}),null!==l&&x.start(l),null!==d&&x.stop(d)),c.set(y,x),A?yield i(y,g.offset,x.offset):yield s(y,g.offset,x.offset),yield o(g,y,x),x});return function(y,x){return p.apply(this,arguments)}}();return{set start(p){l=p},set stop(p){d=p},render(p,g){const y=c.get(g);return void 0!==y?Promise.resolve(y):f(p,g)}}})(is,Ei,ne,je,be),cp=((i,t,e,s,o,c,l)=>class extends i{constructor(f,p){const g=o(f),y={...Kd,...p},x=s(g,y),A=c(g),w=A?e():null;super(f,!1,x,w),this._constantSourceNodeRenderer=w,this._nativeConstantSourceNode=x,this._offset=t(this,A,x.offset,ke,ce),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(f){const p="function"==typeof f?l(this,f):null;this._nativeConstantSourceNode.onended=p;const g=this._nativeConstantSourceNode.onended;this._onended=null!==g&&g===p?f:g}start(f=0){if(this._nativeConstantSourceNode.start(f),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=f),"closed"!==this.context.state){Z(this);const p=()=>{this._nativeConstantSourceNode.removeEventListener("ended",p),ie(this)&&ct(this)};this._nativeConstantSourceNode.addEventListener("ended",p)}}stop(f=0){this._nativeConstantSourceNode.stop(f),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=f)}})(zt,Hn,ih,Ei,nt,Yt,ki),rs=((i,t)=>(e,s)=>{const o=e.createConvolver();if(Ae(o,s),s.disableNormalization===o.normalize&&(o.normalize=!s.disableNormalization),Wt(o,s,"buffer"),s.channelCount>2||(t(o,"channelCount",c=>()=>c.call(o),c=>l=>{if(l>2)throw i();return c.call(o,l)}),"max"===s.channelCountMode))throw i();return t(o,"channelCountMode",c=>()=>c.call(o),c=>l=>{if("max"===l)throw i();return c.call(o,l)}),o})(Xt,le),fc=((i,t,e)=>()=>{const s=new WeakMap,o=function(){var c=at(function*(l,d){let f=t(l);return Jt(f,d)||(f=i(d,{buffer:f.buffer,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,disableNormalization:!f.normalize})),s.set(d,f),Ys(f)?yield e(l,d,f.inputs[0]):yield e(l,d,f),f});return function(d,f){return c.apply(this,arguments)}}();return{render(c,l){const d=s.get(l);return void 0!==d?Promise.resolve(d):o(c,l)}}})(rs,ne,be),si=((i,t,e,s,o,c)=>class extends i{constructor(d,f){const p=s(d),g={...tf,...f},y=e(p,g);super(d,!1,y,o(p)?t():null),this._isBufferNullified=!1,this._nativeConvolverNode=y,null!==g.buffer&&c(this,g.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(d){if(this._nativeConvolverNode.buffer=d,null===d&&null!==this._nativeConvolverNode.buffer){const f=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=f.createBuffer(1,1,f.sampleRate),this._isBufferNullified=!0,c(this,0)}else this._isBufferNullified=!1,c(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(d){this._nativeConvolverNode.normalize=d}})(zt,fc,rs,nt,Yt,ni),kn=((i,t,e,s,o)=>c=>{const l=new WeakMap,d=function(){var f=at(function*(p,g){let y=e(p);const x=Jt(y,g);return x||(y=t(g,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,delayTime:y.delayTime.value,maxDelayTime:c})),l.set(g,y),x?yield i(g,p.delayTime,y.delayTime):yield s(g,p.delayTime,y.delayTime),yield o(p,g,y),y});return function(g,y){return f.apply(this,arguments)}}();return{render(f,p){const g=l.get(p);return void 0!==g?Promise.resolve(g):d(f,p)}}})(is,Bl,ne,je,be),up=((i,t,e,s,o,c,l)=>class extends i{constructor(f,p){const g=o(f),y={...wl,...p},x=s(g,y),A=c(g);super(f,!1,x,A?e(y.maxDelayTime):null),this._delayTime=t(this,A,x.delayTime),l(this,y.maxDelayTime)}get delayTime(){return this._delayTime}})(zt,Hn,kn,Bl,nt,Yt,ni),pc=(i=>(t,e)=>{const s=t.createDynamicsCompressor();if(Ae(s,e),e.channelCount>2||"max"===e.channelCountMode)throw i();return ue(s,e,"attack"),ue(s,e,"knee"),ue(s,e,"ratio"),ue(s,e,"release"),ue(s,e,"threshold"),s})(Xt),rh=((i,t,e,s,o)=>()=>{const c=new WeakMap,l=function(){var d=at(function*(f,p){let g=e(f);const y=Jt(g,p);return y||(g=t(p,{attack:g.attack.value,channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,knee:g.knee.value,ratio:g.ratio.value,release:g.release.value,threshold:g.threshold.value})),c.set(p,g),y?(yield i(p,f.attack,g.attack),yield i(p,f.knee,g.knee),yield i(p,f.ratio,g.ratio),yield i(p,f.release,g.release),yield i(p,f.threshold,g.threshold)):(yield s(p,f.attack,g.attack),yield s(p,f.knee,g.knee),yield s(p,f.ratio,g.ratio),yield s(p,f.release,g.release),yield s(p,f.threshold,g.threshold)),yield o(f,p,g),g});return function(p,g){return d.apply(this,arguments)}}();return{render(d,f){const p=c.get(f);return void 0!==p?Promise.resolve(p):l(d,f)}}})(is,pc,ne,je,be),yr=((i,t,e,s,o,c,l,d)=>class extends i{constructor(p,g){const y=c(p),x={...af,...g},A=s(y,x),w=l(y);super(p,!1,A,w?e():null),this._attack=t(this,w,A.attack),this._knee=t(this,w,A.knee),this._nativeDynamicsCompressorNode=A,this._ratio=t(this,w,A.ratio),this._release=t(this,w,A.release),this._threshold=t(this,w,A.threshold),d(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(p){const g=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=p,p>2)throw this._nativeDynamicsCompressorNode.channelCount=g,o()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(p){const g=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=p,"max"===p)throw this._nativeDynamicsCompressorNode.channelCountMode=g,o()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(zt,Hn,rh,pc,Xt,nt,Yt,ni),Ns=((i,t,e,s,o)=>()=>{const c=new WeakMap,l=function(){var d=at(function*(f,p){let g=e(f);const y=Jt(g,p);return y||(g=t(p,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:g.gain.value})),c.set(p,g),y?yield i(p,f.gain,g.gain):yield s(p,f.gain,g.gain),yield o(f,p,g),g});return function(p,g){return d.apply(this,arguments)}}();return{render(d,f){const p=c.get(f);return void 0!==p?Promise.resolve(p):l(d,f)}}})(is,on,ne,je,be),oh=((i,t,e,s,o,c)=>class extends i{constructor(d,f){const p=o(d),g={...pf,...f},y=s(p,g),x=c(p);super(d,!1,y,x?e():null),this._gain=t(this,x,y.gain,ke,ce)}get gain(){return this._gain}})(zt,Hn,Ns,on,nt,Yt),lp=((i,t,e,s)=>(o,c,{channelCount:l,channelCountMode:d,channelInterpretation:f,feedback:p,feedforward:g})=>{const y=nc(c,o.sampleRate),x=p instanceof Float64Array?p:new Float64Array(p),A=g instanceof Float64Array?g:new Float64Array(g),w=x.length,S=A.length,F=Math.min(w,S);if(0===w||w>20)throw s();if(0===x[0])throw t();if(0===S||S>20)throw s();if(0===A[0])throw t();if(1!==x[0]){for(let N=0;N<S;N+=1)A[N]/=x[0];for(let N=1;N<w;N+=1)x[N]/=x[0]}const D=e(o,y,l,l);D.channelCount=l,D.channelCountMode=d,D.channelInterpretation=f;const B=[],z=[],M=[];for(let N=0;N<l;N+=1){B.push(0);const j=new Float32Array(32),U=new Float32Array(32);j.fill(0),U.fill(0),z.push(j),M.push(U)}D.onaudioprocess=N=>{const j=N.inputBuffer,U=N.outputBuffer,Q=j.numberOfChannels;for(let G=0;G<Q;G+=1){const et=j.getChannelData(G),ot=U.getChannelData(G);B[G]=pn(x,w,A,S,F,z[G],M[G],B[G],32,et,ot)}};const P=o.sampleRate/2;return Xs({get bufferSize(){return y},get channelCount(){return D.channelCount},set channelCount(N){D.channelCount=N},get channelCountMode(){return D.channelCountMode},set channelCountMode(N){D.channelCountMode=N},get channelInterpretation(){return D.channelInterpretation},set channelInterpretation(N){D.channelInterpretation=N},get context(){return D.context},get inputs(){return[D]},get numberOfInputs(){return D.numberOfInputs},get numberOfOutputs(){return D.numberOfOutputs},addEventListener:(...N)=>D.addEventListener(N[0],N[1],N[2]),dispatchEvent:(...N)=>D.dispatchEvent(N[0]),getFrequencyResponse(N,j,U){if(N.length!==j.length||j.length!==U.length)throw i();const Q=N.length;for(let G=0;G<Q;G+=1){const et=-Math.PI*(N[G]/P),ot=[Math.cos(et),Math.sin(et)],lt=jn(Wl(A,ot),Wl(x,ot));j[G]=Math.sqrt(lt[0]*lt[0]+lt[1]*lt[1]),U[G]=Math.atan2(lt[1],lt[0])}},removeEventListener:(...N)=>D.removeEventListener(N[0],N[1],N[2])},D)})(or,xe,Rt,Xt),ii=((i,t,e,s)=>o=>i($s,()=>$s(o))?Promise.resolve(i(s,s)).then(c=>{if(!c){const l=e(o,512,0,1);o.oncomplete=()=>{l.onaudioprocess=null,l.disconnect()},l.onaudioprocess=()=>o.currentTime,l.connect(o.destination)}return o.startRendering()}):new Promise(c=>{const l=t(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});o.oncomplete=d=>{l.disconnect(),c(d.renderedBuffer)},l.connect(o.destination),o.startRendering()}))(Pe,on,Rt,((i,t)=>()=>{if(null===t)return Promise.resolve(!1);const e=new t(1,1,44100),s=i(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(o=>{e.oncomplete=()=>{s.disconnect(),o(0!==e.currentTime)},e.startRendering()})})(on,Ne)),hp=((i,t,e,s,o)=>(c,l)=>{const d=new WeakMap;let f=null;const p=function(){var g=at(function*(y,x){let A=null,w=t(y);const S=Jt(w,x);if(void 0===x.createIIRFilter?A=i(x,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):S||(w=x.createIIRFilter(l,c)),d.set(x,null===A?w:A),null!==A){if(null===f){if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");const D=new e(y.context.destination.channelCount,y.context.length,x.sampleRate);f=at(function*(){return yield s(y,D,D.destination),((i,t,e,s)=>{const o=e instanceof Float64Array?e:new Float64Array(e),c=s instanceof Float64Array?s:new Float64Array(s),l=o.length,d=c.length,f=Math.min(l,d);if(1!==o[0]){for(let w=0;w<l;w+=1)c[w]/=o[0];for(let w=1;w<d;w+=1)o[w]/=o[0]}const g=new Float32Array(32),y=new Float32Array(32),x=t.createBuffer(i.numberOfChannels,i.length,i.sampleRate),A=i.numberOfChannels;for(let w=0;w<A;w+=1){const S=i.getChannelData(w),F=x.getChannelData(w);g.fill(0),y.fill(0),pn(o,l,c,d,f,g,y,0,32,S,F)}return x})(yield o(D),x,c,l)})()}const F=yield f;return A.buffer=F,A.start(0),A}return yield s(y,x,w),w});return function(x,A){return g.apply(this,arguments)}}();return{render(g,y){const x=d.get(y);return void 0!==x?Promise.resolve(x):p(g,y)}}})(Fi,ne,Ne,be,ii),ah=(i=>(t,e,s)=>{if(void 0===t.createIIRFilter)return i(t,e,s);const o=t.createIIRFilter(s.feedforward,s.feedback);return Ae(o,s),o})(lp),qe=((i,t,e,s,o,c)=>class extends i{constructor(d,f){const p=s(d),g=o(p),y={...Dl,...f},x=t(p,g?null:d.baseLatency,y);super(d,!1,x,g?e(y.feedback,y.feedforward):null),(i=>{var t;i.getFrequencyResponse=(t=i.getFrequencyResponse,(e,s,o)=>{if(e.length!==s.length||s.length!==o.length)throw or();return t.call(i,e,s,o)})})(x),this._nativeIIRFilterNode=x,c(this,1)}getFrequencyResponse(d,f,p){return this._nativeIIRFilterNode.getFrequencyResponse(d,f,p)}})(zt,ah,hp,nt,Yt,ni),gc=((i,t,e,s,o,c,l,d)=>(f,p)=>{const g=p.listener,{forwardX:x,forwardY:A,forwardZ:w,positionX:S,positionY:F,positionZ:D,upX:I,upY:B,upZ:z}=void 0===g.forwardX?(()=>{const M=new Float32Array(1),P=t(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),R=l(p);let N=!1,j=[0,0,-1,0,1,0],U=[0,0,0];const Q=()=>{if(N)return;N=!0;const rt=s(p,256,9,0);rt.onaudioprocess=({inputBuffer:it})=>{const lt=[c(it,M,0),c(it,M,1),c(it,M,2),c(it,M,3),c(it,M,4),c(it,M,5)];lt.some((yt,Ot)=>yt!==j[Ot])&&(g.setOrientation(...lt),j=lt);const xt=[c(it,M,6),c(it,M,7),c(it,M,8)];xt.some((yt,Ot)=>yt!==U[Ot])&&(g.setPosition(...xt),U=xt)},P.connect(rt)},G=rt=>it=>{it!==j[rt]&&(j[rt]=it,g.setOrientation(...j))},et=rt=>it=>{it!==U[rt]&&(U[rt]=it,g.setPosition(...U))},ot=(rt,it,lt)=>{const xt=e(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:it});xt.connect(P,0,rt),xt.start(),Object.defineProperty(xt.offset,"defaultValue",{get:()=>it});const yt=i({context:f},R,xt.offset,ke,ce);return d(yt,"value",Ot=>()=>Ot.call(yt),Ot=>Nt=>{try{Ot.call(yt,Nt)}catch(ae){if(9!==ae.code)throw ae}Q(),R&&lt(Nt)}),yt.cancelAndHoldAtTime=(Ot=yt.cancelAndHoldAtTime,R?()=>{throw o()}:(...Nt)=>{const ae=Ot.apply(yt,Nt);return Q(),ae}),yt.cancelScheduledValues=(Ot=>R?()=>{throw o()}:(...Nt)=>{const ae=Ot.apply(yt,Nt);return Q(),ae})(yt.cancelScheduledValues),yt.exponentialRampToValueAtTime=(Ot=>R?()=>{throw o()}:(...Nt)=>{const ae=Ot.apply(yt,Nt);return Q(),ae})(yt.exponentialRampToValueAtTime),yt.linearRampToValueAtTime=(Ot=>R?()=>{throw o()}:(...Nt)=>{const ae=Ot.apply(yt,Nt);return Q(),ae})(yt.linearRampToValueAtTime),yt.setTargetAtTime=(Ot=>R?()=>{throw o()}:(...Nt)=>{const ae=Ot.apply(yt,Nt);return Q(),ae})(yt.setTargetAtTime),yt.setValueAtTime=(Ot=>R?()=>{throw o()}:(...Nt)=>{const ae=Ot.apply(yt,Nt);return Q(),ae})(yt.setValueAtTime),yt.setValueCurveAtTime=(Ot=>R?()=>{throw o()}:(...Nt)=>{const ae=Ot.apply(yt,Nt);return Q(),ae})(yt.setValueCurveAtTime),yt;var Ot};return{forwardX:ot(0,0,G(0)),forwardY:ot(1,0,G(1)),forwardZ:ot(2,-1,G(2)),positionX:ot(6,0,et(0)),positionY:ot(7,0,et(1)),positionZ:ot(8,0,et(2)),upX:ot(3,0,G(3)),upY:ot(4,1,G(4)),upZ:ot(5,0,G(5))}})():g;return{get forwardX(){return x},get forwardY(){return A},get forwardZ(){return w},get positionX(){return S},get positionY(){return F},get positionZ(){return D},get upX(){return I},get upY(){return B},get upZ(){return z}}})(Hn,ys,Ei,Rt,Xt,Ql,Yt,le),mc=new WeakMap,Nn=((i,t,e,s,o,c)=>class extends e{constructor(d,f){super(d),this._nativeContext=d,gs.set(this,d),s(d)&&o.set(d,new Set),this._destination=new i(this,f),this._listener=t(this,d),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(d){const f="function"==typeof d?c(this,d):null;this._nativeContext.onstatechange=f;const p=this._nativeContext.onstatechange;this._onstatechange=null!==p&&p===f?d:p}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(sp,gc,Ms,Yt,mc,ki),Do=((i,t,e,s,o,c)=>(l,d)=>{const f=l.createOscillator();return Ae(f,d),ue(f,d,"detune"),ue(f,d,"frequency"),void 0!==d.periodicWave?f.setPeriodicWave(d.periodicWave):Wt(f,d,"type"),t(e,()=>e(l))||cr(f),t(s,()=>s(l))||c(f,l),t(o,()=>o(l))||ur(f),i(l,f),f})(So,Pe,gr,Ks,ti,ei),Oo=((i,t,e,s,o)=>()=>{const c=new WeakMap;let l=null,d=null,f=null;const p=function(){var g=at(function*(y,x){let A=e(y);const w=Jt(A,x);return w||(A=t(x,{channelCount:A.channelCount,channelCountMode:A.channelCountMode,channelInterpretation:A.channelInterpretation,detune:A.detune.value,frequency:A.frequency.value,periodicWave:null===l?void 0:l,type:A.type}),null!==d&&A.start(d),null!==f&&A.stop(f)),c.set(x,A),w?(yield i(x,y.detune,A.detune),yield i(x,y.frequency,A.frequency)):(yield s(x,y.detune,A.detune),yield s(x,y.frequency,A.frequency)),yield o(y,x,A),A});return function(x,A){return g.apply(this,arguments)}}();return{set periodicWave(g){l=g},set start(g){d=g},set stop(g){f=g},render(g,y){const x=c.get(y);return void 0!==x?Promise.resolve(x):p(g,y)}}})(is,Do,ne,je,be),ri=((i,t,e,s,o,c,l)=>class extends i{constructor(f,p){const g=o(f),y={...Mi,...p},x=e(g,y),A=c(g),w=A?s():null,S=f.sampleRate/2;super(f,!1,x,w),this._detune=t(this,A,x.detune,153600,-153600),this._frequency=t(this,A,x.frequency,S,-S),this._nativeOscillatorNode=x,this._onended=null,this._oscillatorNodeRenderer=w,null!==this._oscillatorNodeRenderer&&void 0!==y.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=y.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(f){const p="function"==typeof f?l(this,f):null;this._nativeOscillatorNode.onended=p;const g=this._nativeOscillatorNode.onended;this._onended=null!==g&&g===p?f:g}get type(){return this._nativeOscillatorNode.type}set type(f){this._nativeOscillatorNode.type=f,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(f){this._nativeOscillatorNode.setPeriodicWave(f),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=f)}start(f=0){if(this._nativeOscillatorNode.start(f),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=f),"closed"!==this.context.state){Z(this);const p=()=>{this._nativeOscillatorNode.removeEventListener("ended",p),ie(this)&&ct(this)};this._nativeOscillatorNode.addEventListener("ended",p)}}stop(f=0){this._nativeOscillatorNode.stop(f),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=f)}})(zt,Hn,Do,Oo,nt,Yt,ki),_c=(i=>(t,e)=>{const s=i(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),o=t.createBuffer(1,2,44100);return s.buffer=o,s.loop=!0,s.connect(e),s.start(),()=>{s.stop(),s.disconnect(e)}})(Fi),tn=((i,t,e,s,o)=>(c,{curve:l,oversample:d,...f})=>{const p=c.createWaveShaper(),g=c.createWaveShaper();Ae(p,f),Ae(g,f);const y=e(c,{...f,gain:1}),x=e(c,{...f,gain:-1}),A=e(c,{...f,gain:1}),w=e(c,{...f,gain:-1});let S=null,F=!1,D=null;const I={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(M){y.channelCount=M,x.channelCount=M,p.channelCount=M,A.channelCount=M,g.channelCount=M,w.channelCount=M},get channelCountMode(){return p.channelCountMode},set channelCountMode(M){y.channelCountMode=M,x.channelCountMode=M,p.channelCountMode=M,A.channelCountMode=M,g.channelCountMode=M,w.channelCountMode=M},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(M){y.channelInterpretation=M,x.channelInterpretation=M,p.channelInterpretation=M,A.channelInterpretation=M,g.channelInterpretation=M,w.channelInterpretation=M},get context(){return p.context},get curve(){return D},set curve(M){if(null!==M&&M.length<2)throw t();if(null===M)p.curve=M,g.curve=M;else{const P=M.length,R=new Float32Array(P+2-P%2),N=new Float32Array(P+2-P%2);R[0]=M[0],N[0]=-M[P-1];const j=Math.ceil((P+1)/2),U=(P+1)/2-1;for(let Q=1;Q<j;Q+=1){const G=Q/j*U,et=Math.floor(G),ot=Math.ceil(G);R[Q]=et===ot?M[et]:(1-(G-et))*M[et]+(1-(ot-G))*M[ot],N[Q]=et===ot?-M[P-1-et]:-(1-(G-et))*M[P-1-et]-(1-(ot-G))*M[P-1-ot]}R[j]=P%2==1?M[j-1]:(M[j-2]+M[j-1])/2,p.curve=R,g.curve=N}D=M,F&&(s(D)&&null===S?S=i(c,y):null!==S&&(S(),S=null))},get inputs(){return[y]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get oversample(){return p.oversample},set oversample(M){p.oversample=M,g.oversample=M},addEventListener:(...M)=>y.addEventListener(M[0],M[1],M[2]),dispatchEvent:(...M)=>y.dispatchEvent(M[0]),removeEventListener:(...M)=>y.removeEventListener(M[0],M[1],M[2])};return null!==l&&(I.curve=l instanceof Float32Array?l:new Float32Array(l)),d!==I.oversample&&(I.oversample=d),o(Xs(I,A),()=>{y.connect(p).connect(A),y.connect(x).connect(g).connect(w).connect(A),F=!0,s(D)&&(S=i(c,y))},()=>{y.disconnect(p),p.disconnect(A),y.disconnect(x),x.disconnect(g),g.disconnect(w),w.disconnect(A),F=!1,null!==S&&(S(),S=null)})})(_c,xe,on,$l,ks),Ri=((i,t,e,s,o,c,l)=>(d,f)=>{const p=d.createWaveShaper();if(null!==c&&"webkitAudioContext"===c.name&&void 0===d.createGain().gain.automationRate)return e(d,f);Ae(p,f);const g=null===f.curve||f.curve instanceof Float32Array?f.curve:new Float32Array(f.curve);if(null!==g&&g.length<2)throw t();Wt(p,{curve:g},"curve"),Wt(p,f,"oversample");let y=null,x=!1;return l(p,"curve",S=>()=>S.call(p),S=>F=>(S.call(p,F),x&&(s(F)&&null===y?y=i(d,p):!s(F)&&null!==y&&(y(),y=null)),F)),o(p,()=>{x=!0,s(p.curve)&&(y=i(d,p))},()=>{x=!1,null!==y&&(y(),y=null)})})(_c,xe,tn,$l,ks,_s,le),dp=((i,t,e,s,o,c,l,d,f,p)=>(g,{coneInnerAngle:y,coneOuterAngle:x,coneOuterGain:A,distanceModel:w,maxDistance:S,orientationX:F,orientationY:D,orientationZ:I,panningModel:B,positionX:z,positionY:M,positionZ:P,refDistance:R,rolloffFactor:N,...j})=>{const U=g.createPanner();if(j.channelCount>2||"max"===j.channelCountMode)throw l();Ae(U,j);const Q={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},G=e(g,{...Q,channelInterpretation:"speakers",numberOfInputs:6}),et=s(g,{...j,gain:1}),ot=s(g,{...Q,gain:1}),rt=s(g,{...Q,gain:0}),it=s(g,{...Q,gain:0}),lt=s(g,{...Q,gain:0}),xt=s(g,{...Q,gain:0}),yt=s(g,{...Q,gain:0}),Ot=o(g,256,6,1),Nt=c(g,{...Q,curve:new Float32Array([1,1]),oversample:"none"});let ae=[F,D,I],Be=[z,M,P];const Sn=new Float32Array(1);Ot.onaudioprocess=({inputBuffer:X})=>{const Ge=[f(X,Sn,0),f(X,Sn,1),f(X,Sn,2)];Ge.some((Ea,Ra)=>Ea!==ae[Ra])&&(U.setOrientation(...Ge),ae=Ge);const Ws=[f(X,Sn,3),f(X,Sn,4),f(X,Sn,5)];Ws.some((Ea,Ra)=>Ea!==Be[Ra])&&(U.setPosition(...Ws),Be=Ws)},Object.defineProperty(rt.gain,"defaultValue",{get:()=>0}),Object.defineProperty(it.gain,"defaultValue",{get:()=>0}),Object.defineProperty(lt.gain,"defaultValue",{get:()=>0}),Object.defineProperty(xt.gain,"defaultValue",{get:()=>0}),Object.defineProperty(yt.gain,"defaultValue",{get:()=>0});const It={get bufferSize(){},get channelCount(){return U.channelCount},set channelCount(X){if(X>2)throw l();et.channelCount=X,U.channelCount=X},get channelCountMode(){return U.channelCountMode},set channelCountMode(X){if("max"===X)throw l();et.channelCountMode=X,U.channelCountMode=X},get channelInterpretation(){return U.channelInterpretation},set channelInterpretation(X){et.channelInterpretation=X,U.channelInterpretation=X},get coneInnerAngle(){return U.coneInnerAngle},set coneInnerAngle(X){U.coneInnerAngle=X},get coneOuterAngle(){return U.coneOuterAngle},set coneOuterAngle(X){U.coneOuterAngle=X},get coneOuterGain(){return U.coneOuterGain},set coneOuterGain(X){if(X<0||X>1)throw t();U.coneOuterGain=X},get context(){return U.context},get distanceModel(){return U.distanceModel},set distanceModel(X){U.distanceModel=X},get inputs(){return[et]},get maxDistance(){return U.maxDistance},set maxDistance(X){if(X<0)throw new RangeError;U.maxDistance=X},get numberOfInputs(){return U.numberOfInputs},get numberOfOutputs(){return U.numberOfOutputs},get orientationX(){return ot.gain},get orientationY(){return rt.gain},get orientationZ(){return it.gain},get panningModel(){return U.panningModel},set panningModel(X){U.panningModel=X},get positionX(){return lt.gain},get positionY(){return xt.gain},get positionZ(){return yt.gain},get refDistance(){return U.refDistance},set refDistance(X){if(X<0)throw new RangeError;U.refDistance=X},get rolloffFactor(){return U.rolloffFactor},set rolloffFactor(X){if(X<0)throw new RangeError;U.rolloffFactor=X},addEventListener:(...X)=>et.addEventListener(X[0],X[1],X[2]),dispatchEvent:(...X)=>et.dispatchEvent(X[0]),removeEventListener:(...X)=>et.removeEventListener(X[0],X[1],X[2])};return y!==It.coneInnerAngle&&(It.coneInnerAngle=y),x!==It.coneOuterAngle&&(It.coneOuterAngle=x),A!==It.coneOuterGain&&(It.coneOuterGain=A),w!==It.distanceModel&&(It.distanceModel=w),S!==It.maxDistance&&(It.maxDistance=S),F!==It.orientationX.value&&(It.orientationX.value=F),D!==It.orientationY.value&&(It.orientationY.value=D),I!==It.orientationZ.value&&(It.orientationZ.value=I),B!==It.panningModel&&(It.panningModel=B),z!==It.positionX.value&&(It.positionX.value=z),M!==It.positionY.value&&(It.positionY.value=M),P!==It.positionZ.value&&(It.positionZ.value=P),R!==It.refDistance&&(It.refDistance=R),N!==It.rolloffFactor&&(It.rolloffFactor=N),(1!==ae[0]||0!==ae[1]||0!==ae[2])&&U.setOrientation(...ae),(0!==Be[0]||0!==Be[1]||0!==Be[2])&&U.setPosition(...Be),p(Xs(It,U),()=>{et.connect(U),i(et,Nt,0,0),Nt.connect(ot).connect(G,0,0),Nt.connect(rt).connect(G,0,1),Nt.connect(it).connect(G,0,2),Nt.connect(lt).connect(G,0,3),Nt.connect(xt).connect(G,0,4),Nt.connect(yt).connect(G,0,5),G.connect(Ot).connect(g.destination)},()=>{et.disconnect(U),d(et,Nt,0,0),Nt.disconnect(ot),ot.disconnect(G),Nt.disconnect(rt),rt.disconnect(G),Nt.disconnect(it),it.disconnect(G),Nt.disconnect(lt),lt.disconnect(G),Nt.disconnect(xt),xt.disconnect(G),Nt.disconnect(yt),yt.disconnect(G),G.disconnect(Ot),Ot.disconnect(g.destination)})})(tr,xe,ys,on,Rt,Ri,Xt,er,Ql,ks),ch=(i=>(t,e)=>{const s=t.createPanner();return void 0===s.orientationX?i(t,e):(Ae(s,e),ue(s,e,"orientationX"),ue(s,e,"orientationY"),ue(s,e,"orientationZ"),ue(s,e,"positionX"),ue(s,e,"positionY"),ue(s,e,"positionZ"),Wt(s,e,"coneInnerAngle"),Wt(s,e,"coneOuterAngle"),Wt(s,e,"coneOuterGain"),Wt(s,e,"distanceModel"),Wt(s,e,"maxDistance"),Wt(s,e,"panningModel"),Wt(s,e,"refDistance"),Wt(s,e,"rolloffFactor"),s)})(dp),fp=((i,t,e,s,o,c,l,d,f,p)=>()=>{const g=new WeakMap;let y=null;const x=function(){var A=at(function*(w,S){let F=null,D=c(w);const I={channelCount:D.channelCount,channelCountMode:D.channelCountMode,channelInterpretation:D.channelInterpretation},B={...I,coneInnerAngle:D.coneInnerAngle,coneOuterAngle:D.coneOuterAngle,coneOuterGain:D.coneOuterGain,distanceModel:D.distanceModel,maxDistance:D.maxDistance,panningModel:D.panningModel,refDistance:D.refDistance,rolloffFactor:D.rolloffFactor},z=Jt(D,S);if("bufferSize"in D)F=s(S,{...I,gain:1});else if(!z){const M={...B,orientationX:D.orientationX.value,orientationY:D.orientationY.value,orientationZ:D.orientationZ.value,positionX:D.positionX.value,positionY:D.positionY.value,positionZ:D.positionZ.value};D=o(S,M)}if(g.set(S,null===F?D:F),null!==F){if(null===y){if(null===l)throw new Error("Missing the native OfflineAudioContext constructor.");const G=new l(6,w.context.length,S.sampleRate),et=t(G,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});et.connect(G.destination),y=at(function*(){const ot=yield Promise.all([w.orientationX,w.orientationY,w.orientationZ,w.positionX,w.positionY,w.positionZ].map(function(){var rt=at(function*(it,lt){const xt=e(G,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===lt?1:0});return yield d(G,it,xt.offset),xt});return function(it,lt){return rt.apply(this,arguments)}}()));for(let rt=0;rt<6;rt+=1)ot[rt].connect(et,0,rt),ot[rt].start(0);return p(G)})()}const M=yield y,P=s(S,{...I,gain:1});yield f(w,S,P);const R=[];for(let G=0;G<M.numberOfChannels;G+=1)R.push(M.getChannelData(G));let N=[R[0][0],R[1][0],R[2][0]],j=[R[3][0],R[4][0],R[5][0]],U=s(S,{...I,gain:1}),Q=o(S,{...B,orientationX:N[0],orientationY:N[1],orientationZ:N[2],positionX:j[0],positionY:j[1],positionZ:j[2]});P.connect(U).connect(Q.inputs[0]),Q.connect(F);for(let G=128;G<M.length;G+=128){const et=[R[0][G],R[1][G],R[2][G]],ot=[R[3][G],R[4][G],R[5][G]];if(et.some((rt,it)=>rt!==N[it])||ot.some((rt,it)=>rt!==j[it])){N=et,j=ot;const rt=G/S.sampleRate;U.gain.setValueAtTime(0,rt),U=s(S,{...I,gain:0}),Q=o(S,{...B,orientationX:N[0],orientationY:N[1],orientationZ:N[2],positionX:j[0],positionY:j[1],positionZ:j[2]}),U.gain.setValueAtTime(1,rt),P.connect(U).connect(Q.inputs[0]),Q.connect(F)}}return F}return z?(yield i(S,w.orientationX,D.orientationX),yield i(S,w.orientationY,D.orientationY),yield i(S,w.orientationZ,D.orientationZ),yield i(S,w.positionX,D.positionX),yield i(S,w.positionY,D.positionY),yield i(S,w.positionZ,D.positionZ)):(yield d(S,w.orientationX,D.orientationX),yield d(S,w.orientationY,D.orientationY),yield d(S,w.orientationZ,D.orientationZ),yield d(S,w.positionX,D.positionX),yield d(S,w.positionY,D.positionY),yield d(S,w.positionZ,D.positionZ)),Ys(D)?yield f(w,S,D.inputs[0]):yield f(w,S,D),D});return function(S,F){return A.apply(this,arguments)}}();return{render(A,w){const S=g.get(w);return void 0!==S?Promise.resolve(S):x(A,w)}}})(is,ys,Ei,on,ch,ne,Ne,je,be,ii),yc=((i,t,e,s,o,c,l)=>class extends i{constructor(f,p){const g=o(f),y={...Ut,...p},x=e(g,y),A=c(g);super(f,!1,x,A?s():null),this._nativePannerNode=x,this._orientationX=t(this,A,x.orientationX,ke,ce),this._orientationY=t(this,A,x.orientationY,ke,ce),this._orientationZ=t(this,A,x.orientationZ,ke,ce),this._positionX=t(this,A,x.positionX,ke,ce),this._positionY=t(this,A,x.positionY,ke,ce),this._positionZ=t(this,A,x.positionZ,ke,ce),l(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(f){this._nativePannerNode.coneInnerAngle=f}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(f){this._nativePannerNode.coneOuterAngle=f}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(f){this._nativePannerNode.coneOuterGain=f}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(f){this._nativePannerNode.distanceModel=f}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(f){this._nativePannerNode.maxDistance=f}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(f){this._nativePannerNode.panningModel=f}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(f){this._nativePannerNode.refDistance=f}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(f){this._nativePannerNode.rolloffFactor=f}})(zt,Hn,ch,fp,nt,Yt,ni),pp=(i=>(t,{disableNormalization:e,imag:s,real:o})=>{const c=s instanceof Float32Array?s:new Float32Array(s),l=o instanceof Float32Array?o:new Float32Array(o),d=t.createPeriodicWave(l,c,{disableNormalization:e});if(Array.from(s).length<2)throw i();return d})(Me),vr=((i,t,e,s)=>class Rm{constructor(c,l){const d=t(c),f=(i=>{const{imag:t,real:e}=i;return void 0===t?void 0===e?{...i,imag:[0,0],real:[0,0]}:{...i,imag:Array.from(e,()=>0),real:e}:void 0===e?{...i,imag:t,real:Array.from(t,()=>0)}:{...i,imag:t,real:e}})({...mo,...l}),p=i(d,f);return e.add(p),p}static[Symbol.hasInstance](c){return null!==c&&"object"==typeof c&&Object.getPrototypeOf(c)===Rm.prototype||e.has(c)}})(pp,nt,new WeakSet),uh=((i,t,e,s,o,c)=>{const d=new Float32Array([1,1]),f=Math.PI/2,p={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},g={...p,oversample:"none"},A=(w,S,F,D,I)=>{if(1===S)return((w,S,F,D)=>{const I=new Float32Array(16385),B=new Float32Array(16385);for(let j=0;j<16385;j+=1){const U=j/16384*f;I[j]=Math.cos(U),B[j]=Math.sin(U)}const z=e(w,{...p,gain:0}),M=s(w,{...g,curve:I}),P=s(w,{...g,curve:d}),R=e(w,{...p,gain:0}),N=s(w,{...g,curve:B});return{connectGraph(){S.connect(z),S.connect(void 0===P.inputs?P:P.inputs[0]),S.connect(R),P.connect(F),F.connect(void 0===M.inputs?M:M.inputs[0]),F.connect(void 0===N.inputs?N:N.inputs[0]),M.connect(z.gain),N.connect(R.gain),z.connect(D,0,0),R.connect(D,0,1)},disconnectGraph(){S.disconnect(z),S.disconnect(void 0===P.inputs?P:P.inputs[0]),S.disconnect(R),P.disconnect(F),F.disconnect(void 0===M.inputs?M:M.inputs[0]),F.disconnect(void 0===N.inputs?N:N.inputs[0]),M.disconnect(z.gain),N.disconnect(R.gain),z.disconnect(D,0,0),R.disconnect(D,0,1)}}})(w,F,D,I);if(2===S)return((w,S,F,D)=>{const I=new Float32Array(16385),B=new Float32Array(16385),z=new Float32Array(16385),M=new Float32Array(16385),P=Math.floor(8192.5);for(let lt=0;lt<16385;lt+=1)if(lt>P){const xt=(lt-P)/(16384-P)*f;I[lt]=Math.cos(xt),B[lt]=Math.sin(xt),z[lt]=0,M[lt]=1}else{const xt=lt/(16384-P)*f;I[lt]=1,B[lt]=0,z[lt]=Math.cos(xt),M[lt]=Math.sin(xt)}const R=t(w,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),N=e(w,{...p,gain:0}),j=s(w,{...g,curve:I}),U=e(w,{...p,gain:0}),Q=s(w,{...g,curve:B}),G=s(w,{...g,curve:d}),et=e(w,{...p,gain:0}),ot=s(w,{...g,curve:z}),rt=e(w,{...p,gain:0}),it=s(w,{...g,curve:M});return{connectGraph(){S.connect(R),S.connect(void 0===G.inputs?G:G.inputs[0]),R.connect(N,0),R.connect(U,0),R.connect(et,1),R.connect(rt,1),G.connect(F),F.connect(void 0===j.inputs?j:j.inputs[0]),F.connect(void 0===Q.inputs?Q:Q.inputs[0]),F.connect(void 0===ot.inputs?ot:ot.inputs[0]),F.connect(void 0===it.inputs?it:it.inputs[0]),j.connect(N.gain),Q.connect(U.gain),ot.connect(et.gain),it.connect(rt.gain),N.connect(D,0,0),et.connect(D,0,0),U.connect(D,0,1),rt.connect(D,0,1)},disconnectGraph(){S.disconnect(R),S.disconnect(void 0===G.inputs?G:G.inputs[0]),R.disconnect(N,0),R.disconnect(U,0),R.disconnect(et,1),R.disconnect(rt,1),G.disconnect(F),F.disconnect(void 0===j.inputs?j:j.inputs[0]),F.disconnect(void 0===Q.inputs?Q:Q.inputs[0]),F.disconnect(void 0===ot.inputs?ot:ot.inputs[0]),F.disconnect(void 0===it.inputs?it:it.inputs[0]),j.disconnect(N.gain),Q.disconnect(U.gain),ot.disconnect(et.gain),it.disconnect(rt.gain),N.disconnect(D,0,0),et.disconnect(D,0,0),U.disconnect(D,0,1),rt.disconnect(D,0,1)}}})(w,F,D,I);throw o()};return(w,{channelCount:S,channelCountMode:F,pan:D,...I})=>{if("max"===F)throw o();const B=i(w,{...I,channelCount:1,channelCountMode:F,numberOfInputs:2}),z=e(w,{...I,channelCount:S,channelCountMode:F,gain:1}),M=e(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:D});let{connectGraph:P,disconnectGraph:R}=A(w,S,z,M,B);Object.defineProperty(M.gain,"defaultValue",{get:()=>0}),Object.defineProperty(M.gain,"maxValue",{get:()=>1}),Object.defineProperty(M.gain,"minValue",{get:()=>-1});const N={get bufferSize(){},get channelCount(){return z.channelCount},set channelCount(G){z.channelCount!==G&&(j&&R(),({connectGraph:P,disconnectGraph:R}=A(w,G,z,M,B)),j&&P()),z.channelCount=G},get channelCountMode(){return z.channelCountMode},set channelCountMode(G){if("clamped-max"===G||"max"===G)throw o();z.channelCountMode=G},get channelInterpretation(){return z.channelInterpretation},set channelInterpretation(G){z.channelInterpretation=G},get context(){return z.context},get inputs(){return[z]},get numberOfInputs(){return z.numberOfInputs},get numberOfOutputs(){return z.numberOfOutputs},get pan(){return M.gain},addEventListener:(...G)=>z.addEventListener(G[0],G[1],G[2]),dispatchEvent:(...G)=>z.dispatchEvent(G[0]),removeEventListener:(...G)=>z.removeEventListener(G[0],G[1],G[2])};let j=!1;return c(Xs(N,B),()=>{P(),j=!0},()=>{R(),j=!1})}})(ys,hr,on,Ri,Xt,ks),lh=((i,t)=>(e,s)=>{const o=s.channelCountMode;if("clamped-max"===o)throw t();if(void 0===e.createStereoPanner)return i(e,s);const c=e.createStereoPanner();return Ae(c,s),ue(c,s,"pan"),Object.defineProperty(c,"channelCountMode",{get:()=>o,set:l=>{if(l!==o)throw t()}}),c})(uh,Xt),gp=((i,t,e,s,o)=>()=>{const c=new WeakMap,l=function(){var d=at(function*(f,p){let g=e(f);const y=Jt(g,p);return y||(g=t(p,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,pan:g.pan.value})),c.set(p,g),y?yield i(p,f.pan,g.pan):yield s(p,f.pan,g.pan),Ys(g)?yield o(f,p,g.inputs[0]):yield o(f,p,g),g});return function(p,g){return d.apply(this,arguments)}}();return{render(d,f){const p=c.get(f);return void 0!==p?Promise.resolve(p):l(d,f)}}})(is,lh,ne,je,be),xr=((i,t,e,s,o,c)=>class extends i{constructor(d,f){const p=o(d),g={...jl,...f},y=e(p,g),x=c(p);super(d,!1,y,x?s():null),this._pan=t(this,x,y.pan)}get pan(){return this._pan}})(zt,Hn,lh,gp,nt,Yt),mp=((i,t,e)=>()=>{const s=new WeakMap,o=function(){var c=at(function*(l,d){let f=t(l);return Jt(f,d)||(f=i(d,{channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,curve:f.curve,oversample:f.oversample})),s.set(d,f),Ys(f)?yield e(l,d,f.inputs[0]):yield e(l,d,f),f});return function(d,f){return c.apply(this,arguments)}}();return{render(c,l){const d=s.get(l);return void 0!==d?Promise.resolve(d):o(c,l)}}})(Ri,ne,be),_p=((i,t,e,s,o,c,l)=>class extends i{constructor(f,p){const g=o(f),y={...zf,...p},x=e(g,y);super(f,!0,x,c(g)?s():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=x,l(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(f){if(null===f)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(f.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=f}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(f){this._nativeWaveShaperNode.oversample=f}})(zt,xe,Ri,mp,nt,Yt,ni),Mo=(i=>null!==i&&i.isSecureContext)(On),ko=(i=>(t,e,s)=>{Object.defineProperties(i,{currentFrame:{configurable:!0,get:()=>Math.round(t*e)},currentTime:{configurable:!0,get:()=>t}});try{return s()}finally{null!==i&&(delete i.currentFrame,delete i.currentTime)}})(On),hh=new WeakMap,yp=((i,t)=>e=>{let s=i.get(e);if(void 0!==s)return s;if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new t(1,1,44100),i.set(e,s),s})(hh,Ne),vp=Mo?((i,t,e,s,o,c,l,d,f,p,g,y,x)=>{let A=0;return(w,S,F={credentials:"omit"})=>{const D=g.get(w);if(void 0!==D&&D.has(S))return Promise.resolve();const I=p.get(w);if(void 0!==I){const M=I.get(S);if(void 0!==M)return M}const B=c(w),z=void 0===B.audioWorklet?o(S).then(([M,P])=>{const[R,N]=Jr(M,P);return e(`${R};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${N}\n})})(window,'_AWGS')`)}).then(()=>{const M=x._AWGS.pop();if(void 0===M)throw new SyntaxError;s(B.currentTime,B.sampleRate,()=>M(class{},void 0,(P,R)=>{if(""===P.trim())throw t();const N=Ke.get(B);if(void 0!==N){if(N.has(P))throw t();to(R),Kr(R.parameterDescriptors),N.set(P,R)}else to(R),Kr(R.parameterDescriptors),Ke.set(B,new Map([[P,R]]))},B.sampleRate,void 0,void 0))}):Promise.all([o(S),Promise.resolve(i(y,y))]).then(([[M,P],R])=>{const N=A+1;A=N;const[j,U]=Jr(M,P),rt=new Blob([`${j};((AudioWorkletProcessor,registerProcessor)=>{${U}\n})(${R?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${R?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${R?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${N}',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),it=URL.createObjectURL(rt);return B.audioWorklet.addModule(it,F).then(()=>{if(d(B))return B;const lt=l(B);return lt.audioWorklet.addModule(it,F).then(()=>lt)}).then(lt=>{if(null===f)throw new SyntaxError;try{new f(lt,`__sac${N}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(it))});return void 0===I?p.set(w,new Map([[S,z]])):I.set(S,z),z.then(()=>{const M=g.get(w);void 0===M?g.set(w,new Set([S])):M.add(S)}).finally(()=>{const M=p.get(w);void 0!==M&&M.delete(S)}),z}})(Pe,Xt,(i=>t=>new Promise((e,s)=>{if(null===i)return void s(new SyntaxError);const o=i.document.head;if(null===o)s(new SyntaxError);else{const c=i.document.createElement("script"),l=new Blob([t],{type:"application/javascript"}),d=URL.createObjectURL(l),f=i.onerror,p=()=>{i.onerror=f,URL.revokeObjectURL(d)};i.onerror=(g,y,x,A,w)=>y===d||y===i.location.href&&1===x&&1===A?(p(),s(w),!1):null!==f?f(g,y,x,A,w):void 0,c.onerror=()=>{p(),s(new SyntaxError)},c.onload=()=>{p(),e()},c.src=d,c.type="module",o.appendChild(c)}}))(On),ko,function(){var t=at(function*(e){try{const s=yield fetch(e);if(s.ok)return[yield s.text(),s.url]}catch{}throw new DOMException("","AbortError")});return function(e){return t.apply(this,arguments)}}(),nt,yp,Yt,Ni,new WeakMap,new WeakMap,((i,t)=>at(function*(){if(null===i)return!0;if(null===t)return!1;const e=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new t(1,128,44100),o=URL.createObjectURL(e);let c=!1,l=!1;try{yield s.audioWorklet.addModule(o);const d=new i(s,"a",{numberOfOutputs:0}),f=s.createOscillator();d.port.onmessage=()=>c=!0,d.onprocessorerror=()=>l=!0,f.connect(d),f.start(0),yield s.startRendering()}catch{}finally{URL.revokeObjectURL(o)}return c&&!l}))(Ni,Ne),On):void 0,dh=((i,t)=>e=>i(e)||t(e))(cc,Yt),vc=((i,t,e,s,o,c,l,d,f,p,g)=>(y,x)=>{const A=l(y)?y:c(y);if(o.has(x)){const w=new DOMException("","DataCloneError");return Promise.reject(w)}try{o.add(x)}catch{}return t(f,()=>f(A))?A.decodeAudioData(x).then(w=>(Za(x).catch(()=>{}),t(d,()=>d(w))||g(w),i.add(w),w)):new Promise((w,S)=>{const F=function(){var I=at(function*(){try{yield Za(x)}catch{}});return function(){return I.apply(this,arguments)}}(),D=I=>{S(I),F()};try{A.decodeAudioData(x,I=>{"function"!=typeof I.copyFromChannel&&(p(I),fn(I)),i.add(I),F().then(()=>w(I))},I=>{D(null===I?new DOMException("","EncodingError"):I)})}catch(I){D(I)}})})(lc,Pe,0,0,new WeakSet,nt,dh,ms,$s,hc,Zn),fh=((i,t,e,s,o,c,l,d,f,p,g,y,x,A,w,S,F,D,I,B)=>class extends w{constructor(M,P){super(M,P),this._nativeContext=M,this._audioWorklet=void 0===i?void 0:{addModule:(R,N)=>i(this,R,N)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new o(this)}createBuffer(M,P,R){return new e({length:P,numberOfChannels:M,sampleRate:R})}createBufferSource(){return new s(this)}createChannelMerger(M=6){return new c(this,{numberOfInputs:M})}createChannelSplitter(M=6){return new l(this,{numberOfOutputs:M})}createConstantSource(){return new d(this)}createConvolver(){return new f(this)}createDelay(M=1){return new g(this,{maxDelayTime:M})}createDynamicsCompressor(){return new y(this)}createGain(){return new x(this)}createIIRFilter(M,P){return new A(this,{feedback:P,feedforward:M})}createOscillator(){return new S(this)}createPanner(){return new F(this)}createPeriodicWave(M,P,R={disableNormalization:!1}){return new D(this,{...R,imag:P,real:M})}createStereoPanner(){return new I(this)}createWaveShaper(){return new B(this)}decodeAudioData(M,P,R){return p(this._nativeContext,M).then(N=>("function"==typeof P&&P(N),N),N=>{throw"function"==typeof R&&R(N),N})}})(vp,tp,ep,Yn,rp,ap,_r,cp,si,vc,up,yr,oh,qe,Nn,ri,yc,vr,xr,_p),xc=((i,t,e,s)=>class extends i{constructor(c,l){const d=e(c),f=((i,t)=>i.createMediaElementSource(t.mediaElement))(d,l);if(s(d))throw TypeError();super(c,!0,f,null),this._nativeMediaElementAudioSourceNode=f}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})(zt,0,nt,Yt),ph=((i,t,e,s)=>class extends i{constructor(c,l){const d=e(c);if(s(d))throw new TypeError;const p=((i,t)=>{const e=i.createMediaStreamDestination();return Ae(e,t),1===e.numberOfOutputs&&Object.defineProperty(e,"numberOfOutputs",{get:()=>0}),e})(d,{...re,...l});super(c,!1,p,null),this._nativeMediaStreamAudioDestinationNode=p}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(zt,0,nt,Yt),gh=((i,t,e,s)=>class extends i{constructor(c,l){const d=e(c),f=((i,{mediaStream:t})=>{const e=t.getAudioTracks();e.sort((c,l)=>c.id<l.id?-1:c.id>l.id?1:0);const s=e.slice(0,1),o=i.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(o,"mediaStream",{value:t}),o})(d,l);if(s(d))throw new TypeError;super(c,!0,f,null),this._nativeMediaStreamAudioSourceNode=f}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(zt,0,nt,Yt),mh=((i,t)=>(e,{mediaStreamTrack:s})=>{if("function"==typeof e.createMediaStreamTrackSource)return e.createMediaStreamTrackSource(s);const o=new MediaStream([s]),c=e.createMediaStreamSource(o);if("audio"!==s.kind)throw i();if(t(e))throw new TypeError;return c})(xe,Yt),No=((i,t,e)=>class extends i{constructor(o,c){const l=e(o);super(o,!0,t(l,c),null)}})(zt,mh,nt),xp=((i,t,e,s,o,c,l,d,f)=>class extends i{constructor(g={}){if(null===f)throw new Error("Missing the native AudioContext constructor.");let y;try{y=new f(g)}catch(w){throw 12===w.code&&"sampleRate is not in range"===w.message?e():w}if(null===y)throw s();if(!(i=>void 0===i||"number"==typeof i||"string"==typeof i&&("balanced"===i||"interactive"===i||"playback"===i))(g.latencyHint))throw new TypeError(`The provided value '${g.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==g.sampleRate&&y.sampleRate!==g.sampleRate)throw e();super(y,2);const{latencyHint:x}=g,{sampleRate:A}=y;if(this._baseLatency="number"==typeof y.baseLatency?y.baseLatency:"balanced"===x?512/A:"interactive"===x||void 0===x?256/A:"playback"===x?1024/A:128*Math.max(2,Math.min(128,Math.round(x*A/128)))/A,this._nativeAudioContext=y,"webkitAudioContext"===f.name?(this._nativeGainNode=y.createGain(),this._nativeOscillatorNode=y.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(y.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===y.state){this._state="suspended";const w=()=>{"suspended"===this._state&&(this._state=null),y.removeEventListener("statechange",w)};y.addEventListener("statechange",w)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then(()=>{throw t()}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then(()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Ci(this)}))}createMediaElementSource(g){return new o(this,{mediaElement:g})}createMediaStreamDestination(){return new c(this)}createMediaStreamSource(g){return new l(this,{mediaStream:g})}createMediaStreamTrackSource(g){return new d(this,{mediaStreamTrack:g})}resume(){return"suspended"===this._state?new Promise((g,y)=>{const x=()=>{this._nativeAudioContext.removeEventListener("statechange",x),"running"===this._nativeAudioContext.state?g():this.resume().then(g,y)};this._nativeAudioContext.addEventListener("statechange",x)}):this._nativeAudioContext.resume().catch(g=>{throw void 0===g||15===g.code?t():g})}suspend(){return this._nativeAudioContext.suspend().catch(g=>{throw void 0===g?t():g})}})(fh,xe,Xt,fr,xc,ph,gh,No,_s),Fo=(i=>t=>{const e=i.get(t);if(void 0===e)throw new Error("The context has no set of AudioWorkletNodes.");return e})(mc),_h=(i=>(t,e)=>{i(t).add(e)})(Fo),yh=(i=>(t,e,s=0,o=0)=>{const c=t[s];if(void 0===c)throw i();return so(e)?c.connect(e,0,o):c.connect(e,0)})(Me),vh=(i=>(t,e)=>{i(t).delete(e)})(Fo),xh=(i=>(t,e=void 0,s=void 0,o=0)=>void 0===e?t.forEach(c=>c.disconnect()):"number"==typeof e?rr(i,t,e).disconnect():so(e)?void 0===s?t.forEach(c=>c.disconnect(e)):void 0===o?rr(i,t,s).disconnect(e,0):rr(i,t,s).disconnect(e,0,o):void 0===s?t.forEach(c=>c.disconnect(e)):rr(i,t,s).disconnect(e,0))(Me),Eo=new WeakMap,bh=((i,t)=>e=>t(i,e))(Eo,rn),bc=((i,t,e,s,o,c,l,d,f,p,g,y,x)=>(A,w,S,F)=>{if(0===F.numberOfInputs&&0===F.numberOfOutputs)throw f();const D=Array.isArray(F.outputChannelCount)?F.outputChannelCount:Array.from(F.outputChannelCount);if(D.some(tt=>tt<1))throw f();if(D.length!==F.numberOfOutputs)throw t();if("explicit"!==F.channelCountMode)throw f();const I=F.channelCount*F.numberOfInputs,B=D.reduce((tt,bt)=>tt+bt,0),z=void 0===S.parameterDescriptors?0:S.parameterDescriptors.length;if(I+z>6||B>6)throw f();const M=new MessageChannel,P=[],R=[];for(let tt=0;tt<F.numberOfInputs;tt+=1)P.push(l(A,{channelCount:F.channelCount,channelCountMode:F.channelCountMode,channelInterpretation:F.channelInterpretation,gain:1})),R.push(o(A,{channelCount:F.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:F.channelCount}));const N=[];if(void 0!==S.parameterDescriptors)for(const{defaultValue:tt,maxValue:bt,minValue:We,name:ye}of S.parameterDescriptors){const Ht=c(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==F.parameterData[ye]?F.parameterData[ye]:void 0===tt?0:tt});Object.defineProperties(Ht.offset,{defaultValue:{get:()=>void 0===tt?0:tt},maxValue:{get:()=>void 0===bt?ke:bt},minValue:{get:()=>void 0===We?ce:We}}),N.push(Ht)}const j=s(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,I+z)}),U=nc(w,A.sampleRate),Q=d(A,U,I+z,Math.max(1,B)),G=o(A,{channelCount:Math.max(1,B),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,B)}),et=[];for(let tt=0;tt<F.numberOfOutputs;tt+=1)et.push(s(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:D[tt]}));for(let tt=0;tt<F.numberOfInputs;tt+=1){P[tt].connect(R[tt]);for(let bt=0;bt<F.channelCount;bt+=1)R[tt].connect(j,bt,tt*F.channelCount+bt)}const ot=new ul(void 0===S.parameterDescriptors?[]:S.parameterDescriptors.map(({name:tt},bt)=>{const We=N[bt];return We.connect(j,0,I+bt),We.start(0),[tt,We.offset]}));j.connect(Q);let rt=F.channelInterpretation,it=null;const lt=0===F.numberOfOutputs?[Q]:et,xt={get bufferSize(){return U},get channelCount(){return F.channelCount},set channelCount(tt){throw e()},get channelCountMode(){return F.channelCountMode},set channelCountMode(tt){throw e()},get channelInterpretation(){return rt},set channelInterpretation(tt){for(const bt of P)bt.channelInterpretation=tt;rt=tt},get context(){return Q.context},get inputs(){return P},get numberOfInputs(){return F.numberOfInputs},get numberOfOutputs(){return F.numberOfOutputs},get onprocessorerror(){return it},set onprocessorerror(tt){"function"==typeof it&&xt.removeEventListener("processorerror",it),it="function"==typeof tt?tt:null,"function"==typeof it&&xt.addEventListener("processorerror",it)},get parameters(){return ot},get port(){return M.port2},addEventListener:(...tt)=>Q.addEventListener(tt[0],tt[1],tt[2]),connect:i.bind(null,lt),disconnect:p.bind(null,lt),dispatchEvent:(...tt)=>Q.dispatchEvent(tt[0]),removeEventListener:(...tt)=>Q.removeEventListener(tt[0],tt[1],tt[2])},yt=new Map;var tt;M.port1.addEventListener=(tt=M.port1.addEventListener,(...bt)=>{if("message"===bt[0]){const We="function"==typeof bt[1]?bt[1]:"object"==typeof bt[1]&&null!==bt[1]&&"function"==typeof bt[1].handleEvent?bt[1].handleEvent:null;if(null!==We){const ye=yt.get(bt[1]);void 0!==ye?bt[1]=ye:(bt[1]=Ht=>{g(A.currentTime,A.sampleRate,()=>We(Ht))},yt.set(We,bt[1]))}}return tt.call(M.port1,bt[0],bt[1],bt[2])}),M.port1.removeEventListener=(tt=>(...bt)=>{if("message"===bt[0]){const We=yt.get(bt[1]);void 0!==We&&(yt.delete(bt[1]),bt[1]=We)}return tt.call(M.port1,bt[0],bt[1],bt[2])})(M.port1.removeEventListener);let Ot=null;Object.defineProperty(M.port1,"onmessage",{get:()=>Ot,set:tt=>{"function"==typeof Ot&&M.port1.removeEventListener("message",Ot),Ot="function"==typeof tt?tt:null,"function"==typeof Ot&&(M.port1.addEventListener("message",Ot),M.port1.start())}}),S.prototype.port=M.port1;let Nt=null;((i,t,e,s)=>{let o=es.get(i);void 0===o&&(o=new WeakMap,es.set(i,o));const c=Mf(e,s);return o.set(t,c),c})(A,xt,S,F).then(tt=>Nt=tt);const Be=oo(F.numberOfInputs,F.channelCount),Sn=oo(F.numberOfOutputs,D),It=void 0===S.parameterDescriptors?[]:S.parameterDescriptors.reduce((tt,{name:bt})=>({...tt,[bt]:new Float32Array(128)}),{});let xi=!0;const Hi=()=>{F.numberOfOutputs>0&&Q.disconnect(G);for(let tt=0,bt=0;tt<F.numberOfOutputs;tt+=1){const We=et[tt];for(let ye=0;ye<D[tt];ye+=1)G.disconnect(We,bt+ye,ye);bt+=D[tt]}},X=new Map;Q.onaudioprocess=({inputBuffer:tt,outputBuffer:bt})=>{if(null!==Nt){const We=y(xt);for(let ye=0;ye<U;ye+=128){for(let Ht=0;Ht<F.numberOfInputs;Ht+=1)for(let we=0;we<F.channelCount;we+=1)ro(tt,Be[Ht],we,we,ye);void 0!==S.parameterDescriptors&&S.parameterDescriptors.forEach(({name:Ht},we)=>{ro(tt,It,Ht,I+we,ye)});for(let Ht=0;Ht<F.numberOfInputs;Ht+=1)for(let we=0;we<D[Ht];we+=1)0===Sn[Ht][we].byteLength&&(Sn[Ht][we]=new Float32Array(128));try{const Ht=Be.map((ps,Yi)=>{if(We[Yi].size>0)return X.set(Yi,U/128),ps;const Dg=X.get(Yi);return void 0===Dg?[]:(ps.every(d_=>d_.every(f_=>0===f_))&&(1===Dg?X.delete(Yi):X.set(Yi,Dg-1)),ps)});xi=g(A.currentTime+ye/A.sampleRate,A.sampleRate,()=>Nt.process(Ht,Sn,It));for(let ps=0,Yi=0;ps<F.numberOfOutputs;ps+=1){for(let tl=0;tl<D[ps];tl+=1)ir(bt,Sn[ps],tl,Yi+tl,ye);Yi+=D[ps]}}catch(Ht){xi=!1,xt.dispatchEvent(new ErrorEvent("processorerror",{colno:Ht.colno,filename:Ht.filename,lineno:Ht.lineno,message:Ht.message}))}if(!xi){for(let Ht=0;Ht<F.numberOfInputs;Ht+=1){P[Ht].disconnect(R[Ht]);for(let we=0;we<F.channelCount;we+=1)R[ye].disconnect(j,we,Ht*F.channelCount+we)}if(void 0!==S.parameterDescriptors){const Ht=S.parameterDescriptors.length;for(let we=0;we<Ht;we+=1){const ps=N[we];ps.disconnect(j,0,I+we),ps.stop()}}j.disconnect(Q),Q.onaudioprocess=null,Ge?Hi():Ra();break}}}};let Ge=!1;const Ws=l(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Ea=()=>Q.connect(Ws).connect(A.destination),Ra=()=>{Q.disconnect(Ws),Ws.disconnect()};return Ea(),x(xt,()=>{if(xi){Ra(),F.numberOfOutputs>0&&Q.connect(G);for(let tt=0,bt=0;tt<F.numberOfOutputs;tt+=1){const We=et[tt];for(let ye=0;ye<D[tt];ye+=1)G.connect(We,bt+ye,ye);bt+=D[tt]}}Ge=!0},()=>{xi&&(Ea(),Hi()),Ge=!1})})(yh,Me,xe,ys,hr,Ei,on,Rt,Xt,xh,ko,bh,ks),bp=((i,t,e,s,o)=>(c,l,d,f,p,g)=>{if(null!==d)try{const y=new d(c,f,g),x=new Map;let A=null;if(Object.defineProperties(y,{channelCount:{get:()=>g.channelCount,set:()=>{throw i()}},channelCountMode:{get:()=>"explicit",set:()=>{throw i()}},onprocessorerror:{get:()=>A,set:w=>{"function"==typeof A&&y.removeEventListener("processorerror",A),A="function"==typeof w?w:null,"function"==typeof A&&y.addEventListener("processorerror",A)}}}),y.addEventListener=(w=y.addEventListener,(...S)=>{if("processorerror"===S[0]){const F="function"==typeof S[1]?S[1]:"object"==typeof S[1]&&null!==S[1]&&"function"==typeof S[1].handleEvent?S[1].handleEvent:null;if(null!==F){const D=x.get(S[1]);void 0!==D?S[1]=D:(S[1]=I=>{"error"===I.type?(Object.defineProperties(I,{type:{value:"processorerror"}}),F(I)):F(new ErrorEvent(S[0],{...I}))},x.set(F,S[1]))}}return w.call(y,"error",S[1],S[2]),w.call(y,...S)}),y.removeEventListener=(w=>(...S)=>{if("processorerror"===S[0]){const F=x.get(S[1]);void 0!==F&&(x.delete(S[1]),S[1]=F)}return w.call(y,"error",S[1],S[2]),w.call(y,S[0],S[1],S[2])})(y.removeEventListener),0!==g.numberOfOutputs){const w=e(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return y.connect(w).connect(c.destination),o(y,()=>w.disconnect(),()=>w.connect(c.destination))}return y}catch(y){throw 11===y.code?s():y}var w;if(void 0===p)throw s();return(i=>{const{port1:t}=new MessageChannel;try{t.postMessage(i)}finally{t.close()}})(g),t(c,l,p,g)})(xe,bc,on,Xt,ks),wc=((i,t,e,s,o,c,l,d,f,p,g,y,x,A,w,S)=>(F,D,I)=>{const B=new WeakMap;let z=null;const M=function(){var P=at(function*(R,N){let j=g(R),U=null;const Q=Jt(j,N),G=Array.isArray(D.outputChannelCount)?D.outputChannelCount:Array.from(D.outputChannelCount);if(null===y){const et=G.reduce((lt,xt)=>lt+xt,0),ot=o(N,{channelCount:Math.max(1,et),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,et)}),rt=[];for(let lt=0;lt<R.numberOfOutputs;lt+=1)rt.push(s(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:G[lt]}));const it=l(N,{channelCount:D.channelCount,channelCountMode:D.channelCountMode,channelInterpretation:D.channelInterpretation,gain:1});it.connect=t.bind(null,rt),it.disconnect=f.bind(null,rt),U=[ot,rt,it]}else Q||(j=new y(N,F));if(B.set(N,null===U?j:U[2]),null!==U){if(null===z){if(void 0===I)throw new Error("Missing the processor constructor.");if(null===x)throw new Error("Missing the native OfflineAudioContext constructor.");const xt=R.channelCount*R.numberOfInputs,yt=void 0===I.parameterDescriptors?0:I.parameterDescriptors.length,Ot=xt+yt;z=Hd(R,0===Ot?null:yield function(){var ae=at(function*(){const Be=new x(Ot,128*Math.ceil(R.context.length/128),N.sampleRate),Sn=[],It=[];for(let X=0;X<D.numberOfInputs;X+=1)Sn.push(l(Be,{channelCount:D.channelCount,channelCountMode:D.channelCountMode,channelInterpretation:D.channelInterpretation,gain:1})),It.push(o(Be,{channelCount:D.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:D.channelCount}));const xi=yield Promise.all(Array.from(R.parameters.values()).map(function(){var X=at(function*(Ge){const Ws=c(Be,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Ge.value});return yield A(Be,Ge,Ws.offset),Ws});return function(Ge){return X.apply(this,arguments)}}())),Hi=s(Be,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,xt+yt)});for(let X=0;X<D.numberOfInputs;X+=1){Sn[X].connect(It[X]);for(let Ge=0;Ge<D.channelCount;Ge+=1)It[X].connect(Hi,Ge,X*D.channelCount+Ge)}for(const[X,Ge]of xi.entries())Ge.connect(Hi,0,xt+X),Ge.start(0);return Hi.connect(Be.destination),yield Promise.all(Sn.map(X=>w(R,Be,X))),S(Be)});return function(){return ae.apply(this,arguments)}}()(),N,D,G,I,p)}const et=yield z,ot=e(N,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[rt,it,lt]=U;null!==et&&(ot.buffer=et,ot.start(0)),ot.connect(rt);for(let xt=0,yt=0;xt<R.numberOfOutputs;xt+=1){const Ot=it[xt];for(let Nt=0;Nt<G[xt];Nt+=1)rt.connect(Ot,yt+Nt,Nt);yt+=G[xt]}return lt}if(Q)for(const[et,ot]of R.parameters.entries())yield i(N,ot,j.parameters.get(et));else for(const[et,ot]of R.parameters.entries())yield A(N,ot,j.parameters.get(et));return yield w(R,N,j),j});return function(N,j){return P.apply(this,arguments)}}();return{render(P,R){d(R,P);const N=B.get(R);return void 0!==N?Promise.resolve(N):M(P,R)}}})(is,yh,Fi,ys,hr,Ei,on,vh,xh,ko,ne,Ni,Ne,je,be,ii),Mt=(i=>t=>i.get(t))(hh),wp=(i=>(t,e)=>{i.set(t,e)})(Eo),wh=Mo?((i,t,e,s,o,c,l,d,f,p,g,y,x,A)=>class extends t{constructor(S,F,D){var I;const B=d(S),z=f(B),M=(i=>({...i,outputChannelCount:void 0!==i.outputChannelCount?i.outputChannelCount:1===i.numberOfInputs&&1===i.numberOfOutputs?[i.channelCount]:Array.from({length:i.numberOfOutputs},()=>1)}))({...jd,...D});(i=>{const{port1:t,port2:e}=new MessageChannel;try{t.postMessage(i)}finally{t.close(),e.close()}})(M);const P=Ke.get(B),R=P?.get(F),N=z||"closed"!==B.state?B:null!==(I=l(B))&&void 0!==I?I:B,j=o(N,z?null:S.baseLatency,p,F,R,M);super(S,!0,j,z?s(F,M,R):null);const Q=[];j.parameters.forEach((et,ot)=>{const rt=e(this,z,et);Q.push([ot,rt])}),this._nativeAudioWorkletNode=j,this._onprocessorerror=null,this._parameters=new ul(Q),z&&i(B,this);const{activeInputs:G}=c(this);y(j,G)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(S){const F="function"==typeof S?A(this,S):null;this._nativeAudioWorkletNode.onprocessorerror=F;const D=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==D&&D===F?S:D}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(_h,zt,Hn,wc,bp,Ce,Mt,nt,Yt,Ni,0,wp,0,ki):void 0,Cc=((i,t)=>(e,s,o)=>{if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(e,s,o)}catch(c){throw"SyntaxError"===c.name?i():c}})(Xt,Ne),Ch=((i,t,e,s,o,c,l,d)=>(f,p)=>e(f).render(f,p).then(()=>Promise.all(Array.from(s(p)).map(g=>e(g).render(g,p)))).then(()=>o(p)).then(g=>("function"!=typeof g.copyFromChannel?(l(g),fn(g)):t(c,()=>c(g))||d(g),i.add(g),g)))(lc,Pe,Os,Fo,ii,ms,hc,Zn),Fn=((i,t,e,s,o)=>class extends i{constructor(l,d,f){let p;if("number"==typeof l&&void 0!==d&&void 0!==f)p={length:d,numberOfChannels:l,sampleRate:f};else{if("object"!=typeof l)throw new Error("The given parameters are not valid.");p=l}const{length:g,numberOfChannels:y,sampleRate:x}={...fo,...p},A=s(y,g,x);t($s,()=>$s(A))||A.addEventListener("statechange",(()=>{let w=0;const S=F=>{"running"===this._state&&(w>0?(A.removeEventListener("statechange",S),F.stopImmediatePropagation(),this._waitForThePromiseToSettle(F)):w+=1)};return S})()),super(A,y),this._length=g,this._nativeOfflineAudioContext=A,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(e()):(this._state="running",o(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Ci(this)}))}_waitForThePromiseToSettle(l){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(l):setTimeout(()=>this._waitForThePromiseToSettle(l))}})(fh,Pe,xe,Cc,Ch),Cp=((i,t)=>e=>{const s=i.get(e);return t(s)||t(e)})(gs,cc),Vo=((i,t)=>e=>i.has(e)||t(e))(ts,uc),Ac=((i,t)=>e=>i.has(e)||t(e))(dn,Kl),Ah=((i,t)=>e=>{const s=i.get(e);return t(s)||t(e)})(gs,Yt);var i;function dt(i,t){if(!i)throw new Error(t)}function en(i,t,e=1/0){if(!(t<=i&&i<=e))throw new RangeError(`Value must be within [${t}, ${e}], got: ${i}`)}function Io(i){!i.isOffline&&"running"!==i.state&&qo('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let Po=console;function qo(...i){Po.warn(...i)}function an(i){return typeof i>"u"}function St(i){return!an(i)}function Ze(i){return"number"==typeof i}function Fs(i){return"[object Object]"===Object.prototype.toString.call(i)&&i.constructor===Object}function vs(i){return"boolean"==typeof i}function _n(i){return Array.isArray(i)}function Qn(i){return"string"==typeof i}function Vi(i){return Qn(i)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(i)}function Tp(i,t,e){return new Fn(i,t,e)}const oi="object"==typeof self?self:null,Th=oi&&(oi.hasOwnProperty("AudioContext")||oi.hasOwnProperty("webkitAudioContext"));var Lt=ut(7582);class Oh{constructor(t,e,s){this._callback=t,this._type=e,this._updateInterval=s,this._createClock()}_createWorker(){const t=new Blob([`\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t`],{type:"text/javascript"}),e=URL.createObjectURL(t),s=new Worker(e);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch{this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){this._updateInterval=Math.max(t,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*t,1))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function Es(i){return Ac(i)}function me(i){return Vo(i)}function yn(i){return Ah(i)}function Ii(i){return Cp(i)}function Mh(i){return i instanceof AudioBuffer}function Lo(i,t){return"value"===i||Es(t)||me(t)||Mh(t)}function $n(i,...t){if(!t.length)return i;const e=t.shift();if(Fs(i)&&Fs(e))for(const s in e)Lo(s,e[s])?i[s]=e[s]:Fs(e[s])?(i[s]||Object.assign(i,{[s]:{}}),$n(i[s],e[s])):Object.assign(i,{[s]:e[s]});return $n(i,...t)}function H(i,t,e=[],s){const o={},c=Array.from(t);if(Fs(c[0])&&s&&!Reflect.has(c[0],s)&&(Object.keys(c[0]).some(d=>Reflect.has(i,d))||($n(o,{[s]:c[0]}),e.splice(e.indexOf(s),1),c.shift())),1===c.length&&Fs(c[0]))$n(o,c[0]);else for(let l=0;l<e.length;l++)St(c[l])&&(o[e[l]]=c[l]);return $n(i,o)}function Xn(i,t){return an(i)?t:i}function ai(i,t){return t.forEach(e=>{Reflect.has(i,e)&&delete i[e]}),i}let En=(()=>{class i{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||oi&&this.toString()===oi.TONE_DEBUG_CLASS)&&function Sh(...i){Po.log(...i)}(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}return i.version=fe,i})();const Dc=1e-6;function br(i,t){return i>t+Dc}function Bo(i,t){return br(i,t)||Rn(i,t)}function wr(i,t){return i+Dc<t}function Rn(i,t){return Math.abs(i-t)<Dc}class Vn extends En{constructor(){super(),this.name="Timeline",this._timeline=[];const t=H(Vn.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(dt(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length)dt(Bo(t.time,this._timeline[this.length-1].time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t);else{const e=this._search(t.time);this._timeline.splice(e+1,0,t)}return this.length>this.memory&&this._timeline.splice(0,this.length-this.memory),this}remove(t){const e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this}get(t,e="time"){const s=this._search(t,e);return-1!==s?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){const s=this._search(t,e);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(t){const e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];const s=this._search(t);return s-1>=0?this._timeline[s-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(Rn(this._timeline[e].time,t)){for(let s=e;s>=0&&Rn(this._timeline[s].time,t);s--)e=s;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&Bo(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){const e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(0===this._timeline.length)return-1;let s=0;const o=this._timeline.length;let c=o;if(o>0&&this._timeline[o-1][e]<=t)return o-1;for(;s<c;){let l=Math.floor(s+(c-s)/2);const d=this._timeline[l],f=this._timeline[l+1];if(Rn(d[e],t)){for(let p=l;p<this._timeline.length&&Rn(this._timeline[p][e],t);p++)l=p;return l}if(wr(d[e],t)&&br(f[e],t))return l;br(d[e],t)?c=l:s=l+1}return-1}_iterate(t,e=0,s=this._timeline.length-1){this._timeline.slice(e,s+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){const s=this._search(t);return-1!==s&&this._iterate(e,0,s),this}forEachAfter(t,e){const s=this._search(t);return this._iterate(e,s+1),this}forEachBetween(t,e,s){let o=this._search(t),c=this._search(e);return-1!==o&&-1!==c?(this._timeline[o].time!==t&&(o+=1),this._timeline[c].time===e&&(c-=1),this._iterate(s,o,c)):-1===o&&this._iterate(s,0,c),this}forEachFrom(t,e){let s=this._search(t);for(;s>=0&&this._timeline[s].time>=t;)s--;return this._iterate(e,s+1),this}forEachAtTime(t,e){const s=this._search(t);if(-1!==s&&Rn(this._timeline[s].time,t)){let o=s;for(let c=s;c>=0&&Rn(this._timeline[c].time,t);c--)o=c;this._iterate(c=>{e(c)},o,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const Cr=[];function Wo(i){Cr.push(i)}const Ar=[];function Sr(i){Ar.push(i)}class Tr extends En{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach(o=>{an(this._events)&&(this._events={}),this._events.hasOwnProperty(o)||(this._events[o]=[]),this._events[o].push(e)}),this}once(t,e){const s=(...o)=>{e(...o),this.off(t,s)};return this.on(t,s),this}off(t,e){return t.split(/\W+/).forEach(o=>{if(an(this._events)&&(this._events={}),this._events.hasOwnProperty(t))if(an(e))this._events[t]=[];else{const c=this._events[t];for(let l=c.length-1;l>=0;l--)c[l]===e&&c.splice(l,1)}}),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){const s=this._events[t].slice(0);for(let o=0,c=s.length;o<c;o++)s[o].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach(e=>{const s=Object.getOwnPropertyDescriptor(Tr.prototype,e);Object.defineProperty(t.prototype,e,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class Mc extends Tr{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class vn extends Mc{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new Vn,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const t=H(vn.getDefaults(),arguments,["context"]);this._context=t.context?t.context:function Sp(i){return new xp(i)}({latencyHint:t.latencyHint}),this._ticker=new Oh(this.emit.bind(this,"tick"),t.clockSource,t.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(t.latencyHint),this.lookAhead=t.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(function Nh(i){Cr.forEach(t=>t(i))}(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,s){return this._context.createBuffer(t,e,s)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,s){return this._context.createPeriodicWave(t,e,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return dt(Ii(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return dt(Ii(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return dt(Ii(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){dt(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){dt(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){dt(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){dt(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return function Dh(i,t,e){return dt(St(wh),"This node only works in a secure context (https or localhost)"),new wh(i,t,e)}(this.rawContext,t,e)}addAudioWorkletModule(t,e){return(0,Lt.mG)(this,void 0,void 0,function*(){dt(St(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(e)||this._workletModules.set(e,this.rawContext.audioWorklet.addModule(t)),yield this._workletModules.get(e)})}workletsAreReady(){return(0,Lt.mG)(this,void 0,void 0,function*(){const t=[];this._workletModules.forEach(e=>t.push(e)),yield Promise.all(t)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get latencyHint(){return this._latencyHint}_setLatencyHint(t){let e=0;if(this._latencyHint=t,Qn(t))switch(t){case"interactive":e=.1;break;case"playback":e=.5;break;case"balanced":e=.25}this.lookAhead=e,this.updateInterval=e/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return Ii(this._context)?this._context.resume():Promise.resolve()}close(){return(0,Lt.mG)(this,void 0,void 0,function*(){Ii(this._context)&&(yield this._context.close()),this._initialized&&function Oc(i){Ar.forEach(t=>t(i))}(this)})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const e=this._context.createBuffer(1,128,this._context.sampleRate),s=e.getChannelData(0);for(let c=0;c<s.length;c++)s[c]=t;const o=this._context.createBufferSource();return o.channelCount=1,o.channelCountMode="explicit",o.buffer=e,o.loop=!0,o.start(0),this._constants.set(t,o),o}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this}_timeoutLoop(){const t=this.now();let e=this._timeouts.peek();for(;this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()}setTimeout(t,e){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:s+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(e=>{e.id===t&&this._timeouts.remove(e)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){const s=++this._timeoutIds,o=()=>{const c=this.now();this._timeouts.add({callback:()=>{t(),o()},id:s,time:c+e})};return o(),s}}function he(i,t){_n(t)?t.forEach(e=>he(i,e)):Object.defineProperty(i,t,{enumerable:!0,writable:!1})}function Eh(i,t){_n(t)?t.forEach(e=>Eh(i,e)):Object.defineProperty(i,t,{writable:!0})}const jt=()=>{};let os=(()=>{class i extends En{constructor(){super(),this.name="ToneAudioBuffer",this.onload=jt;const e=H(i.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,e.url&&Mh(e.url)||e.url instanceof i?this.set(e.url):Qn(e.url)&&this.load(e.url).catch(e.onerror)}static getDefaults(){return{onerror:jt,onload:jt,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:xn().sampleRate}set(e){return e instanceof i?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return(0,Lt.mG)(this,void 0,void 0,function*(){const s=i.load(e).then(o=>{this.set(o),this.onload(this)});i.downloads.push(s);try{yield s}finally{const o=i.downloads.indexOf(s);i.downloads.splice(o,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const s=_n(e)&&e[0].length>0,o=s?e.length:1,c=s?e[0].length:e.length,l=xn(),d=l.createBuffer(o,c,l.sampleRate),f=s||1!==o?e:[e];for(let p=0;p<o;p++)d.copyToChannel(f[p],p);return this._buffer=d,this}toMono(e){if(Ze(e))this.fromArray(this.toArray(e));else{let s=new Float32Array(this.length);const o=this.numberOfChannels;for(let c=0;c<o;c++){const l=this.toArray(c);for(let d=0;d<l.length;d++)s[d]+=l[d]}s=s.map(c=>c/o),this.fromArray(s)}return this}toArray(e){if(Ze(e))return this.getChannelData(e);if(1===this.numberOfChannels)return this.toArray(0);{const s=[];for(let o=0;o<this.numberOfChannels;o++)s[o]=this.getChannelData(o);return s}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,s=this.duration){const o=Math.floor(e*this.sampleRate),c=Math.floor(s*this.sampleRate);dt(o<c,"The start time must be less than the end time");const l=c-o,d=xn().createBuffer(this.numberOfChannels,l,this.sampleRate);for(let f=0;f<this.numberOfChannels;f++)d.copyToChannel(this.getChannelData(f).subarray(o,c),f);return new i(d)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return(new i).fromArray(e)}static fromUrl(e){return(0,Lt.mG)(this,void 0,void 0,function*(){return yield(new i).load(e)})}static load(e){return(0,Lt.mG)(this,void 0,void 0,function*(){const s=e.match(/\[([^\]\[]+\|.+)\]$/);if(s){const f=s[1].split("|");let p=f[0];for(const g of f)if(i.supportsType(g)){p=g;break}e=e.replace(s[0],p)}const o=""===i.baseUrl||i.baseUrl.endsWith("/")?i.baseUrl:i.baseUrl+"/",c=yield fetch(o+e);if(!c.ok)throw new Error(`could not load url: ${e}`);const l=yield c.arrayBuffer();return yield xn().decodeAudioData(l)})}static supportsType(e){const s=e.split("."),o=s[s.length-1];return""!==document.createElement("audio").canPlayType("audio/"+o)}static loaded(){return(0,Lt.mG)(this,void 0,void 0,function*(){for(yield Promise.resolve();i.downloads.length;)yield i.downloads[0]})}}return i.baseUrl="",i.downloads=[],i})();class kc extends vn{constructor(){super({clockSource:"offline",context:yn(arguments[0])?arguments[0]:Tp(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:yn(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=yn(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return(0,Lt.mG)(this,void 0,void 0,function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;const s=Math.floor(this.sampleRate/128);t&&e%s==0&&(yield new Promise(o=>setTimeout(o,1)))}})}render(t=!0){return(0,Lt.mG)(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(t);const e=yield this._context.startRendering();return new os(e)})}close(){return Promise.resolve()}}const as=new class Fh extends Mc{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,s){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t,e){return(0,Lt.mG)(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}};let Rs=as;function xn(){return Rs===as&&Th&&function Nc(i){Rs=Ii(i)?new vn(i):yn(i)?new kc(i):i}(new vn),Rs}if(oi&&!oi.TONE_SILENCE_LOGGING){console.log(`%c * Tone.js ${"v"}${fe} * `,"background: #000; color: #fff")}function jo(i){return Math.pow(2,i/12)}let cs=440;function Zo(i){return Math.round(Le(i))}function Le(i){return 69+12*Math.log2(i/cs)}class Ec extends En{constructor(t,e,s){super(),this.defaultUnits="s",this._val=e,this._units=s,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{const s=parseInt(t,10),o="."===e?1.5:1;return 1===s?this._beatsToUnits(this._getTimeSignature())*o:this._beatsToUnits(4/s)*o},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const e=parseInt(t,10);return this._beatsToUnits(8/(3*Math.floor(e)))},regexp:/^(\d+)t$/i},tr:{method:(t,e,s)=>{let o=0;return t&&"0"!==t&&(o+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(o+=this._beatsToUnits(parseFloat(e))),s&&"0"!==s&&(o+=this._beatsToUnits(parseFloat(s)/4)),o},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Ec&&this.fromType(this._val),an(this._val))return this._noArg();if(Qn(this._val)&&an(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(Fs(this._val)){let t=0;for(const e in this._val)if(St(this._val[e])){const s=this._val[e];t+=new this.constructor(this.context,e).valueOf()*s}return t}if(St(this._units)){const t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}return Qn(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class bn extends Ec{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const e=new bn(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){const s=new this.constructor(this.context,t).valueOf(),o=this.valueOf();return o+(Math.round(o/s)*s-o)*e}toNotation(){const t=this.toSeconds(),e=["1m"];for(let c=1;c<9;c++){const l=Math.pow(2,c);e.push(l+"n."),e.push(l+"n"),e.push(l+"t")}e.push("0");let s=e[0],o=new bn(this.context,e[0]).toSeconds();return e.forEach(c=>{const l=new bn(this.context,c).toSeconds();Math.abs(l-t)<Math.abs(o-t)&&(s=c,o=l)}),s}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let e=this.valueOf()/t;e=parseFloat(e.toFixed(4));const s=Math.floor(e/this._getTimeSignature());let o=e%1*4;e=Math.floor(e)%this._getTimeSignature();const c=o.toString();return c.length>3&&(o=parseFloat(parseFloat(c).toFixed(3))),[s,e,o].join(":")}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return Zo(this.toFrequency())}_now(){return this.context.now()}}class cn extends bn{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return function Op(){return cs}()}static set A4(t){!function Fc(i){cs=i}(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return"midi"===this.defaultUnits?t:cn.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(t,e){const o=kp[t.toLowerCase()]+12*(parseInt(e,10)+1);return"midi"===this.defaultUnits?o:cn.mtof(o)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,s){let o=1;return t&&"0"!==t&&(o*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(o*=this._beatsToUnits(parseFloat(e))),s&&"0"!==s&&(o*=this._beatsToUnits(parseFloat(s)/4)),o}}})}transpose(t){return new cn(this.context,this.valueOf()*jo(t))}harmonize(t){return t.map(e=>this.transpose(e))}toMidi(){return Zo(this.valueOf())}toNote(){const t=this.toFrequency(),e=Math.log2(t/cn.A4);let s=Math.round(12*e)+57;const o=Math.floor(s/12);return o<0&&(s+=-12*o),Np[s%12]+o.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return function Mp(i){return cs*Math.pow(2,(i-69)/12)}(t)}static ftom(t){return Zo(t)}}const kp={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},Np=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class nn extends bn{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Fe extends En{constructor(){super();const t=H(Fe.getDefaults(),arguments,["context"]);this.context=this.defaultContext?this.defaultContext:t.context}static getDefaults(){return{context:xn()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return new bn(this.context,t).toSeconds()}toFrequency(t){return new cn(this.context,t).toFrequency()}toTicks(t){return new nn(this.context,t).toTicks()}_getPartialProperties(t){const e=this.get();return Object.keys(e).forEach(s=>{an(t[s])&&delete e[s]}),e}get(){const t=function Dp(i){return i.constructor.getDefaults()}(this);return Object.keys(t).forEach(e=>{if(Reflect.has(this,e)){const s=this[e];St(s)&&St(s.value)&&St(s.setValueAtTime)?t[e]=s.value:s instanceof Fe?t[e]=s._getPartialProperties(t[e]):_n(s)||Ze(s)||Qn(s)||vs(s)?t[e]=s:delete t[e]}}),t}set(t){return Object.keys(t).forEach(e=>{Reflect.has(this,e)&&St(this[e])&&(this[e]&&St(this[e].value)&&St(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof Fe?this[e].set(t[e]):this[e]=t[e])}),this}}class Or extends Vn{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const e=this.get(t);return null!==e?e.state:this._initial}setStateAtTime(t,e,s){return en(e,0),this.add(Object.assign({},s,{state:t,time:e})),this}getLastState(t,e){for(let o=this._search(e);o>=0;o--){const c=this._timeline[o];if(c.state===t)return c}}getNextState(t,e){const s=this._search(e);if(-1!==s)for(let o=s;o<this._timeline.length;o++){const c=this._timeline[o];if(c.state===t)return c}}}class te extends Fe{constructor(){super(H(te.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const t=H(te.getDefaults(),arguments,["param","units","convert"]);for(dt(St(t.param)&&(Es(t.param)||t.param instanceof te),"param must be an AudioParam");!Es(t.param);)t.param=t.param._param;this._swappable=!!St(t.swappable)&&t.swappable,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new Vn(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,St(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Fe.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return St(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return St(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return St(this.maxValue)&&St(this.minValue)&&en(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?function gt(i){return Math.pow(10,i/20)}(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&"decibels"===this.units?function zo(i){return Math.log(i)/Math.LN10*20}(t):t}setValueAtTime(t,e){const s=this.toSeconds(e),o=this._fromType(t);return dt(isFinite(o)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(o),this.log(this.units,"setValueAtTime",t,s),this._events.add({time:s,type:"setValueAtTime",value:o}),this._param.setValueAtTime(o,s),this}getValueAtTime(t){const e=Math.max(this.toSeconds(t),0),s=this._events.getAfter(e),o=this._events.get(e);let c=this._initialValue;if(null===o)c=this._initialValue;else if("setTargetAtTime"!==o.type||null!==s&&"setValueAtTime"!==s.type)if(null===s)c=o.value;else if("linearRampToValueAtTime"===s.type||"exponentialRampToValueAtTime"===s.type){let l=o.value;if("setTargetAtTime"===o.type){const d=this._events.getBefore(o.time);l=null===d?this._initialValue:d.value}c="linearRampToValueAtTime"===s.type?this._linearInterpolate(o.time,l,s.time,s.value,e):this._exponentialInterpolate(o.time,l,s.time,s.value,e)}else c=o.value;else{const l=this._events.getBefore(o.time);let d;d=null===l?this._initialValue:l.value,"setTargetAtTime"===o.type&&(c=this._exponentialApproach(o.time,d,o.value,o.constant,e))}return this._toType(c)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){const s=this._fromType(t),o=this.toSeconds(e);return dt(isFinite(s)&&isFinite(o),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(s),this._events.add({time:o,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",t,o),this._param.linearRampToValueAtTime(s,o),this}exponentialRampToValueAtTime(t,e){let s=this._fromType(t);s=Rn(s,0)?this._minOutput:s,this._assertRange(s);const o=this.toSeconds(e);return dt(isFinite(s)&&isFinite(o),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:o,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",t,o),this._param.exponentialRampToValueAtTime(s,o),this}exponentialRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(t,s+this.toSeconds(e)),this}linearRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(t,s+this.toSeconds(e)),this}targetRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(t,s,e),this}exponentialApproachValueAtTime(t,e,s){e=this.toSeconds(e),s=this.toSeconds(s);const o=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(t,e,o),this.cancelAndHoldAtTime(e+.9*s),this.linearRampToValueAtTime(t,e+s),this}setTargetAtTime(t,e,s){const o=this._fromType(t);dt(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const c=this.toSeconds(e);return this._assertRange(o),dt(isFinite(o)&&isFinite(c),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:s,time:c,type:"setTargetAtTime",value:o}),this.log(this.units,"setTargetAtTime",t,c,s),this._param.setTargetAtTime(o,c,s),this}setValueCurveAtTime(t,e,s,o=1){s=this.toSeconds(s),e=this.toSeconds(e);const c=this._fromType(t[0])*o;this.setValueAtTime(this._toType(c),e);const l=s/(t.length-1);for(let d=1;d<t.length;d++){const f=this._fromType(t[d])*o;this.linearRampToValueAtTime(this._toType(f),e+d*l)}return this}cancelScheduledValues(t){const e=this.toSeconds(t);return dt(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){const e=this.toSeconds(t),s=this._fromType(this.getValueAtTime(e));dt(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+s);const o=this._events.get(e),c=this._events.getAfter(e);return o&&Rn(o.time,e)?c?(this._param.cancelScheduledValues(c.time),this._events.cancel(c.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):c&&(this._param.cancelScheduledValues(c.time),this._events.cancel(c.time),"linearRampToValueAtTime"===c.type?this.linearRampToValueAtTime(this._toType(s),e):"exponentialRampToValueAtTime"===c.type&&this.exponentialRampToValueAtTime(this._toType(s),e)),this._events.add({time:e,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,e),this}rampTo(t,e=.1,s){return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,s):this.linearRampTo(t,e,s),this}apply(t){const e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);const s=this._events.get(e);if(s&&"setTargetAtTime"===s.type){const o=this._events.getAfter(s.time),c=o?o.time:e+2,l=(c-e)/10;for(let d=e;d<c;d+=l)t.linearRampToValueAtTime(this.getValueAtTime(d),d)}return this._events.forEachAfter(this.context.currentTime,o=>{"cancelScheduledValues"===o.type?t.cancelScheduledValues(o.time):"setTargetAtTime"===o.type?t.setTargetAtTime(o.value,o.time,o.constant):t[o.type](o.value,o.time)}),this}setParam(t){dt(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,s,o,c){return s+(e-s)*Math.exp(-(c-t)/o)}_linearInterpolate(t,e,s,o,c){return e+(c-t)/(s-t)*(o-e)}_exponentialInterpolate(t,e,s,o,c){return e*Math.pow(o/e,(c-t)/(s-t))}}class Et extends Fe{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return St(this.input)?Es(this.input)||this.input instanceof te?1:this.input.numberOfInputs:0}get numberOfOutputs(){return St(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return St(t)&&(t instanceof Et||me(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(s=>{s.channelCount=t.channelCount,s.channelCountMode=t.channelCountMode,s.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){const t=this._getInternalNodes();dt(t.length>0,"ToneAudioNode does not have any internal nodes");const e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,s=0){return us(this,t,e,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return qo("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,s=0){return function Rh(i,t,e=0,s=0){if(St(t))for(;t instanceof Et;)t=t.input;for(;!me(i);)St(i.output)&&(i=i.output);Es(t)?i.disconnect(t,e):me(t)?i.disconnect(t,e,s):i.disconnect()}(this,t,e,s),this}chain(...t){return Rc(this,...t),this}fan(...t){return t.forEach(e=>this.connect(e)),this}dispose(){return super.dispose(),St(this.input)&&(this.input instanceof Et?this.input.dispose():me(this.input)&&this.input.disconnect()),St(this.output)&&(this.output instanceof Et?this.output.dispose():me(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Rc(...i){const t=i.shift();i.reduce((e,s)=>(e instanceof Et?e.connect(s):me(e)&&us(e,s),s),t)}function us(i,t,e=0,s=0){for(dt(St(i),"Cannot connect from undefined node"),dt(St(t),"Cannot connect to undefined node"),(t instanceof Et||me(t))&&dt(t.numberOfInputs>0,"Cannot connect to node with no inputs"),dt(i.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof Et||t instanceof te;)St(t.input)&&(t=t.input);for(;i instanceof Et;)St(i.output)&&(i=i.output);Es(t)?i.connect(t,e):i.connect(t,e,s)}class He extends Et{constructor(){super(H(He.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const t=H(He.getDefaults(),arguments,["gain","units"]);this.gain=new te({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),he(this,"gain")}static getDefaults(){return Object.assign(Et.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Pi extends Et{constructor(t){super(t),this.onended=jt,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new He({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(e){const s=this.toSeconds(e);return-1!==this._startTime&&s>=this._startTime&&(-1===this._stopTime||s<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(Et.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:jt})}_startGain(t,e=1){dt(-1===this._startTime,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=t+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+s):this._gainNode.gain.exponentialApproachValueAtTime(e,t,s)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){dt(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();const e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.context.currentTime),e>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s="exponential"===this._curve?2*e:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==jt&&(this.onended(this),this.onended=jt,!this.context.isOffline)){const t=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(t):setTimeout(t,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),dt(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class Ho extends Pi{constructor(){super(H(Ho.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const t=H(Ho.getDefaults(),arguments,["offset"]);us(this._source,this._gainNode),this.offset=new te({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(Pi.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Te extends Et{constructor(){super(H(Te.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const t=H(Te.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Ho({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(Et.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,s=0){return Vc(this,t,e,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,s){return this._param.exponentialRampTo(t,e,s),this}linearRampTo(t,e,s){return this._param.linearRampTo(t,e,s),this}targetRampTo(t,e,s){return this._param.targetRampTo(t,e,s),this}exponentialApproachValueAtTime(t,e,s){return this._param.exponentialApproachValueAtTime(t,e,s),this}setTargetAtTime(t,e,s){return this._param.setTargetAtTime(t,e,s),this}setValueCurveAtTime(t,e,s,o){return this._param.setValueCurveAtTime(t,e,s,o),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,s){return this._param.rampTo(t,e,s),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function Vc(i,t,e,s){(t instanceof te||Es(t)||t instanceof Te&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof Te&&(t.overridden=!0)),us(i,t,e,s)}class Mr extends te{constructor(){super(H(Mr.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Vn(1/0),this._multiplier=1;const t=H(Mr.getDefaults(),arguments,["value"]);this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(te.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,s){e=this.toSeconds(e),this.setRampPoint(e);const o=this._fromType(t),c=this._events.get(e),l=Math.round(Math.max(1/s,1));for(let d=0;d<=l;d++){const f=s*d+e,p=this._exponentialApproach(c.time,c.value,o,s,f);this.linearRampToValueAtTime(this._toType(p),f)}return this}setValueAtTime(t,e){const s=this.toSeconds(e);super.setValueAtTime(t,e);const o=this._events.get(s),c=this._events.previousEvent(o),l=this._getTicksUntilEvent(c,s);return o.ticks=Math.max(l,0),this}linearRampToValueAtTime(t,e){const s=this.toSeconds(e);super.linearRampToValueAtTime(t,e);const o=this._events.get(s),c=this._events.previousEvent(o),l=this._getTicksUntilEvent(c,s);return o.ticks=Math.max(l,0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);const s=this._fromType(t),o=this._events.get(e),c=Math.round(Math.max(10*(e-o.time),1)),l=(e-o.time)/c;for(let d=0;d<=c;d++){const f=l*d+o.time,p=this._exponentialInterpolate(o.time,o.value,e,s,f);this.linearRampToValueAtTime(this._toType(p),f)}return this}_getTicksUntilEvent(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(an(t.ticks)){const l=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(l,t.time)}const s=this._fromType(this.getValueAtTime(t.time));let o=this._fromType(this.getValueAtTime(e));const c=this._events.get(e);return c&&c.time===e&&"setValueAtTime"===c.type&&(o=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(s+o)+t.ticks}getTicksAtTime(t){const e=this.toSeconds(t),s=this._events.get(e);return Math.max(this._getTicksUntilEvent(s,e),0)}getDurationOfTicks(t,e){const s=this.toSeconds(e),o=this.getTicksAtTime(e);return this.getTimeOfTick(o+t)-s}getTimeOfTick(t){const e=this._events.get(t,"ticks"),s=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&s&&"linearRampToValueAtTime"===s.type&&e.value!==s.value){const o=this._fromType(this.getValueAtTime(e.time)),l=(this._fromType(this.getValueAtTime(s.time))-o)/(s.time-e.time),d=Math.sqrt(Math.pow(o,2)-2*l*(e.ticks-t)),f=(-o+d)/l;return(f>0?f:(-o-d)/l)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){const s=this.toSeconds(e),o=this.toSeconds(t),c=this.getTicksAtTime(s);return this.getTicksAtTime(s+o)-c}_fromType(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class kr extends Te{constructor(){super(H(kr.getDefaults(),arguments,["value"])),this.name="TickSignal";const t=H(kr.getDefaults(),arguments,["value"]);this.input=this._param=new Mr({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(Te.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class Yo extends Fe{constructor(){super(H(Yo.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new Or,this._tickOffset=new Vn;const t=H(Yo.getDefaults(),arguments,["frequency"]);this.frequency=new kr({context:this.context,units:t.units,value:t.frequency}),he(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Fe.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){const s=this.toSeconds(t);return"started"!==this._state.getValueAtTime(s)&&(this._state.setStateAtTime("started",s),St(e)&&this.setTicksAtTime(e,s)),this}stop(t){const e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){const s=this._state.get(e);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&this._state.setStateAtTime("paused",e),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this}getTicksAtTime(t){const e=this.toSeconds(t),s=this._state.getLastState("stopped",e),o={state:"paused",time:e};this._state.add(o);let c=s,l=0;return this._state.forEachBetween(s.time,e+this.sampleTime,d=>{let f=c.time;const p=this._tickOffset.get(d.time);p&&p.time>=c.time&&(l=p.ticks,f=p.time),"started"===c.state&&"started"!==d.state&&(l+=this.frequency.getTicksAtTime(d.time)-this.frequency.getTicksAtTime(f)),c=d}),this._state.remove(o),l}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const e=this.now(),s=this.frequency.timeToTicks(t,e);this.setTicksAtTime(s,e)}getSecondsAtTime(t){t=this.toSeconds(t);const e=this._state.getLastState("stopped",t),s={state:"paused",time:t};this._state.add(s);let o=e,c=0;return this._state.forEachBetween(e.time,t+this.sampleTime,l=>{let d=o.time;const f=this._tickOffset.get(l.time);f&&f.time>=o.time&&(c=f.seconds,d=f.time),"started"===o.state&&"started"!==l.state&&(c+=l.time-d),o=l}),this._state.remove(s),c}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){const s=this._tickOffset.get(e),o=this._state.get(e),c=Math.max(s.time,o.time),l=this.frequency.getTicksAtTime(c)+t-s.ticks;return this.frequency.getTimeOfTick(l)}forEachTickBetween(t,e,s){let o=this._state.get(t);this._state.forEachBetween(t,e,l=>{o&&"started"===o.state&&"started"!==l.state&&this.forEachTickBetween(Math.max(o.time,t),l.time-this.sampleTime,s),o=l});let c=null;if(o&&"started"===o.state){const l=Math.max(o.time,t),d=this.frequency.getTicksAtTime(l),p=d-this.frequency.getTicksAtTime(o.time);let g=Math.ceil(p)-p;g=Rn(g,1)?0:g;let y=this.frequency.getTimeOfTick(d+g);for(;y<e;){try{s(y,Math.round(this.getTicksAtTime(y)))}catch(x){c=x;break}y+=this.frequency.getDurationOfTicks(1,y)}}if(c)throw c;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class ci extends Fe{constructor(){super(H(ci.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=jt,this._lastUpdate=0,this._state=new Or("stopped"),this._boundLoop=this._loop.bind(this);const t=H(ci.getDefaults(),arguments,["callback","frequency"]);this.callback=t.callback,this._tickSource=new Yo({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,he(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Fe.getDefaults(),{callback:jt,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){Io(this.context);const s=this.toSeconds(t);return this.log("start",s),"started"!==this._state.getValueAtTime(s)&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,e),s<this._lastUpdate&&this.emit("start",s,e)),this}stop(t){const e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){const s=this.toSeconds(e),o=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(o+t,s)}_loop(){const t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,s=>{switch(s.state){case"started":const o=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,o);break;case"stopped":0!==s.time&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time)}}),this._tickSource.forEachTickBetween(t,e,(s,o)=>{this.callback(s,o)}))}getStateAtTime(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Tr.mixin(ci);class Nr extends En{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=H(Nr.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(e=>{this._loadingCount++,this.add(e,t.urls[e],this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:jt,onload:jt,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return dt(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,0===this._loadingCount&&t&&t()}get loaded(){return Array.from(this._buffers).every(([t,e])=>e.loaded)}add(t,e,s=jt,o=jt){return Qn(e)?this._buffers.set(t.toString(),new os(this.baseUrl+e,s,o)):this._buffers.set(t.toString(),new os(e,s,o)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}}class ee extends nn{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class ls extends Fe{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Vn,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=t;){const e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Wo(i=>{i.draw=new ls({context:i})}),Sr(i=>{i.draw.dispose()});class ui extends En{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){dt(St(t.time),"Events must have a time property"),dt(St(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new Rp(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(null!==this._root){const e=[];this._root.search(t.time,e);for(const s of e)if(s.event===t){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,e=>this.remove(e)),this}_setRoot(t){this._root=t,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{let s,o=null;if(t.getBalance()>0)if(null===t.left.right)s=t.left,s.right=t.right,o=s;else{for(s=t.left.right;null!==s.right;)s=s.right;s.parent&&(s.parent.right=s.left,o=s.parent,s.left=t.left,s.right=t.right)}else if(null===t.right.left)s=t.right,s.left=t.left,o=s;else{for(s=t.right.left;null!==s.left;)s=s.left;s.parent&&(s.parent.left=s.right,o=s.parent,s.left=t.left,s.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=s:t.parent.right=s:this._setRoot(s),o&&this._rebalance(o)}t.dispose()}_rotateLeft(t){const e=t.parent,s=t.isLeftChild(),o=t.right;o&&(t.right=o.left,o.left=t),null!==e?s?e.left=o:e.right=o:this._setRoot(o)}_rotateRight(t){const e=t.parent,s=t.isLeftChild(),o=t.left;o&&(t.left=o.right,o.right=t),null!==e?s?e.left=o:e.right=o:this._setRoot(o)}_rebalance(t){const e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(null!==this._root){const e=[];if(this._root.search(t,e),e.length>0){let s=e[0];for(let o=1;o<e.length;o++)e[o].low>s.low&&(s=e[o]);return s.event}}return null}forEach(t){if(null!==this._root){const e=[];this._root.traverse(s=>e.push(s)),e.forEach(s=>{s.event&&t(s.event)})}return this}forEachAtTime(t,e){if(null!==this._root){const s=[];this._root.search(t,s),s.forEach(o=>{o.event&&e(o.event)})}return this}forEachFrom(t,e){if(null!==this._root){const s=[];this._root.searchAfter(t,s),s.forEach(o=>{o.event&&e(o.event)})}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse(t=>t.dispose()),this._root=null,this}}class Rp{constructor(t,e,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),!(this.low>t)&&null!==this.right&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)}traverse(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)}updateHeight(){this.height=null!==this.left&&null!==this.right?Math.max(this.left.height,this.right.height)+1:null!==this.right?this.right.height+1:null!==this.left?this.left.height+1:0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Vs extends Et{constructor(){super(H(Vs.getDefaults(),arguments,["volume"])),this.name="Volume";const t=H(Vs.getDefaults(),arguments,["volume"]);this.input=this.output=new He({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,he(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(Et.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Jo extends Et{constructor(){super(H(Jo.getDefaults(),arguments)),this.name="Destination",this.input=new Vs({context:this.context}),this.output=new He({context:this.context}),this.volume=this.input.volume;const t=H(Jo.getDefaults(),arguments);Rc(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(Et.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),Rc(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Wo(i=>{i.destination=new Jo({context:i})}),Sr(i=>{i.destination.dispose()});class Vp extends En{constructor(t){super(),this.name="TimelineValue",this._timeline=new Vn({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){const e=this._timeline.get(t);return e?e.value:this._initialValue}}let Ko=(()=>{class i{constructor(e,s){this.id=i._eventId++;const o=Object.assign(i.getDefaults(),s);this.transport=e,this.callback=o.callback,this._once=o.once,this.time=o.time}static getDefaults(){return{callback:jt,once:!1,time:0}}invoke(e){this.callback&&(this.callback(e),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}return i._eventId=0,i})();class Ic extends Ko{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(Ic.getDefaults(),e);this.duration=new ee(t.context,s.duration).valueOf(),this._interval=new ee(t.context,s.interval).valueOf(),this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Ko.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvents(t){const e=this.transport.getTicksAtTime(t);e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new ee(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const e=this.transport.getTicksAtTime(t);e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new ee(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new ee(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class Fr extends Fe{constructor(){super(H(Fr.getDefaults(),arguments)),this.name="Transport",this._loop=new Vp(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Vn,this._repeatedEvents=new ui,this._syncedSignals=[],this._swingAmount=0;const t=H(Fr.getDefaults(),arguments);this._ppq=t.ppq,this._clock=new ci({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),he(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(Fe.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!=0&&e%(2*this._swingTicks)!=0){const o=Math.sin(e%(2*this._swingTicks)/(2*this._swingTicks)*Math.PI)*this._swingAmount;t+=new ee(this.context,2*this._swingTicks/3).toSeconds()*o}this._timeline.forEachAtTime(e,s=>s.invoke(t))}schedule(t,e){const s=new Ko(this,{callback:t,time:new nn(this.context,e).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(t,e,s,o=1/0){const c=new Ic(this,{callback:t,duration:new bn(this.context,o).toTicks(),interval:new bn(this.context,e).toTicks(),time:new nn(this.context,s).toTicks()});return this._addEvent(c,this._repeatedEvents)}scheduleOnce(t,e){const s=new Ko(this,{callback:t,once:!0,time:new nn(this.context,e).toTicks()});return this._addEvent(s,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){const e=this.toTicks(t);return this._timeline.forEachFrom(e,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(e,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(t,e)=>{e=new ee(this.context,e).toSeconds(),this.emit("start",t,e)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){let s;return St(e)&&(s=this.toTicks(e)),this._clock.start(t,s),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){_n(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new bn(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new bn(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new ee(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),e=this._clock.getTicksAtTime(t);return new ee(this.context,e).toBarsBeatsSixteenths()}set position(t){const e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){const e=this.now(),s=this._clock.frequency.timeToTicks(t,e);this.ticks=s}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const e=this.now();if("started"===this.state){const s=this._clock.getTicksAtTime(e),c=e+this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,e);this.emit("stop",c),this._clock.setTicksAtTime(t,c),this.emit("start",c,this._clock.getSecondsAtTime(c))}else this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return Math.round(this._clock.getTicksAtTime(t))}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),"started"!==this.state)return 0;{const e=this.now(),s=this.getTicksAtTime(e);return this._clock.nextTickTime(t-s%t,e)}}syncSignal(t,e){if(!e){const o=this.now();if(0!==t.getValueAtTime(o)){const l=1/(60/this.bpm.getValueAtTime(o)/this.PPQ);e=t.getValueAtTime(o)/l}else e=0}const s=new He(e);return this.bpm.connect(s),s.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:s,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){const s=this._syncedSignals[e];s.signal===t&&(s.ratio.dispose(),s.signal.value=s.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Eh(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Tr.mixin(Fr),Wo(i=>{i.transport=new Fr({context:i})}),Sr(i=>{i.transport.dispose()});class wn extends Et{constructor(t){super(t),this.input=void 0,this._state=new Or("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=jt,this._syncedStop=jt,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Vs({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,he(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(Et.getDefaults(),{mute:!1,onstop:jt,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,s){let o=an(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(o=this._clampToCurrentTime(o),this._synced||"started"!==this._state.getValueAtTime(o))if(this.log("start",o),this._state.setStateAtTime("started",o),this._synced){const c=this._state.get(o);c&&(c.offset=this.toSeconds(Xn(e,0)),c.duration=s?this.toSeconds(s):void 0);const l=this.context.transport.schedule(d=>{this._start(d,e,s)},o);this._scheduled.push(l),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>o&&this._syncedStart(this.now(),this.context.transport.seconds)}else Io(this.context),this._start(o,e,s);else dt(br(o,this._state.get(o).time),"Start time must be strictly greater than previous start time"),this._state.cancel(o),this._state.setStateAtTime("started",o),this.log("restart",o),this.restart(o,e,s);return this}stop(t){let e=an(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),"started"===this._state.getValueAtTime(e)||St(this._state.getNextState("started",e))){if(this.log("stop",e),this._synced){const s=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(s)}else this._stop(e);this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,s){return t=this.toSeconds(t),"started"===this._state.getValueAtTime(t)&&(this._state.cancel(t),this._restart(t,e,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(e>0){const s=this._state.get(e);if(s&&"started"===s.state&&s.time!==e){const o=e-this.toSeconds(s.time);let c;s.duration&&(c=this.toSeconds(s.duration)-o),this._start(t,this.toSeconds(s.offset)+o,c)}}},this._syncedStop=t=>{const e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));"started"===this._state.getValueAtTime(e)&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=jt,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Er extends Pi{constructor(){super(H(Er.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const t=H(Er.getDefaults(),arguments,["url","onload"]);us(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new te({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new os(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Pi.getDefaults(),{url:new os,loop:!1,loopEnd:0,loopStart:0,onload:jt,onerror:jt,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,s,o=1){dt(this.buffer.loaded,"buffer is either not set or not loaded");const c=this.toSeconds(t);this._startGain(c,o),e=Xn(e,this.loop?this.loopStart:0);let l=Math.max(this.toSeconds(e),0);if(this.loop){const d=this.toSeconds(this.loopEnd)||this.buffer.duration,f=this.toSeconds(this.loopStart),p=d-f;Bo(l,d)&&(l=(l-f)%p+f),Rn(l,this.buffer.duration)&&(l=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,wr(l,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(c,l)),St(s)){let d=this.toSeconds(s);d=Math.max(d,0),this.stop(c+d)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function Is(i,t){return(0,Lt.mG)(this,void 0,void 0,function*(){const e=t/i.context.sampleRate,s=new kc(1,e,i.context.sampleRate);return new i.constructor(Object.assign(i.get(),{frequency:2/e,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class ta extends Pi{constructor(){super(H(ta.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const t=H(ta.getDefaults(),arguments,["frequency","type"]);us(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new te({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new te({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),he(this,["frequency","detune"])}static getDefaults(){return Object.assign(Pi.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}let In=(()=>{class i extends wn{constructor(){super(H(i.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=H(i.getDefaults(),arguments,["frequency","type"]);this.frequency=new Te({context:this.context,units:"frequency",value:e.frequency}),he(this,"frequency"),this.detune=new Te({context:this.context,units:"cents",value:e.detune}),he(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&"custom"!==e.type&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(wn.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const s=this.toSeconds(e),o=new ta({context:this.context,onended:()=>this.onstop(this)});this._oscillator=o,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(s)}_stop(e){const s=this.toSeconds(e);this._oscillator&&this._oscillator.stop(s)}_restart(e){const s=this.toSeconds(e);return this.log("restart",s),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(s),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type)return i._periodicWaveCache.find(s=>s.phase===this._phase&&function kh(i,t){return i.length===t.length&&i.every((e,s)=>t[s]===e)}(s.partials,this._partials));{const e=i._periodicWaveCache.find(s=>s.type===this._type&&s.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const s=-1!==["sine","square","sawtooth","triangle"].indexOf(e);if(0===this._phase&&s)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=e);else{const o=this._getCachedPeriodicWave();if(St(o)){const{partials:c,wave:l}=o;this._wave=l,this._partials=c,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{const[c,l]=this._getRealImaginary(e,this._phase),d=this.context.createPeriodicWave(c,l);this._wave=d,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),i._periodicWaveCache.push({imag:l,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:c,type:this._type,wave:this._wave}),i._periodicWaveCache.length>100&&i._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.type=this.partialCount&&"custom"!==this._type&&"custom"!==e?e+this.partialCount:e}get partialCount(){return this._partialCount}set partialCount(e){en(e,0);let s=this._type;const o=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(o&&(s=o[1]),"custom"!==this._type)this.type=0===e?s:s+e.toString();else{const c=new Float32Array(e);this._partials.forEach((l,d)=>c[d]=l),this._partials=Array.from(c),this.type=this._type}}_getRealImaginary(e,s){let c=2048;const l=new Float32Array(c),d=new Float32Array(c);let f=1;if("custom"===e){if(f=this._partials.length+1,this._partialCount=this._partials.length,c=f,0===this._partials.length)return[l,d]}else{const p=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);p?(f=parseInt(p[2],10)+1,this._partialCount=parseInt(p[2],10),e=p[1],f=Math.max(f,2),c=f):this._partialCount=0,this._partials=[]}for(let p=1;p<c;++p){const g=2/(p*Math.PI);let y;switch(e){case"sine":y=p<=f?1:0,this._partials[p-1]=y;break;case"square":y=1&p?2*g:0,this._partials[p-1]=y;break;case"sawtooth":y=g*(1&p?1:-1),this._partials[p-1]=y;break;case"triangle":y=1&p?g*g*2*(p-1>>1&1?-1:1):0,this._partials[p-1]=y;break;case"custom":y=this._partials[p-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}0!==y?(l[p]=-y*Math.sin(s*p),d[p]=y*Math.cos(s*p)):(l[p]=0,d[p]=0)}return[l,d]}_inverseFFT(e,s,o){let c=0;const l=e.length;for(let d=0;d<l;d++)c+=e[d]*Math.cos(d*o)+s[d]*Math.sin(d*o);return c}getInitialValue(){const[e,s]=this._getRealImaginary(this._type,0);let o=0;const c=2*Math.PI;for(let d=0;d<32;d++)o=Math.max(this._inverseFFT(e,s,d/32*c),o);return function Go(i,t,e){return Math.max(Math.min(i,e),t)}(-this._inverseFFT(e,s,this._phase)/o,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return(0,Lt.mG)(this,void 0,void 0,function*(){return Is(this,e)})}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}return i._periodicWaveCache=[],i})();class ea extends Et{constructor(){super(Object.assign(H(ea.getDefaults(),arguments,["context"])))}connect(t,e=0,s=0){return Vc(this,t,e,s),this}}class Bi extends ea{constructor(){super(Object.assign(H(Bi.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const t=H(Bi.getDefaults(),arguments,["mapping","length"]);_n(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):function Tc(i){return"function"==typeof i}(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(Te.getDefaults(),{length:1024})}setMap(t,e=1024){const s=new Float32Array(e);for(let o=0,c=e;o<c;o++)s[o]=t(o/(c-1)*2-1,o);return this.curve=s,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){dt(["none","2x","4x"].some(s=>s.includes(t)),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Ip extends ea{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Bi({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class li extends Te{constructor(){super(Object.assign(H(li.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const t=H(li.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new He({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Te.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Rr extends wn{constructor(){super(H(Rr.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new Ip({context:this.context}),this._modulationNode=new He({context:this.context});const t=H(Rr.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new In({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new In({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new li({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),he(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(In.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return(0,Lt.mG)(this,void 0,void 0,function*(){return Is(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Vr extends wn{constructor(){super(H(Vr.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new He({context:this.context,gain:0});const t=H(Vr.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new In({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new Te({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new In({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new li({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new li({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),he(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(In.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return(0,Lt.mG)(this,void 0,void 0,function*(){return Is(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Gi extends wn{constructor(){super(H(Gi.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new He({context:this.context,gain:0}),this._thresh=new Bi({context:this.context,mapping:e=>e<=0?-1:1});const t=H(Gi.getDefaults(),arguments,["frequency","width"]);this.width=new Te({context:this.context,units:"audioRange",value:t.width}),this._triangle=new In({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),he(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(wn.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(t=1024){return(0,Lt.mG)(this,void 0,void 0,function*(){return Is(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Ir extends wn{constructor(){super(H(Ir.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const t=H(Ir.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new Te({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Te({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,he(this,["frequency","detune"])}static getDefaults(){return Object.assign(In.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(e=>e.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(e=>e.stop(t))}_restart(t){this._forEach(e=>e.restart(t))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach(e=>e.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const e=-t/2,s=t/(this._oscillators.length-1);this._forEach((o,c)=>o.detune.value=e+s*c)}}get count(){return this._oscillators.length}set count(t){if(en(t,1),this._oscillators.length!==t){this._forEach(e=>e.dispose()),this._oscillators=[];for(let e=0;e<t;e++){const s=new In({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:0===e?()=>this.onstop(this):jt});"custom"===this.type&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[e]=s}this.spread=this._spread,"started"===this.state&&this._forEach(e=>e.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((e,s)=>e.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(e=>e.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(e=>e.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(e=>e.partialCount=t),this._type=this._oscillators[0].type}asArray(t=1024){return(0,Lt.mG)(this,void 0,void 0,function*(){return Is(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}class Ye extends wn{constructor(){super(H(Ye.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new li({context:this.context,value:2});const t=H(Ye.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new Gi({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new In({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),he(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(wn.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(t=1024){return(0,Lt.mG)(this,void 0,void 0,function*(){return Is(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Vh={am:Rr,fat:Ir,fm:Vr,oscillator:In,pulse:Gi,pwm:Ye};class Pr extends wn{constructor(){super(H(Pr.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const t=H(Pr.getDefaults(),arguments,["frequency","type"]);this.frequency=new Te({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Te({context:this.context,units:"cents",value:t.detune}),he(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(In.getDefaults(),Vr.getDefaults(),Rr.getDefaults(),Ir.getDefaults(),Gi.getDefaults(),Ye.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(e=>this._sourceType===e)&&(t=this._sourceType),t+this._oscillator.type}set type(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const e=Vh[t],s=this.now();if(this._oscillator){const o=this._oscillator;o.stop(s),this.context.setTimeout(()=>o.dispose(),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")}_getOscType(t,e){return t instanceof Vh[e]}get baseType(){return this._oscillator.baseType}set baseType(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&"pulse"!==t&&"pwm"!==t&&(this._oscillator.baseType=t)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(t){this._getOscType(this._oscillator,"fat")&&Ze(t)&&(this._oscillator.count=t)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(t){this._getOscType(this._oscillator,"fat")&&Ze(t)&&(this._oscillator.spread=t)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Qn(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(t=1024){return(0,Lt.mG)(this,void 0,void 0,function*(){return Is(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function qh(i,t=1/0){const e=new WeakMap;return function(s,o){Reflect.defineProperty(s,o,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(c){en(c,i,t),e.set(this,c)}})}}function bs(i,t=1/0){const e=new WeakMap;return function(s,o){Reflect.defineProperty(s,o,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(c){en(this.toSeconds(c),i,t),e.set(this,c)}})}}class hi extends wn{constructor(){super(H(hi.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const t=H(hi.getDefaults(),arguments,["url","onload"]);this._buffer=new os({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(wn.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:jt,onerror:jt,playbackRate:1,reverse:!1})}load(t){return(0,Lt.mG)(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}_onload(t=jt){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),0===this._activeSources.size&&!this._synced&&"started"===this._state.getValueAtTime(this.now())&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,s){return super.start(t,e,s),this}_start(t,e,s){e=Xn(e,this._loop?this._loopStart:0);const o=this.toSeconds(e),c=s;s=Xn(s,Math.max(this._buffer.duration-o,0));let l=this.toSeconds(s);l/=this._playbackRate,t=this.toSeconds(t);const d=new Er({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(t+l),this._state.setStateAtTime("stopped",t+l,{implicitEnd:!0})),this._activeSources.add(d),this._loop&&an(c)?d.start(t,o):d.start(t,o,l-this.toSeconds(this.fadeOut))}_stop(t){const e=this.toSeconds(t);this._activeSources.forEach(s=>s.stop(e))}restart(t,e,s){return super.restart(t,e,s),this}_restart(t,e,s){this._stop(t),this._start(t,e,s)}seek(t,e){const s=this.toSeconds(e);if("started"===this._state.getValueAtTime(s)){const o=this.toSeconds(t);this._stop(s),this._start(s,o)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&en(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&en(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(e=>{e.loop=t}),t)){const e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const e=this.now(),s=this._state.getNextState("stopped",e);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(o=>o.cancelStop())),this._activeSources.forEach(o=>{o.playbackRate.setValueAtTime(t,e)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}(0,Lt.gn)([bs(0)],hi.prototype,"fadeIn",void 0),(0,Lt.gn)([bs(0)],hi.prototype,"fadeOut",void 0);class ws extends Et{constructor(){super(H(ws.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new Te({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const t=H(ws.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(Et.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(Qn(t))return t;{let s;for(s in sa)if(sa[s][e]===t)return s;return t}}_setCurve(t,e,s){if(Qn(s)&&Reflect.has(sa,s)){const o=sa[s];Fs(o)?"_decayCurve"!==t&&(this[t]=o[e]):this[t]=o}else{if(!_n(s)||"_decayCurve"===t)throw new Error("Envelope: invalid curve: "+s);this[t]=s}}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._decayCurve}set decayCurve(t){dt(["linear","exponential"].some(e=>e===t),`Invalid envelope curve: ${t}`),this._decayCurve=t}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);let o=this.toSeconds(this.attack);const c=this.toSeconds(this.decay),l=this.getValueAtTime(t);if(l>0&&(o=(1-l)/(1/o)),o<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,o,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,o,t);else{this._sig.cancelAndHoldAtTime(t);let d=this._attackCurve;for(let f=1;f<d.length;f++)if(d[f-1]<=l&&l<=d[f]){d=this._attackCurve.slice(f),d[0]=l;break}this._sig.setValueCurveAtTime(d,t,o,e)}if(c&&this.sustain<1){const d=e*this.sustain,f=t+o;this.log("decay",f),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(d,c+f):this._sig.exponentialApproachValueAtTime(d,f,c)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const e=this.getValueAtTime(t);if(e>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,t):"linear"===this._releaseCurve?this._sig.linearRampTo(0,s,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,s,t):(dt(_n(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,s,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,s=1){return e=this.toSeconds(e),this.triggerAttack(e,s),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,s=0){return Vc(this,t,e,s),this}asArray(t=1024){return(0,Lt.mG)(this,void 0,void 0,function*(){const e=t/this.context.sampleRate,s=new kc(1,e,this.context.sampleRate),o=this.toSeconds(this.attack)+this.toSeconds(this.decay),c=o+this.toSeconds(this.release),l=.1*c,d=c+l,f=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/d,decay:e*this.toSeconds(this.decay)/d,release:e*this.toSeconds(this.release)/d,context:s}));return f._sig.toDestination(),f.triggerAttackRelease(e*(o+l)/d,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}(0,Lt.gn)([bs(0)],ws.prototype,"attack",void 0),(0,Lt.gn)([bs(0)],ws.prototype,"decay",void 0),(0,Lt.gn)([qh(0,1)],ws.prototype,"sustain",void 0),(0,Lt.gn)([bs(0)],ws.prototype,"release",void 0);const sa=(()=>{let t,e;const s=[];for(t=0;t<128;t++)s[t]=Math.sin(t/127*(Math.PI/2));const o=[];for(t=0;t<127;t++){e=t/127;const x=Math.sin(e*(2*Math.PI)*6.4-Math.PI/2)+1;o[t]=x/10+.83*e}o[127]=1;const l=[];for(t=0;t<128;t++)l[t]=Math.ceil(t/127*5)/5;const f=[];for(t=0;t<128;t++)e=t/127,f[t]=.5*(1-Math.cos(Math.PI*e));const p=[];for(t=0;t<128;t++){e=t/127;const x=4*Math.pow(e,3)+.2,A=Math.cos(x*Math.PI*2*e);p[t]=Math.abs(A*(1-e))}function g(x){const A=new Array(x.length);for(let w=0;w<x.length;w++)A[w]=1-x[w];return A}return{bounce:{In:g(p),Out:p},cosine:{In:s,Out:function y(x){return x.slice(0).reverse()}(s)},exponential:"exponential",linear:"linear",ripple:{In:o,Out:g(o)},sine:{In:f,Out:g(f)},step:{In:l,Out:g(l)}}})();class di extends Et{constructor(){super(H(di.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const t=H(di.getDefaults(),arguments);this._volume=this.output=new Vs({context:this.context,volume:t.volume}),this.volume=this._volume.volume,he(this,"volume")}static getDefaults(){return Object.assign(Et.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){const s=this["_original_"+t]=this[t];this[t]=(...o)=>{const l=this.context.transport.schedule(d=>{o[e]=d,s.apply(this,o)},o[e]);this._scheduledEvents.push(l)}}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(t,e,s,o){const c=this.toSeconds(s),l=this.toSeconds(e);return this.triggerAttack(t,c,o),this.triggerRelease(c+l),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class fi extends di{constructor(){super(H(fi.getDefaults(),arguments));const t=H(fi.getDefaults(),arguments);this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(di.getDefaults(),{detune:0,onsilence:jt,portamento:0})}triggerAttack(t,e,s=1){this.log("triggerAttack",t,e,s);const o=this.toSeconds(e);return this._triggerEnvelopeAttack(o,s),this.setNote(t,o),this}triggerRelease(t){this.log("triggerRelease",t);const e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){const s=this.toSeconds(e),o=t instanceof cn?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const c=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(o,c,s)}else this.frequency.setValueAtTime(o,s);return this}}(0,Lt.gn)([bs(0)],fi.prototype,"portamento",void 0);class Zc extends ws{constructor(){super(H(Zc.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new He({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class qr extends fi{constructor(){super(H(qr.getDefaults(),arguments)),this.name="Synth";const t=H(qr.getDefaults(),arguments);this.oscillator=new Pr(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Zc(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),he(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(fi.getDefaults(),{envelope:Object.assign(ai(ws.getDefaults(),Object.keys(Et.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(ai(Pr.getDefaults(),[...Object.keys(wn.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain){const s=this.toSeconds(this.envelope.attack),o=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+s+o)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Br extends qr{constructor(){super(H(Br.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const t=H(Br.getDefaults(),arguments);this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,he(this,["oscillator","envelope"])}static getDefaults(){return $n(fi.getDefaults(),qr.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){const s=this.toSeconds(e),o=this.toFrequency(t instanceof cn?t.toFrequency():t);return this.oscillator.frequency.setValueAtTime(o*this.octaves,s),this.oscillator.frequency.exponentialRampToValueAtTime(o,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}(0,Lt.gn)([qh(0)],Br.prototype,"octaves",void 0),(0,Lt.gn)([bs(0)],Br.prototype,"pitchDecay",void 0);const tu=new Set;function ra(i){tu.add(i)}function Uh(i,t){tu.add(`registerProcessor("${i}", ${t})`)}ra('\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n'),ra("\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n"),ra("\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n"),Uh("feedback-comb-filter",'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');class Wi extends di{constructor(){super(H(Wi.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const t=H(Wi.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),e={};Object.keys(t.urls).forEach(s=>{const o=parseInt(s,10);if(dt(Vi(s)||Ze(o)&&isFinite(o),`url key is neither a note or midi pitch: ${s}`),Vi(s)){const c=new cn(this.context,s).toMidi();e[c]=t.urls[s]}else Ze(o)&&isFinite(o)&&(e[o]=t.urls[o])}),this._buffers=new Nr({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(di.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:jt,onerror:jt,release:.1,urls:{}})}_findClosest(t){let s=0;for(;s<96;){if(this._buffers.has(t+s))return-s;if(this._buffers.has(t-s))return s;s++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,s=1){return this.log("triggerAttack",t,e,s),Array.isArray(t)||(t=[t]),t.forEach(o=>{const c=Le(new cn(this.context,o).toFrequency()),l=Math.round(c),d=c-l,f=this._findClosest(l),g=this._buffers.get(l-f),y=jo(f+d),x=new Er({url:g,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:y}).connect(this.output);x.start(e,0,g.duration/y,s),_n(this._activeSources.get(l))||this._activeSources.set(l,[]),this._activeSources.get(l).push(x),x.onended=()=>{if(this._activeSources&&this._activeSources.has(l)){const A=this._activeSources.get(l),w=A.indexOf(x);-1!==w&&A.splice(w,1)}}}),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach(s=>{const o=new cn(this.context,s).toMidi();if(this._activeSources.has(o)&&this._activeSources.get(o).length){const c=this._activeSources.get(o);e=this.toSeconds(e),c.forEach(l=>{l.stop(e)}),this._activeSources.set(o,[])}}),this}releaseAll(t){const e=this.toSeconds(t);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(e)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,s,o=1){const c=this.toSeconds(s);return this.triggerAttack(t,c,o),_n(e)?(dt(_n(t),"notes must be an array when duration is array"),t.forEach((l,d)=>{const f=e[Math.min(d,e.length-1)];this.triggerRelease(l,c+this.toSeconds(f))})):this.triggerRelease(t,c+this.toSeconds(e)),this}add(t,e,s){if(dt(Vi(t)||isFinite(t),`note must be a pitch or midi: ${t}`),Vi(t)){const o=new cn(this.context,t).toMidi();this._buffers.add(o,e,s)}else this._buffers.add(t,e,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(e=>e.dispose())}),this._activeSources.clear(),this}}(0,Lt.gn)([bs(0)],Wi.prototype,"attack",void 0),(0,Lt.gn)([bs(0)],Wi.prototype,"release",void 0);class pi extends Fe{constructor(){super(H(pi.getDefaults(),arguments,["callback","value"])),this.name="ToneEvent",this._state=new Or("stopped"),this._startOffset=0;const t=H(pi.getDefaults(),arguments,["callback","value"]);this._loop=t.loop,this.callback=t.callback,this.value=t.value,this._loopStart=this.toTicks(t.loopStart),this._loopEnd=this.toTicks(t.loopEnd),this._playbackRate=t.playbackRate,this._probability=t.probability,this._humanize=t.humanize,this.mute=t.mute,this._playbackRate=t.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(Fe.getDefaults(),{callback:jt,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(t=-1){this._state.forEachFrom(t,e=>{let s;if("started"===e.state){-1!==e.id&&this.context.transport.clear(e.id);const o=e.time+Math.round(this.startOffset/this._playbackRate);if(!0===this._loop||Ze(this._loop)&&this._loop>1){s=1/0,Ze(this._loop)&&(s=this._loop*this._getLoopDuration());const c=this._state.getAfter(o);null!==c&&(s=Math.min(s,c.time-o)),s!==1/0&&(this._state.setStateAtTime("stopped",o+s+1,{id:-1}),s=new ee(this.context,s));const l=new ee(this.context,this._getLoopDuration());e.id=this.context.transport.scheduleRepeat(this._tick.bind(this),l,new ee(this.context,o),s)}else e.id=this.context.transport.schedule(this._tick.bind(this),new ee(this.context,o))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t}get probability(){return this._probability}set probability(t){this._probability=t}get humanize(){return this._humanize}set humanize(t){this._humanize=t}start(t){const e=this.toTicks(t);return"stopped"===this._state.getValueAtTime(e)&&(this._state.add({id:-1,state:"started",time:e}),this._rescheduleEvents(e)),this}stop(t){this.cancel(t);const e=this.toTicks(t);if("started"===this._state.getValueAtTime(e)){this._state.setStateAtTime("stopped",e,{id:-1});const s=this._state.getBefore(e);let o=e;null!==s&&(o=s.time),this._rescheduleEvents(o)}return this}cancel(t){t=Xn(t,-1/0);const e=this.toTicks(t);return this._state.forEachFrom(e,s=>{this.context.transport.clear(s.id)}),this._state.cancel(e),this}_tick(t){const e=this.context.transport.getTicksAtTime(t);if(!this.mute&&"started"===this._state.getValueAtTime(e)){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let s=.02;vs(this.humanize)||(s=this.toSeconds(this.humanize)),t+=(2*Math.random()-1)*s}this.callback(t,this.value)}}_getLoopDuration(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)}get loop(){return this._loop}set loop(t){this._loop=t,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._rescheduleEvents()}get loopEnd(){return new ee(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}get loopStart(){return new ee(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const t=this.context.transport.ticks,e=this._state.get(t);if(null!==e&&"started"===e.state){const s=this._getLoopDuration();return(t-e.time)%s/s}return 0}return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class Gr extends pi{constructor(){super(H(Gr.getDefaults(),arguments,["callback","events"])),this.name="Part",this._state=new Or("stopped"),this._events=new Set;const t=H(Gr.getDefaults(),arguments,["callback","events"]);this._state.increasing=!0,t.events.forEach(e=>{_n(e)?this.add(e[0],e[1]):this.add(e)})}static getDefaults(){return Object.assign(pi.getDefaults(),{events:[]})}start(t,e){const s=this.toTicks(t);if("started"!==this._state.getValueAtTime(s)){e=Xn(e,this._loop?this._loopStart:0),e=Xn(e,this._loop?this._loopStart:0);const o=this.toTicks(e);this._state.add({id:-1,offset:o,state:"started",time:s}),this._forEach(c=>{this._startNote(c,s,o)})}return this}_startNote(t,e,s){e-=s,this._loop?t.startOffset>=this._loopStart&&t.startOffset<this._loopEnd?(t.startOffset<s&&(e+=this._getLoopDuration()),t.start(new ee(this.context,e))):t.startOffset<this._loopStart&&t.startOffset>=s&&(t.loop=!1,t.start(new ee(this.context,e))):t.startOffset>=s&&t.start(new ee(this.context,e))}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t,this._forEach(e=>{e.startOffset+=this._startOffset})}stop(t){const e=this.toTicks(t);return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._forEach(s=>{s.stop(t)}),this}at(t,e){const s=new nn(this.context,t).toTicks(),o=new ee(this.context,1).toSeconds(),c=this._events.values();let l=c.next();for(;!l.done;){const d=l.value;if(Math.abs(s-d.startOffset)<o)return St(e)&&(d.value=e),d;l=c.next()}return St(e)?(this.add(t,e),this.at(t)):null}add(t,e){t instanceof Object&&Reflect.has(t,"time")&&(t=(e=t).time);const s=this.toTicks(t);let o;return e instanceof pi?(o=e,o.callback=this._tick.bind(this)):o=new pi({callback:this._tick.bind(this),context:this.context,value:e}),o.startOffset=s,o.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(o),this._restartEvent(o),this}_restartEvent(t){this._state.forEach(e=>{"started"===e.state?this._startNote(t,e.time,e.offset):t.stop(new ee(this.context,e.time))})}remove(t,e){return Fs(t)&&t.hasOwnProperty("time")&&(t=(e=t).time),t=this.toTicks(t),this._events.forEach(s=>{s.startOffset===t&&(an(e)||St(e)&&s.value===e)&&(this._events.delete(s),s.dispose())}),this}clear(){return this._forEach(t=>t.dispose()),this._events.clear(),this}cancel(t){return this._forEach(e=>e.cancel(t)),this._state.cancel(this.toTicks(t)),this}_forEach(t){return this._events&&this._events.forEach(e=>{e instanceof Gr?e._forEach(t):t(e)}),this}_setAll(t,e){this._forEach(s=>{s[t]=e})}_tick(t,e){this.mute||this.callback(t,e)}_testLoopBoundries(t){this._loop&&(t.startOffset<this._loopStart||t.startOffset>=this._loopEnd)?t.cancel(0):"stopped"===t.state&&this._restartEvent(t)}get probability(){return this._probability}set probability(t){this._probability=t,this._setAll("probability",t)}get humanize(){return this._humanize}set humanize(t){this._humanize=t,this._setAll("humanize",t)}get loop(){return this._loop}set loop(t){this._loop=t,this._forEach(e=>{e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.loop=t,this._testLoopBoundries(e)})}get loopEnd(){return new ee(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach(e=>{e.loopEnd=t,this._testLoopBoundries(e)})}get loopStart(){return new ee(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach(e=>{e.loopStart=this.loopStart,this._testLoopBoundries(e)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._setAll("playbackRate",t)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}class ca extends Et{constructor(){super(Object.assign(H(ca.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const t=H(ca.getDefaults(),arguments,["pan"]);this.pan=new te({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",he(this,"pan")}static getDefaults(){return Object.assign(Et.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}Uh("bit-crusher","\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n");class Bt extends Et{constructor(){super(H(Bt.getDefaults(),arguments,["solo"])),this.name="Solo";const t=H(Bt.getDefaults(),arguments,["solo"]);this.input=this.output=new He({context:this.context}),Bt._allSolos.has(this.context)||Bt._allSolos.set(this.context,new Set),Bt._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(Et.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),Bt._allSolos.get(this.context).forEach(e=>e._updateSolo())}get muted(){return 0===this.input.gain.value}_addSolo(){Bt._soloed.has(this.context)||Bt._soloed.set(this.context,new Set),Bt._soloed.get(this.context).add(this)}_removeSolo(){Bt._soloed.has(this.context)&&Bt._soloed.get(this.context).delete(this)}_isSoloed(){return Bt._soloed.has(this.context)&&Bt._soloed.get(this.context).has(this)}_noSolos(){return!Bt._soloed.has(this.context)||Bt._soloed.has(this.context)&&0===Bt._soloed.get(this.context).size}_updateSolo(){this.input.gain.value=this._isSoloed()||this._noSolos()?1:0}dispose(){return super.dispose(),Bt._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Bt._allSolos=new Map,Bt._soloed=new Map;class pa extends Et{constructor(){super(H(pa.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const t=H(pa.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new ca({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Vs({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,he(this,["pan","volume"])}static getDefaults(){return Object.assign(Et.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class gi extends Et{constructor(){super(H(gi.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const t=H(gi.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Bt({solo:t.solo,context:this.context}),this._panVol=this.output=new pa({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),he(this,["pan","volume"])}static getDefaults(){return Object.assign(Et.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return gi.buses.has(t)||gi.buses.set(t,new He({context:this.context})),gi.buses.get(t)}send(t,e=0){const s=this._getBus(t),o=new He({context:this.context,units:"decibels",gain:e});return this.connect(o),o.connect(s),o}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}gi.buses=new Map;class Bp extends Et{constructor(){super(...arguments),this.name="Listener",this.positionX=new te({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new te({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new te({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new te({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new te({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new te({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new te({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new te({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new te({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(Et.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Wo(i=>{i.listener=new Bp({context:i})}),Sr(i=>{i.listener.dispose()});const Jn=xn().transport,ga=xn().destination;xn(),xn(),xn();const ma=xn();function Xh(){return os.loaded()}let ya=(()=>{class i{constructor(){this.chordProgressionActive=(0,u.tdS)(!1),this.melodyActive=(0,u.tdS)(!1),this.samplerReady=(0,u.tdS)(!1)}start(){"started"!==Jn.state&&function Uo(){Rs.resume()}(),ga.volume.value=-5,this.sampler=new Wi({urls:{C6:"C6.mp3","D#6":"Ds6.mp3","F#6":"Fs6.mp3",A6:"A6.mp3",C5:"C5.mp3","D#5":"Ds5.mp3","F#5":"Fs5.mp3",A5:"A5.mp3",C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3",C3:"C3.mp3","D#3":"Ds3.mp3","F#3":"Fs3.mp3",A3:"A3.mp3",C2:"C2.mp3","D#2":"Ds2.mp3","F#2":"Fs2.mp3",A2:"A2.mp3",C1:"C1.mp3","D#1":"Ds1.mp3","F#1":"Fs1.mp3",A1:"A1.mp3",A0:"A0.mp3"},release:.5,baseUrl:"https://tonejs.github.io/audio/salamander/",onload:()=>{this.samplerReady.set(!0)}}).toDestination()}setProgressionActive(){this.chordProgressionActive.set(!0)}setProgressionPassive(){this.chordProgressionActive.set(!1)}setMelodyActive(){this.melodyActive.set(!0)}setMelodyPassive(){this.melodyActive.set(!1)}playNote(e,s=0,o=.3){("suspended"!==ma.state||!this.samplerReady)&&Xh().then(()=>{this.sampler.triggerAttackRelease(e,o,ma.currentTime+s)})}playMelody(e,s=.3,o=.3){this.melodyActive()||!this.samplerReady||(this.setMelodyActive(),e.forEach((c,l)=>{this.playNote(c,l*s,o)}),setTimeout(()=>{this.setMelodyPassive()},1e3*s*(e.length-1)+1e3*o))}playChord(e,s=0,o=.5){("suspended"!==ma.state||!this.samplerReady)&&Xh().then(()=>{this.sampler.triggerAttackRelease(e,o,ma.currentTime+s)})}playProgression(e,s=.3,o=.3){if(this.chordProgressionActive()||!this.samplerReady)return;this.setProgressionActive();const c=new Gr((l,d)=>{this.sampler.triggerAttackRelease(d.chord,o,l)},e.map((l,d)=>({chord:l,time:d*s}))).start(0);Jn.start(),setTimeout(()=>{c.stop(),Jn.stop(),this.setProgressionPassive()},1e3*s*(e.length-1)+1e3*o)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),va=(()=>{class i{constructor(e){this.audioSrv=e,this.notes=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],this.solfegeList=["Do","Ra","Re","Me","Mi","Fa","Se","So","Le","La","Te","Ti"],this.octaves=["0","1","2","3","4","5","6"],this.selectedNoteList=(0,u.tdS)(["C4","D4","E4","F4","G4","A4","B4"]),this.selectedSolfegeList=(0,u.tdS)(["Do","Re","Mi","Fa","So","La","Ti"]),this.selectedRandomNote=(0,u.tdS)("C"),this.selectedRootNote=(0,u.tdS)("C"),this.possibleRandomNoteIndices=(0,u.tdS)(Ft.range(this.selectedNoteList().length)),this.randomizerWorkingOctave=3,this.keyScaleDegrees=[0,2,4,5,7,9,11],this.randomizeWorkingKey()}randomizeWorkingKey(e=Ft.range(this.selectedNoteList().length),s={low:2,high:this.octaves.length-1}){const o=this.notes[Math.floor(Math.random()*this.notes.length)];this.selectedRootNote.set(o),this.selectedRootNote.mutate(c=>{}),this.selectedNoteList.set(this.getKeyNotesForOctave(o,this.randomizerWorkingOctave)),this.setRandomNote(o,s,e)}setRandomNote(e,s,o=Ft.range(this.selectedNoteList().length)){if(s.low>s.high||s.low<0||s.low>this.octaves.length-1||s.high<0||s.high>this.octaves.length-1)throw new Error("Invalid octave range!");this.possibleRandomNoteIndices.set(o);const c=this.getKey(e,this.keyScaleDegrees),l=c[o[Math.floor(Math.random()*c.length)%o.length]];this.selectedRandomNote.set(l+this.octaves[s.low+Math.floor(Math.random()*Math.min(this.octaves.length,s.high-s.low))])}getKeyNotesForOctave(e,s,o=!1){let c=o?this.getKeyChromatic(e):this.getKey(e,this.keyScaleDegrees);const l=c.map(d=>{const f=c;var p=this.notes.length;return f.forEach(g=>{this.notes.indexOf(g)<p&&(p=this.notes.indexOf(g))}),f.indexOf(d)<f.indexOf(this.notes[p])?d+this.octaves[s]:d+this.octaves[s+1]});return l.push(l[0].slice(0,-1)+this.octaves[this.octaves.indexOf(l[0].slice(-1))+1]),l}setScaleDegrees(e){this.keyScaleDegrees=e}getKey(e,s=[0,2,4,5,7,9,11]){this.notes.indexOf(e);var o=[],c=[];return s.forEach(l=>{o.push(this.notes[(this.notes.indexOf(e)+l)%this.notes.length]),c.push(this.solfegeList[l]),this.selectedSolfegeList.set(c)}),o}getKeyChromatic(e){this.notes.indexOf(e);var s=[];return Ft.range(this.solfegeList.length).forEach(o=>{s.push(this.notes[(this.notes.indexOf(e)+o)%this.notes.length])}),s}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(ya))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Vu=(()=>{class i{constructor(e){this.keySrv=e,this.questions=(0,u.tdS)([]),this.state=(0,u.tdS)(Ee.FirstInit),this.questionCount=20,this.activeQuestion=0,this.SessionState=Ee,this.selectedKey=(0,u.Flj)(()=>this.keySrv.selectedNoteList().map(s=>s.slice(0,-1))),this.activeQuestionState={},this.canProceedToTheNextQuestion=!1,this.results={},this.correctGuess=!1}startSession(e=20){if(this.state()===Ee.Active)throw new Error("Session already active");this.state.set(Ee.Active),this.questionCount=e}resetSession(){this.state.set(Ee.FirstInit),this.activeQuestionState={},this.canProceedToTheNextQuestion=!1,this.activeQuestion=0,this.questions.set([])}goToNextQuestion(){this.activeQuestionState.isCorrect=!this.activeQuestionState.wrongNoteIndexList,this.questions.mutate(e=>e.push(this.activeQuestionState)),this.questionCount-1>this.activeQuestion?(console.log("Active Question: ",this.activeQuestion,"\nQuestions Array: ",this.questions()),this.activeQuestionState={},this.activeQuestion=this.activeQuestion+1,this.canProceedToTheNextQuestion=!1,this.correctGuess=!1):(console.log("Active Question: ",this.activeQuestion,"\nQuestions Array: ",this.questions()),this.endSession())}endSession(){if(this.state()!==Ee.Active)throw new Error("No active session to end");this.state.set(Ee.AfterSession);let e=0;this.correctGuess=!1,this.questions().forEach(s=>{s.isCorrect&&e++}),this.results={correctCount:e,questionCount:this.questionCount}}guess(e,s){const o=this.selectedKey().indexOf(s),c=this.selectedKey().indexOf(e);this.activeQuestionState.correctNoteIndex||(this.activeQuestionState.correctNoteIndex=c),o===c&&(this.activeQuestionState.wrongNoteIndexList||(this.correctGuess=!0),this.canProceedToTheNextQuestion=!0),!this.canProceedToTheNextQuestion&&(this.activeQuestionState.wrongNoteIndexList?this.activeQuestionState.wrongNoteIndexList.includes(o)||this.activeQuestionState.wrongNoteIndexList.push(o):this.activeQuestionState.wrongNoteIndexList=[o])}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(va))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Ee=(()=>((Ee=Ee||{}).FirstInit="firstInit",Ee.Active="active",Ee.AfterSession="afterSession",Ee))(),Cn=ut(5994);let mi=(()=>{class i{constructor(e){this.keySrv=e,this.possibleRandomNotesConfig=(0,u.tdS)([]),this.scaleConfig=(0,u.tdS)([]),this.walkModeConfig=(0,u.tdS)(de.ToRoot),this.octaveConfig=(0,u.tdS)({low:2,high:2}),this.chordProgressionConfig=(0,u.tdS)([[]]),this.chordsWithIndex=[[]],this.configObj=(0,u.tdS)({presetName:"preset",octaveConfigLow:2,octaveConfigHigh:6,scaleConfig:[!0,!1,!0,!1,!0,!0,!1,!0,!1,!0,!1,!0],possibleRandomNotesConfig:[!0,null,!0,null,!0,!0,null,!0,null,!0,null,!0],walkMode:de.ToRoot,chordsProgressionConfig:[{chordNotes:[!0,!1,!1,!1,!0,!1,!1,!0,!1,!1,!1,!1]},{chordNotes:[!0,!1,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1]}],chordsProgressionRandom:!1,showChordsChromatic:!1}),(0,u.cEC)(()=>{this.configObj(),(0,u.rg0)(()=>{let s=this.configObj().scaleConfig.reduce((p,g,y)=>(g&&p.push(y),p),[]);console.log("scaleNotes",s),this.scaleConfig.set(s);let o=0,c=this.configObj().possibleRandomNotesConfig.reduce((p,g)=>(g&&p.push(o),null!==g&&o++,p),[]);console.log("possibleNotes",c),0===c[0]&&c.push(c.length),console.log("possibleNotes",c),this.possibleRandomNotesConfig.set(c);let l={low:this.configObj().octaveConfigLow,high:this.configObj().octaveConfigHigh};this.octaveConfig.set(l),this.walkModeConfig.set(this.configObj().walkMode),this.chordsWithIndex=this.configObj().chordsProgressionConfig.map(p=>p.chordNotes.reduce((g,y,x)=>(y&&g.push(x),g),[])),console.log(this.chordsWithIndex);let d=this.keySrv.getKeyNotesForOctave(this.keySrv.selectedRootNote(),3,!0),f=this.chordsWithIndex.map(p=>p.map(g=>d[g]));this.chordProgressionConfig.set(f),console.log(f)})}),(0,u.cEC)(()=>{this.keySrv.selectedRootNote(),(0,u.rg0)(()=>{let s=this.keySrv.getKeyNotesForOctave(this.keySrv.selectedRootNote(),3,!0),o=this.chordsWithIndex.map(c=>c.map(l=>s[l]));this.chordProgressionConfig.set(this.configObj().chordsProgressionRandom?this.randomizeOctaves(o):o)})})}randomizeOctaves(e,s={low:2,high:5}){return e.map(o=>o.map(c=>c.slice(0,-1)+String(this.getRandomNumber(s.low,s.high))))}getRandomNumber(e,s){return Math.floor(Math.random()*(s-e+1))+e}aa(){this.configObj.set({presetName:"aa1",octaveConfigLow:2,octaveConfigHigh:6,scaleConfig:[!0,!1,!0,!1,!0,!0,!1,!0,!1,!0,!1,!0],possibleRandomNotesConfig:[!0,null,!0,null,!0,!0,null,!0,null,!0,null,!0],walkMode:de.ToRoot,chordsProgressionConfig:[{chordNotes:[!0,!1,!1,!1,!0,!1,!1,!0,!1,!1,!1,!1]},{chordNotes:[!0,!1,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1]},{chordNotes:[!0,!1,!1,!1,!0,!1,!1,!0,!1,!1,!1,!1]},{chordNotes:[!0,!1,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1]}],chordsProgressionRandom:!0,showChordsChromatic:!1})}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(va))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function zp(i,t){if(1&i){const e=u.EpF();u.ynx(0),u._UZ(1,"app-configuration-panel"),u.TgZ(2,"div",2)(3,"button",3),u.NdJ("click",function(){u.CHM(e);const o=u.oxw();return u.KtG(o.initialize())}),u._uU(4,"START"),u.qZA()(),u.BQk()}}function jp(i,t){if(1&i){const e=u.EpF();u.TgZ(0,"button",13),u.NdJ("click",function(){const c=u.CHM(e).$implicit,l=u.oxw(2);return u.KtG(l.userGuess(c))}),u._uU(1),u.qZA()}if(2&i){const e=t.index,s=u.oxw(2);u.s9C("id","note-"+e),u.Q6J("disabled",!s.keySrv.possibleRandomNoteIndices().includes(e)),u.xp6(1),u.hij(" ",s.keySrv.selectedSolfegeList()[e%s.keySrv.selectedSolfegeList().length]," ")}}function Zp(i,t){if(1&i){const e=u.EpF();u.ynx(0)(1),u._UZ(2,"app-progress-info"),u.TgZ(3,"div",4)(4,"div",5),u.YNc(5,jp,2,3,"button",6),u.qZA(),u.TgZ(6,"div",7)(7,"p"),u._uU(8),u.qZA()(),u.TgZ(9,"div",8)(10,"button",9),u.NdJ("click",function(){u.CHM(e);const o=u.oxw();return u.KtG(o.audioSrv.playNote(o.keySrv.selectedRandomNote()))}),u._uU(11," Note "),u.qZA(),u.TgZ(12,"button",10),u.NdJ("click",function(){u.CHM(e);const o=u.oxw();return u.KtG(o.audioSrv.playProgression(o.configSrv.chordProgressionConfig()))}),u._uU(13," Reference "),u.qZA(),u.TgZ(14,"button",11),u.NdJ("click",function(){u.CHM(e);const o=u.oxw();return u.KtG(o.setNewKey())}),u._uU(15,"Next"),u.qZA()(),u.TgZ(16,"button",12),u.NdJ("click",function(){u.CHM(e);const o=u.oxw();return u.KtG(o.sessionSrv.endSession())}),u._uU(17,"Give up"),u.qZA()(),u.BQk()()}if(2&i){const e=u.oxw();u.xp6(5),u.Q6J("ngForOf",e.keySrv.selectedNoteList()),u.xp6(3),u.AsE("Question ",e.sessionSrv.activeQuestion+1," of ",e.sessionSrv.questionCount,""),u.xp6(6),u.Q6J("disabled",!e.sessionSrv.canProceedToTheNextQuestion||e.audioSrv.melodyActive()||e.audioSrv.chordProgressionActive())}}function Hp(i,t){if(1&i){const e=u.EpF();u.ynx(0),u.TgZ(1,"p"),u._uU(2,"Fin"),u.qZA(),u._UZ(3,"app-progress-info"),u.TgZ(4,"p"),u._uU(5),u.qZA(),u.TgZ(6,"button",14),u.NdJ("click",function(){u.CHM(e);const o=u.oxw();return u.KtG(o.resetSession())}),u._uU(7,"Restart"),u.qZA(),u.TgZ(8,"button",15),u.NdJ("click",function(){u.CHM(e);const o=u.oxw();return u.KtG(o.resetSession())}),u._uU(9,"To Main Menu"),u.qZA(),u.BQk()}if(2&i){const e=u.oxw();u.xp6(5),u.AsE(" ",e.sessionSrv.results.correctCount," / ",e.sessionSrv.results.questionCount,"")}}let Jh=(()=>{class i{constructor(e,s,o,c,l){var d=this;this.audioSrv=e,this.keySrv=s,this.sessionSrv=o,this.loadingSrv=c,this.configSrv=l,this.trainerStarted=(0,u.tdS)(!1),this.coloringActive=(0,u.tdS)(!1),this.guessFeedback=(0,u.tdS)(Pn.default),this.GuessState=Pn,this.msMelodySpeed=400,this.msAfterUserIsAllowedToClick=this.msMelodySpeed,this.SessionState=Ee,(0,u.cEC)(at(function*(){d.audioSrv.samplerReady()&&(0,u.rg0)(()=>{d.loadingSrv.hideLoading(),d.playSelectedProgressionAndNote()})})),(0,u.cEC)(at(function*(){d.configSrv.chordProgressionConfig(),(0,u.rg0)(()=>{d.sessionSrv.state()===Ee.Active&&d.audioSrv.samplerReady()&&d.playSelectedProgressionAndNote()})}))}ngOnInit(){this.sessionSrv.resetSession()}setNewKey(){this.keySrv.randomizeWorkingKey(this.configSrv.possibleRandomNotesConfig(),this.configSrv.octaveConfig()),this.guessFeedback.set(Pn.default),this.sessionSrv.goToNextQuestion()}playSelectedProgressionAndNote(){console.log(this.configSrv.chordProgressionConfig()),this.audioSrv.playProgression(this.configSrv.chordProgressionConfig()),this.audioSrv.playNote(this.keySrv.selectedRandomNote(),this.configSrv.chordProgressionConfig().length*this.msMelodySpeed/1e3+.5)}userGuess(e){if(this.coloringActive())return;const s=e.slice(0,-1),o=this.keySrv.selectedRandomNote().slice(0,-1);if(this.sessionSrv.guess(o,s),s===o){this.guessFeedback.set(Pn.success);const c=this.changeOctave(Number(e.slice(-1))-Number(this.keySrv.selectedRandomNote().slice(-1))),l=this.getNotesIndicesToWalkOn(c,this.configSrv.walkModeConfig()),d=this.getNotesToWalkOn(c,this.configSrv.walkModeConfig());this.audioSrv.playMelody(d,.001*this.msMelodySpeed,.001*this.msMelodySpeed),this.colorPlaying(l,this.msMelodySpeed)}else{this.guessFeedback.set(Pn.failure);let c=document.getElementById("note-"+this.keySrv.selectedNoteList().indexOf(e));c&&(c.classList.add("cet-failure"),setTimeout(()=>{c?.classList.remove("cet-failure")},this.msMelodySpeed))}}getNotesToWalkOn(e,s){let o;return o=e.indexOf(this.keySrv.selectedRandomNote())<e.length/2?e.slice(0,e.indexOf(this.keySrv.selectedRandomNote())+1).reverse():e.slice(e.indexOf(this.keySrv.selectedRandomNote()),e.length),this.transformResultForSelectedWalkMode(o,s)}getNotesIndicesToWalkOn(e,s){let o;return o=e.indexOf(this.keySrv.selectedRandomNote())<e.length/2?Ft.range(e.indexOf(this.keySrv.selectedRandomNote()),-1):Ft.range(e.indexOf(this.keySrv.selectedRandomNote()),e.length),this.transformResultForSelectedWalkMode(o,s)}transformResultForSelectedWalkMode(e,s){switch(s){case de.ToRoot:return e;case de.FromRoot:return e.reverse();case de.JumpToRoot:let o=[];return o.push(e[0]),e[0]!==e[e.length-1]&&o.push(e[e.length-1]),o;case de.NoWalk:return[e[0]];default:return e}}colorPlaying(e,s){this.coloringActive()||(this.coloringActive.set(!0),e.forEach((o,c)=>{let l=document.getElementById("note-"+o);l&&setTimeout(()=>{l?.classList.add("cet-playing"),setTimeout(()=>{l?.classList.remove("cet-playing")},s)},s*c)}),setTimeout(()=>{this.coloringActive.set(!1)},e.length*s+this.msAfterUserIsAllowedToClick))}changeOctave(e){return this.keySrv.selectedNoteList().map(c=>{const d=Number(c.slice(-1))-e;return c.slice(0,-1)+d})}initialize(){this.loadingSrv.showLoading(),this.audioSrv.start(),this.keySrv.setScaleDegrees(this.configSrv.scaleConfig()),this.keySrv.randomizeWorkingKey(this.configSrv.possibleRandomNotesConfig(),this.configSrv.octaveConfig()),this.sessionSrv.startSession(5),this.trainerStarted.set(!0)}resetSession(){this.sessionSrv.resetSession(),this.audioSrv.samplerReady.set(!1)}ngOnDestroy(){this.audioSrv.samplerReady.set(!1)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(ya),u.Y36(va),u.Y36(Vu),u.Y36(Cn.b),u.Y36(mi))},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-functional-trainer"]],decls:4,vars:3,consts:[[1,"cet-functional-wrapper"],[4,"ngIf"],[1,"cet-start-wrapper"],[1,"cet-start-button","cet-important-button",3,"click"],[1,"cet-controls-wrapper"],[1,"cet-scale"],["class","cet-note",3,"disabled","id","click",4,"ngFor","ngForOf"],[1,"cet-question-belt"],[1,"cet-controls"],[1,"left",3,"click"],[1,"middle",3,"click"],[1,"right",3,"disabled","click"],[1,"cet-give-up",3,"click"],[1,"cet-note",3,"disabled","id","click"],[3,"click"],["routerLink","/home",3,"click"]],template:function(e,s){1&e&&(u.TgZ(0,"div",0),u.YNc(1,zp,5,0,"ng-container",1),u.YNc(2,Zp,18,4,"ng-container",1),u.YNc(3,Hp,10,2,"ng-container",1),u.qZA()),2&e&&(u.xp6(1),u.Q6J("ngIf",s.sessionSrv.state()===s.SessionState.FirstInit),u.xp6(1),u.Q6J("ngIf",s.sessionSrv.state()===s.SessionState.Active),u.xp6(1),u.Q6J("ngIf",s.sessionSrv.state()===s.SessionState.AfterSession))},styles:[".cet-playing[_ngcontent-%COMP%], .cet-playing[_ngcontent-%COMP%]:hover{background-color:green}.cet-failure[_ngcontent-%COMP%], .cet-failure[_ngcontent-%COMP%]:hover{background-color:red}.cet-functional-wrapper[_ngcontent-%COMP%]{padding-top:10px;padding-inline:10px;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;height:calc(100% - 161px);gap:10px;position:relative}.cet-functional-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{position:absolute;top:120px}.cet-functional-wrapper[_ngcontent-%COMP%]   .cet-controls-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:flex-end;gap:20px;width:100%;height:100%;padding-bottom:30px;height:calc(100% - 130px)}.cet-scale[_ngcontent-%COMP%]{overflow-y:auto;display:flex;flex-direction:column-reverse;align-items:center;gap:3px;width:100%;gap:10px;height:100%;padding:3px}.cet-scale[_ngcontent-%COMP%]   .cet-note[_ngcontent-%COMP%]{width:100%;height:37px;min-width:unset;border-radius:10px;font-family:LexendZetta-ExtraBold;font-size:24px}.cet-controls[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;width:100%}.cet-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;height:64px;border-radius:0;box-shadow:4px 4px #000;font-size:24px}.cet-controls[_ngcontent-%COMP%]   button.left[_ngcontent-%COMP%]{z-index:1;width:100px;border-radius:10px 0 0 10px}.cet-controls[_ngcontent-%COMP%]   button.middle[_ngcontent-%COMP%]{z-index:2;border-inline:none;box-shadow:4px 4px #000}.cet-controls[_ngcontent-%COMP%]   button.right[_ngcontent-%COMP%]{z-index:3;width:100px;border-radius:0 10px 10px 0;background-color:#bb92ff}.cet-start-button[_ngcontent-%COMP%]{height:66px;padding-inline:10px;font-size:24px;border-radius:10px}.cet-start-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row-reverse;position:fixed;bottom:85px;padding-right:20px}.cet-question-belt[_ngcontent-%COMP%]{width:100%;height:33px;border-block:solid #000000 3px;display:flex;flex-direction:row;align-items:center;justify-content:center;gap:6px;box-shadow:0 4px #000}.cet-question-belt[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:LexendZetta-ExtraBold;font-size:24px}.cet-give-up[_ngcontent-%COMP%]{position:absolute;top:75px;right:13px;background-color:#ff4141;height:36px;border-radius:0}"]}),i})();var Pn=(()=>((Pn=Pn||{}).default="def",Pn.success="success",Pn.failure="fail",Pn))(),de=(()=>((de=de||{}).ToRoot="toRoot",de.FromRoot="fromRoot",de.JumpToRoot="jumpToRoot",de.NoWalk="noWalk",de))();const Tt=[{path:"",component:Jh}];let Kh=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[b.Bz.forChild(Tt),b.Bz]}),i})();function qn(i,t){if(1&i&&u._UZ(0,"div",7),2&i){const e=t.$implicit;u.ekj("correct",e.isCorrect)("incorrect",!e.isCorrect)("default",void 0===e.isCorrect)}}function td(i,t){1&i&&u._UZ(0,"div",8)}function Yp(i,t){1&i&&(u.TgZ(0,"p",9),u._uU(1,"WRONG"),u.qZA())}function Gt(i,t){1&i&&(u.TgZ(0,"p",10),u._uU(1,"CORRECT!"),u.qZA())}let Qp=(()=>{class i{constructor(e){this.sessionSrv=e,this.remainingBoxes=(0,u.tdS)([]),this.remainingBoxes=(0,u.Flj)(()=>Array(this.sessionSrv.questionCount-this.sessionSrv.questions().length))}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(Vu))},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-progress-info"]],decls:7,vars:4,consts:[[1,"cet-progress-info"],[1,"container"],["class","box",3,"correct","incorrect","default",4,"ngFor","ngForOf"],["class","box default",4,"ngFor","ngForOf"],[1,"cet-current-info"],["class","cet-incorrect-text",4,"ngIf"],["class","cet-correct-text",4,"ngIf"],[1,"box"],[1,"box","default"],[1,"cet-incorrect-text"],[1,"cet-correct-text"]],template:function(e,s){1&e&&(u.TgZ(0,"div",0)(1,"div",1),u.YNc(2,qn,1,6,"div",2),u.YNc(3,td,1,0,"div",3),u.qZA(),u.TgZ(4,"div",4),u.YNc(5,Yp,2,0,"p",5),u.YNc(6,Gt,2,0,"p",6),u.qZA()()),2&e&&(u.xp6(2),u.Q6J("ngForOf",s.sessionSrv.questions()),u.xp6(1),u.Q6J("ngForOf",s.remainingBoxes()),u.xp6(2),u.Q6J("ngIf",s.sessionSrv.activeQuestionState.wrongNoteIndexList),u.xp6(1),u.Q6J("ngIf",s.sessionSrv.correctGuess))},dependencies:[ft.sg,ft.O5],styles:["[_nghost-%COMP%]{width:100%}.cet-progress-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%}.container[_ngcontent-%COMP%]{width:100%;height:53px;border-block:solid #000000 3px;display:flex;flex-direction:row;align-items:center;gap:6px;box-shadow:0 4px #000;overflow-x:auto}.box[_ngcontent-%COMP%]{width:36px;height:36px;background-color:#fff;border-radius:10px;box-shadow:3px 3px #000;border:solid #000000 2px}.box.correct[_ngcontent-%COMP%]{background-color:#ffd66d}.box.incorrect[_ngcontent-%COMP%]{background-color:#ff4141}.box.default[_ngcontent-%COMP%]{background-color:#fff}.cet-current-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:30px}.cet-current-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;font-family:LexendMega-ExtraBold;justify-content:center;align-items:center;height:30px}.cet-current-info[_ngcontent-%COMP%]   .cet-incorrect-text[_ngcontent-%COMP%]{color:#ff4141;text-shadow:2px 0 #AB2B2B,-2px 0 #AB2B2B,0 2px #AB2B2B,0 -2px #AB2B2B,1px 1px #AB2B2B,-1px -1px #AB2B2B,1px -1px #AB2B2B,-1px 1px #AB2B2B}.cet-current-info[_ngcontent-%COMP%]   .cet-correct-text[_ngcontent-%COMP%]{color:#ffd66d;text-shadow:2px 0 #B4974C,-2px 0 #B4974C,0 2px #B4974C,0 -2px #B4974C,1px 1px #B4974C,-1px -1px #B4974C,1px -1px #B4974C,-1px 1px #B4974C}"]}),i})();var ed=ut(6992),xa=ut(7715),$p=ut(5592),Xp=ut(7453),Jp=ut(4829),Kp=ut(4564),tg=ut(8251),eg=ut(7400),ng=ut(2714),ig=ut(7398);let nd=(()=>{class i{constructor(e,s){this._renderer=e,this._elementRef=s,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(e,s){this._renderer.setProperty(this._elementRef.nativeElement,e,s)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.Qsj),u.Y36(u.SBq))},i.\u0275dir=u.lG2({type:i}),i})(),_i=(()=>{class i extends nd{}return i.\u0275fac=function(){let t;return function(s){return(t||(t=u.n5z(i)))(s||i)}}(),i.\u0275dir=u.lG2({type:i,features:[u.qOj]}),i})();const ds=new u.OlP("NgValueAccessor"),rg={provide:ds,useExisting:(0,u.Gpc)(()=>Ur),multi:!0};let Ur=(()=>{class i extends _i{writeValue(e){this.setProperty("checked",e)}}return i.\u0275fac=function(){let t;return function(s){return(t||(t=u.n5z(i)))(s||i)}}(),i.\u0275dir=u.lG2({type:i,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,s){1&e&&u.NdJ("change",function(c){return s.onChange(c.target.checked)})("blur",function(){return s.onTouched()})},features:[u._Bn([rg]),u.qOj]}),i})();const og={provide:ds,useExisting:(0,u.Gpc)(()=>ba),multi:!0},ag=new u.OlP("CompositionEventMode");let ba=(()=>{class i extends nd{constructor(e,s,o){super(e,s),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Iu(){const i=(0,ft.q)()?(0,ft.q)().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(ag,8))},i.\u0275dir=u.lG2({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,s){1&e&&u.NdJ("input",function(c){return s._handleInput(c.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(c){return s._compositionEnd(c.target.value)})},features:[u._Bn([og]),u.qOj]}),i})();const Zt=new u.OlP("NgValidators"),Ls=new u.OlP("NgAsyncValidators");function Lu(i){return null!=i}function ud(i){return(0,u.QGY)(i)?(0,xa.D)(i):i}function ld(i){let t={};return i.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function hd(i,t){return t.map(e=>e(i))}function yi(i){return i.map(t=>function ug(i){return!i.validate}(t)?t:e=>t.validate(e))}function Bu(i){return null!=i?function dd(i){if(!i)return null;const t=i.filter(Lu);return 0==t.length?null:function(e){return ld(hd(e,t))}}(yi(i)):null}function Gu(i){return null!=i?function fd(i){if(!i)return null;const t=i.filter(Lu);return 0==t.length?null:function(e){return function sg(...i){const t=(0,Kp.jO)(i),{args:e,keys:s}=(0,Xp.D)(i),o=new $p.y(c=>{const{length:l}=e;if(!l)return void c.complete();const d=new Array(l);let f=l,p=l;for(let g=0;g<l;g++){let y=!1;(0,Jp.Xf)(e[g]).subscribe((0,tg.x)(c,x=>{y||(y=!0,p--),d[g]=x},()=>f--,void 0,()=>{(!f||!y)&&(p||c.next(s?(0,ng.n)(s,d):d),c.complete())}))}});return t?o.pipe((0,eg.Z)(t)):o}(hd(e,t).map(ud)).pipe((0,ig.U)(ld))}}(yi(i)):null}function pd(i,t){return null===i?[t]:Array.isArray(i)?[...i,t]:[i,t]}function Wu(i){return i._rawValidators}function Uu(i){return i._rawAsyncValidators}function zu(i){return i?Array.isArray(i)?i:[i]:[]}function wa(i,t){return Array.isArray(i)?i.includes(t):i===t}function gd(i,t){const e=zu(t);return zu(i).forEach(o=>{wa(e,o)||e.push(o)}),e}function md(i,t){return zu(t).filter(e=>!wa(i,e))}class _d{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Bu(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Gu(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class sn extends _d{get formDirective(){return null}get path(){return null}}class Bs extends _d{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class yd{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let vd=(()=>{class i extends yd{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(Bs,2))},i.\u0275dir=u.lG2({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,s){2&e&&u.ekj("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[u.qOj]}),i})(),xd=(()=>{class i extends yd{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(sn,10))},i.\u0275dir=u.lG2({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,s){2&e&&u.ekj("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[u.qOj]}),i})();const jr="VALID",Sa="INVALID",Gs="PENDING",Zr="DISABLED";function Hu(i){return(Ta(i)?i.validators:i)||null}function $e(i,t){return(Ta(t)?t.asyncValidators:i)||null}function Ta(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}function bd(i,t,e){const s=i.controls;if(!(t?Object.keys(s):s).length)throw new u.vHH(1e3,"");if(!s[e])throw new u.vHH(1001,"")}function wd(i,t,e){i._forEachChild((s,o)=>{if(void 0===e[o])throw new u.vHH(1002,"")})}class Da{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===jr}get invalid(){return this.status===Sa}get pending(){return this.status==Gs}get disabled(){return this.status===Zr}get enabled(){return this.status!==Zr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(gd(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(gd(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(md(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(md(t,this._rawAsyncValidators))}hasValidator(t){return wa(this._rawValidators,t)}hasAsyncValidator(t){return wa(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Gs,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Zr,this.errors=null,this._forEachChild(s=>{s.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(s=>s(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=jr,this._forEachChild(s=>{s.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(s=>s(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===jr||this.status===Gs)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Zr:jr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Gs,this._hasOwnPendingAsyncValidator=!0;const e=ud(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(s=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(s,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((s,o)=>s&&s._find(o),this)}getError(t,e){const s=e?this.get(e):this;return s&&s.errors?s.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?Zr:this.errors?Sa:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Gs)?Gs:this._anyControlsHaveStatus(Sa)?Sa:jr}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Ta(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function gg(i){return Array.isArray(i)?Bu(i):i||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function Yu(i){return Array.isArray(i)?Gu(i):i||null}(this._rawAsyncValidators)}}class vi extends Da{constructor(t,e,s){super(Hu(e),$e(s,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,s={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,s={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){wd(this,0,t),Object.keys(t).forEach(s=>{bd(this,!0,s),this.controls[s].setValue(t[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(s=>{const o=this.controls[s];o&&o.patchValue(t[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((s,o)=>{s.reset(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,s)=>(t[s]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,s)=>!!s._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const s=this.controls[e];s&&t(s,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,s]of Object.entries(this.controls))if(this.contains(e)&&t(s))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,s,o)=>((s.enabled||this.disabled)&&(e[o]=s.value),e))}_reduceChildren(t,e){let s=t;return this._forEachChild((o,c)=>{s=e(s,o,c)}),s}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}class Ad extends vi{}const Zi=new u.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Oa}),Oa="always";function Hr(i,t){return[...t.path,i]}function Yr(i,t,e=Oa){Qr(i,t),t.valueAccessor.writeValue(i.value),(i.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(i.disabled),function mg(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&Sd(i,t)})}(i,t),function yg(i,t){const e=(s,o)=>{t.valueAccessor.writeValue(s),o&&t.viewToModelUpdate(s)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}(i,t),function _g(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&Sd(i,t),"submit"!==i.updateOn&&i.markAsTouched()})}(i,t),function Qu(i,t){if(t.valueAccessor.setDisabledState){const e=s=>{t.valueAccessor.setDisabledState(s)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}(i,t)}function Ma(i,t,e=!0){const s=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(s),t.valueAccessor.registerOnTouched(s)),Na(i,t),i&&(t._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function ka(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Qr(i,t){const e=Wu(i);null!==t.validator?i.setValidators(pd(e,t.validator)):"function"==typeof e&&i.setValidators([e]);const s=Uu(i);null!==t.asyncValidator?i.setAsyncValidators(pd(s,t.asyncValidator)):"function"==typeof s&&i.setAsyncValidators([s]);const o=()=>i.updateValueAndValidity();ka(t._rawValidators,o),ka(t._rawAsyncValidators,o)}function Na(i,t){let e=!1;if(null!==i){if(null!==t.validator){const o=Wu(i);if(Array.isArray(o)&&o.length>0){const c=o.filter(l=>l!==t.validator);c.length!==o.length&&(e=!0,i.setValidators(c))}}if(null!==t.asyncValidator){const o=Uu(i);if(Array.isArray(o)&&o.length>0){const c=o.filter(l=>l!==t.asyncValidator);c.length!==o.length&&(e=!0,i.setAsyncValidators(c))}}}const s=()=>{};return ka(t._rawValidators,s),ka(t._rawAsyncValidators,s),e}function Sd(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function n(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}function r(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}const a=class extends Da{constructor(t=null,e,s){super(Hu(e),$e(s,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ta(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=r(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(s=>s(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){n(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){n(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){r(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};let v=(()=>{class i extends sn{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Hr(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}return i.\u0275fac=function(){let t;return function(s){return(t||(t=u.n5z(i)))(s||i)}}(),i.\u0275dir=u.lG2({type:i,features:[u.qOj]}),i})(),Dt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=u.lG2({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),i})();const _t={provide:ds,useExisting:(0,u.Gpc)(()=>kt),multi:!0};let kt=(()=>{class i extends _i{writeValue(e){this.setProperty("value",e??"")}registerOnChange(e){this.onChange=s=>{e(""==s?null:parseFloat(s))}}}return i.\u0275fac=function(){let t;return function(s){return(t||(t=u.n5z(i)))(s||i)}}(),i.\u0275dir=u.lG2({type:i,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,s){1&e&&u.NdJ("input",function(c){return s.onChange(c.target.value)})("blur",function(){return s.onTouched()})},features:[u._Bn([_t]),u.qOj]}),i})(),Xe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({}),i})();const Fa=new u.OlP("NgModelWithFormControlWarning"),Im={provide:sn,useExisting:(0,u.Gpc)(()=>Od)};let Od=(()=>{class i extends sn{constructor(e,s,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(e),this._setAsyncValidators(s)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Na(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const s=this.form.get(e.path);return Yr(s,e,this.callSetDisabledState),s.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),s}getControl(e){return this.form.get(e.path)}removeControl(e){Ma(e.control||null,e,!1),function wg(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,s){this.form.get(e.path).setValue(s)}onSubmit(e){return this.submitted=!0,function Dd(i,t){i._syncPendingControls(),t.forEach(e=>{const s=e.control;"submit"===s.updateOn&&s._pendingChange&&(e.viewToModelUpdate(s._pendingValue),s._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const s=e.control,o=this.form.get(e.path);s!==o&&(Ma(s||null,e),(i=>i instanceof a)(o)&&(Yr(o,e,this.callSetDisabledState),e.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const s=this.form.get(e.path);(function Td(i,t){Qr(i,t)})(s,e),s.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const s=this.form.get(e.path);s&&function vg(i,t){return Na(i,t)}(s,e)&&s.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Qr(this.form,this),this._oldForm&&Na(this._oldForm,this)}_checkFormPresent(){}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(Zt,10),u.Y36(Ls,10),u.Y36(Zi,8))},i.\u0275dir=u.lG2({type:i,selectors:[["","formGroup",""]],hostBindings:function(e,s){1&e&&u.NdJ("submit",function(c){return s.onSubmit(c)})("reset",function(){return s.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([Im]),u.qOj,u.TTD]}),i})();const Pm={provide:sn,useExisting:(0,u.Gpc)(()=>Md)};let Md=(()=>{class i extends v{constructor(e,s,o){super(),this.name=null,this._parent=e,this._setValidators(s),this._setAsyncValidators(o)}_checkParentType(){_m(this._parent)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(sn,13),u.Y36(Zt,10),u.Y36(Ls,10))},i.\u0275dir=u.lG2({type:i,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[u._Bn([Pm]),u.qOj]}),i})();const qm={provide:sn,useExisting:(0,u.Gpc)(()=>kd)};let kd=(()=>{class i extends sn{constructor(e,s,o){super(),this.name=null,this._parent=e,this._setValidators(s),this._setAsyncValidators(o)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Hr(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){_m(this._parent)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(sn,13),u.Y36(Zt,10),u.Y36(Ls,10))},i.\u0275dir=u.lG2({type:i,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[u._Bn([qm]),u.qOj]}),i})();function _m(i){return!(i instanceof Md||i instanceof Od||i instanceof kd)}const Lm={provide:Bs,useExisting:(0,u.Gpc)(()=>Ag)};let Ag=(()=>{class i extends Bs{set isDisabled(e){}constructor(e,s,o,c,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.name=null,this.update=new u.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(s),this._setAsyncValidators(o),this.valueAccessor=function Ju(i,t){if(!t)return null;let e,s,o;return Array.isArray(t),t.forEach(c=>{c.constructor===ba?e=c:function bg(i){return Object.getPrototypeOf(i.constructor)===_i}(c)?s=c:o=c}),o||s||e||null}(0,c)}ngOnChanges(e){this._added||this._setUpControl(),function Xu(i,t){if(!i.hasOwnProperty("model"))return!1;const e=i.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return Hr(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return i._ngModelWarningSentOnce=!1,i.\u0275fac=function(e){return new(e||i)(u.Y36(sn,13),u.Y36(Zt,10),u.Y36(Ls,10),u.Y36(ds,10),u.Y36(Fa,8))},i.\u0275dir=u.lG2({type:i,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[u._Bn([Lm]),u.qOj,u.TTD]}),i})();const Bm={provide:ds,useExisting:(0,u.Gpc)(()=>Nd),multi:!0};function ym(i,t){return null==i?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${i}: ${t}`.slice(0,50))}let Nd=(()=>{class i extends _i{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const o=ym(this._getOptionId(e),e);this.setProperty("value",o)}registerOnChange(e){this.onChange=s=>{this.value=this._getOptionValue(s),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const s of this._optionMap.keys())if(this._compareWith(this._optionMap.get(s),e))return s;return null}_getOptionValue(e){const s=function Gm(i){return i.split(":")[0]}(e);return this._optionMap.has(s)?this._optionMap.get(s):e}}return i.\u0275fac=function(){let t;return function(s){return(t||(t=u.n5z(i)))(s||i)}}(),i.\u0275dir=u.lG2({type:i,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,s){1&e&&u.NdJ("change",function(c){return s.onChange(c.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([Bm]),u.qOj]}),i})(),vm=(()=>{class i{constructor(e,s,o){this._element=e,this._renderer=s,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(ym(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(Nd,9))},i.\u0275dir=u.lG2({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),i})();const Wm={provide:ds,useExisting:(0,u.Gpc)(()=>Sg),multi:!0};function xm(i,t){return null==i?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${i}: ${t}`.slice(0,50))}let Sg=(()=>{class i extends _i{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let s;if(this.value=e,Array.isArray(e)){const o=e.map(c=>this._getOptionId(c));s=(c,l)=>{c._setSelected(o.indexOf(l.toString())>-1)}}else s=(o,c)=>{o._setSelected(!1)};this._optionMap.forEach(s)}registerOnChange(e){this.onChange=s=>{const o=[],c=s.selectedOptions;if(void 0!==c){const l=c;for(let d=0;d<l.length;d++){const p=this._getOptionValue(l[d].value);o.push(p)}}else{const l=s.options;for(let d=0;d<l.length;d++){const f=l[d];if(f.selected){const p=this._getOptionValue(f.value);o.push(p)}}}this.value=o,e(o)}}_registerOption(e){const s=(this._idCounter++).toString();return this._optionMap.set(s,e),s}_getOptionId(e){for(const s of this._optionMap.keys())if(this._compareWith(this._optionMap.get(s)._value,e))return s;return null}_getOptionValue(e){const s=function Um(i){return i.split(":")[0]}(e);return this._optionMap.has(s)?this._optionMap.get(s)._value:e}}return i.\u0275fac=function(){let t;return function(s){return(t||(t=u.n5z(i)))(s||i)}}(),i.\u0275dir=u.lG2({type:i,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,s){1&e&&u.NdJ("change",function(c){return s.onChange(c.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([Wm]),u.qOj]}),i})(),bm=(()=>{class i{constructor(e,s,o){this._element=e,this._renderer=s,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(xm(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(xm(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(Sg,9))},i.\u0275dir=u.lG2({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),i})(),Jm=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[Xe]}),i})();class Nm extends Da{constructor(t,e,s){super(Hu(e),$e(s,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,s={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:s.emitEvent})}removeAt(t,e={}){let s=this._adjustIndex(t);s<0&&(s=0),this.controls[s]&&this.controls[s]._registerOnCollectionChange(()=>{}),this.controls.splice(s,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,s={}){let o=this._adjustIndex(t);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),e&&(this.controls.splice(o,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){wd(this,0,t),t.forEach((s,o)=>{bd(this,!1,o),this.at(o).setValue(s,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((s,o)=>{this.at(o)&&this.at(o).patchValue(s,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((s,o)=>{s.reset(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,s)=>!!s._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,s)=>{t(e,s)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}}function Fm(i){return!!i&&(void 0!==i.asyncValidators||void 0!==i.validators||void 0!==i.updateOn)}let Km=(()=>{class i{constructor(){this.useNonNullable=!1}get nonNullable(){const e=new i;return e.useNonNullable=!0,e}group(e,s=null){const o=this._reduceControls(e);let c={};return Fm(s)?c=s:null!==s&&(c.validators=s.validator,c.asyncValidators=s.asyncValidator),new vi(o,c)}record(e,s=null){const o=this._reduceControls(e);return new Ad(o,s)}control(e,s,o){let c={};return this.useNonNullable?(Fm(s)?c=s:(c.validators=s,c.asyncValidators=o),new a(e,{...c,nonNullable:!0})):new a(e,s,o)}array(e,s,o){const c=e.map(l=>this._createControl(l));return new Nm(c,s,o)}_reduceControls(e){const s={};return Object.keys(e).forEach(o=>{s[o]=this._createControl(e[o])}),s}_createControl(e){return e instanceof a||e instanceof Da?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),t_=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:Fa,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Zi,useValue:e.callSetDisabledState??Oa}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[Jm]}),i})();function e_(i,t){if(1&i&&(u.TgZ(0,"div"),u._UZ(1,"input",22),u.TgZ(2,"label"),u._uU(3),u.qZA()()),2&i){const e=t.index,s=u.oxw();u.xp6(1),u.Q6J("formControlName",e),u.xp6(2),u.Oqu(s.keySrv.solfegeList[e])}}function n_(i,t){if(1&i&&(u.ynx(0),u._UZ(1,"input",22),u.TgZ(2,"label"),u._uU(3),u.qZA(),u.BQk()),2&i){const e=u.oxw().index,s=u.oxw();u.xp6(1),u.Q6J("formControlName",e),u.xp6(2),u.Oqu(s.keySrv.solfegeList[e])}}function s_(i,t){if(1&i&&(u.TgZ(0,"div"),u.YNc(1,n_,4,2,"ng-container",23),u.qZA()),2&i){const e=t.index,s=u.oxw();u.xp6(1),u.Q6J("ngIf",s.scaleConfigFormArray.controls[e].value)}}function i_(i,t){if(1&i&&(u.ynx(0),u._UZ(1,"input",22),u.TgZ(2,"label"),u._uU(3),u.qZA(),u.BQk()),2&i){const e=u.oxw().index,s=u.oxw(2);u.xp6(1),u.Q6J("formControlName",e),u.xp6(1),u.ekj("not-in-key",!s.scaleConfigFormArray.controls[e].value),u.xp6(1),u.Oqu(s.keySrv.solfegeList[e])}}function r_(i,t){if(1&i&&(u.TgZ(0,"div"),u.YNc(1,i_,4,4,"ng-container",23),u.qZA()),2&i){const e=t.index,s=u.oxw(2);u.xp6(1),u.Q6J("ngIf",s.configForm.controls.showChordsChromatic.value||s.scaleConfigFormArray.controls[e].value)}}function o_(i,t){if(1&i){const e=u.EpF();u.TgZ(0,"button",3),u.NdJ("click",function(){u.CHM(e);const o=u.oxw().index,c=u.oxw();return u.KtG(c.removeNestedFormGroup(o))}),u._uU(1,"Delete"),u.qZA()}}function a_(i,t){if(1&i&&(u.TgZ(0,"div")(1,"div",24)(2,"div",25),u.YNc(3,r_,2,1,"div",17),u.qZA()(),u.YNc(4,o_,2,0,"button",26),u.qZA()),2&i){const e=t.index,s=u.oxw();u.xp6(1),u.Q6J("formGroupName",e),u.xp6(2),u.Q6J("ngForOf",s.chordNotes.controls),u.xp6(1),u.Q6J("ngIf",s.chordsProgressionConfigFormArray.controls.length>1)}}let c_=(()=>{class i{constructor(e,s,o){this.keySrv=e,this.formBuilder=s,this.configSrv=o,this.WalkMode=de,this.configForm=this.formBuilder.group({presetName:"",octaveConfigLow:"",octaveConfigHigh:"",scaleConfig:this.formBuilder.array([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]),possibleRandomNotesConfig:this.formBuilder.array([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]),walkMode:[],chordsProgressionConfig:this.formBuilder.array([this.createChordFormGroup()]),chordsProgressionRandom:[],showChordsChromatic:[]}),(0,u.cEC)(()=>{for(;0!==this.chordsProgressionConfigFormArray.controls.length;)this.removeNestedFormGroup(0);for(let c=0;c<this.configSrv.configObj().chordsProgressionConfig.length;c++)this.addNestedFormGroup();this.configForm.setValue(this.configSrv.configObj())}),this.possibleNotesSubscription=this.scaleConfigFormArray.valueChanges.subscribe(c=>{c.forEach((l,d)=>{this.possibleRandomNotesConfigArray.controls[d].setValue(!!l||null)})})}apply(){this.configSrv.configObj.set(this.configForm.value)}createChordFormGroup(){return this.formBuilder.group({chordNotes:this.formBuilder.array([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])})}addNestedFormGroup(){this.chordsProgressionConfigFormArray.length>10||this.chordsProgressionConfigFormArray.push(this.createChordFormGroup())}removeNestedFormGroup(e){this.configForm.get("chordsProgressionConfig").removeAt(e)}get scaleConfigFormArray(){return this.configForm.controls.scaleConfig}get possibleRandomNotesConfigArray(){return this.configForm.controls.possibleRandomNotesConfig}get chordsProgressionConfigFormArray(){return this.configForm.controls.chordsProgressionConfig}get chordNotes(){return this.chordsProgressionConfigFormArray.controls[0].get("chordNotes")}ngOnDestroy(){this.possibleNotesSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(va),u.Y36(Km),u.Y36(mi))},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-configuration-panel"]],decls:69,vars:8,consts:[[3,"formGroup"],[1,"cet-config-wrapper"],[1,"cet-preset-belt"],[3,"click"],[1,"cet-configure-wrapper"],[1,"cet-configure-inner"],[1,"cet-scroll-wrapper"],["for","presetName"],["type","text","id","presetName","formControlName","presetName"],["for","octaveConfigLow"],["type","number","id","octaveConfigLow","formControlName","octaveConfigLow"],["for","octaveConfigHigh"],["type","number","id","octaveConfigHigh","formControlName","octaveConfigHigh"],["for","walk-mode"],["name","walk-mode","id","walk-mode","formControlName","walkMode"],[3,"value"],["formArrayName","scaleConfig",1,"scale-checkboxes"],[4,"ngFor","ngForOf"],["formArrayName","possibleRandomNotesConfig",1,"possible-checkboxes"],["type","checkbox","formControlName","chordsProgressionRandom"],["type","checkbox","formControlName","showChordsChromatic"],["formArrayName","chordsProgressionConfig",1,"scale-checkboxes"],["type","checkbox",3,"formControlName"],[4,"ngIf"],[3,"formGroupName"],["formArrayName","chordNotes"],[3,"click",4,"ngIf"]],template:function(e,s){1&e&&(u.TgZ(0,"h2"),u._uU(1,"Presets"),u.qZA(),u.TgZ(2,"form",0)(3,"div",1)(4,"div",2)(5,"button",3),u.NdJ("click",function(){return s.configSrv.aa()}),u._uU(6,"Preset1"),u.qZA(),u.TgZ(7,"button",3),u.NdJ("click",function(){return s.configSrv.aa()}),u._uU(8,"Preset2"),u.qZA(),u.TgZ(9,"button",3),u.NdJ("click",function(){return s.configSrv.aa()}),u._uU(10,"Preset3"),u.qZA(),u.TgZ(11,"button",3),u.NdJ("click",function(){return s.configSrv.aa()}),u._uU(12,"Preset3"),u.qZA()(),u.TgZ(13,"div",4)(14,"h2"),u._uU(15,"Configure"),u.qZA(),u.TgZ(16,"div",5)(17,"div",6)(18,"div")(19,"label",7),u._uU(20,"Name:"),u.qZA(),u._UZ(21,"input",8),u.qZA(),u.TgZ(22,"div")(23,"label",9),u._uU(24,"Octave Config Low:"),u.qZA(),u._UZ(25,"input",10),u.qZA(),u.TgZ(26,"div")(27,"label",11),u._uU(28,"Octave Config High:"),u.qZA(),u._UZ(29,"input",12),u.qZA(),u.TgZ(30,"div")(31,"label",13),u._uU(32,"Walk Mode:"),u.qZA(),u.TgZ(33,"select",14)(34,"option",15),u._uU(35,"To Root"),u.qZA(),u.TgZ(36,"option",15),u._uU(37,"From Root"),u.qZA(),u.TgZ(38,"option",15),u._uU(39,"Jump to Root"),u.qZA(),u.TgZ(40,"option",15),u._uU(41,"No Walk"),u.qZA()()(),u.TgZ(42,"div")(43,"label"),u._uU(44,"Scale Config:"),u.qZA(),u.TgZ(45,"div",16),u.YNc(46,e_,4,2,"div",17),u.qZA()(),u.TgZ(47,"div")(48,"label"),u._uU(49,"Possible Random Notes:"),u.qZA(),u.TgZ(50,"div",18),u.YNc(51,s_,2,1,"div",17),u.qZA()(),u.TgZ(52,"div")(53,"label"),u._uU(54,"Chord Progression Randomize Octaves?"),u.qZA(),u._UZ(55,"input",19),u.qZA(),u.TgZ(56,"div")(57,"label"),u._uU(58,"Show Chords Chromatic"),u.qZA(),u._UZ(59,"input",20),u.qZA(),u.TgZ(60,"div")(61,"label"),u._uU(62,"Chord Progression:"),u.qZA(),u.TgZ(63,"div",21),u.YNc(64,a_,5,3,"div",17),u.qZA()(),u.TgZ(65,"button",3),u.NdJ("click",function(){return s.addNestedFormGroup()}),u._uU(66,"Add Chord"),u.qZA(),u.TgZ(67,"button",3),u.NdJ("click",function(){return s.apply()}),u._uU(68,"Apply"),u.qZA()()()()()()),2&e&&(u.xp6(2),u.Q6J("formGroup",s.configForm),u.xp6(32),u.s9C("value",s.WalkMode.ToRoot),u.xp6(2),u.s9C("value",s.WalkMode.FromRoot),u.xp6(2),u.s9C("value",s.WalkMode.JumpToRoot),u.xp6(2),u.s9C("value",s.WalkMode.NoWalk),u.xp6(6),u.Q6J("ngForOf",s.scaleConfigFormArray.controls),u.xp6(5),u.Q6J("ngForOf",s.scaleConfigFormArray.controls),u.xp6(13),u.Q6J("ngForOf",s.chordsProgressionConfigFormArray.controls))},dependencies:[ft.sg,ft.O5,Dt,vm,bm,ba,kt,Ur,Nd,vd,xd,Od,Ag,Md,kd],styles:["[_nghost-%COMP%]{height:100%}form[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-start;align-items:center;flex-direction:column;height:100%}.cet-config-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;flex-direction:column;width:calc(100vw - 20px);max-width:calc(100vw - 20px);gap:10px;height:100%}.check-group[_ngcontent-%COMP%], .possible-checkboxes[_ngcontent-%COMP%], .scale-checkboxes[_ngcontent-%COMP%]{display:flex;flex-direction:row}.not-in-key[_ngcontent-%COMP%]{opacity:.5}.cet-preset-belt[_ngcontent-%COMP%]{width:100%;height:57px;min-height:57px;border-block:solid #000000 3px;display:flex;flex-direction:row;align-items:center;overflow-x:auto;gap:6px;box-shadow:0 4px #000}.cet-preset-belt[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:40px;width:130px;min-width:130px;border-radius:10px}.cet-configure-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:3px;height:calc(100% - 240px)}.cet-configure-inner[_ngcontent-%COMP%]{border:3px solid #000000;box-shadow:4px 4px #000;border-radius:10px;height:100%;padding:5px}.cet-configure-inner[_ngcontent-%COMP%]   .cet-scroll-wrapper[_ngcontent-%COMP%]{overflow-y:auto;height:100%}.cet-configure-inner[_ngcontent-%COMP%]   .cet-scroll-wrapper[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:5px}"]}),i})(),u_=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[ft.ez,Kh,ed.N,t_]}),i})();u.B6R(Jh,[ft.sg,ft.O5,b.rH,Qp,c_],[])},9884:function(J,Qt,ut){!function(ft,b,Pt,at){"use strict";var u=function(K,ht,Z){return{endTime:ht,insertTime:Z,type:"exponentialRampToValue",value:K}},Ft=function(K,ht,Z){return{endTime:ht,insertTime:Z,type:"linearRampToValue",value:K}},fe=function(K,ht){return{startTime:ht,type:"setValue",value:K}},Oe=function(K,ht,Z){return{duration:Z,startTime:ht,type:"setValueCurve",values:K}},Us=function(K,ht,Z){var ct=Z.target;return ct+(ht-ct)*Math.exp((Z.startTime-K)/Z.timeConstant)},ln=function(K){return"exponentialRampToValue"===K.type},hn=function(K){return"linearRampToValue"===K.type},Bn=function(K){return ln(K)||hn(K)},Je=function(K){return"setValue"===K.type},Re=function(K){return"setValueCurve"===K.type},ts=function qt(K,ht,Z,wt){var ct=K[ht];return void 0===ct?wt:Bn(ct)||Je(ct)?ct.value:Re(ct)?ct.values[ct.values.length-1]:Us(Z,qt(K,ht-1,ct.startTime,wt),ct)},Ue=function(K,ht,Z,wt,ct){return void 0===Z?[wt.insertTime,ct]:Bn(Z)?[Z.endTime,Z.value]:Je(Z)?[Z.startTime,Z.value]:Re(Z)?[Z.startTime+Z.duration,Z.values[Z.values.length-1]]:[Z.startTime,ts(K,ht-1,Z.startTime,ct)]},dn=function(K){return"cancelAndHold"===K.type},gs=function(K){return"cancelScheduledValues"===K.type},ve=function(K){return dn(K)||gs(K)?K.cancelTime:ln(K)||hn(K)?K.endTime:K.startTime},Gn=function(K,ht,Z,wt){var At=wt.value;return Z===At?At:0<Z&&0<At||Z<0&&At<0?Z*Math.pow(At/Z,(K-ht)/(wt.endTime-ht)):0},Ke=function(K,ht,Z,wt){return Z+(K-ht)/(wt.endTime-ht)*(wt.value-Z)},Tn=function(K,ht){var ct=ht.values;return function(K,ht){var Z=Math.floor(ht),wt=Math.ceil(ht);return Z===wt?K[Z]:(1-(ht-Z))*K[Z]+(1-(wt-ht))*K[wt]}(ct,(K-ht.startTime)/ht.duration*(ct.length-1))},ns=function(K){return"setTarget"===K.type},bi=function(qt){function K(ht){Pt(this,K),this._automationEvents=[],this._currenTime=0,this._defaultValue=ht}return at(K,[{key:qt,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(Z){var wt=ve(Z);if(dn(Z)||gs(Z)){var ct=this._automationEvents.findIndex(function(ie){return gs(Z)&&Re(ie)?ie.startTime+ie.duration>=wt:ve(ie)>=wt}),At=this._automationEvents[ct];if(-1!==ct&&(this._automationEvents=this._automationEvents.slice(0,ct)),dn(Z)){var pt=this._automationEvents[this._automationEvents.length-1];if(void 0!==At&&Bn(At)){if(void 0!==pt&&ns(pt))throw new Error("The internal list is malformed.");var wi=void 0===pt?At.insertTime:Re(pt)?pt.startTime+pt.duration:ve(pt),zs=void 0===pt?this._defaultValue:Re(pt)?pt.values[pt.values.length-1]:pt.value,Wn=ln(At)?Gn(wt,wi,zs,At):Ke(wt,wi,zs,At),Cs=ln(At)?u(Wn,wt,this._currenTime):Ft(Wn,wt,this._currenTime);this._automationEvents.push(Cs)}if(void 0!==pt&&ns(pt)&&this._automationEvents.push(fe(this.getValue(wt),wt)),void 0!==pt&&Re(pt)&&pt.startTime+pt.duration>wt){var js=wt-pt.startTime,Jt=(pt.values.length-1)/pt.duration,Un=Math.max(2,1+Math.ceil(js*Jt)),ms=js/(Un-1)*Jt,Me=pt.values.slice(0,Un);if(ms<1)for(var fn=1;fn<Un;fn+=1){var Qi=ms*fn%1;Me[fn]=pt.values[fn-1]*(1-Qi)+pt.values[fn]*Qi}this._automationEvents[this._automationEvents.length-1]=Oe(Me,pt.startTime,js)}}}else{var Ve=this._automationEvents.findIndex(function(ie){return ve(ie)>wt}),ce=-1===Ve?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[Ve-1];if(void 0!==ce&&Re(ce)&&ve(ce)+ce.duration>wt)return!1;var ke=ln(Z)?u(Z.value,Z.endTime,this._currenTime):hn(Z)?Ft(Z.value,wt,this._currenTime):Z;if(-1===Ve)this._automationEvents.push(ke);else{if(Re(Z)&&wt+Z.duration>ve(this._automationEvents[Ve]))return!1;this._automationEvents.splice(Ve,0,ke)}}return!0}},{key:"flush",value:function(Z){var wt=this._automationEvents.findIndex(function(pt){return ve(pt)>Z});if(wt>1){var ct=this._automationEvents.slice(wt-1),At=ct[0];ns(At)&&ct.unshift(fe(ts(this._automationEvents,wt-2,At.startTime,this._defaultValue),At.startTime)),this._automationEvents=ct}}},{key:"getValue",value:function(Z){if(0===this._automationEvents.length)return this._defaultValue;var wt=this._automationEvents.findIndex(function(Me){return ve(Me)>Z}),ct=this._automationEvents[wt],At=(-1===wt?this._automationEvents.length:wt)-1,pt=this._automationEvents[At];if(void 0!==pt&&ns(pt)&&(void 0===ct||!Bn(ct)||ct.insertTime>Z))return Us(Z,ts(this._automationEvents,At-1,pt.startTime,this._defaultValue),pt);if(void 0!==pt&&Je(pt)&&(void 0===ct||!Bn(ct)))return pt.value;if(void 0!==pt&&Re(pt)&&(void 0===ct||!Bn(ct)||pt.startTime+pt.duration>Z))return Z<pt.startTime+pt.duration?Tn(Z,pt):pt.values[pt.values.length-1];if(void 0!==pt&&Bn(pt)&&(void 0===ct||!Bn(ct)))return pt.value;if(void 0!==ct&&ln(ct)){var wi=Ue(this._automationEvents,At,pt,ct,this._defaultValue),zs=b(wi,2);return Gn(Z,zs[0],zs[1],ct)}if(void 0!==ct&&hn(ct)){var js=Ue(this._automationEvents,At,pt,ct,this._defaultValue),Jt=b(js,2);return Ke(Z,Jt[0],Jt[1],ct)}return this._defaultValue}}]),K}(Symbol.iterator);ft.AutomationEventList=bi,ft.createCancelAndHoldAutomationEvent=function(K){return{cancelTime:K,type:"cancelAndHold"}},ft.createCancelScheduledValuesAutomationEvent=function(K){return{cancelTime:K,type:"cancelScheduledValues"}},ft.createExponentialRampToValueAutomationEvent=function(K,ht){return{endTime:ht,type:"exponentialRampToValue",value:K}},ft.createLinearRampToValueAutomationEvent=function(K,ht){return{endTime:ht,type:"linearRampToValue",value:K}},ft.createSetTargetAutomationEvent=function(K,ht,Z){return{startTime:ht,target:K,timeConstant:Z,type:"setTarget"}},ft.createSetValueAutomationEvent=fe,ft.createSetValueCurveAutomationEvent=Oe}(Qt,ut(7424),ut(6690),ut(9728))},6990:function(J,Qt,ut){var ft;J=ut.nmd(J),function(){var b,Ft="Expected a function",Oe="__lodash_hash_undefined__",ln="__lodash_placeholder__",ht=1/0,Z=9007199254740991,At=4294967295,zs=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Wn="[object Arguments]",Cs="[object Array]",Jt="[object Boolean]",Un="[object Date]",Me="[object Error]",fn="[object Function]",Qi="[object GeneratorFunction]",Ve="[object Map]",ce="[object Number]",ie="[object Object]",el="[object Promise]",$i="[object RegExp]",zn="[object Set]",Xi="[object String]",eo="[object Symbol]",Ji="[object WeakMap]",Ce="[object ArrayBuffer]",ss="[object DataView]",Ki="[object Float32Array]",Ci="[object Float64Array]",no="[object Int8Array]",Ia="[object Int16Array]",Pa="[object Int32Array]",qa="[object Uint8Array]",La="[object Uint8ClampedArray]",Ai="[object Uint16Array]",Zs="[object Uint32Array]",Hs=/\b__p \+= '';/g,nl=/\b(__p \+=) '' \+/g,sl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ys=/&(?:amp|lt|gt|quot|#39);/g,tr=/[&<>"']/g,il=RegExp(Ys.source),Vd=RegExp(tr.source),rl=/<%-([\s\S]+?)%>/g,ol=/<%([\s\S]+?)%>/g,er=/<%=([\s\S]+?)%>/g,ne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nr=/^\w*$/,Qs=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Si=/[\\^$.*+?()[\]{}|]/g,al=RegExp(Si.source),sr=/^\s+/,so=/\s/,Id=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Pd=/\{\n\/\* \[wrapped with (.+)\] \*/,qd=/,? & /,Ld=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ba=/[()=,{}\[\]\/\s]/,Ga=/\\(\\)?/g,Bd=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,cl=/\w*$/,Gd=/^[-+]0x[0-9a-f]+$/i,Wd=/^0b[01]+$/i,Ud=/^\[object .+?Constructor\]$/,zd=/^0o[0-7]+$/i,ul=/^(?:0|[1-9]\d*)$/,jd=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,io=/($^)/,ro=/['\n\r\u2028\u2029\\]/g,ir="\\ud800-\\udfff",ll="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",hl="\\u2700-\\u27bf",dl="a-z\\xdf-\\xf6\\xf8-\\xff",fl="A-Z\\xc0-\\xd6\\xd8-\\xde",pl="\\ufe0e\\ufe0f",gl="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Jd="["+ir+"]",ml="["+gl+"]",ao="["+ll+"]",_l="\\d+",Kd="["+hl+"]",yl="["+dl+"]",vl="[^"+ir+gl+_l+hl+dl+fl+"]",Ua="\\ud83c[\\udffb-\\udfff]",xl="[^"+ir+"]",za="(?:\\ud83c[\\udde6-\\uddff]){2}",ja="[\\ud800-\\udbff][\\udc00-\\udfff]",Ti="["+fl+"]",bl="(?:"+yl+"|"+vl+")",ef="(?:"+Ti+"|"+vl+")",wl="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Cl="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Al="(?:"+ao+"|"+Ua+")?",Sl="["+pl+"]?",rr=Sl+Al+"(?:\\u200d(?:"+[xl,za,ja].join("|")+")"+Sl+Al+")*",of="(?:"+[Kd,za,ja].join("|")+")"+rr,af="(?:"+[xl+ao+"?",ao,za,ja,Jd].join("|")+")",cf=RegExp("['\u2019]","g"),uf=RegExp(ao,"g"),Ha=RegExp(Ua+"(?="+Ua+")|"+af+rr,"g"),lf=RegExp([Ti+"?"+yl+"+"+wl+"(?="+[ml,Ti,"$"].join("|")+")",ef+"+"+Cl+"(?="+[ml,Ti+bl,"$"].join("|")+")",Ti+"?"+bl+"+"+wl,Ti+"+"+Cl,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",_l,of].join("|"),"g"),hf=RegExp("[\\u200d"+ir+ll+pl+"]"),df=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ff=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],pf=-1,se={};se[Ki]=se[Ci]=se[no]=se[Ia]=se[Pa]=se[qa]=se[La]=se[Ai]=se[Zs]=!0,se[Wn]=se[Cs]=se[Ce]=se[Jt]=se[ss]=se[Un]=se[Me]=se[fn]=se[Ve]=se[ce]=se[ie]=se[$i]=se[zn]=se[Xi]=se[Ji]=!1;var Kt={};Kt[Wn]=Kt[Cs]=Kt[Ce]=Kt[ss]=Kt[Jt]=Kt[Un]=Kt[Ki]=Kt[Ci]=Kt[no]=Kt[Ia]=Kt[Pa]=Kt[Ve]=Kt[ce]=Kt[ie]=Kt[$i]=Kt[zn]=Kt[Xi]=Kt[eo]=Kt[qa]=Kt[La]=Kt[Ai]=Kt[Zs]=!0,Kt[Me]=Kt[fn]=Kt[Ji]=!1;var yf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},vf=parseFloat,xe=parseInt,Tl="object"==typeof global&&global&&global.Object===Object&&global,xf="object"==typeof self&&self&&self.Object===Object&&self,Ie=Tl||xf||Function("return this")(),or=Qt&&!Qt.nodeType&&Qt,ar=or&&J&&!J.nodeType&&J,Dl=ar&&ar.exports===or,Ya=Dl&&Tl.process,pn=function(){try{return ar&&ar.require&&ar.require("util").types||Ya&&Ya.binding&&Ya.binding("util")}catch{}}(),Ol=pn&&pn.isArrayBuffer,Ml=pn&&pn.isDate,kl=pn&&pn.isMap,Nl=pn&&pn.isRegExp,Fl=pn&&pn.isSet,El=pn&&pn.isTypedArray;function gn(O,V,E){switch(E.length){case 0:return O.call(V);case 1:return O.call(V,E[0]);case 2:return O.call(V,E[0],E[1]);case 3:return O.call(V,E[0],E[1],E[2])}return O.apply(V,E)}function bf(O,V,E,$){for(var Ct=-1,Rt=null==O?0:O.length;++Ct<Rt;){var Se=O[Ct];V($,Se,E(Se),O)}return $}function Dn(O,V){for(var E=-1,$=null==O?0:O.length;++E<$&&!1!==V(O[E],E,O););return O}function wf(O,V){for(var E=null==O?0:O.length;E--&&!1!==V(O[E],E,O););return O}function Rl(O,V){for(var E=-1,$=null==O?0:O.length;++E<$;)if(!V(O[E],E,O))return!1;return!0}function As(O,V){for(var E=-1,$=null==O?0:O.length,Ct=0,Rt=[];++E<$;){var Se=O[E];V(Se,E,O)&&(Rt[Ct++]=Se)}return Rt}function co(O,V){return!(null==O||!O.length)&&Wt(O,V,0)>-1}function Qa(O,V,E){for(var $=-1,Ct=null==O?0:O.length;++$<Ct;)if(E(V,O[$]))return!0;return!1}function re(O,V){for(var E=-1,$=null==O?0:O.length,Ct=Array($);++E<$;)Ct[E]=V(O[E],E,O);return Ct}function Ss(O,V){for(var E=-1,$=V.length,Ct=O.length;++E<$;)O[Ct+E]=V[E];return O}function $a(O,V,E,$){var Ct=-1,Rt=null==O?0:O.length;for($&&Rt&&(E=O[++Ct]);++Ct<Rt;)E=V(E,O[Ct],Ct,O);return E}function Cf(O,V,E,$){var Ct=null==O?0:O.length;for($&&Ct&&(E=O[--Ct]);Ct--;)E=V(E,O[Ct],Ct,O);return E}function Xa(O,V){for(var E=-1,$=null==O?0:O.length;++E<$;)if(V(O[E],E,O))return!0;return!1}var Af=Ka("length");function Vl(O,V,E){var $;return E(O,function(Ct,Rt,Se){if(V(Ct,Rt,Se))return $=Rt,!1}),$}function uo(O,V,E,$){for(var Ct=O.length,Rt=E+($?1:-1);$?Rt--:++Rt<Ct;)if(V(O[Rt],Rt,O))return Rt;return-1}function Wt(O,V,E){return V==V?function Ef(O,V,E){for(var $=E-1,Ct=O.length;++$<Ct;)if(O[$]===V)return $;return-1}(O,V,E):uo(O,Ja,E)}function Ae(O,V,E,$){for(var Ct=E-1,Rt=O.length;++Ct<Rt;)if($(O[Ct],V))return Ct;return-1}function Ja(O){return O!=O}function Il(O,V){var E=null==O?0:O.length;return E?cr(O,V)/E:NaN}function Ka(O){return function(V){return null==V?b:V[O]}}function tc(O){return function(V){return null==O?b:O[V]}}function ue(O,V,E,$,Ct){return Ct(O,function(Rt,Se,$t){E=$?($=!1,Rt):V(E,Rt,Se,$t)}),E}function cr(O,V){for(var E,$=-1,Ct=O.length;++$<Ct;){var Rt=V(O[$]);Rt!==b&&(E=E===b?Rt:E+Rt)}return E}function ur(O,V){for(var E=-1,$=Array(O);++E<O;)$[E]=V(E);return $}function Pl(O){return O&&O.slice(0,Gl(O)+1).replace(sr,"")}function mn(O){return function(V){return O(V)}}function ec(O,V){return re(V,function(E){return O[E]})}function lr(O,V){return O.has(V)}function ql(O,V){for(var E=-1,$=O.length;++E<$&&Wt(V,O[E],0)>-1;);return E}function nc(O,V){for(var E=O.length;E--&&Wt(V,O[E],0)>-1;);return E}var Mf=tc({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),kf=tc({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Nf(O){return"\\"+yf[O]}function Di(O){return hf.test(O)}function sc(O){var V=-1,E=Array(O.size);return O.forEach(function($,Ct){E[++V]=[Ct,$]}),E}function Xs(O,V){return function(E){return O(V(E))}}function Ts(O,V){for(var E=-1,$=O.length,Ct=0,Rt=[];++E<$;){var Se=O[E];(Se===V||Se===ln)&&(O[E]=ln,Rt[Ct++]=E)}return Rt}function lo(O){var V=-1,E=Array(O.size);return O.forEach(function($){E[++V]=$}),E}function Oi(O){return Di(O)?function Rf(O){for(var V=Ha.lastIndex=0;Ha.test(O);)++V;return V}(O):Af(O)}function jn(O){return Di(O)?function Vf(O){return O.match(Ha)||[]}(O):function $s(O){return O.split("")}(O)}function Gl(O){for(var V=O.length;V--&&so.test(O.charAt(V)););return V}var Wl=tc({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),ho=function O(V){var n,E=(V=null==V?Ie:ho.defaults(Ie.Object(),V,ho.pick(Ie,ff))).Array,$=V.Date,Ct=V.Error,Rt=V.Function,Se=V.Math,$t=V.Object,ic=V.RegExp,qf=V.String,Xt=V.TypeError,fo=E.prototype,Mi=$t.prototype,po=V["__core-js_shared__"],go=Rt.prototype.toString,Ut=Mi.hasOwnProperty,Bf=0,Ul=(n=/[^.]+$/.exec(po&&po.keys&&po.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",mo=Mi.toString,Gf=go.call($t),Wf=Ie._,Uf=ic("^"+go.call(Ut).replace(Si,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_o=Dl?V.Buffer:b,Ds=V.Symbol,yo=V.Uint8Array,zl=_o?_o.allocUnsafe:b,vo=Xs($t.getPrototypeOf,$t),jl=$t.create,Zl=Mi.propertyIsEnumerable,xo=fo.splice,Hl=Ds?Ds.isConcatSpreadable:b,dr=Ds?Ds.iterator:b,Js=Ds?Ds.toStringTag:b,fr=function(){try{var n=cs($t,"defineProperty");return n({},"",{}),n}catch{}}(),zf=V.clearTimeout!==Ie.clearTimeout&&V.clearTimeout,jf=$&&$.now!==Ie.Date.now&&$.now,Zf=V.setTimeout!==Ie.setTimeout&&V.setTimeout,bo=Se.ceil,wo=Se.floor,rc=$t.getOwnPropertySymbols,Hf=_o?_o.isBuffer:b,Yl=V.isFinite,Ql=fo.join,$l=Xs($t.keys,$t),le=Se.max,ze=Se.min,Yf=$.now,Qf=V.parseInt,oc=Se.random,$f=fo.reverse,ac=cs(V,"DataView"),pr=cs(V,"Map"),gr=cs(V,"Promise"),Ks=cs(V,"Set"),ti=cs(V,"WeakMap"),mr=cs($t,"create"),Co=ti&&new ti,ei={},ki=ui(ac),Xf=ui(pr),Jf=ui(gr),Kf=ui(Ks),Xl=ui(ti),Ao=Ds?Ds.prototype:b,Pe=Ao?Ao.valueOf:b,On=Ao?Ao.toString:b;function _(n){if(_e(n)&&!vt(n)&&!(n instanceof nt)){if(n instanceof Mn)return n;if(Ut.call(n,"__wrapped__"))return Vs(n)}return new Mn(n)}var Os=function(){function n(){}return function(r){if(!pe(r))return{};if(jl)return jl(r);n.prototype=r;var a=new n;return n.prototype=b,a}}();function be(){}function Mn(n,r){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=b}function nt(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=At,this.__views__=[]}function Ms(n){var r=-1,a=null==n?0:n.length;for(this.clear();++r<a;){var h=n[r];this.set(h[0],h[1])}}function zt(n){var r=-1,a=null==n?0:n.length;for(this.clear();++r<a;){var h=n[r];this.set(h[0],h[1])}}function Zn(n){var r=-1,a=null==n?0:n.length;for(this.clear();++r<a;){var h=n[r];this.set(h[0],h[1])}}function je(n){var r=-1,a=null==n?0:n.length;for(this.__data__=new Zn;++r<a;)this.add(n[r])}function Yn(n){var r=this.__data__=new zt(n);this.size=r.size}function sh(n,r){var a=vt(n),h=!a&&Ps(n),m=!a&&!h&&hs(n),v=!a&&!h&&!m&&mi(n),C=a||h||m||v,T=C?ur(n.length,qf):[],k=T.length;for(var q in n)(r||Ut.call(n,q))&&(!C||!("length"==q||m&&("offset"==q||"parent"==q)||v&&("buffer"==q||"byteLength"==q||"byteOffset"==q)||nn(q,k)))&&T.push(q);return T}function ys(n){var r=n.length;return r?n[bc(0,r-1)]:b}function op(n,r){return ee(me(n),si(r,0,n.length))}function ap(n){return ee(me(n))}function dc(n,r,a){(a!==b&&!Bt(n[r],a)||a===b&&!(r in n))&&rs(n,r,a)}function _r(n,r,a){var h=n[r];(!Ut.call(n,r)||!Bt(h,a)||a===b&&!(r in n))&&rs(n,r,a)}function To(n,r){for(var a=n.length;a--;)if(Bt(n[a][0],r))return a;return-1}function Ei(n,r,a,h){return Ns(n,function(m,v,C){r(h,m,a(m),C)}),h}function ih(n,r){return n&&yn(r,De(r),n)}function rs(n,r,a){"__proto__"==r&&fr?fr(n,r,{configurable:!0,enumerable:!0,value:a,writable:!0}):n[r]=a}function fc(n,r){for(var a=-1,h=r.length,m=E(h),v=null==n;++a<h;)m[a]=v?b:Ur(n,r[a]);return m}function si(n,r,a){return n==n&&(a!==b&&(n=n<=a?n:a),r!==b&&(n=n>=r?n:r)),n}function kn(n,r,a,h,m,v){var C,T=1&r,k=2&r,q=4&r;if(a&&(C=m?a(n,h,m,v):a(n)),C!==b)return C;if(!pe(n))return n;var L=vt(n);if(L){if(C=function Mg(n){var r=n.length,a=new n.constructor(r);return r&&"string"==typeof n[0]&&Ut.call(n,"index")&&(a.index=n.index,a.input=n.input),a}(n),!T)return me(n,C)}else{var W=Le(n),Y=W==fn||W==Qi;if(hs(n))return Qn(n,T);if(W==ie||W==Wn||Y&&!m){if(C=k||Y?{}:cn(n),!T)return k?function Mh(n,r){return yn(n,Zo(n),r)}(n,function cp(n,r){return n&&yn(r,Zt(r),n)}(C,n)):function Ii(n,r){return yn(n,Fc(n),r)}(n,ih(C,n))}else{if(!Kt[W])return m?n:{};C=function kp(n,r,a){var h=n.constructor;switch(r){case Ce:return Vi(n);case Jt:case Un:return new h(+n);case ss:return function Sp(n,r){var a=r?Vi(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.byteLength)}(n,a);case Ki:case Ci:case no:case Ia:case Pa:case qa:case La:case Ai:case Zs:return Th(n,a);case Ve:return new h;case ce:case Xi:return new h(n);case $i:return function Tp(n){var r=new n.constructor(n.source,cl.exec(n));return r.lastIndex=n.lastIndex,r}(n);case zn:return new h;case eo:return function oi(n){return Pe?$t(Pe.call(n)):{}}(n)}}(n,W,T)}}v||(v=new Yn);var st=v.get(n);if(st)return st;v.set(n,C),Vu(n)?n.forEach(function(_t){C.add(kn(_t,r,a,_t,n,v))}):Wp(n)&&n.forEach(function(_t,kt){C.set(kt,kn(_t,r,a,kt,n,v))});var Dt=L?b:(q?k?xn:Rs:k?Zt:De)(n);return Dn(Dt||n,function(_t,kt){Dt&&(_t=n[kt=_t]),_r(C,kt,kn(_t,r,a,kt,n,v))}),C}function pc(n,r,a){var h=a.length;if(null==n)return!h;for(n=$t(n);h--;){var m=a[h],C=n[m];if(C===b&&!(m in n)||!(0,r[m])(C))return!1}return!0}function rh(n,r,a){if("function"!=typeof n)throw new Xt(Ft);return $o(function(){n.apply(b,a)},r)}function yr(n,r,a,h){var m=-1,v=co,C=!0,T=n.length,k=[],q=r.length;if(!T)return k;a&&(r=re(r,mn(a))),h?(v=Qa,C=!1):r.length>=200&&(v=lr,C=!1,r=new je(r));t:for(;++m<T;){var L=n[m],W=null==a?L:a(L);if(L=h||0!==L?L:0,C&&W==W){for(var Y=q;Y--;)if(r[Y]===W)continue t;k.push(L)}else v(r,W,h)||k.push(L)}return k}_.templateSettings={escape:rl,evaluate:ol,interpolate:er,variable:"",imports:{_}},(_.prototype=be.prototype).constructor=_,(Mn.prototype=Os(be.prototype)).constructor=Mn,(nt.prototype=Os(be.prototype)).constructor=nt,Ms.prototype.clear=function _s(){this.__data__=mr?mr(null):{},this.size=0},Ms.prototype.delete=function cc(n){var r=this.has(n)&&delete this.__data__[n];return this.size-=r?1:0,r},Ms.prototype.get=function uc(n){var r=this.__data__;if(mr){var a=r[n];return a===Oe?b:a}return Ut.call(r,n)?r[n]:b},Ms.prototype.has=function Kl(n){var r=this.__data__;return mr?r[n]!==b:Ut.call(r,n)},Ms.prototype.set=function Ni(n,r){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=mr&&r===b?Oe:r,this},zt.prototype.clear=function tp(){this.__data__=[],this.size=0},zt.prototype.delete=function lc(n){var r=this.__data__,a=To(r,n);return!(a<0||(a==r.length-1?r.pop():xo.call(r,a,1),--this.size,0))},zt.prototype.get=function th(n){var r=this.__data__,a=To(r,n);return a<0?b:r[a][1]},zt.prototype.has=function eh(n){return To(this.__data__,n)>-1},zt.prototype.set=function hc(n,r){var a=this.__data__,h=To(a,n);return h<0?(++this.size,a.push([n,r])):a[h][1]=r,this},Zn.prototype.clear=function ep(){this.size=0,this.__data__={hash:new Ms,map:new(pr||zt),string:new Ms}},Zn.prototype.delete=function So(n){var r=zo(this,n).delete(n);return this.size-=r?1:0,r},Zn.prototype.get=function nh(n){return zo(this,n).get(n)},Zn.prototype.has=function is(n){return zo(this,n).has(n)},Zn.prototype.set=function Fi(n,r){var a=zo(this,n),h=a.size;return a.set(n,r),this.size+=a.size==h?0:1,this},je.prototype.add=je.prototype.push=function np(n){return this.__data__.set(n,Oe),this},je.prototype.has=function Hn(n){return this.__data__.has(n)},Yn.prototype.clear=function sp(){this.__data__=new zt,this.size=0},Yn.prototype.delete=function ip(n){var r=this.__data__,a=r.delete(n);return this.size=r.size,a},Yn.prototype.get=function ni(n){return this.__data__.get(n)},Yn.prototype.has=function rp(n){return this.__data__.has(n)},Yn.prototype.set=function ks(n,r){var a=this.__data__;if(a instanceof zt){var h=a.__data__;if(!pr||h.length<199)return h.push([n,r]),this.size=++a.size,this;a=this.__data__=new Zn(h)}return a.set(n,r),this.size=a.size,this};var Ns=kh(Nn),oh=kh(Do,!0);function lp(n,r){var a=!0;return Ns(n,function(h,m,v){return a=!!r(h,m,v)}),a}function ii(n,r,a){for(var h=-1,m=n.length;++h<m;){var v=n[h],C=r(v);if(null!=C&&(T===b?C==C&&!Cn(C):a(C,T)))var T=C,k=v}return k}function ah(n,r){var a=[];return Ns(n,function(h,m,v){r(h,m,v)&&a.push(h)}),a}function qe(n,r,a,h,m){var v=-1,C=n.length;for(a||(a=kg),m||(m=[]);++v<C;){var T=n[v];r>0&&a(T)?r>1?qe(T,r-1,a,h,m):Ss(m,T):h||(m[m.length]=T)}return m}var gc=H(),mc=H(!0);function Nn(n,r){return n&&gc(n,r,De)}function Do(n,r){return n&&mc(n,r,De)}function Oo(n,r){return As(r,function(a){return Jn(n[a])})}function ri(n,r){for(var a=0,h=(r=Ze(r,n)).length;null!=n&&a<h;)n=n[ls(r[a++])];return a&&a==h?n:b}function _c(n,r,a){var h=r(n);return vt(n)?h:Ss(h,a(n))}function tn(n){return null==n?n===b?"[object Undefined]":"[object Null]":Js&&Js in $t(n)?function Op(n){var r=Ut.call(n,Js),a=n[Js];try{n[Js]=b;var h=!0}catch{}var m=mo.call(n);return h&&(r?n[Js]=a:delete n[Js]),m}(n):function Vc(n){return mo.call(n)}(n)}function Ri(n,r){return n>r}function dp(n,r){return null!=n&&Ut.call(n,r)}function ch(n,r){return null!=n&&r in $t(n)}function yc(n,r,a){for(var h=a?Qa:co,m=n[0].length,v=n.length,C=v,T=E(v),k=1/0,q=[];C--;){var L=n[C];C&&r&&(L=re(L,mn(r))),k=ze(L.length,k),T[C]=!a&&(r||m>=120&&L.length>=120)?new je(C&&L):b}L=n[0];var W=-1,Y=T[0];t:for(;++W<m&&q.length<k;){var st=L[W],mt=r?r(st):st;if(st=a||0!==st?st:0,!(Y?lr(Y,mt):h(q,mt,a))){for(C=v;--C;){var Dt=T[C];if(!(Dt?lr(Dt,mt):h(n[C],mt,a)))continue t}Y&&Y.push(mt),q.push(st)}}return q}function vr(n,r,a){var h=null==(n=kr(n,r=Ze(r,n)))?n:n[ls(Ye(r))];return null==h?b:gn(h,n,a)}function uh(n){return _e(n)&&tn(n)==Wn}function xr(n,r,a,h,m){return n===r||(null==n||null==r||!_e(n)&&!_e(r)?n!=n&&r!=r:function mp(n,r,a,h,m,v){var C=vt(n),T=vt(r),k=C?Cs:Le(n),q=T?Cs:Le(r),L=(k=k==Wn?ie:k)==ie,W=(q=q==Wn?ie:q)==ie,Y=k==q;if(Y&&hs(n)){if(!hs(r))return!1;C=!0,L=!1}if(Y&&!L)return v||(v=new Yn),C||mi(n)?jt(n,r,a,h,m,v):function os(n,r,a,h,m,v,C){switch(a){case ss:if(n.byteLength!=r.byteLength||n.byteOffset!=r.byteOffset)return!1;n=n.buffer,r=r.buffer;case Ce:return!(n.byteLength!=r.byteLength||!v(new yo(n),new yo(r)));case Jt:case Un:case ce:return Bt(+n,+r);case Me:return n.name==r.name&&n.message==r.message;case $i:case Xi:return n==r+"";case Ve:var T=sc;case zn:if(T||(T=lo),n.size!=r.size&&!(1&h))return!1;var q=C.get(n);if(q)return q==r;h|=2,C.set(n,r);var L=jt(T(n),T(r),h,m,v,C);return C.delete(n),L;case eo:if(Pe)return Pe.call(n)==Pe.call(r)}return!1}(n,r,k,a,h,m,v);if(!(1&a)){var st=L&&Ut.call(n,"__wrapped__"),mt=W&&Ut.call(r,"__wrapped__");if(st||mt){var Dt=st?n.value():n,_t=mt?r.value():r;return v||(v=new Yn),m(Dt,_t,a,h,v)}}return!!Y&&(v||(v=new Yn),function kc(n,r,a,h,m,v){var C=1&a,T=Rs(n),k=T.length;if(k!=Rs(r).length&&!C)return!1;for(var W=k;W--;){var Y=T[W];if(!(C?Y in r:Ut.call(r,Y)))return!1}var st=v.get(n),mt=v.get(r);if(st&&mt)return st==r&&mt==n;var Dt=!0;v.set(n,r),v.set(r,n);for(var _t=C;++W<k;){var kt=n[Y=T[W]],Vt=r[Y];if(h)var Ln=C?h(Vt,kt,Y,r,n,v):h(kt,Vt,Y,n,r,v);if(!(Ln===b?kt===Vt||m(kt,Vt,a,h,v):Ln)){Dt=!1;break}_t||(_t="constructor"==Y)}if(Dt&&!_t){var Xe=n.constructor,An=r.constructor;Xe!=An&&"constructor"in n&&"constructor"in r&&!("function"==typeof Xe&&Xe instanceof Xe&&"function"==typeof An&&An instanceof An)&&(Dt=!1)}return v.delete(n),v.delete(r),Dt}(n,r,a,h,m,v))}(n,r,a,h,xr,m))}function Mo(n,r,a,h){var m=a.length,v=m,C=!h;if(null==n)return!v;for(n=$t(n);m--;){var T=a[m];if(C&&T[2]?T[1]!==n[T[0]]:!(T[0]in n))return!1}for(;++m<v;){var k=(T=a[m])[0],q=n[k],L=T[1];if(C&&T[2]){if(q===b&&!(k in n))return!1}else{var W=new Yn;if(h)var Y=h(q,L,k,n,r,W);if(!(Y===b?xr(L,q,3,h,W):Y))return!1}}return!0}function ko(n){return!(!pe(n)||function Et(n){return!!Ul&&Ul in n}(n))&&(Jn(n)?Uf:Ud).test(ui(n))}function dh(n){return"function"==typeof n?n:null==n?$e:"object"==typeof n?vt(n)?mh(n[0],n[1]):gh(n):Hr(n)}function vc(n){if(!us(n))return $l(n);var r=[];for(var a in $t(n))Ut.call(n,a)&&"constructor"!=a&&r.push(a);return r}function xc(n,r){return n<r}function ph(n,r){var a=-1,h=Qe(n)?E(n.length):[];return Ns(n,function(m,v,C){h[++a]=r(m,v,C)}),h}function gh(n){var r=jo(n);return 1==r.length&&r[0][2]?He(r[0][0],r[0][1]):function(a){return a===n||Mo(a,n,r)}}function mh(n,r){return Fe(n)&&Rh(r)?He(ls(n),r):function(a){var h=Ur(a,n);return h===b&&h===r?Iu(a,n):xr(r,h,3)}}function No(n,r,a,h,m){n!==r&&gc(r,function(v,C){if(m||(m=new Yn),pe(v))!function xp(n,r,a,h,m,v,C){var T=ci(n,a),k=ci(r,a),q=C.get(k);if(q)dc(n,a,q);else{var L=v?v(T,k,a+"",n,r,C):b,W=L===b;if(W){var Y=vt(k),st=!Y&&hs(k),mt=!Y&&!st&&mi(k);L=k,Y||st||mt?vt(T)?L=T:oe(T)?L=me(T):st?(W=!1,L=Qn(k,!0)):mt?(W=!1,L=Th(k,!0)):L=[]:_a(k)||Ps(k)?(L=T,Ps(T)?L=td(T):(!pe(T)||Jn(T))&&(L=cn(k))):W=!1}W&&(C.set(k,L),m(L,k,h,v,C),C.delete(k)),dc(n,a,L)}}(n,r,C,a,No,h,m);else{var T=h?h(ci(n,C),v,C+"",n,r,m):b;T===b&&(T=v),dc(n,C,T)}},Zt)}function Fo(n,r){var a=n.length;if(a)return nn(r+=r<0?a:0,a)?n[r]:b}function _h(n,r,a){r=r.length?re(r,function(v){return vt(v)?function(C){return ri(C,1===v.length?v[0]:v)}:v}):[$e];var h=-1;return r=re(r,mn(gt())),function Tf(O,V){var E=O.length;for(O.sort(V);E--;)O[E]=O[E].value;return O}(ph(n,function(v,C,T){return{criteria:re(r,function(q){return q(v)}),index:++h,value:v}}),function(v,C){return function Lt(n,r,a){for(var h=-1,m=n.criteria,v=r.criteria,C=m.length,T=a.length;++h<C;){var k=Dh(m[h],v[h]);if(k)return h>=T?k:k*("desc"==a[h]?-1:1)}return n.index-r.index}(v,C,a)})}function vh(n,r,a){for(var h=-1,m=r.length,v={};++h<m;){var C=r[h],T=ri(n,C);a(T,C)&&Ro(v,Ze(C,n),T)}return v}function Eo(n,r,a,h){var m=h?Ae:Wt,v=-1,C=r.length,T=n;for(n===r&&(r=me(r)),a&&(T=re(n,mn(a)));++v<C;)for(var k=0,q=r[v],L=a?a(q):q;(k=m(T,L,k,h))>-1;)T!==n&&xo.call(T,k,1),xo.call(n,k,1);return n}function bh(n,r){for(var a=n?r.length:0,h=a-1;a--;){var m=r[a];if(a==h||m!==v){var v=m;nn(m)?xo.call(n,m,1):Io(n,m)}}return n}function bc(n,r){return n+wo(oc()*(r-n+1))}function wc(n,r){var a="";if(!n||r<1||r>Z)return a;do{r%2&&(a+=n),(r=wo(r/2))&&(n+=n)}while(r);return a}function Mt(n,r){return Nr(Mr(n,r,$e),n+"")}function wp(n){return ys(yi(n))}function wh(n,r){var a=yi(n);return ee(a,si(r,0,a.length))}function Ro(n,r,a,h){if(!pe(n))return n;for(var m=-1,v=(r=Ze(r,n)).length,C=v-1,T=n;null!=T&&++m<v;){var k=ls(r[m]),q=a;if("__proto__"===k||"constructor"===k||"prototype"===k)return n;if(m!=C){var L=T[k];(q=h?h(L,k,T):b)===b&&(q=pe(L)?L:nn(r[m+1])?[]:{})}_r(T,k,q),T=T[k]}return n}var Cc=Co?function(n,r){return Co.set(n,r),n}:$e,Ch=fr?function(n,r){return fr(n,"toString",{configurable:!0,enumerable:!1,value:Gs(r),writable:!0})}:$e;function Og(n){return ee(yi(n))}function Fn(n,r,a){var h=-1,m=n.length;r<0&&(r=-r>m?0:m+r),(a=a>m?m:a)<0&&(a+=m),m=r>a?0:a-r>>>0,r>>>=0;for(var v=E(m);++h<m;)v[h]=n[h+r];return v}function Cp(n,r){var a;return Ns(n,function(h,m,v){return!(a=r(h,m,v))}),!!a}function Vo(n,r,a){var h=0,m=null==n?h:n.length;if("number"==typeof r&&r==r&&m<=2147483647){for(;h<m;){var v=h+m>>>1,C=n[v];null!==C&&!Cn(C)&&(a?C<=r:C<r)?h=v+1:m=v}return m}return Ac(n,r,$e,a)}function Ac(n,r,a,h){var m=0,v=null==n?0:n.length;if(0===v)return 0;for(var C=(r=a(r))!=r,T=null===r,k=Cn(r),q=r===b;m<v;){var L=wo((m+v)/2),W=a(n[L]),Y=W!==b,st=null===W,mt=W==W,Dt=Cn(W);if(C)var _t=h||mt;else _t=q?mt&&(h||Y):T?mt&&Y&&(h||!st):k?mt&&Y&&!st&&(h||!Dt):!st&&!Dt&&(h?W<=r:W<r);_t?m=L+1:v=L}return ze(v,4294967294)}function Ah(n,r){for(var a=-1,h=n.length,m=0,v=[];++a<h;){var C=n[a],T=r?r(C):C;if(!a||!Bt(T,k)){var k=T;v[m++]=0===C?0:C}}return v}function Ap(n){return"number"==typeof n?n:Cn(n)?NaN:+n}function dt(n){if("string"==typeof n)return n;if(vt(n))return re(n,dt)+"";if(Cn(n))return On?On.call(n):"";var r=n+"";return"0"==r&&1/n==-ht?"-0":r}function en(n,r,a){var h=-1,m=co,v=n.length,C=!0,T=[],k=T;if(a)C=!1,m=Qa;else if(v>=200){var q=r?null:Tr(n);if(q)return lo(q);C=!1,m=lr,k=new je}else k=r?[]:T;t:for(;++h<v;){var L=n[h],W=r?r(L):L;if(L=a||0!==L?L:0,C&&W==W){for(var Y=k.length;Y--;)if(k[Y]===W)continue t;r&&k.push(W),T.push(L)}else m(k,W,a)||(k!==T&&k.push(W),T.push(L))}return T}function Io(n,r){return null==(n=kr(n,r=Ze(r,n)))||delete n[ls(Ye(r))]}function Po(n,r,a,h){return Ro(n,r,a(ri(n,r)),h)}function Sc(n,r,a,h){for(var m=n.length,v=h?m:-1;(h?v--:++v<m)&&r(n[v],v,n););return a?Fn(n,h?0:v,h?v+1:m):Fn(n,h?v+1:0,h?m:v)}function Sh(n,r){var a=n;return a instanceof nt&&(a=a.value()),$a(r,function(h,m){return m.func.apply(m.thisArg,Ss([h],m.args))},a)}function qo(n,r,a){var h=n.length;if(h<2)return h?en(n[0]):[];for(var m=-1,v=E(h);++m<h;)for(var C=n[m],T=-1;++T<h;)T!=m&&(v[m]=yr(v[m]||C,n[T],r,a));return en(qe(v,1),r,a)}function an(n,r,a){for(var h=-1,m=n.length,v=r.length,C={};++h<m;)a(C,n[h],h<v?r[h]:b);return C}function St(n){return oe(n)?n:[]}function Tc(n){return"function"==typeof n?n:$e}function Ze(n,r){return vt(n)?n:Fe(n,r)?[n]:Ep(Gt(n))}var Fs=Mt;function vs(n,r,a){var h=n.length;return a=a===b?h:a,!r&&a>=h?n:Fn(n,r,a)}var _n=zf||function(n){return Ie.clearTimeout(n)};function Qn(n,r){if(r)return n.slice();var a=n.length,h=zl?zl(a):new n.constructor(a);return n.copy(h),h}function Vi(n){var r=new n.constructor(n.byteLength);return new yo(r).set(new yo(n)),r}function Th(n,r){var a=r?Vi(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.length)}function Dh(n,r){if(n!==r){var a=n!==b,h=null===n,m=n==n,v=Cn(n),C=r!==b,T=null===r,k=r==r,q=Cn(r);if(!T&&!q&&!v&&n>r||v&&C&&k&&!T&&!q||h&&C&&k||!a&&k||!m)return 1;if(!h&&!v&&!q&&n<r||q&&a&&m&&!h&&!v||T&&a&&m||!C&&m||!k)return-1}return 0}function Oh(n,r,a,h){for(var m=-1,v=n.length,C=a.length,T=-1,k=r.length,q=le(v-C,0),L=E(k+q),W=!h;++T<k;)L[T]=r[T];for(;++m<C;)(W||m<v)&&(L[a[m]]=n[m]);for(;q--;)L[T++]=n[m++];return L}function Es(n,r,a,h){for(var m=-1,v=n.length,C=-1,T=a.length,k=-1,q=r.length,L=le(v-T,0),W=E(L+q),Y=!h;++m<L;)W[m]=n[m];for(var st=m;++k<q;)W[st+k]=r[k];for(;++C<T;)(Y||m<v)&&(W[st+a[C]]=n[m++]);return W}function me(n,r){var a=-1,h=n.length;for(r||(r=E(h));++a<h;)r[a]=n[a];return r}function yn(n,r,a,h){var m=!a;a||(a={});for(var v=-1,C=r.length;++v<C;){var T=r[v],k=h?h(a[T],n[T],T,a,n):b;k===b&&(k=n[T]),m?rs(a,T,k):_r(a,T,k)}return a}function Lo(n,r){return function(a,h){var m=vt(a)?bf:Ei,v=r?r():{};return m(a,n,gt(h,2),v)}}function $n(n){return Mt(function(r,a){var h=-1,m=a.length,v=m>1?a[m-1]:b,C=m>2?a[2]:b;for(v=n.length>3&&"function"==typeof v?(m--,v):b,C&&un(a[0],a[1],C)&&(v=m<3?b:v,m=1),r=$t(r);++h<m;){var T=a[h];T&&n(r,T,h,v)}return r})}function kh(n,r){return function(a,h){if(null==a)return a;if(!Qe(a))return n(a,h);for(var m=a.length,v=r?m:-1,C=$t(a);(r?v--:++v<m)&&!1!==h(C[v],v,C););return a}}function H(n){return function(r,a,h){for(var m=-1,v=$t(r),C=h(r),T=C.length;T--;){var k=C[n?T:++m];if(!1===a(v[k],k,v))break}return r}}function Xn(n){return function(r){var a=Di(r=Gt(r))?jn(r):b,h=a?a[0]:r.charAt(0),m=a?vs(a,1).join(""):r.slice(1);return h[n]()+m}}function ai(n){return function(r){return $a(fg(Uu(r).replace(cf,"")),n,"")}}function En(n){return function(){var r=arguments;switch(r.length){case 0:return new n;case 1:return new n(r[0]);case 2:return new n(r[0],r[1]);case 3:return new n(r[0],r[1],r[2]);case 4:return new n(r[0],r[1],r[2],r[3]);case 5:return new n(r[0],r[1],r[2],r[3],r[4]);case 6:return new n(r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return new n(r[0],r[1],r[2],r[3],r[4],r[5],r[6])}var a=Os(n.prototype),h=n.apply(a,r);return pe(h)?h:a}}function br(n){return function(r,a,h){var m=$t(r);if(!Qe(r)){var v=gt(a,3);r=De(r),a=function(T){return v(m[T],T,m)}}var C=n(r,a,h);return C>-1?m[v?r[C]:C]:b}}function Bo(n){return as(function(r){var a=r.length,h=a,m=Mn.prototype.thru;for(n&&r.reverse();h--;){var v=r[h];if("function"!=typeof v)throw new Xt(Ft);if(m&&!C&&"wrapper"==Uo(v))var C=new Mn([],!0)}for(h=C?h:a;++h<a;){var T=Uo(v=r[h]),k="wrapper"==T?Nc(v):b;C=k&&te(k[0])&&424==k[1]&&!k[4].length&&1==k[9]?C[Uo(k[0])].apply(C,k[3]):1==v.length&&te(v)?C[T]():C.thru(v)}return function(){var q=arguments,L=q[0];if(C&&1==q.length&&vt(L))return C.plant(L).value();for(var W=0,Y=a?r[W].apply(this,q):L;++W<a;)Y=r[W].call(this,Y);return Y}})}function wr(n,r,a,h,m,v,C,T,k,q){var L=128&r,W=1&r,Y=2&r,st=24&r,mt=512&r,Dt=Y?b:En(n);return function _t(){for(var kt=arguments.length,Vt=E(kt),Ln=kt;Ln--;)Vt[Ln]=arguments[Ln];if(st)var Xe=Dr(_t),An=function Of(O,V){for(var E=O.length,$=0;E--;)O[E]===V&&++$;return $}(Vt,Xe);if(h&&(Vt=Oh(Vt,h,m,st)),v&&(Vt=Es(Vt,v,C,st)),kt-=An,st&&kt<q){var ge=Ts(Vt,Xe);return Sr(n,r,wr,_t.placeholder,a,Vt,ge,T,k,q-kt)}var Kn=W?a:this,fs=Y?Kn[n]:n;return kt=Vt.length,T?Vt=function Yo(n,r){for(var a=n.length,h=ze(r.length,a),m=me(n);h--;){var v=r[h];n[h]=nn(v,a)?m[v]:b}return n}(Vt,T):mt&&kt>1&&Vt.reverse(),L&&k<kt&&(Vt.length=k),this&&this!==Ie&&this instanceof _t&&(fs=Dt||En(fs)),fs.apply(Kn,Vt)}}function Rn(n,r){return function(a,h){return function pp(n,r,a,h){return Nn(n,function(m,v,C){r(h,a(m),v,C)}),h}(a,n,r(h),{})}}function Go(n,r){return function(a,h){var m;if(a===b&&h===b)return r;if(a!==b&&(m=a),h!==b){if(m===b)return h;"string"==typeof a||"string"==typeof h?(a=dt(a),h=dt(h)):(a=Ap(a),h=Ap(h)),m=n(a,h)}return m}}function Vn(n){return as(function(r){return r=re(r,mn(gt())),Mt(function(a){var h=this;return n(r,function(m){return gn(m,h,a)})})})}function Cr(n,r){var a=(r=r===b?" ":dt(r)).length;if(a<2)return a?wc(r,n):r;var h=wc(r,bo(n/Oi(r)));return Di(r)?vs(jn(h),0,n).join(""):h.slice(0,n)}function Nh(n){return function(r,a,h){return h&&"number"!=typeof h&&un(r,a,h)&&(a=h=b),r=de(r),a===b?(a=r,r=0):a=de(a),function bp(n,r,a,h){for(var m=-1,v=le(bo((r-n)/(a||1)),0),C=E(v);v--;)C[h?v:++m]=n,n+=a;return C}(r,a,h=h===b?r<a?1:-1:de(h),n)}}function Ar(n){return function(r,a){return"string"==typeof r&&"string"==typeof a||(r=qn(r),a=qn(a)),n(r,a)}}function Sr(n,r,a,h,m,v,C,T,k,q){var L=8&r;r|=L?32:64,4&(r&=~(L?64:32))||(r&=-4);var Dt=[n,r,m,L?v:b,L?C:b,L?b:v,L?b:C,T,k,q],_t=a.apply(b,Dt);return te(n)&&Qo(_t,Dt),_t.placeholder=h,Xo(_t,n,r)}function Oc(n){var r=Se[n];return function(a,h){if(a=qn(a),(h=null==h?0:ze(Tt(h),292))&&Yl(a)){var m=(Gt(a)+"e").split("e");return+((m=(Gt(r(m[0]+"e"+(+m[1]+h)))+"e").split("e"))[0]+"e"+(+m[1]-h))}return r(a)}}var Tr=Ks&&1/lo(new Ks([,-0]))[1]==ht?function(n){return new Ks(n)}:Cd;function Mc(n){return function(r){var a=Le(r);return a==Ve?sc(r):a==zn?function Bl(O){var V=-1,E=Array(O.size);return O.forEach(function($){E[++V]=[$,$]}),E}(r):function Df(O,V){return re(V,function(E){return[E,O[E]]})}(r,n(r))}}function vn(n,r,a,h,m,v,C,T){var k=2&r;if(!k&&"function"!=typeof n)throw new Xt(Ft);var q=h?h.length:0;if(q||(r&=-97,h=m=b),C=C===b?C:le(Tt(C),0),T=T===b?T:Tt(T),q-=m?m.length:0,64&r){var L=h,W=m;h=m=b}var Y=k?b:Nc(n),st=[n,r,a,h,m,L,W,v,C,T];if(Y&&function Ho(n,r){var a=n[1],h=r[1],m=a|h;if(!(m<131)&&!(128==h&&8==a||128==h&&256==a&&n[7].length<=r[8]||384==h&&r[7].length<=r[8]&&8==a))return n;1&h&&(n[2]=r[2],m|=1&a?0:4);var T=r[3];if(T){var k=n[3];n[3]=k?Oh(k,T,r[4]):T,n[4]=k?Ts(n[3],ln):r[4]}(T=r[5])&&(n[5]=(k=n[5])?Es(k,T,r[6]):T,n[6]=k?Ts(n[5],ln):r[6]),(T=r[7])&&(n[7]=T),128&h&&(n[8]=null==n[8]?r[8]:ze(n[8],r[8])),null==n[9]&&(n[9]=r[9]),n[0]=r[0],n[1]=m}(st,Y),n=st[0],r=st[1],a=st[2],h=st[3],m=st[4],!(T=st[9]=st[9]===b?k?0:n.length:le(st[9]-q,0))&&24&r&&(r&=-25),r&&1!=r)mt=8==r||16==r?function Dc(n,r,a){var h=En(n);return function m(){for(var v=arguments.length,C=E(v),T=v,k=Dr(m);T--;)C[T]=arguments[T];var q=v<3&&C[0]!==k&&C[v-1]!==k?[]:Ts(C,k);return(v-=q.length)<a?Sr(n,r,wr,m.placeholder,b,C,q,b,b,a-v):gn(this&&this!==Ie&&this instanceof m?h:n,this,C)}}(n,r,T):32!=r&&33!=r||m.length?wr.apply(b,st):function Wo(n,r,a,h){var m=1&r,v=En(n);return function C(){for(var T=-1,k=arguments.length,q=-1,L=h.length,W=E(L+k),Y=this&&this!==Ie&&this instanceof C?v:n;++q<L;)W[q]=h[q];for(;k--;)W[q++]=arguments[++T];return gn(Y,m?a:this,W)}}(n,r,a,h);else var mt=function Dp(n,r,a){var h=1&r,m=En(n);return function v(){return(this&&this!==Ie&&this instanceof v?m:n).apply(h?a:this,arguments)}}(n,r,a);return Xo((Y?Cc:Qo)(mt,st),n,r)}function Fh(n,r,a,h){return n===b||Bt(n,Mi[a])&&!Ut.call(h,a)?r:n}function he(n,r,a,h,m,v){return pe(n)&&pe(r)&&(v.set(r,n),No(n,r,b,he,v),v.delete(r)),n}function Eh(n){return _a(n)?b:n}function jt(n,r,a,h,m,v){var C=1&a,T=n.length,k=r.length;if(T!=k&&!(C&&k>T))return!1;var q=v.get(n),L=v.get(r);if(q&&L)return q==r&&L==n;var W=-1,Y=!0,st=2&a?new je:b;for(v.set(n,r),v.set(r,n);++W<T;){var mt=n[W],Dt=r[W];if(h)var _t=C?h(Dt,mt,W,r,n,v):h(mt,Dt,W,n,r,v);if(_t!==b){if(_t)continue;Y=!1;break}if(st){if(!Xa(r,function(kt,Vt){if(!lr(st,Vt)&&(mt===kt||m(mt,kt,a,h,v)))return st.push(Vt)})){Y=!1;break}}else if(mt!==Dt&&!m(mt,Dt,a,h,v)){Y=!1;break}}return v.delete(n),v.delete(r),Y}function as(n){return Nr(Mr(n,b,Is),n+"")}function Rs(n){return _c(n,De,Fc)}function xn(n){return _c(n,Zt,Zo)}var Nc=Co?function(n){return Co.get(n)}:Cd;function Uo(n){for(var r=n.name+"",a=ei[r],h=Ut.call(ei,r)?a.length:0;h--;){var m=a[h],v=m.func;if(null==v||v==n)return m.name}return r}function Dr(n){return(Ut.call(_,"placeholder")?_:n).placeholder}function gt(){var n=_.iteratee||Yu;return n=n===Yu?dh:n,arguments.length?n(arguments[0],arguments[1]):n}function zo(n,r){var a=n.__data__;return function Or(n){var r=typeof n;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n}(r)?a["string"==typeof r?"string":"hash"]:a.map}function jo(n){for(var r=De(n),a=r.length;a--;){var h=r[a],m=n[h];r[a]=[h,m,Rh(m)]}return r}function cs(n,r){var a=function Ll(O,V){return null==O?b:O[V]}(n,r);return ko(a)?a:b}var Fc=rc?function(n){return null==n?[]:(n=$t(n),As(rc(n),function(r){return Zl.call(n,r)}))}:Qu,Zo=rc?function(n){for(var r=[];n;)Ss(r,Fc(n)),n=vo(n);return r}:Qu,Le=tn;function bn(n,r,a){for(var h=-1,m=(r=Ze(r,n)).length,v=!1;++h<m;){var C=ls(r[h]);if(!(v=null!=n&&a(n,C)))break;n=n[C]}return v||++h!=m?v:!!(m=null==n?0:n.length)&&ga(m)&&nn(C,m)&&(vt(n)||Ps(n))}function cn(n){return"function"!=typeof n.constructor||us(n)?{}:Os(vo(n))}function kg(n){return vt(n)||Ps(n)||!!(Hl&&n&&n[Hl])}function nn(n,r){var a=typeof n;return!!(r=r??Z)&&("number"==a||"symbol"!=a&&ul.test(n))&&n>-1&&n%1==0&&n<r}function un(n,r,a){if(!pe(a))return!1;var h=typeof r;return!!("number"==h?Qe(a)&&nn(r,a.length):"string"==h&&r in a)&&Bt(a[r],n)}function Fe(n,r){if(vt(n))return!1;var a=typeof n;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=n&&!Cn(n))||nr.test(n)||!ne.test(n)||null!=r&&n in $t(r)}function te(n){var r=Uo(n),a=_[r];if("function"!=typeof a||!(r in nt.prototype))return!1;if(n===a)return!0;var h=Nc(a);return!!h&&n===h[0]}(ac&&Le(new ac(new ArrayBuffer(1)))!=ss||pr&&Le(new pr)!=Ve||gr&&Le(gr.resolve())!=el||Ks&&Le(new Ks)!=zn||ti&&Le(new ti)!=Ji)&&(Le=function(n){var r=tn(n),a=r==ie?n.constructor:b,h=a?ui(a):"";if(h)switch(h){case ki:return ss;case Xf:return Ve;case Jf:return el;case Kf:return zn;case Xl:return Ji}return r});var Rc=po?Jn:Qr;function us(n){var r=n&&n.constructor;return n===("function"==typeof r&&r.prototype||Mi)}function Rh(n){return n==n&&!pe(n)}function He(n,r){return function(a){return null!=a&&a[n]===r&&(r!==b||n in $t(a))}}function Mr(n,r,a){return r=le(r===b?n.length-1:r,0),function(){for(var h=arguments,m=-1,v=le(h.length-r,0),C=E(v);++m<v;)C[m]=h[r+m];m=-1;for(var T=E(r+1);++m<r;)T[m]=h[m];return T[r]=a(C),gn(n,this,T)}}function kr(n,r){return r.length<2?n:ri(n,Fn(r,0,-1))}function ci(n,r){if(("constructor"!==r||"function"!=typeof n[r])&&"__proto__"!=r)return n[r]}var Qo=Fp(Cc),$o=Zf||function(n,r){return Ie.setTimeout(n,r)},Nr=Fp(Ch);function Xo(n,r,a){var h=r+"";return Nr(n,function Np(n,r){var a=r.length;if(!a)return n;var h=a-1;return r[h]=(a>1?"& ":"")+r[h],r=r.join(a>2?", ":" "),n.replace(Id,"{\n/* [wrapped with "+r+"] */\n")}(h,function Rp(n,r){return Dn(zs,function(a){var h="_."+a[0];r&a[1]&&!co(n,h)&&n.push(h)}),n.sort()}(function Ec(n){var r=n.match(Pd);return r?r[1].split(qd):[]}(h),a)))}function Fp(n){var r=0,a=0;return function(){var h=Yf(),m=16-(h-a);if(a=h,m>0){if(++r>=800)return arguments[0]}else r=0;return n.apply(b,arguments)}}function ee(n,r){var a=-1,h=n.length,m=h-1;for(r=r===b?h:r;++a<r;){var v=bc(a,m),C=n[v];n[v]=n[a],n[a]=C}return n.length=r,n}var Ep=function Pi(n){var r=ji(n,function(h){return 500===a.size&&a.clear(),h}),a=r.cache;return r}(function(n){var r=[];return 46===n.charCodeAt(0)&&r.push(""),n.replace(Qs,function(a,h,m,v){r.push(m?v.replace(Ga,"$1"):h||a)}),r});function ls(n){if("string"==typeof n||Cn(n))return n;var r=n+"";return"0"==r&&1/n==-ht?"-0":r}function ui(n){if(null!=n){try{return go.call(n)}catch{}try{return n+""}catch{}}return""}function Vs(n){if(n instanceof nt)return n.clone();var r=new Mn(n.__wrapped__,n.__chain__);return r.__actions__=me(n.__actions__),r.__index__=n.__index__,r.__values__=n.__values__,r}var Ic=Mt(function(n,r){return oe(n)?yr(n,qe(r,1,oe,!0)):[]}),Fr=Mt(function(n,r){var a=Ye(r);return oe(a)&&(a=b),oe(n)?yr(n,qe(r,1,oe,!0),gt(a,2)):[]}),wn=Mt(function(n,r){var a=Ye(r);return oe(a)&&(a=b),oe(n)?yr(n,qe(r,1,oe,!0),b,a):[]});function Lc(n,r,a){var h=null==n?0:n.length;if(!h)return-1;var m=null==a?0:Tt(a);return m<0&&(m=le(h+m,0)),uo(n,gt(r,3),m)}function Li(n,r,a){var h=null==n?0:n.length;if(!h)return-1;var m=h-1;return a!==b&&(m=Tt(a),m=a<0?le(h+m,0):ze(m,h-1)),uo(n,gt(r,3),m,!0)}function Is(n){return null!=n&&n.length?qe(n,1):[]}function Bi(n){return n&&n.length?n[0]:b}var Rr=Mt(function(n){var r=re(n,St);return r.length&&r[0]===n[0]?yc(r):[]}),Vr=Mt(function(n){var r=Ye(n),a=re(n,St);return r===Ye(a)?r=b:a.pop(),a.length&&a[0]===n[0]?yc(a,gt(r,2)):[]}),Gi=Mt(function(n){var r=Ye(n),a=re(n,St);return(r="function"==typeof r?r:b)&&a.pop(),a.length&&a[0]===n[0]?yc(a,b,r):[]});function Ye(n){var r=null==n?0:n.length;return r?n[r-1]:b}var Ih=Mt(na);function na(n,r){return n&&n.length&&r&&r.length?Eo(n,r):n}var qh=as(function(n,r){var a=null==n?0:n.length,h=fc(n,r);return bh(n,re(r,function(m){return nn(m,a)?+m:m}).sort(Dh)),h});function hi(n){return null==n?n:$f.call(n)}var fi=Mt(function(n){return en(qe(n,1,oe,!0))}),Zc=Mt(function(n){var r=Ye(n);return oe(r)&&(r=b),en(qe(n,1,oe,!0),gt(r,2))}),qr=Mt(function(n){var r=Ye(n);return r="function"==typeof r?r:b,en(qe(n,1,oe,!0),b,r)});function Lr(n){if(!n||!n.length)return[];var r=0;return n=As(n,function(a){if(oe(a))return r=le(a.length,r),!0}),ur(r,function(a){return re(n,Ka(a))})}function ia(n,r){if(!n||!n.length)return[];var a=Lr(n);return null==r?a:re(a,function(h){return gn(r,b,h)})}var Qc=Mt(function(n,r){return oe(n)?yr(n,r):[]}),$c=Mt(function(n){return qo(As(n,oe))}),Xc=Mt(function(n){var r=Ye(n);return oe(r)&&(r=b),qo(As(n,oe),gt(r,2))}),Wh=Mt(function(n){var r=Ye(n);return r="function"==typeof r?r:b,qo(As(n,oe),b,r)}),Jc=Mt(Lr),tu=Mt(function(n){var r=n.length,a=r>1?n[r-1]:b;return a="function"==typeof a?(n.pop(),a):b,ia(n,a)});function ra(n){var r=_(n);return r.__chain__=!0,r}function eu(n,r){return r(n)}var Vg=as(function(n){var r=n.length,a=r?n[0]:0,h=this.__wrapped__,m=function(v){return fc(v,n)};return!(r>1||this.__actions__.length)&&h instanceof nt&&nn(a)?((h=h.slice(a,+a+(r?1:0))).__actions__.push({func:eu,args:[m],thisArg:b}),new Mn(h,this.__chain__).thru(function(v){return r&&!v.length&&v.push(b),v})):this.thru(m)}),iu=Lo(function(n,r,a){Ut.call(n,a)?++n[a]:rs(n,a,1)}),Wi=br(Lc),pi=br(Li);function oa(n,r){return(vt(n)?Dn:Ns)(n,gt(r,3))}function aa(n,r){return(vt(n)?wf:oh)(n,gt(r,3))}var Gg=Lo(function(n,r,a){Ut.call(n,a)?n[a].push(r):rs(n,a,[r])}),uu=Mt(function(n,r,a){var h=-1,m="function"==typeof r,v=Qe(n)?E(n.length):[];return Ns(n,function(C){v[++h]=m?gn(r,C,a):vr(C,r,a)}),v}),ca=Lo(function(n,r,a){rs(n,a,r)});function Ui(n,r){return(vt(n)?re:ph)(n,gt(r,3))}var hu=Lo(function(n,r,a){n[a?0:1].push(r)},function(){return[[],[]]}),Zg=Mt(function(n,r){if(null==n)return[];var a=r.length;return a>1&&un(n,r[0],r[1])?r=[]:a>2&&un(r[0],r[1],r[2])&&(r=[r[0]]),_h(n,qe(r,1),[])}),zi=jf||function(){return Ie.Date.now()};function Pp(n,r,a){return r=a?b:r,vn(n,128,b,b,b,b,r=n&&null==r?n.length:r)}function la(n,r){var a;if("function"!=typeof r)throw new Xt(Ft);return n=Tt(n),function(){return--n>0&&(a=r.apply(this,arguments)),n<=1&&(r=b),a}}var zh=Mt(function(n,r,a){var h=1;if(a.length){var m=Ts(a,Dr(zh));h|=32}return vn(n,h,r,a,m)}),ha=Mt(function(n,r,a){var h=3;if(a.length){var m=Ts(a,Dr(ha));h|=32}return vn(r,h,n,a,m)});function da(n,r,a){var h,m,v,C,T,k,q=0,L=!1,W=!1,Y=!0;if("function"!=typeof n)throw new Xt(Ft);function st(ge){var Kn=h,fs=m;return h=m=b,q=ge,C=n.apply(fs,Kn)}function _t(ge){var Kn=ge-k;return k===b||Kn>=r||Kn<0||W&&ge-q>=v}function kt(){var ge=zi();if(_t(ge))return Vt(ge);T=$o(kt,function Dt(ge){var Fa=r-(ge-k);return W?ze(Fa,v-(ge-q)):Fa}(ge))}function Vt(ge){return T=b,Y&&h?st(ge):(h=m=b,C)}function An(){var ge=zi(),Kn=_t(ge);if(h=arguments,m=this,k=ge,Kn){if(T===b)return function mt(ge){return q=ge,T=$o(kt,r),L?st(ge):C}(k);if(W)return _n(T),T=$o(kt,r),st(k)}return T===b&&(T=$o(kt,r)),C}return r=qn(r)||0,pe(a)&&(L=!!a.leading,v=(W="maxWait"in a)?le(qn(a.maxWait)||0,r):v,Y="trailing"in a?!!a.trailing:Y),An.cancel=function Ln(){T!==b&&_n(T),q=0,h=k=m=T=b},An.flush=function Xe(){return T===b?C:Vt(zi())},An}var jh=Mt(function(n,r){return rh(n,1,r)}),qp=Mt(function(n,r,a){return rh(n,qn(r)||0,a)});function ji(n,r){if("function"!=typeof n||null!=r&&"function"!=typeof r)throw new Xt(Ft);var a=function(){var h=arguments,m=r?r.apply(this,h):h[0],v=a.cache;if(v.has(m))return v.get(m);var C=n.apply(this,h);return a.cache=v.set(m,C)||v,C};return a.cache=new(ji.Cache||Zn),a}function vu(n){if("function"!=typeof n)throw new Xt(Ft);return function(){var r=arguments;switch(r.length){case 0:return!n.call(this);case 1:return!n.call(this,r[0]);case 2:return!n.call(this,r[0],r[1]);case 3:return!n.call(this,r[0],r[1],r[2])}return!n.apply(this,r)}}ji.Cache=Zn;var bu=Fs(function(n,r){var a=(r=1==r.length&&vt(r[0])?re(r[0],mn(gt())):re(qe(r,1),mn(gt()))).length;return Mt(function(h){for(var m=-1,v=ze(h.length,a);++m<v;)h[m]=r[m].call(this,h[m]);return gn(n,this,h)})}),Wr=Mt(function(n,r){var a=Ts(r,Dr(Wr));return vn(n,32,b,r,a)}),fa=Mt(function(n,r){var a=Ts(r,Dr(fa));return vn(n,64,b,r,a)}),Zh=as(function(n,r){return vn(n,256,b,b,b,r)});function Bt(n,r){return n===r||n!=n&&r!=r}var pa=Ar(Ri),gi=Ar(function(n,r){return n>=r}),Ps=uh(function(){return arguments}())?uh:function(n){return _e(n)&&Ut.call(n,"callee")&&!Zl.call(n,"callee")},vt=E.isArray,Bp=Ol?mn(Ol):function lh(n){return _e(n)&&tn(n)==Ce};function Qe(n){return null!=n&&ga(n.length)&&!Jn(n)}function oe(n){return _e(n)&&Qe(n)}var hs=Hf||Qr,ku=Ml?mn(Ml):function gp(n){return _e(n)&&tn(n)==Un};function $h(n){if(!_e(n))return!1;var r=tn(n);return r==Me||"[object DOMException]"==r||"string"==typeof n.message&&"string"==typeof n.name&&!_a(n)}function Jn(n){if(!pe(n))return!1;var r=tn(n);return r==fn||r==Qi||"[object AsyncFunction]"==r||"[object Proxy]"==r}function Gp(n){return"number"==typeof n&&n==Tt(n)}function ga(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=Z}function pe(n){var r=typeof n;return null!=n&&("object"==r||"function"==r)}function _e(n){return null!=n&&"object"==typeof n}var Wp=kl?mn(kl):function _p(n){return _e(n)&&Le(n)==Ve};function Up(n){return"number"==typeof n||_e(n)&&tn(n)==ce}function _a(n){if(!_e(n)||tn(n)!=ie)return!1;var r=vo(n);if(null===r)return!0;var a=Ut.call(r,"constructor")&&r.constructor;return"function"==typeof a&&a instanceof a&&go.call(a)==Gf}var ya=Nl?mn(Nl):function hh(n){return _e(n)&&tn(n)==$i},Vu=Fl?mn(Fl):function yp(n){return _e(n)&&Le(n)==zn};function Ee(n){return"string"==typeof n||!vt(n)&&_e(n)&&tn(n)==Xi}function Cn(n){return"symbol"==typeof n||_e(n)&&tn(n)==eo}var mi=El?mn(El):function vp(n){return _e(n)&&ga(n.length)&&!!se[tn(n)]},Hp=Ar(xc),Jh=Ar(function(n,r){return n<=r});function Pn(n){if(!n)return[];if(Qe(n))return Ee(n)?jn(n):me(n);if(dr&&n[dr])return function hr(O){for(var V,E=[];!(V=O.next()).done;)E.push(V.value);return E}(n[dr]());var r=Le(n);return(r==Ve?sc:r==zn?lo:yi)(n)}function de(n){return n?(n=qn(n))===ht||n===-ht?17976931348623157e292*(n<0?-1:1):n==n?n:0:0===n?n:0}function Tt(n){var r=de(n),a=r%1;return r==r?a?r-a:r:0}function Kh(n){return n?si(Tt(n),0,At):0}function qn(n){if("number"==typeof n)return n;if(Cn(n))return NaN;if(pe(n)){var r="function"==typeof n.valueOf?n.valueOf():n;n=pe(r)?r+"":r}if("string"!=typeof n)return 0===n?n:+n;n=Pl(n);var a=Wd.test(n);return a||zd.test(n)?xe(n.slice(2),a?2:8):Gd.test(n)?NaN:+n}function td(n){return yn(n,Zt(n))}function Gt(n){return null==n?"":dt(n)}var Qp=$n(function(n,r){if(us(r)||Qe(r))yn(r,De(r),n);else for(var a in r)Ut.call(r,a)&&_r(n,a,r[a])}),ed=$n(function(n,r){yn(r,Zt(r),n)}),xa=$n(function(n,r,a,h){yn(r,Zt(r),n,h)}),$p=$n(function(n,r,a,h){yn(r,De(r),n,h)}),Xp=as(fc),Kp=Mt(function(n,r){n=$t(n);var a=-1,h=r.length,m=h>2?r[2]:b;for(m&&un(r[0],r[1],m)&&(h=1);++a<h;)for(var v=r[a],C=Zt(v),T=-1,k=C.length;++T<k;){var q=C[T],L=n[q];(L===b||Bt(L,Mi[q])&&!Ut.call(n,q))&&(n[q]=v[q])}return n}),tg=Mt(function(n){return n.push(b,he),gn(Pu,b,n)});function Ur(n,r,a){var h=null==n?b:ri(n,r);return h===b?a:h}function Iu(n,r){return null!=n&&bn(n,r,ch)}var ag=Rn(function(n,r,a){null!=r&&"function"!=typeof r.toString&&(r=mo.call(r)),n[r]=a},Gs($e)),ba=Rn(function(n,r,a){null!=r&&"function"!=typeof r.toString&&(r=mo.call(r)),Ut.call(n,r)?n[r].push(a):n[r]=[a]},gt),qs=Mt(vr);function De(n){return Qe(n)?sh(n):vc(n)}function Zt(n){return Qe(n)?sh(n,!0):function fh(n){if(!pe(n))return function Te(n){var r=[];if(null!=n)for(var a in $t(n))r.push(a);return r}(n);var r=us(n),a=[];for(var h in n)"constructor"==h&&(r||!Ut.call(n,h))||a.push(h);return a}(n)}var Kg=$n(function(n,r,a){No(n,r,a)}),Pu=$n(function(n,r,a,h){No(n,r,a,h)}),sd=as(function(n,r){var a={};if(null==n)return a;var h=!1;r=re(r,function(v){return v=Ze(v,n),h||(h=v.length>1),v}),yn(n,xn(n),a),h&&(a=kn(a,7,Eh));for(var m=r.length;m--;)Io(a,r[m]);return a}),rd=as(function(n,r){return null==n?{}:function yh(n,r){return vh(n,r,function(a,h){return Iu(n,h)})}(n,r)});function qu(n,r){if(null==n)return{};var a=re(xn(n),function(h){return[h]});return r=gt(r),vh(n,a,function(h,m){return r(h,m[0])})}var zr=Mc(De),Lu=Mc(Zt);function yi(n){return null==n?[]:ec(n,De(n))}var pd=ai(function(n,r,a){return r=r.toLowerCase(),n+(a?Wu(r):r)});function Wu(n){return Aa(Gt(n).toLowerCase())}function Uu(n){return(n=Gt(n))&&n.replace(jd,Mf).replace(uf,"")}var md=ai(function(n,r,a){return n+(a?"-":"")+r.toLowerCase()}),_d=ai(function(n,r,a){return n+(a?" ":"")+r.toLowerCase()}),sn=Xn("toLowerCase"),ju=ai(function(n,r,a){return n+(a?"_":"")+r.toLowerCase()}),lg=ai(function(n,r,a){return n+(a?" ":"")+Aa(r)}),dg=ai(function(n,r,a){return n+(a?" ":"")+r.toUpperCase()}),Aa=Xn("toUpperCase");function fg(n,r,a){return n=Gt(n),(r=a?b:r)===b?function Ff(O){return df.test(O)}(n)?function If(O){return O.match(lf)||[]}(n):function Sf(O){return O.match(Ld)||[]}(n):n.match(r)||[]}var pg=Mt(function(n,r){try{return gn(n,b,r)}catch(a){return $h(a)?a:new Ct(a)}}),um=as(function(n,r){return Dn(r,function(a){a=ls(a),rs(n,a,zh(n[a],n))}),n});function Gs(n){return function(){return n}}var Hu=Bo(),gg=Bo(!0);function $e(n){return n}function Yu(n){return dh("function"==typeof n?n:kn(n,1))}var wd=Mt(function(n,r){return function(a){return vr(a,n,r)}}),Da=Mt(function(n,r){return function(a){return vr(n,a,r)}});function vi(n,r,a){var h=De(r),m=Oo(r,h);null==a&&(!pe(r)||!m.length&&h.length)&&(a=r,r=n,n=this,m=Oo(r,De(r)));var v=!(pe(a)&&"chain"in a&&!a.chain),C=Jn(n);return Dn(m,function(T){var k=r[T];n[T]=k,C&&(n.prototype[T]=function(){var q=this.__chain__;if(v||q){var L=n(this.__wrapped__);return(L.__actions__=me(this.__actions__)).push({func:k,args:arguments,thisArg:n}),L.__chain__=q,L}return k.apply(n,Ss([this.value()],arguments))})}),n}function Cd(){}var hm=Vn(re),Zi=Vn(Rl),Oa=Vn(Xa);function Hr(n){return Fe(n)?Ka(ls(n)):function xh(n){return function(r){return ri(r,n)}}(n)}var Ma=Nh(),ka=Nh(!0);function Qu(){return[]}function Qr(){return!1}var vg=Go(function(n,r){return n+r},0),dm=Oc("ceil"),xg=Go(function(n,r){return n/r},1),$u=Oc("floor"),wg=Go(function(n,r){return n*r},1),gm=Oc("round"),Cg=Go(function(n,r){return n-r},0);return _.after=function mu(n,r){if("function"!=typeof r)throw new Xt(Ft);return n=Tt(n),function(){if(--n<1)return r.apply(this,arguments)}},_.ary=Pp,_.assign=Qp,_.assignIn=ed,_.assignInWith=xa,_.assignWith=$p,_.at=Xp,_.before=la,_.bind=zh,_.bindAll=um,_.bindKey=ha,_.castArray=function Su(){if(!arguments.length)return[];var n=arguments[0];return vt(n)?n:[n]},_.chain=ra,_.chunk=function Jo(n,r,a){r=(a?un(n,r,a):r===b)?1:le(Tt(r),0);var h=null==n?0:n.length;if(!h||r<1)return[];for(var m=0,v=0,C=E(bo(h/r));m<h;)C[v++]=Fn(n,m,m+=r);return C},_.compact=function Vp(n){for(var r=-1,a=null==n?0:n.length,h=0,m=[];++r<a;){var v=n[r];v&&(m[h++]=v)}return m},_.concat=function Ko(){var n=arguments.length;if(!n)return[];for(var r=E(n-1),a=arguments[0],h=n;h--;)r[h-1]=arguments[h];return Ss(vt(a)?me(a):[a],qe(r,1))},_.cond=function jr(n){var r=null==n?0:n.length,a=gt();return n=r?re(n,function(h){if("function"!=typeof h[1])throw new Xt(Ft);return[a(h[0]),h[1]]}):[],Mt(function(h){for(var m=-1;++m<r;){var v=n[m];if(gn(v[0],this,h))return gn(v[1],this,h)}})},_.conforms=function Sa(n){return function up(n){var r=De(n);return function(a){return pc(a,n,r)}}(kn(n,1))},_.constant=Gs,_.countBy=iu,_.create=function Jp(n,r){var a=Os(n);return null==r?a:ih(a,r)},_.curry=function _u(n,r,a){var h=vn(n,8,b,b,b,b,b,r=a?b:r);return h.placeholder=_u.placeholder,h},_.curryRight=function yu(n,r,a){var h=vn(n,16,b,b,b,b,b,r=a?b:r);return h.placeholder=yu.placeholder,h},_.debounce=da,_.defaults=Kp,_.defaultsDeep=tg,_.defer=jh,_.delay=qp,_.difference=Ic,_.differenceBy=Fr,_.differenceWith=wn,_.drop=function Er(n,r,a){var h=null==n?0:n.length;return h?Fn(n,(r=a||r===b?1:Tt(r))<0?0:r,h):[]},_.dropRight=function Pc(n,r,a){var h=null==n?0:n.length;return h?Fn(n,0,(r=h-(r=a||r===b?1:Tt(r)))<0?0:r):[]},_.dropRightWhile=function qi(n,r){return n&&n.length?Sc(n,gt(r,3),!0,!0):[]},_.dropWhile=function qc(n,r){return n&&n.length?Sc(n,gt(r,3),!0):[]},_.fill=function xs(n,r,a,h){var m=null==n?0:n.length;return m?(a&&"number"!=typeof a&&un(n,r,a)&&(a=0,h=m),function hp(n,r,a,h){var m=n.length;for((a=Tt(a))<0&&(a=-a>m?0:m+a),(h=h===b||h>m?m:Tt(h))<0&&(h+=m),h=a>h?0:Kh(h);a<h;)n[a++]=r;return n}(n,r,a,h)):[]},_.filter=function ou(n,r){return(vt(n)?As:ah)(n,gt(r,3))},_.flatMap=function au(n,r){return qe(Ui(n,r),1)},_.flatMapDeep=function Gr(n,r){return qe(Ui(n,r),ht)},_.flatMapDepth=function cu(n,r,a){return a=a===b?1:Tt(a),qe(Ui(n,r),a)},_.flatten=Is,_.flattenDeep=function ta(n){return null!=n&&n.length?qe(n,ht):[]},_.flattenDepth=function In(n,r){return null!=n&&n.length?qe(n,r=r===b?1:Tt(r)):[]},_.flip=function Lp(n){return vn(n,512)},_.flow=Hu,_.flowRight=gg,_.fromPairs=function ea(n){for(var r=-1,a=null==n?0:n.length,h={};++r<a;){var m=n[r];h[m[0]]=m[1]}return h},_.functions=function ds(n){return null==n?[]:Oo(n,De(n))},_.functionsIn=function rg(n){return null==n?[]:Oo(n,Zt(n))},_.groupBy=Gg,_.initial=function li(n){return null!=n&&n.length?Fn(n,0,-1):[]},_.intersection=Rr,_.intersectionBy=Vr,_.intersectionWith=Gi,_.invert=ag,_.invertBy=ba,_.invokeMap=uu,_.iteratee=Yu,_.keyBy=ca,_.keys=De,_.keysIn=Zt,_.map=Ui,_.mapKeys=function Ls(n,r){var a={};return r=gt(r,3),Nn(n,function(h,m,v){rs(a,r(h,m,v),h)}),a},_.mapValues=function cg(n,r){var a={};return r=gt(r,3),Nn(n,function(h,m,v){rs(a,m,r(h,m,v))}),a},_.matches=function Ta(n){return gh(kn(n,1))},_.matchesProperty=function bd(n,r){return mh(n,kn(r,1))},_.memoize=ji,_.merge=Kg,_.mergeWith=Pu,_.method=wd,_.methodOf=Da,_.mixin=vi,_.negate=vu,_.nthArg=function Ad(n){return n=Tt(n),Mt(function(r){return Fo(r,n)})},_.omit=sd,_.omitBy=function id(n,r){return qu(n,vu(gt(r)))},_.once=function xu(n){return la(2,n)},_.orderBy=function lu(n,r,a,h){return null==n?[]:(vt(r)||(r=null==r?[]:[r]),vt(a=h?b:a)||(a=null==a?[]:[a]),_h(n,r,a))},_.over=hm,_.overArgs=bu,_.overEvery=Zi,_.overSome=Oa,_.partial=Wr,_.partialRight=fa,_.partition=hu,_.pick=rd,_.pickBy=qu,_.property=Hr,_.propertyOf=function Yr(n){return function(r){return null==n?b:ri(n,r)}},_.pull=Ih,_.pullAll=na,_.pullAllBy=function Ph(n,r,a){return n&&n.length&&r&&r.length?Eo(n,r,gt(a,2)):n},_.pullAllWith=function Bc(n,r,a){return n&&n.length&&r&&r.length?Eo(n,r,b,a):n},_.pullAt=qh,_.range=Ma,_.rangeRight=ka,_.rearg=Zh,_.reject=function du(n,r){return(vt(n)?As:ah)(n,vu(gt(r,3)))},_.remove=function bs(n,r){var a=[];if(!n||!n.length)return a;var h=-1,m=[],v=n.length;for(r=gt(r,3);++h<v;){var C=n[h];r(C,h,n)&&(a.push(C),m.push(h))}return bh(n,m),a},_.rest=function Hh(n,r){if("function"!=typeof n)throw new Xt(Ft);return Mt(n,r=r===b?r:Tt(r))},_.reverse=hi,_.sampleSize=function fu(n,r,a){return r=(a?un(n,r,a):r===b)?1:Tt(r),(vt(n)?op:wh)(n,r)},_.set=function ad(n,r,a){return null==n?n:Ro(n,r,a)},_.setWith=function cd(n,r,a,h){return h="function"==typeof h?h:b,null==n?n:Ro(n,r,a,h)},_.shuffle=function pu(n){return(vt(n)?ap:Og)(n)},_.slice=function Gc(n,r,a){var h=null==n?0:n.length;return h?(a&&"number"!=typeof a&&un(n,r,a)?(r=0,a=h):(r=null==r?0:Tt(r),a=a===b?h:Tt(a)),Fn(n,r,a)):[]},_.sortBy=Zg,_.sortedUniq=function Uc(n){return n&&n.length?Ah(n):[]},_.sortedUniqBy=function zc(n,r){return n&&n.length?Ah(n,gt(r,2)):[]},_.split=function Ca(n,r,a){return a&&"number"!=typeof a&&un(n,r,a)&&(r=a=b),(a=a===b?At:a>>>0)?(n=Gt(n))&&("string"==typeof r||null!=r&&!ya(r))&&!(r=dt(r))&&Di(n)?vs(jn(n),0,a):n.split(r,a):[]},_.spread=function Hg(n,r){if("function"!=typeof n)throw new Xt(Ft);return r=null==r?0:le(Tt(r),0),Mt(function(a){var h=a[r],m=vs(a,0,r);return h&&Ss(m,h),gn(n,this,m)})},_.tail=function jc(n){var r=null==n?0:n.length;return r?Fn(n,1,r):[]},_.take=function Rg(n,r,a){return n&&n.length?Fn(n,0,(r=a||r===b?1:Tt(r))<0?0:r):[]},_.takeRight=function ws(n,r,a){var h=null==n?0:n.length;return h?Fn(n,(r=h-(r=a||r===b?1:Tt(r)))<0?0:r,h):[]},_.takeRightWhile=function sa(n,r){return n&&n.length?Sc(n,gt(r,3),!1,!0):[]},_.takeWhile=function di(n,r){return n&&n.length?Sc(n,gt(r,3)):[]},_.tap=function Uh(n,r){return r(n),n},_.throttle=function wu(n,r,a){var h=!0,m=!0;if("function"!=typeof n)throw new Xt(Ft);return pe(a)&&(h="leading"in a?!!a.leading:h,m="trailing"in a?!!a.trailing:m),da(n,r,{leading:h,maxWait:r,trailing:m})},_.thru=eu,_.toArray=Pn,_.toPairs=zr,_.toPairsIn=Lu,_.toPath=function yg(n){return vt(n)?re(n,ls):Cn(n)?[n]:me(Ep(Gt(n)))},_.toPlainObject=td,_.transform=function ud(n,r,a){var h=vt(n),m=h||hs(n)||mi(n);if(r=gt(r,4),null==a){var v=n&&n.constructor;a=m?h?new v:[]:pe(n)&&Jn(v)?Os(vo(n)):{}}return(m?Dn:Nn)(n,function(C,T,k){return r(a,C,T,k)}),a},_.unary=function Cu(n){return Pp(n,1)},_.union=fi,_.unionBy=Zc,_.unionWith=qr,_.uniq=function Hc(n){return n&&n.length?en(n):[]},_.uniqBy=function Gh(n,r){return n&&n.length?en(n,gt(r,2)):[]},_.uniqWith=function Yc(n,r){return r="function"==typeof r?r:b,n&&n.length?en(n,b,r):[]},_.unset=function ld(n,r){return null==n||Io(n,r)},_.unzip=Lr,_.unzipWith=ia,_.update=function hd(n,r,a){return null==n?n:Po(n,r,Tc(a))},_.updateWith=function ug(n,r,a,h){return h="function"==typeof h?h:b,null==n?n:Po(n,r,Tc(a),h)},_.values=yi,_.valuesIn=function dd(n){return null==n?[]:ec(n,Zt(n))},_.without=Qc,_.words=fg,_.wrap=function Au(n,r){return Wr(Tc(r),n)},_.xor=$c,_.xorBy=Xc,_.xorWith=Wh,_.zip=Jc,_.zipObject=function Br(n,r){return an(n||[],r||[],_r)},_.zipObjectDeep=function Kc(n,r){return an(n||[],r||[],Ro)},_.zipWith=tu,_.entries=zr,_.entriesIn=Lu,_.extend=ed,_.extendWith=xa,vi(_,_),_.add=vg,_.attempt=pg,_.camelCase=pd,_.capitalize=Wu,_.ceil=dm,_.clamp=function Bu(n,r,a){return a===b&&(a=r,r=b),a!==b&&(a=(a=qn(a))==a?a:0),r!==b&&(r=(r=qn(r))==r?r:0),si(qn(n),r,a)},_.clone=function Yh(n){return kn(n,4)},_.cloneDeep=function Du(n){return kn(n,5)},_.cloneDeepWith=function Qh(n,r){return kn(n,5,r="function"==typeof r?r:b)},_.cloneWith=function Tu(n,r){return kn(n,4,r="function"==typeof r?r:b)},_.conformsTo=function Ou(n,r){return null==r||pc(n,r,De(r))},_.deburr=Uu,_.defaultTo=function Zr(n,r){return null==n||n!=n?r:n},_.divide=xg,_.endsWith=function zu(n,r,a){n=Gt(n),r=dt(r);var h=n.length,m=a=a===b?h:si(Tt(a),0,h);return(a-=r.length)>=0&&n.slice(a,m)==r},_.eq=Bt,_.escape=function wa(n){return(n=Gt(n))&&Vd.test(n)?n.replace(tr,kf):n},_.escapeRegExp=function gd(n){return(n=Gt(n))&&al.test(n)?n.replace(Si,"\\$&"):n},_.every=function ru(n,r,a){var h=vt(n)?Rl:lp;return a&&un(n,r,a)&&(r=b),h(n,gt(r,3))},_.find=Wi,_.findIndex=Lc,_.findKey=function eg(n,r){return Vl(n,gt(r,3),Nn)},_.findLast=pi,_.findLastIndex=Li,_.findLastKey=function ng(n,r){return Vl(n,gt(r,3),Do)},_.floor=$u,_.forEach=oa,_.forEachRight=aa,_.forIn=function sg(n,r){return null==n?n:gc(n,gt(r,3),Zt)},_.forInRight=function ig(n,r){return null==n?n:mc(n,gt(r,3),Zt)},_.forOwn=function nd(n,r){return n&&Nn(n,gt(r,3))},_.forOwnRight=function _i(n,r){return n&&Do(n,gt(r,3))},_.get=Ur,_.gt=pa,_.gte=gi,_.has=function og(n,r){return null!=n&&bn(n,r,dp)},_.hasIn=Iu,_.head=Bi,_.identity=$e,_.includes=function Wg(n,r,a,h){n=Qe(n)?n:yi(n),a=a&&!h?Tt(a):0;var m=n.length;return a<0&&(a=le(m+a,0)),Ee(n)?a<=m&&n.indexOf(r,a)>-1:!!m&&Wt(n,r,a)>-1},_.indexOf=function Ip(n,r,a){var h=null==n?0:n.length;if(!h)return-1;var m=null==a?0:Tt(a);return m<0&&(m=le(h+m,0)),Wt(n,r,m)},_.inRange=function fd(n,r,a){return r=de(r),a===b?(a=r,r=0):a=de(a),function fp(n,r,a){return n>=ze(r,a)&&n<le(r,a)}(n=qn(n),r,a)},_.invoke=qs,_.isArguments=Ps,_.isArray=vt,_.isArrayBuffer=Bp,_.isArrayLike=Qe,_.isArrayLikeObject=oe,_.isBoolean=function Mu(n){return!0===n||!1===n||_e(n)&&tn(n)==Jt},_.isBuffer=hs,_.isDate=ku,_.isElement=function Nu(n){return _e(n)&&1===n.nodeType&&!_a(n)},_.isEmpty=function Fu(n){if(null==n)return!0;if(Qe(n)&&(vt(n)||"string"==typeof n||"function"==typeof n.splice||hs(n)||mi(n)||Ps(n)))return!n.length;var r=Le(n);if(r==Ve||r==zn)return!n.size;if(us(n))return!vc(n).length;for(var a in n)if(Ut.call(n,a))return!1;return!0},_.isEqual=function Eu(n,r){return xr(n,r)},_.isEqualWith=function Ru(n,r,a){var h=(a="function"==typeof a?a:b)?a(n,r):b;return h===b?xr(n,r,b,a):!!h},_.isError=$h,_.isFinite=function Yg(n){return"number"==typeof n&&Yl(n)},_.isFunction=Jn,_.isInteger=Gp,_.isLength=ga,_.isMap=Wp,_.isMatch=function Qg(n,r){return n===r||Mo(n,r,jo(r))},_.isMatchWith=function $g(n,r,a){return a="function"==typeof a?a:b,Mo(n,r,jo(r),a)},_.isNaN=function Xg(n){return Up(n)&&n!=+n},_.isNative=function ma(n){if(Rc(n))throw new Ct("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ko(n)},_.isNil=function Jg(n){return null==n},_.isNull=function Xh(n){return null===n},_.isNumber=Up,_.isObject=pe,_.isObjectLike=_e,_.isPlainObject=_a,_.isRegExp=ya,_.isSafeInteger=function va(n){return Gp(n)&&n>=-Z&&n<=Z},_.isSet=Vu,_.isString=Ee,_.isSymbol=Cn,_.isTypedArray=mi,_.isUndefined=function zp(n){return n===b},_.isWeakMap=function jp(n){return _e(n)&&Le(n)==Ji},_.isWeakSet=function Zp(n){return _e(n)&&"[object WeakSet]"==tn(n)},_.join=function Ir(n,r){return null==n?"":Ql.call(n,r)},_.kebabCase=md,_.last=Ye,_.lastIndexOf=function Vh(n,r,a){var h=null==n?0:n.length;if(!h)return-1;var m=h;return a!==b&&(m=(m=Tt(a))<0?le(h+m,0):ze(m,h-1)),r==r?function on(O,V,E){for(var $=E+1;$--;)if(O[$]===V)return $;return $}(n,r,m):uo(n,Ja,m,!0)},_.lowerCase=_d,_.lowerFirst=sn,_.lt=Hp,_.lte=Jh,_.max=function fm(n){return n&&n.length?ii(n,$e,Ri):b},_.maxBy=function pm(n,r){return n&&n.length?ii(n,gt(r,2),Ri):b},_.mean=function Xu(n){return Il(n,$e)},_.meanBy=function bg(n,r){return Il(n,gt(r,2))},_.min=function Dd(n){return n&&n.length?ii(n,$e,xc):b},_.minBy=function Ju(n,r){return n&&n.length?ii(n,gt(r,2),xc):b},_.stubArray=Qu,_.stubFalse=Qr,_.stubObject=function Na(){return{}},_.stubString=function mg(){return""},_.stubTrue=function _g(){return!0},_.multiply=wg,_.nth=function Pr(n,r){return n&&n.length?Fo(n,Tt(r)):b},_.noConflict=function lm(){return Ie._===this&&(Ie._=Wf),this},_.noop=Cd,_.now=zi,_.pad=function Bs(n,r,a){n=Gt(n);var h=(r=Tt(r))?Oi(n):0;if(!r||h>=r)return n;var m=(r-h)/2;return Cr(wo(m),a)+n+Cr(bo(m),a)},_.padEnd=function yd(n,r,a){n=Gt(n);var h=(r=Tt(r))?Oi(n):0;return r&&h<r?n+Cr(r-h,a):n},_.padStart=function tm(n,r,a){n=Gt(n);var h=(r=Tt(r))?Oi(n):0;return r&&h<r?Cr(r-h,a)+n:n},_.parseInt=function em(n,r,a){return a||null==r?r=0:r&&(r=+r),Qf(Gt(n).replace(sr,""),r||0)},_.random=function Gu(n,r,a){if(a&&"boolean"!=typeof a&&un(n,r,a)&&(r=a=b),a===b&&("boolean"==typeof r?(a=r,r=b):"boolean"==typeof n&&(a=n,n=b)),n===b&&r===b?(n=0,r=1):(n=de(n),r===b?(r=n,n=0):r=de(r)),n>r){var h=n;n=r,r=h}if(a||n%1||r%1){var m=oc();return ze(n+m*(r-n+vf("1e-"+((m+"").length-1))),r)}return bc(n,r)},_.reduce=function Ug(n,r,a){var h=vt(n)?$a:ue,m=arguments.length<3;return h(n,gt(r,4),a,m,Ns)},_.reduceRight=function zg(n,r,a){var h=vt(n)?Cf:ue,m=arguments.length<3;return h(n,gt(r,4),a,m,oh)},_.repeat=function vd(n,r,a){return r=(a?un(n,r,a):r===b)?1:Tt(r),wc(Gt(n),r)},_.replace=function xd(){var n=arguments,r=Gt(n[0]);return n.length<3?r:r.replace(n[1],n[2])},_.result=function od(n,r,a){var h=-1,m=(r=Ze(r,n)).length;for(m||(m=1,n=b);++h<m;){var v=null==n?b:n[ls(r[h])];v===b&&(h=m,v=a),n=Jn(v)?v.call(n):v}return n},_.round=gm,_.runInContext=O,_.sample=function ua(n){return(vt(n)?ys:wp)(n)},_.size=function gu(n){if(null==n)return 0;if(Qe(n))return Ee(n)?Oi(n):n.length;var r=Le(n);return r==Ve||r==zn?n.size:vc(n).length},_.snakeCase=ju,_.some=function jg(n,r,a){var h=vt(n)?Xa:Cp;return a&&un(n,r,a)&&(r=b),h(n,gt(r,3))},_.sortedIndex=function Wc(n,r){return Vo(n,r)},_.sortedIndexBy=function Ng(n,r,a){return Ac(n,r,gt(a,2))},_.sortedIndexOf=function Fg(n,r){var a=null==n?0:n.length;if(a){var h=Vo(n,r);if(h<a&&Bt(n[h],r))return h}return-1},_.sortedLastIndex=function Eg(n,r){return Vo(n,r,!0)},_.sortedLastIndexBy=function Lh(n,r,a){return Ac(n,r,gt(a,2),!0)},_.sortedLastIndexOf=function Bh(n,r){if(null!=n&&n.length){var h=Vo(n,r,!0)-1;if(Bt(n[h],r))return h}return-1},_.startCase=lg,_.startsWith=function Zu(n,r,a){return n=Gt(n),a=null==a?0:si(Tt(a),0,n.length),r=dt(r),n.slice(a,a+r.length)==r},_.subtract=Cg,_.sum=function $r(n){return n&&n.length?cr(n,$e):0},_.sumBy=function Ku(n,r){return n&&n.length?cr(n,gt(r,2)):0},_.template=function hg(n,r,a){var h=_.templateSettings;a&&un(n,r,a)&&(r=b),n=Gt(n),r=xa({},r,h,Fh);var T,k,m=xa({},r.imports,h.imports,Fh),v=De(m),C=ec(m,v),q=0,L=r.interpolate||io,W="__p += '",Y=ic((r.escape||io).source+"|"+L.source+"|"+(L===er?Bd:io).source+"|"+(r.evaluate||io).source+"|$","g"),st="//# sourceURL="+(Ut.call(r,"sourceURL")?(r.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++pf+"]")+"\n";n.replace(Y,function(_t,kt,Vt,Ln,Xe,An){return Vt||(Vt=Ln),W+=n.slice(q,An).replace(ro,Nf),kt&&(T=!0,W+="' +\n__e("+kt+") +\n'"),Xe&&(k=!0,W+="';\n"+Xe+";\n__p += '"),Vt&&(W+="' +\n((__t = ("+Vt+")) == null ? '' : __t) +\n'"),q=An+_t.length,_t}),W+="';\n";var mt=Ut.call(r,"variable")&&r.variable;if(mt){if(Ba.test(mt))throw new Ct("Invalid `variable` option passed into `_.template`")}else W="with (obj) {\n"+W+"\n}\n";W=(k?W.replace(Hs,""):W).replace(nl,"$1").replace(sl,"$1;"),W="function("+(mt||"obj")+") {\n"+(mt?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(T?", __e = _.escape":"")+(k?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+W+"return __p\n}";var Dt=pg(function(){return Rt(v,st+"return "+W).apply(b,C)});if(Dt.source=W,$h(Dt))throw Dt;return Dt},_.times=function Sd(n,r){if((n=Tt(n))<1||n>Z)return[];var a=At,h=ze(n,At);r=gt(r),n-=At;for(var m=ur(h,r);++a<n;)r(a);return m},_.toFinite=de,_.toInteger=Tt,_.toLength=Kh,_.toLower=function nm(n){return Gt(n).toLowerCase()},_.toNumber=qn,_.toSafeInteger=function Yp(n){return n?si(Tt(n),-Z,Z):0===n?n:0},_.toString=Gt,_.toUpper=function sm(n){return Gt(n).toUpperCase()},_.trim=function im(n,r,a){if((n=Gt(n))&&(a||r===b))return Pl(n);if(!n||!(r=dt(r)))return n;var h=jn(n),m=jn(r);return vs(h,ql(h,m),nc(h,m)+1).join("")},_.trimEnd=function rm(n,r,a){if((n=Gt(n))&&(a||r===b))return n.slice(0,Gl(n)+1);if(!n||!(r=dt(r)))return n;var h=jn(n);return vs(h,0,nc(h,jn(r))+1).join("")},_.trimStart=function om(n,r,a){if((n=Gt(n))&&(a||r===b))return n.replace(sr,"");if(!n||!(r=dt(r)))return n;var h=jn(n);return vs(h,ql(h,jn(r))).join("")},_.truncate=function am(n,r){var a=30,h="...";if(pe(r)){var m="separator"in r?r.separator:m;a="length"in r?Tt(r.length):a,h="omission"in r?dt(r.omission):h}var v=(n=Gt(n)).length;if(Di(n)){var C=jn(n);v=C.length}if(a>=v)return n;var T=a-Oi(h);if(T<1)return h;var k=C?vs(C,0,T).join(""):n.slice(0,T);if(m===b)return k+h;if(C&&(T+=k.length-T),ya(m)){if(n.slice(T).search(m)){var q,L=k;for(m.global||(m=ic(m.source,Gt(cl.exec(m))+"g")),m.lastIndex=0;q=m.exec(L);)var W=q.index;k=k.slice(0,W===b?T:W)}}else if(n.indexOf(dt(m),T)!=T){var Y=k.lastIndexOf(m);Y>-1&&(k=k.slice(0,Y))}return k+h},_.unescape=function cm(n){return(n=Gt(n))&&il.test(n)?n.replace(Ys,Wl):n},_.uniqueId=function Td(n){var r=++Bf;return Gt(n)+r},_.upperCase=dg,_.upperFirst=Aa,_.each=oa,_.eachRight=aa,_.first=Bi,vi(_,function(){var n={};return Nn(_,function(r,a){Ut.call(_.prototype,a)||(n[a]=r)}),n}(),{chain:!1}),_.VERSION="4.17.21",Dn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){_[n].placeholder=_}),Dn(["drop","take"],function(n,r){nt.prototype[n]=function(a){a=a===b?1:le(Tt(a),0);var h=this.__filtered__&&!r?new nt(this):this.clone();return h.__filtered__?h.__takeCount__=ze(a,h.__takeCount__):h.__views__.push({size:ze(a,At),type:n+(h.__dir__<0?"Right":"")}),h},nt.prototype[n+"Right"]=function(a){return this.reverse()[n](a).reverse()}}),Dn(["filter","map","takeWhile"],function(n,r){var a=r+1,h=1==a||3==a;nt.prototype[n]=function(m){var v=this.clone();return v.__iteratees__.push({iteratee:gt(m,3),type:a}),v.__filtered__=v.__filtered__||h,v}}),Dn(["head","last"],function(n,r){var a="take"+(r?"Right":"");nt.prototype[n]=function(){return this[a](1).value()[0]}}),Dn(["initial","tail"],function(n,r){var a="drop"+(r?"":"Right");nt.prototype[n]=function(){return this.__filtered__?new nt(this):this[a](1)}}),nt.prototype.compact=function(){return this.filter($e)},nt.prototype.find=function(n){return this.filter(n).head()},nt.prototype.findLast=function(n){return this.reverse().find(n)},nt.prototype.invokeMap=Mt(function(n,r){return"function"==typeof n?new nt(this):this.map(function(a){return vr(a,n,r)})}),nt.prototype.reject=function(n){return this.filter(vu(gt(n)))},nt.prototype.slice=function(n,r){n=Tt(n);var a=this;return a.__filtered__&&(n>0||r<0)?new nt(a):(n<0?a=a.takeRight(-n):n&&(a=a.drop(n)),r!==b&&(a=(r=Tt(r))<0?a.dropRight(-r):a.take(r-n)),a)},nt.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},nt.prototype.toArray=function(){return this.take(At)},Nn(nt.prototype,function(n,r){var a=/^(?:filter|find|map|reject)|While$/.test(r),h=/^(?:head|last)$/.test(r),m=_[h?"take"+("last"==r?"Right":""):r],v=h||/^find/.test(r);m&&(_.prototype[r]=function(){var C=this.__wrapped__,T=h?[1]:arguments,k=C instanceof nt,q=T[0],L=k||vt(C),W=function(kt){var Vt=m.apply(_,Ss([kt],T));return h&&Y?Vt[0]:Vt};L&&a&&"function"==typeof q&&1!=q.length&&(k=L=!1);var Y=this.__chain__,mt=v&&!Y,Dt=k&&!this.__actions__.length;if(!v&&L){C=Dt?C:new nt(this);var _t=n.apply(C,T);return _t.__actions__.push({func:eu,args:[W],thisArg:b}),new Mn(_t,Y)}return mt&&Dt?n.apply(this,T):(_t=this.thru(W),mt?h?_t.value()[0]:_t.value():_t)})}),Dn(["pop","push","shift","sort","splice","unshift"],function(n){var r=fo[n],a=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",h=/^(?:pop|shift)$/.test(n);_.prototype[n]=function(){var m=arguments;if(h&&!this.__chain__){var v=this.value();return r.apply(vt(v)?v:[],m)}return this[a](function(C){return r.apply(vt(C)?C:[],m)})}}),Nn(nt.prototype,function(n,r){var a=_[r];if(a){var h=a.name+"";Ut.call(ei,h)||(ei[h]=[]),ei[h].push({name:r,func:a})}}),ei[wr(b,2).name]=[{name:"wrapper",func:b}],nt.prototype.clone=function Ne(){var n=new nt(this.__wrapped__);return n.__actions__=me(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=me(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=me(this.__views__),n},nt.prototype.reverse=function Yt(){if(this.__filtered__){var n=new nt(this);n.__dir__=-1,n.__filtered__=!0}else(n=this.clone()).__dir__*=-1;return n},nt.prototype.value=function Jl(){var n=this.__wrapped__.value(),r=this.__dir__,a=vt(n),h=r<0,m=a?n.length:0,v=function Mp(n,r,a){for(var h=-1,m=a.length;++h<m;){var v=a[h],C=v.size;switch(v.type){case"drop":n+=C;break;case"dropRight":r-=C;break;case"take":r=ze(r,n+C);break;case"takeRight":n=le(n,r-C)}}return{start:n,end:r}}(0,m,this.__views__),C=v.start,T=v.end,k=T-C,q=h?T:C-1,L=this.__iteratees__,W=L.length,Y=0,st=ze(k,this.__takeCount__);if(!a||!h&&m==k&&st==k)return Sh(n,this.__actions__);var mt=[];t:for(;k--&&Y<st;){for(var Dt=-1,_t=n[q+=r];++Dt<W;){var kt=L[Dt],Ln=kt.type,Xe=(0,kt.iteratee)(_t);if(2==Ln)_t=Xe;else if(!Xe){if(1==Ln)continue t;break t}}mt[Y++]=_t}return mt},_.prototype.at=Vg,_.prototype.chain=function Ig(){return ra(this)},_.prototype.commit=function Pg(){return new Mn(this.value(),this.__chain__)},_.prototype.next=function qg(){this.__values__===b&&(this.__values__=Pn(this.value()));var n=this.__index__>=this.__values__.length;return{done:n,value:n?b:this.__values__[this.__index__++]}},_.prototype.plant=function Bg(n){for(var r,a=this;a instanceof be;){var h=Vs(a);h.__index__=0,h.__values__=b,r?m.__wrapped__=h:r=h;var m=h;a=a.__wrapped__}return m.__wrapped__=n,r},_.prototype.reverse=function nu(){var n=this.__wrapped__;if(n instanceof nt){var r=n;return this.__actions__.length&&(r=new nt(this)),(r=r.reverse()).__actions__.push({func:eu,args:[hi],thisArg:b}),new Mn(r,this.__chain__)}return this.thru(hi)},_.prototype.toJSON=_.prototype.valueOf=_.prototype.value=function su(){return Sh(this.__wrapped__,this.__actions__)},_.prototype.first=_.prototype.head,dr&&(_.prototype[dr]=function Lg(){return this}),_}();Ie._=ho,(ft=function(){return ho}.call(Qt,ut,Qt,J))!==b&&(J.exports=ft)}.call(this)},3897:J=>{J.exports=function Qt(ut,ft){(null==ft||ft>ut.length)&&(ft=ut.length);for(var b=0,Pt=new Array(ft);b<ft;b++)Pt[b]=ut[b];return Pt},J.exports.__esModule=!0,J.exports.default=J.exports},5372:J=>{J.exports=function Qt(ut){if(Array.isArray(ut))return ut},J.exports.__esModule=!0,J.exports.default=J.exports},6690:J=>{J.exports=function Qt(ut,ft){if(!(ut instanceof ft))throw new TypeError("Cannot call a class as a function")},J.exports.__esModule=!0,J.exports.default=J.exports},9728:(J,Qt,ut)=>{var ft=ut(4062);function b(at,u){for(var Ft=0;Ft<u.length;Ft++){var fe=u[Ft];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(at,ft(fe.key),fe)}}J.exports=function Pt(at,u,Ft){return u&&b(at.prototype,u),Ft&&b(at,Ft),Object.defineProperty(at,"prototype",{writable:!1}),at},J.exports.__esModule=!0,J.exports.default=J.exports},8872:J=>{J.exports=function Qt(ut,ft){var b=null==ut?null:typeof Symbol<"u"&&ut[Symbol.iterator]||ut["@@iterator"];if(null!=b){var Pt,at,u,Ft,fe=[],Oe=!0,Us=!1;try{if(u=(b=b.call(ut)).next,0===ft){if(Object(b)!==b)return;Oe=!1}else for(;!(Oe=(Pt=u.call(b)).done)&&(fe.push(Pt.value),fe.length!==ft);Oe=!0);}catch(ln){Us=!0,at=ln}finally{try{if(!Oe&&null!=b.return&&(Ft=b.return(),Object(Ft)!==Ft))return}finally{if(Us)throw at}}return fe}},J.exports.__esModule=!0,J.exports.default=J.exports},2218:J=>{J.exports=function Qt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},J.exports.__esModule=!0,J.exports.default=J.exports},7424:(J,Qt,ut)=>{var ft=ut(5372),b=ut(8872),Pt=ut(6116),at=ut(2218);J.exports=function u(Ft,fe){return ft(Ft)||b(Ft,fe)||Pt(Ft,fe)||at()},J.exports.__esModule=!0,J.exports.default=J.exports},5036:(J,Qt,ut)=>{var ft=ut(8698).default;J.exports=function b(Pt,at){if("object"!==ft(Pt)||null===Pt)return Pt;var u=Pt[Symbol.toPrimitive];if(void 0!==u){var Ft=u.call(Pt,at||"default");if("object"!==ft(Ft))return Ft;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===at?String:Number)(Pt)},J.exports.__esModule=!0,J.exports.default=J.exports},4062:(J,Qt,ut)=>{var ft=ut(8698).default,b=ut(5036);J.exports=function Pt(at){var u=b(at,"string");return"symbol"===ft(u)?u:String(u)},J.exports.__esModule=!0,J.exports.default=J.exports},8698:J=>{function Qt(ut){return J.exports=Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ft){return typeof ft}:function(ft){return ft&&"function"==typeof Symbol&&ft.constructor===Symbol&&ft!==Symbol.prototype?"symbol":typeof ft},J.exports.__esModule=!0,J.exports.default=J.exports,Qt(ut)}J.exports=Qt,J.exports.__esModule=!0,J.exports.default=J.exports},6116:(J,Qt,ut)=>{var ft=ut(3897);J.exports=function b(Pt,at){if(Pt){if("string"==typeof Pt)return ft(Pt,at);var u=Object.prototype.toString.call(Pt).slice(8,-1);if("Object"===u&&Pt.constructor&&(u=Pt.constructor.name),"Map"===u||"Set"===u)return Array.from(Pt);if("Arguments"===u||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return ft(Pt,at)}},J.exports.__esModule=!0,J.exports.default=J.exports}}]);