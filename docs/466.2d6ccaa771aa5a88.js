(self.webpackChunkcomms=self.webpackChunkcomms||[]).push([[466],{3466:(J,Yt,ut)=>{"use strict";ut.r(Yt),ut.d(Yt,{FunctionalTrainerModule:()=>l_});var pt=ut(6814),b=ut(6538);function Pt(i,t,e,s,o,c,l){try{var d=i[c](l),f=d.value}catch(p){return void e(p)}d.done?t(f):Promise.resolve(f).then(s,o)}function at(i){return function(){var t=this,e=arguments;return new Promise(function(s,o){var c=i.apply(t,e);function l(f){Pt(c,s,o,l,d,"next",f)}function d(f){Pt(c,s,o,l,d,"throw",f)}l(void 0)})}}var u=ut(4946),Nt=ut(6990);const he="14.7.77";var Oe=ut(9884);const $e=new WeakSet,Ee=new WeakMap,es=new WeakMap,We=new WeakMap,mn=new WeakMap,gs=new WeakMap,_e=new WeakMap,Wn=new WeakMap,Xe=new WeakMap,ns=new WeakMap,Mn={construct:()=>Mn},yi=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,to=(i,t)=>{const e=[];let s=i.replace(/^[\s]+/,""),o=s.match(yi);for(;null!==o;){const c=o[1].slice(1,-1),l=o[0].replace(/([\s]+)?;?$/,"").replace(c,new URL(c,t).toString());e.push(l),s=s.slice(o[0].length).replace(/^[\s]+/,""),o=s.match(yi)}return[e.join(";"),s]},eo=i=>{if(void 0!==i&&!Array.isArray(i))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},no=i=>{if(!(i=>{try{new new Proxy(i,Mn)}catch{return!1}return!0})(i))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===i.prototype||"object"!=typeof i.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},rn=(i,t)=>{const e=i.get(t);if(void 0===e)throw new Error("A value with the given key could not be found.");return e},qt=(i,t)=>{const e=Array.from(i).filter(t);if(e.length>1)throw Error("More than one element was found.");if(0===e.length)throw Error("No element was found.");const[s]=e;return i.delete(s),s},K=(i,t,e,s)=>{const o=rn(i,t),c=qt(o,l=>l[0]===e&&l[1]===s);return 0===o.size&&i.delete(t),c},ht=i=>rn(_e,i),H=i=>{if($e.has(i))throw new Error("The AudioNode is already stored.");$e.add(i),ht(i).forEach(t=>t(!0))},wt=i=>"port"in i,ct=i=>{if(!$e.has(i))throw new Error("The AudioNode is not stored.");$e.delete(i),ht(i).forEach(t=>t(!1))},At=(i,t)=>{!wt(i)&&t.every(e=>0===e.size)&&ct(i)},Ss={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},Xt=(i,t)=>i.context===t,ms=i=>{try{i.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},De=()=>new DOMException("","IndexSizeError"),_n=i=>{var t;i.getChannelData=(t=i.getChannelData,e=>{try{return t.call(i,e)}catch(s){throw 12===s.code?De():s}})},$i={numberOfChannels:1},ae=-34028234663852886e22,Me=-ae,se=i=>$e.has(i),sl={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},be=i=>rn(Ee,i),is=i=>rn(We,i),tr=(i,t)=>{const{activeInputs:e}=be(i);e.forEach(o=>o.forEach(([c])=>{t.includes(i)||tr(c,[...t,i])}));const s=(i=>"playbackRate"in i)(i)?[i.playbackRate]:wt(i)?Array.from(i.parameters.values()):(i=>"frequency"in i&&"gain"in i)(i)?[i.Q,i.detune,i.frequency,i.gain]:(i=>"offset"in i)(i)?[i.offset]:(i=>!("frequency"in i)&&"gain"in i)(i)?[i.gain]:(i=>"detune"in i&&"frequency"in i)(i)?[i.detune,i.frequency]:(i=>"pan"in i)(i)?[i.pan]:[];for(const o of s){const c=is(o);void 0!==c&&c.activeInputs.forEach(([l])=>tr(l,t))}se(i)&&ct(i)},xi=i=>{tr(i.destination,[])},bi=i=>"context"in i,Zs=i=>bi(i[0]),Ys=(i,t,e,s)=>{for(const o of i)if(e(o)){if(s)return!1;throw Error("The set contains at least one similar element.")}return i.add(t),!0},il=(i,t,[e,s],o)=>{Ys(i,[t,e,s],c=>c[0]===t&&c[1]===e,o)},rl=(i,[t,e,s],o)=>{const c=i.get(t);void 0===c?i.set(t,new Set([[e,s]])):Ys(c,[e,s],l=>l[0]===e,o)},Qs=i=>"inputs"in i,er=(i,t,e,s)=>{if(Qs(t)){const o=t.inputs[s];return i.connect(o,e,0),[o,e,0]}return i.connect(t,e,s),[t,e,s]},ol=(i,t,e)=>{for(const s of i)if(s[0]===t&&s[1]===e)return i.delete(s),s;return null},al=(i,t)=>{if(!ht(i).delete(t))throw new Error("Missing the expected event listener.")},cl=(i,t,e)=>{const s=rn(i,t),o=qt(s,c=>c[0]===e);return 0===s.size&&i.delete(t),o},nr=(i,t,e,s)=>{Qs(t)?i.disconnect(t.inputs[s],e,0):i.disconnect(t,e,s)},ee=i=>rn(es,i),sr=i=>rn(mn,i),$s=i=>Wn.has(i),wi=i=>!$e.has(i),ul=(i,t)=>new Promise(e=>{if(null!==t)e(!0);else{const s=i.createScriptProcessor(256,1,1),o=i.createGain(),c=i.createBuffer(1,2,44100),l=c.getChannelData(0);l[0]=1,l[1]=1;const d=i.createBufferSource();d.buffer=c,d.loop=!0,d.connect(s).connect(i.destination),d.connect(o),d.disconnect(o),s.onaudioprocess=f=>{const p=f.inputBuffer.getChannelData(0);Array.prototype.some.call(p,g=>1===g)?e(!0):e(!1),d.stop(),s.onaudioprocess=null,d.disconnect(s),s.disconnect(i.destination)},d.start()}}),ir=(i,t)=>{const e=new Map;for(const s of i)for(const o of s){const c=e.get(o);e.set(o,void 0===c?1:c+1)}e.forEach((s,o)=>t(o,s))},ro=i=>"context"in i,Ga=(i,t,e,s,o)=>{const[c,l]=((i,t,e,s)=>{const{activeInputs:o,passiveInputs:c}=be(t),l=ol(o[s],i,e);return null===l?[K(c,i,e,s)[2],!1]:[l[2],!0]})(i,e,s,o);if(null!==c&&(al(i,c),l&&!t&&!$s(i)&&nr(ee(i),ee(e),s,o)),se(e)){const{activeInputs:d}=be(e);At(e,d)}},Wa=(i,t,e,s)=>{const[o,c]=((i,t,e)=>{const{activeInputs:s,passiveInputs:o}=is(t),c=ol(s,i,e);return null===c?[cl(o,i,e)[1],!1]:[c[2],!0]})(i,e,s);null!==o&&(al(i,o),c&&!t&&!$s(i)&&ee(i).disconnect(sr(e),s))};class hl{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach((s,o)=>t.call(e,s,o,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const $d={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function ao(i,t,e,s,o){if("function"==typeof i.copyFromChannel)0===t[e].byteLength&&(t[e]=new Float32Array(128)),i.copyFromChannel(t[e],s,o);else{const c=i.getChannelData(s);if(0===t[e].byteLength)t[e]=c.slice(o,o+128);else{const l=new Float32Array(c.buffer,o*Float32Array.BYTES_PER_ELEMENT,128);t[e].set(l)}}}const rr=(i,t,e,s,o)=>{"function"==typeof i.copyToChannel?0!==t[e].byteLength&&i.copyToChannel(t[e],s,o):0!==t[e].byteLength&&i.getChannelData(s).set(t[e],o)},co=(i,t)=>{const e=[];for(let s=0;s<i;s+=1){const o=[],c="number"==typeof t?t:t[s];for(let l=0;l<c;l+=1)o.push(new Float32Array(128));e.push(o)}return e},Jd=function(){var i=at(function*(t,e,s,o,c,l,d){const f=null===e?128*Math.ceil(t.context.length/128):e.length,p=o.channelCount*o.numberOfInputs,g=c.reduce((O,I)=>O+I,0),y=0===g?null:s.createBuffer(g,f,s.sampleRate);if(void 0===l)throw new Error("Missing the processor constructor.");const x=be(t),A=yield((i,t)=>{const e=rn(ns,i),s=ee(t);return rn(e,s)})(s,t),w=co(o.numberOfInputs,o.channelCount),S=co(o.numberOfOutputs,c),F=Array.from(t.parameters.keys()).reduce((O,I)=>({...O,[I]:new Float32Array(128)}),{});for(let O=0;O<f;O+=128){if(o.numberOfInputs>0&&null!==e)for(let I=0;I<o.numberOfInputs;I+=1)for(let B=0;B<o.channelCount;B+=1)ao(e,w[I],B,B,O);void 0!==l.parameterDescriptors&&null!==e&&l.parameterDescriptors.forEach(({name:I},B)=>{ao(e,F,I,p+B,O)});for(let I=0;I<o.numberOfInputs;I+=1)for(let B=0;B<c[I];B+=1)0===S[I][B].byteLength&&(S[I][B]=new Float32Array(128));try{const I=w.map((j,M)=>0===x.activeInputs[M].size?[]:j),B=d(O/s.sampleRate,s.sampleRate,()=>A.process(I,S,F));if(null!==y)for(let j=0,M=0;j<o.numberOfOutputs;j+=1){for(let P=0;P<c[j];P+=1)rr(y,S[j],P,M+P,O);M+=c[j]}if(!B)break}catch(I){t.dispatchEvent(new ErrorEvent("processorerror",{colno:I.colno,filename:I.filename,lineno:I.lineno,message:I.message}));break}}return y});return function(e,s,o,c,l,d,f){return i.apply(this,arguments)}}(),pl={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},nf={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},_l={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},rf={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},of={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Za=i=>{const{port1:t,port2:e}=new MessageChannel;return new Promise(s=>{const o=()=>{e.onmessage=null,t.close(),e.close(),s()};e.onmessage=()=>o();try{t.postMessage(i,[i])}catch{}finally{o()}})},Al={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},or=(i,t,e)=>{const s=t[e];if(void 0===s)throw i();return s},df={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},vf={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},ye=()=>new DOMException("","InvalidStateError"),ar=()=>new DOMException("","InvalidAccessError"),Ml={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},yn=(i,t,e,s,o,c,l,d,f,p,g)=>{const y=p.length;let x=d;for(let A=0;A<y;A+=1){let w=e[0]*p[A];for(let S=1;S<o;S+=1){const F=x-S&f-1;w+=e[S]*c[F],w-=i[S]*l[F]}for(let S=o;S<s;S+=1)w+=e[S]*c[x-S&f-1];for(let S=o;S<t;S+=1)w-=i[S]*l[x-S&f-1];c[x]=p[A],l[x]=w,x=x+1&f-1,g[A]=w}return x},ie={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},Xs=i=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const e=i.decodeAudioData(t.buffer,()=>{});return void 0!==e&&(e.catch(()=>{}),!0)}catch{}return!1},Wt=(i,t,e)=>{const s=t[e];void 0!==s&&s!==i[e]&&(i[e]=s)},we=(i,t)=>{Wt(i,t,"channelCount"),Wt(i,t,"channelCountMode"),Wt(i,t,"channelInterpretation")},Ka=i=>"function"==typeof i.getFloatTimeDomainData,ce=(i,t,e)=>{const s=t[e];void 0!==s&&s!==i[e].value&&(i[e].value=s)},ur=i=>{var t;i.start=(t=i.start,(e=0,s=0,o)=>{if("number"==typeof o&&o<0||s<0||e<0)throw new RangeError("The parameters can't be negative.");t.call(i,e,s,o)})},lr=i=>{var t;i.stop=(t=i.stop,(e=0)=>{if(e<0)throw new RangeError("The parameter can't be negative.");t.call(i,e)})},sc=(i,t)=>null===i?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(i*t))))),Rf=function(){var i=at(function*(t,e){const s=yield(i=>new Promise((t,e)=>{const{port1:s,port2:o}=new MessageChannel;s.onmessage=({data:c})=>{s.close(),o.close(),t(c)},s.onmessageerror=({data:c})=>{s.close(),o.close(),e(c)},o.postMessage(i)}))(e);return new t(s)});return function(e,s){return i.apply(this,arguments)}}(),Gl=(i,t)=>{const e=i.createBiquadFilter();return we(e,t),ce(e,t,"Q"),ce(e,t,"detune"),ce(e,t,"frequency"),ce(e,t,"gain"),Wt(e,t,"type"),e},dr=(i,t)=>{const e=i.createChannelSplitter(t.numberOfOutputs);return we(e,t),(i=>{const t=i.numberOfOutputs;Object.defineProperty(i,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw ye()}}),Object.defineProperty(i,"channelCountMode",{get:()=>"explicit",set:e=>{if("explicit"!==e)throw ye()}}),Object.defineProperty(i,"channelInterpretation",{get:()=>"discrete",set:e=>{if("discrete"!==e)throw ye()}})})(e),e},Js=(i,t)=>(i.connect=t.connect.bind(t),i.disconnect=t.disconnect.bind(t),i),Wl=(i,t)=>{const e=i.createDelay(t.maxDelayTime);return we(e,t),ce(e,t,"delayTime"),e},on=(i,t)=>{const e=i.createGain();return we(e,t),ce(e,t,"gain"),e};function Hn(i,t){const e=t[0]*t[0]+t[1]*t[1];return[(i[0]*t[0]+i[1]*t[1])/e,(i[1]*t[0]-i[0]*t[1])/e]}function Ul(i,t){return[i[0]*t[0]-i[1]*t[1],i[0]*t[1]+i[1]*t[0]]}function jl(i,t){let e=[0,0];for(let s=i.length-1;s>=0;s-=1)e=Ul(e,t),e[0]+=i[s];return e}const Rt=(i,t,e,s)=>i.createScriptProcessor(t,e,s),$t=()=>new DOMException("","NotSupportedError"),go={numberOfChannels:1},Ti={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Ut={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},yo={disableNormalization:!1},Zl={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},pr=()=>new DOMException("","UnknownError"),Qf={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Xl=(i,t,e)=>void 0===i.copyFromChannel?i.getChannelData(e)[0]:(i.copyFromChannel(t,e),t[0]),Jl=i=>{if(null===i)return!1;const t=i.length;return t%2!=0?0!==i[Math.floor(t/2)]:i[t/2-1]+i[t/2]!==0},ue=(i,t,e,s)=>{let o=i;for(;!o.hasOwnProperty(t);)o=Object.getPrototypeOf(o);const{get:c,set:l}=Object.getOwnPropertyDescriptor(o,t);Object.defineProperty(i,t,{get:e(c),set:s(l)})},ac=(i,t,e)=>{try{i.setValueAtTime(t,e)}catch(s){if(9!==s.code)throw s;ac(i,t,e+1e-7)}},mr=i=>{const t=i.createOscillator();try{t.start(-1)}catch(e){return e instanceof RangeError}return!1},ti=i=>{const t=i.createBuffer(1,1,44100),e=i.createBufferSource();e.buffer=t,e.start(),e.stop();try{return e.stop(),!0}catch{return!1}},ei=i=>{const t=i.createOscillator();try{t.stop(-1)}catch(e){return e instanceof RangeError}return!1},ni=(i,t)=>{const e=t.createGain();i.connect(e);const s=(o=i.disconnect,()=>{o.call(i,e),i.removeEventListener("ended",s)});var o;i.addEventListener("ended",s),Js(i,e),i.stop=(o=>{let c=!1;return(l=0)=>{if(c)try{o.call(i,l)}catch{e.gain.setValueAtTime(0,l)}else o.call(i,l),c=!0}})(i.stop)},Oi=(i,t)=>e=>{const s={value:i};return Object.defineProperties(e,{currentTarget:s,target:s}),"function"==typeof t?t.call(i,e):t.handleEvent.call(i,e)},np=(i=Ys,(t,e,[s,o,c],l)=>{i(t[o],[e,s,c],d=>d[0]===e&&d[1]===s,l)}),sp=(i=>(t,e,[s,o,c],l)=>{const d=t.get(s);void 0===d?t.set(s,new Set([[o,e,c]])):i(d,[o,e,c],f=>f[0]===o&&f[1]===e,l)})(Ys),ip=(i=>(t,e,s,o)=>i(t[o],c=>c[0]===e&&c[1]===s))(qt),Kl=new WeakMap,To=(i=>t=>{var e;return null!==(e=i.get(t))&&void 0!==e?e:0})(Kl),Ie=((i,t)=>(e,s)=>{const o=t.get(e);if(void 0!==o)return o;const c=i.get(e);if(void 0!==c)return c;try{const l=s();return l instanceof Promise?(i.set(e,l),l.catch(()=>!1).then(d=>(i.delete(e),t.set(e,d),d))):(t.set(e,l),l)}catch{return t.set(e,!1),!1}})(new Map,new WeakMap),Nn=typeof window>"u"?null:window,_=((i,t)=>(e,s)=>{const o=e.createAnalyser();if(we(o,s),!(s.maxDecibels>s.minDecibels))throw t();return Wt(o,s,"fftSize"),Wt(o,s,"maxDecibels"),Wt(o,s,"minDecibels"),Wt(o,s,"smoothingTimeConstant"),i(Ka,()=>Ka(o))||(i=>{i.getFloatTimeDomainData=t=>{const e=new Uint8Array(t.length);i.getByteTimeDomainData(e);const s=Math.max(e.length,i.fftSize);for(let o=0;o<s;o+=1)t[o]=.0078125*(e[o]-128);return t}})(o),o})(Ie,De),ks=(i=>t=>{const e=i(t);if(null===e.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return e.renderer})(be),ve=((i,t,e)=>function(){var s=at(function*(o,c,l){const d=i(o);yield Promise.all(d.activeInputs.map((f,p)=>Array.from(f).map(function(){var g=at(function*([y,x]){const w=yield t(y).render(y,c),S=o.context.destination;!e(y)&&(o!==S||!e(o))&&w.connect(l,x,p)});return function(y){return g.apply(this,arguments)}}())).reduce((f,p)=>[...f,...p],[]))});return function(o,c,l){return s.apply(this,arguments)}}())(be,ks,$s),Fn=((i,t,e)=>()=>{const s=new WeakMap,o=function(){var c=at(function*(l,d){let f=t(l);return Xt(f,d)||(f=i(d,{channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,fftSize:f.fftSize,maxDecibels:f.maxDecibels,minDecibels:f.minDecibels,smoothingTimeConstant:f.smoothingTimeConstant})),s.set(d,f),yield e(l,d,f),f});return function(d,f){return c.apply(this,arguments)}}();return{render(c,l){const d=s.get(l);return void 0!==d?Promise.resolve(d):o(c,l)}}})(_,ee,ve),nt=(i=>t=>{const e=i.get(t);if(void 0===e)throw ye();return e})(gs),ke=(i=>null===i?null:i.hasOwnProperty("OfflineAudioContext")?i.OfflineAudioContext:i.hasOwnProperty("webkitOfflineAudioContext")?i.webkitOfflineAudioContext:null)(Nn),Zt=(i=>t=>null!==i&&t instanceof i)(ke),th=new WeakMap,Ns=(i=>class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(e,s,o){if(null!==s){let c=this._listeners.get(s);void 0===c&&(c=i(this,s),"function"==typeof s&&this._listeners.set(s,c)),this._nativeEventTarget.addEventListener(e,c,o)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,s,o){const c=null===s?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(e,void 0===c?null:c,o)}})(Oi),_s=(i=>null===i?null:i.hasOwnProperty("AudioContext")?i.AudioContext:i.hasOwnProperty("webkitAudioContext")?i.webkitAudioContext:null)(Nn),uc=(i=>t=>null!==i&&t instanceof i)(_s),lc=(i=>t=>null!==i&&"function"==typeof i.AudioNode&&t instanceof i.AudioNode)(Nn),eh=(i=>t=>null!==i&&"function"==typeof i.AudioParam&&t instanceof i.AudioParam)(Nn),Di=(i=>null===i?null:i.hasOwnProperty("AudioWorkletNode")?i.AudioWorkletNode:null)(Nn),jt=((i,t,e,s,o,c,l,d,f,p,g,y,x,A,w,S)=>class extends p{constructor(O,I,B,j){super(B),this._context=O,this._nativeAudioNode=B;const M=g(O);y(M)&&!0!==e(ul,()=>ul(M,S))&&(i=>{const t=new Map;var e;i.connect=(e=i.connect.bind(i),(s,o=0,c=0)=>{const l=ro(s)?e(s,o,c):e(s,o),d=t.get(s);return void 0===d?t.set(s,[{input:c,output:o}]):d.every(f=>f.input!==c||f.output!==o)&&d.push({input:c,output:o}),l}),i.disconnect=(e=>(s,o,c)=>{if(e.apply(i),void 0===s)t.clear();else if("number"==typeof s)for(const[l,d]of t){const f=d.filter(p=>p.output!==s);0===f.length?t.delete(l):t.set(l,f)}else if(t.has(s))if(void 0===o)t.delete(s);else{const l=t.get(s);if(void 0!==l){const d=l.filter(f=>f.output!==o&&(f.input!==c||void 0===c));0===d.length?t.delete(s):t.set(s,d)}}for(const[l,d]of t)d.forEach(f=>{ro(l)?i.connect(l,f.output,f.input):i.connect(l,f.output)})})(i.disconnect)})(B),es.set(this,B),_e.set(this,new Set),"closed"!==O.state&&I&&H(this),i(this,j,B)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(O){this._nativeAudioNode.channelCount=O}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(O){this._nativeAudioNode.channelCountMode=O}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(O){this._nativeAudioNode.channelInterpretation=O}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(O,I=0,B=0){if(I<0||I>=this._nativeAudioNode.numberOfOutputs)throw o();const j=g(this._context),M=w(j);if(x(O)||A(O))throw c();if(bi(O)){const N=ee(O);try{const U=er(this._nativeAudioNode,N,I,B),Q=wi(this);(M||Q)&&this._nativeAudioNode.disconnect(...U),"closed"!==this.context.state&&!Q&&wi(O)&&H(O)}catch(U){throw 12===U.code?c():U}if(t(this,O,I,B,M)){const U=f([this],O);ir(U,s(M))}return O}const P=sr(O);if("playbackRate"===P.name&&1024===P.maxValue)throw l();try{this._nativeAudioNode.connect(P,I),(M||wi(this))&&this._nativeAudioNode.disconnect(P,I)}catch(N){throw 12===N.code?c():N}if(((i,t,e,s)=>{const{activeInputs:o,passiveInputs:c}=is(t),{outputs:l}=be(i),d=ht(i),f=p=>{const g=ee(i),y=sr(t);if(p){const x=cl(c,i,e);il(o,i,x,!1),!s&&!$s(i)&&g.connect(y,e)}else{const x=((i,t,e)=>qt(i,s=>s[0]===t&&s[1]===e))(o,i,e);rl(c,x,!1),!s&&!$s(i)&&g.disconnect(y,e)}};return!!Ys(l,[t,e],p=>p[0]===t&&p[1]===e,!0)&&(d.add(f),se(i)?il(o,i,[e,f],!0):rl(c,[i,e,f],!0),!0)})(this,O,I,M)){const N=f([this],O);ir(N,s(M))}}disconnect(O,I,B){let j;const M=g(this._context),P=w(M);if(void 0===O)j=((i,t)=>{const e=be(i),s=[];for(const o of e.outputs)Zs(o)?Ga(i,t,...o):Wa(i,t,...o),s.push(o[0]);return e.outputs.clear(),s})(this,P);else if("number"==typeof O){if(O<0||O>=this.numberOfOutputs)throw o();j=((i,t,e)=>{const s=be(i),o=[];for(const c of s.outputs)c[1]===e&&(Zs(c)?Ga(i,t,...c):Wa(i,t,...c),o.push(c[0]),s.outputs.delete(c));return o})(this,P,O)}else{if(void 0!==I&&(I<0||I>=this.numberOfOutputs)||bi(O)&&void 0!==B&&(B<0||B>=O.numberOfInputs))throw o();if(j=((i,t,e,s,o)=>{const c=be(i);return Array.from(c.outputs).filter(l=>!(l[0]!==e||void 0!==s&&l[1]!==s||void 0!==o&&l[2]!==o)).map(l=>(Zs(l)?Ga(i,t,...l):Wa(i,t,...l),c.outputs.delete(l),l[0]))})(this,P,O,I,B),0===j.length)throw c()}for(const R of j){const N=f([this],R);ir(N,d)}}})((i=>(t,e,s)=>{const o=[];for(let c=0;c<s.numberOfInputs;c+=1)o.push(new Set);i.set(t,{activeInputs:o,outputs:new Set,passiveInputs:new WeakMap,renderer:e})})(Ee),((i,t,e,s,o,c,l,d,f,p,g,y,x)=>{const A=new WeakMap;return(w,S,F,O,I)=>{const{activeInputs:B,passiveInputs:j}=c(S),{outputs:M}=c(w),P=d(w),R=N=>{const z=f(S),U=f(w);if(N){const Q=K(j,w,F,O);i(B,w,Q,!1),!I&&!y(w)&&e(U,z,F,O),x(S)&&H(S)}else{const Q=s(B,w,F,O);t(j,O,Q,!1),!I&&!y(w)&&o(U,z,F,O);const G=l(S);if(0===G)g(S)&&At(S,B);else{const et=A.get(S);void 0!==et&&clearTimeout(et),A.set(S,setTimeout(()=>{g(S)&&At(S,B)},1e3*G))}}};return!!p(M,[S,F,O],N=>N[0]===S&&N[1]===F&&N[2]===O,!0)&&(P.add(R),g(w)?i(B,w,[F,O,R],!0):t(j,O,[w,F,R],!0),!0)}})(np,sp,er,ip,nr,be,To,ht,ee,Ys,se,$s,wi),Ie,((i,t,e,s,o,c)=>l=>(d,f)=>{const p=i.get(d);if(void 0===p){if(!l&&c(d)){const g=s(d),{outputs:y}=e(d);for(const x of y)if(Zs(x)){const A=s(x[0]);t(g,A,x[1],x[2])}else{const A=o(x[0]);g.disconnect(A,x[1])}}i.set(d,f)}else i.set(d,p+f)})(Wn,nr,be,ee,sr,se),De,ar,$t,((i,t,e,s,o,c,l,d)=>(f,p)=>{const g=t.get(f);if(void 0===g)throw new Error("Missing the expected cycle count.");const y=c(f.context),x=d(y);if(g===p){if(t.delete(f),!x&&l(f)){const A=s(f),{outputs:w}=e(f);for(const S of w)if(Zs(S)){const F=s(S[0]);i(A,F,S[1],S[2])}else{const F=o(S[0]);A.connect(F,S[1])}}}else t.set(f,g-p)})(er,Wn,be,ee,sr,nt,se,Zt),((i,t,e)=>function s(o,c){const l=bi(c)?c:e(i,c);if((i=>"delayTime"in i)(l))return[];if(o[0]===l)return[o];if(o.includes(l))return[];const{outputs:d}=t(l);return Array.from(d).map(f=>s([...o,l],f[0])).reduce((f,p)=>f.concat(p),[])})(th,be,rn),Ns,nt,uc,lc,eh,Zt,Di),rp=((i,t,e,s,o,c)=>class extends i{constructor(d,f){const p=o(d),g={...Ss,...f},y=s(p,g);super(d,!1,y,c(p)?t():null),this._nativeAnalyserNode=y}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(d){this._nativeAnalyserNode.fftSize=d}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(d){const f=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=d,!(d>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=f,e()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(d){const f=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=d,!(this._nativeAnalyserNode.maxDecibels>d))throw this._nativeAnalyserNode.minDecibels=f,e()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(d){this._nativeAnalyserNode.smoothingTimeConstant=d}getByteFrequencyData(d){this._nativeAnalyserNode.getByteFrequencyData(d)}getByteTimeDomainData(d){this._nativeAnalyserNode.getByteTimeDomainData(d)}getFloatFrequencyData(d){this._nativeAnalyserNode.getFloatFrequencyData(d)}getFloatTimeDomainData(d){this._nativeAnalyserNode.getFloatTimeDomainData(d)}})(jt,Fn,De,_,nt,Zt),hc=new WeakSet,nh=(i=>null===i?null:i.hasOwnProperty("AudioBuffer")?i.AudioBuffer:null)(Nn),sh=(i=>t=>(i[0]=t,i[0]))(new Uint32Array(1)),dc=((i,t)=>e=>{e.copyFromChannel=(s,o,c=0)=>{const l=i(c),d=i(o);if(d>=e.numberOfChannels)throw t();const f=e.length,p=e.getChannelData(d),g=s.length;for(let y=l<0?-l:0;y+l<f&&y<g;y+=1)s[y]=p[y+l]},e.copyToChannel=(s,o,c=0)=>{const l=i(c),d=i(o);if(d>=e.numberOfChannels)throw t();const f=e.length,p=e.getChannelData(d),g=s.length;for(let y=l<0?-l:0;y+l<f&&y<g;y+=1)p[y+l]=s[y]}})(sh,De),Zn=(i=>t=>{var e;t.copyFromChannel=(e=t.copyFromChannel,(s,o,c=0)=>{const l=i(c),d=i(o);if(l<t.length)return e.call(t,s,d,l)}),t.copyToChannel=(e=>(s,o,c=0)=>{const l=i(c),d=i(o);if(l<t.length)return e.call(t,s,d,l)})(t.copyToChannel)})(sh),op=((i,t,e,s,o,c,l,d)=>{let f=null;return class Mm{constructor(g){if(null===o)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:y,numberOfChannels:x,sampleRate:A}={...$i,...g};null===f&&(f=new o(1,1,44100));const w=null!==s&&t(c,c)?new s({length:y,numberOfChannels:x,sampleRate:A}):f.createBuffer(x,y,A);if(0===w.numberOfChannels)throw e();return"function"!=typeof w.copyFromChannel?(l(w),_n(w)):t(ms,()=>ms(w))||d(w),i.add(w),w}static[Symbol.hasInstance](g){return null!==g&&"object"==typeof g&&Object.getPrototypeOf(g)===Mm.prototype||i.has(g)}}})(hc,Ie,$t,nh,ke,(i=>()=>{if(null===i)return!1;try{new i({length:1,sampleRate:44100})}catch{return!1}return!0})(nh),dc,Zn),Oo=(i=>(t,e)=>{const s=i(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(s).connect(t.destination);const o=()=>{e.removeEventListener("ended",o),e.disconnect(s),s.disconnect()};e.addEventListener("ended",o)})(on),ih=((i,t,e)=>function(){var s=at(function*(o,c,l){const d=t(o);yield Promise.all(Array.from(d.activeInputs).map(function(){var f=at(function*([p,g]){const x=yield i(p).render(p,c);e(p)||x.connect(l,g)});return function(p){return f.apply(this,arguments)}}()))});return function(o,c,l){return s.apply(this,arguments)}}())(ks,is,$s),rs=(i=>(t,e,s)=>i(e,t,s))(ih),Mi=((i,t,e,s,o,c,l,d,f,p,g)=>(y,x)=>{const A=y.createBufferSource();return we(A,x),ce(A,x,"playbackRate"),Wt(A,x,"buffer"),Wt(A,x,"loop"),Wt(A,x,"loopEnd"),Wt(A,x,"loopStart"),t(e,()=>e(y))||(i=>{i.start=(t=>{let e=!1;return(s=0,o=0,c)=>{if(e)throw ye();t.call(i,s,o,c),e=!0}})(i.start)})(A),t(s,()=>s(y))||(i=>{var t;i.start=(t=i.start,(e=0,s=0,o)=>{const c=i.buffer,l=null===c?s:Math.min(c.duration,s);null!==c&&l>c.duration-.5/i.context.sampleRate?t.call(i,e,0,0):t.call(i,e,l,o)})})(A),t(o,()=>o(y))||p(A,y),t(c,()=>c(y))||ur(A),t(l,()=>l(y))||g(A,y),t(d,()=>d(y))||lr(A),i(y,A),A})(Oo,Ie,i=>{const t=i.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},i=>{const t=i.createBufferSource(),e=i.createBuffer(1,1,44100);t.buffer=e;try{t.start(0,1)}catch{return!1}return!0},i=>{const t=i.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},mr,ti,ei,0,(i=>(t,e)=>{const s=e.createBuffer(1,1,44100);null===t.buffer&&(t.buffer=s),i(t,"buffer",o=>()=>{const c=o.call(t);return c===s?null:c},o=>c=>o.call(t,null===c?s:c))})(ue),ni),je=((i,t)=>(e,s,o)=>(i(s).replay(o),t(s,e,o)))((i=>t=>{const e=i(t);if(null===e.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return e.renderer})(is),ih),ap=((i,t,e,s,o)=>()=>{const c=new WeakMap;let l=null,d=null;const f=function(){var p=at(function*(g,y){let x=e(g);const A=Xt(x,y);return A||(x=t(y,{buffer:x.buffer,channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation,loop:x.loop,loopEnd:x.loopEnd,loopStart:x.loopStart,playbackRate:x.playbackRate.value}),null!==l&&x.start(...l),null!==d&&x.stop(d)),c.set(y,x),A?yield i(y,g.playbackRate,x.playbackRate):yield s(y,g.playbackRate,x.playbackRate),yield o(g,y,x),x});return function(y,x){return p.apply(this,arguments)}}();return{set start(p){l=p},set stop(p){d=p},render(p,g){const y=c.get(g);return void 0!==y?Promise.resolve(y):f(p,g)}}})(rs,Mi,ee,je,ve),Yn=((i,t,e,s,o,c,l,d,f,p,g,y,x)=>(A,w,S,F=null,O=null)=>{const I=S.value,B=new Oe.AutomationEventList(I),j=w?(i=>({replay(t){for(const e of i)if("exponentialRampToValue"===e.type){const{endTime:s,value:o}=e;t.exponentialRampToValueAtTime(o,s)}else if("linearRampToValue"===e.type){const{endTime:s,value:o}=e;t.linearRampToValueAtTime(o,s)}else if("setTarget"===e.type){const{startTime:s,target:o,timeConstant:c}=e;t.setTargetAtTime(o,s,c)}else if("setValue"===e.type){const{startTime:s,value:o}=e;t.setValueAtTime(o,s)}else{if("setValueCurve"!==e.type)throw new Error("Can't apply an unknown automation.");{const{duration:s,startTime:o,values:c}=e;t.setValueCurveAtTime(c,o,s)}}}}))(B):null,M={get defaultValue(){return I},get maxValue(){return null===F?S.maxValue:F},get minValue(){return null===O?S.minValue:O},get value(){return S.value},set value(P){S.value=P,M.setValueAtTime(P,A.context.currentTime)},cancelAndHoldAtTime(P){if("function"==typeof S.cancelAndHoldAtTime)null===j&&B.flush(A.context.currentTime),B.add(o(P)),S.cancelAndHoldAtTime(P);else{const R=Array.from(B).pop();null===j&&B.flush(A.context.currentTime),B.add(o(P));const N=Array.from(B).pop();S.cancelScheduledValues(P),R!==N&&void 0!==N&&("exponentialRampToValue"===N.type?S.exponentialRampToValueAtTime(N.value,N.endTime):"linearRampToValue"===N.type?S.linearRampToValueAtTime(N.value,N.endTime):"setValue"===N.type?S.setValueAtTime(N.value,N.startTime):"setValueCurve"===N.type&&S.setValueCurveAtTime(N.values,N.startTime,N.duration))}return M},cancelScheduledValues:P=>(null===j&&B.flush(A.context.currentTime),B.add(c(P)),S.cancelScheduledValues(P),M),exponentialRampToValueAtTime(P,R){if(0===P)throw new RangeError;if(!Number.isFinite(R)||R<0)throw new RangeError;const N=A.context.currentTime;return null===j&&B.flush(N),0===Array.from(B).length&&(B.add(p(I,N)),S.setValueAtTime(I,N)),B.add(l(P,R)),S.exponentialRampToValueAtTime(P,R),M},linearRampToValueAtTime(P,R){const N=A.context.currentTime;return null===j&&B.flush(N),0===Array.from(B).length&&(B.add(p(I,N)),S.setValueAtTime(I,N)),B.add(d(P,R)),S.linearRampToValueAtTime(P,R),M},setTargetAtTime:(P,R,N)=>(null===j&&B.flush(A.context.currentTime),B.add(f(P,R,N)),S.setTargetAtTime(P,R,N),M),setValueAtTime:(P,R)=>(null===j&&B.flush(A.context.currentTime),B.add(p(P,R)),S.setValueAtTime(P,R),M),setValueCurveAtTime(P,R,N){const z=P instanceof Float32Array?P:new Float32Array(P);if(null!==y&&"webkitAudioContext"===y.name){const U=R+N,Q=A.context.sampleRate,G=Math.ceil(R*Q),et=Math.floor(U*Q),ot=et-G,rt=new Float32Array(ot);for(let lt=0;lt<ot;lt+=1){const xt=(z.length-1)/N*((G+lt)/Q-R),yt=Math.floor(xt),Dt=Math.ceil(xt);rt[lt]=yt===Dt?z[yt]:(1-(xt-yt))*z[yt]+(1-(Dt-xt))*z[Dt]}null===j&&B.flush(A.context.currentTime),B.add(g(rt,R,N)),S.setValueCurveAtTime(rt,R,N);const it=et/Q;it<U&&x(M,rt[rt.length-1],it),x(M,z[z.length-1],U)}else null===j&&B.flush(A.context.currentTime),B.add(g(z,R,N)),S.setValueCurveAtTime(z,R,N);return M}};return e.set(M,S),t.set(M,A),i(M,j),M})((i=>(t,e)=>{i.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})})(We),th,mn,0,Oe.createCancelAndHoldAutomationEvent,Oe.createCancelScheduledValuesAutomationEvent,Oe.createExponentialRampToValueAutomationEvent,Oe.createLinearRampToValueAutomationEvent,Oe.createSetTargetAutomationEvent,Oe.createSetValueAutomationEvent,Oe.createSetValueCurveAutomationEvent,_s,ac),Qn=((i,t,e,s,o,c,l,d)=>class extends i{constructor(p,g){const y=c(p),x={...sl,...g},A=o(y,x),w=l(y),S=w?t():null;super(p,!1,A,S),this._audioBufferSourceNodeRenderer=S,this._isBufferNullified=!1,this._isBufferSet=null!==x.buffer,this._nativeAudioBufferSourceNode=A,this._onended=null,this._playbackRate=e(this,w,A.playbackRate,Me,ae)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(p){if(this._nativeAudioBufferSourceNode.buffer=p,null!==p){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(p){this._nativeAudioBufferSourceNode.loop=p}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(p){this._nativeAudioBufferSourceNode.loopEnd=p}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(p){this._nativeAudioBufferSourceNode.loopStart=p}get onended(){return this._onended}set onended(p){const g="function"==typeof p?d(this,p):null;this._nativeAudioBufferSourceNode.onended=g;const y=this._nativeAudioBufferSourceNode.onended;this._onended=null!==y&&y===g?p:y}get playbackRate(){return this._playbackRate}start(p=0,g=0,y){if(this._nativeAudioBufferSourceNode.start(p,g,y),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===y?[p,g]:[p,g,y]),"closed"!==this.context.state){H(this);const x=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",x),se(this)&&ct(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",x)}}stop(p=0){this._nativeAudioBufferSourceNode.stop(p),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=p)}})(jt,ap,Yn,ye,Mi,nt,Zt,Oi),cp=((i,t,e,s,o,c,l,d)=>class extends i{constructor(p,g){const y=c(p),x=l(y),A=o(y,g,x);super(p,!1,A,x?t(d):null),this._isNodeOfNativeOfflineAudioContext=x,this._nativeAudioDestinationNode=A}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(p){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(p>this._nativeAudioDestinationNode.maxChannelCount)throw e();this._nativeAudioDestinationNode.channelCount=p}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(p){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=p}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(jt,i=>{const t=new WeakMap,e=function(){var s=at(function*(o,c){const l=c.destination;return t.set(c,l),yield i(o,c,l),l});return function(c,l){return s.apply(this,arguments)}}();return{render(s,o){const c=t.get(o);return void 0!==c?Promise.resolve(c):e(s,o)}}},De,ye,((i,t)=>(e,s,o)=>{const c=e.destination;if(c.channelCount!==s)try{c.channelCount=s}catch{}o&&"explicit"!==c.channelCountMode&&(c.channelCountMode="explicit"),0===c.maxChannelCount&&Object.defineProperty(c,"maxChannelCount",{value:s});const l=i(e,{channelCount:s,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:1});return t(l,"channelCount",d=>()=>d.call(l),d=>f=>{d.call(l,f);try{c.channelCount=f}catch(p){if(f>c.maxChannelCount)throw p}}),t(l,"channelCountMode",d=>()=>d.call(l),d=>f=>{d.call(l,f),c.channelCountMode=f}),t(l,"channelInterpretation",d=>()=>d.call(l),d=>f=>{d.call(l,f),c.channelInterpretation=f}),Object.defineProperty(l,"maxChannelCount",{get:()=>c.maxChannelCount}),l.connect(c),l})(on,ue),nt,Zt,ve),up=((i,t,e,s,o)=>()=>{const c=new WeakMap,l=function(){var d=at(function*(f,p){let g=e(f);const y=Xt(g,p);return y||(g=t(p,{Q:g.Q.value,channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,detune:g.detune.value,frequency:g.frequency.value,gain:g.gain.value,type:g.type})),c.set(p,g),y?(yield i(p,f.Q,g.Q),yield i(p,f.detune,g.detune),yield i(p,f.frequency,g.frequency),yield i(p,f.gain,g.gain)):(yield s(p,f.Q,g.Q),yield s(p,f.detune,g.detune),yield s(p,f.frequency,g.frequency),yield s(p,f.gain,g.gain)),yield o(f,p,g),g});return function(p,g){return d.apply(this,arguments)}}();return{render(d,f){const p=c.get(f);return void 0!==p?Promise.resolve(p):l(d,f)}}})(rs,Gl,ee,je,ve),si=(i=>(t,e)=>i.set(t,e))(Kl),lp=((i,t,e,s,o,c,l,d)=>class extends i{constructor(p,g){const y=c(p),x={...pl,...g},A=o(y,x),w=l(y);super(p,!1,A,w?e():null),this._Q=t(this,w,A.Q,Me,ae),this._detune=t(this,w,A.detune,1200*Math.log2(Me),-1200*Math.log2(Me)),this._frequency=t(this,w,A.frequency,p.sampleRate/2,0),this._gain=t(this,w,A.gain,40*Math.log10(Me),ae),this._nativeBiquadFilterNode=A,d(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(p){this._nativeBiquadFilterNode.type=p}getFrequencyResponse(p,g,y){try{this._nativeBiquadFilterNode.getFrequencyResponse(p,g,y)}catch(x){throw 11===x.code?s():x}if(p.length!==g.length||g.length!==y.length)throw s()}})(jt,Yn,up,ar,Gl,nt,Zt,si),Fs=((i,t)=>(e,s,o)=>{const c=new Set;return e.connect=(l=e.connect,(d,f=0,p=0)=>{const g=0===c.size;if(t(d))return l.call(e,d,f,p),i(c,[d,f,p],y=>y[0]===d&&y[1]===f&&y[2]===p,!0),g&&s(),d;l.call(e,d,f),i(c,[d,f],y=>y[0]===d&&y[1]===f,!0),g&&s()}),e.disconnect=(l=>(d,f,p)=>{const g=c.size>0;if(void 0===d)l.apply(e),c.clear();else if("number"==typeof d){l.call(e,d);for(const x of c)x[1]===d&&c.delete(x)}else{t(d)?l.call(e,d,f,p):l.call(e,d,f);for(const x of c)x[0]===d&&(void 0===f||x[1]===f)&&(void 0===p||x[2]===p)&&c.delete(x)}g&&0===c.size&&o()})(e.disconnect),e;var l})(Ys,lc),rh=((i,t)=>(e,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw i()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw i()}});const o=e.createBufferSource();t(s,()=>{const d=s.numberOfInputs;for(let f=0;f<d;f+=1)o.connect(s,0,f)},()=>o.disconnect(s))})(ye,Fs),ys=((i,t)=>(e,s)=>{const o=e.createChannelMerger(s.numberOfInputs);return null!==i&&"webkitAudioContext"===i.name&&t(e,o),we(o,s),o})(_s,rh),hp=((i,t,e)=>()=>{const s=new WeakMap,o=function(){var c=at(function*(l,d){let f=t(l);return Xt(f,d)||(f=i(d,{channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,numberOfInputs:f.numberOfInputs})),s.set(d,f),yield e(l,d,f),f});return function(d,f){return c.apply(this,arguments)}}();return{render(c,l){const d=s.get(l);return void 0!==d?Promise.resolve(d):o(c,l)}}})(ys,ee,ve),dp=((i,t,e,s,o)=>class extends i{constructor(l,d){const f=s(l),p={...nf,...d};super(l,!1,e(f,p),o(f)?t():null)}})(jt,hp,ys,nt,Zt),fc=((i,t,e)=>()=>{const s=new WeakMap,o=function(){var c=at(function*(l,d){let f=t(l);return Xt(f,d)||(f=i(d,{channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,numberOfOutputs:f.numberOfOutputs})),s.set(d,f),yield e(l,d,f),f});return function(d,f){return c.apply(this,arguments)}}();return{render(c,l){const d=s.get(l);return void 0!==d?Promise.resolve(d):o(c,l)}}})(dr,ee,ve),yr=((i,t,e,s,o,c)=>class extends i{constructor(d,f){const p=s(d),g=(i=>({...i,channelCount:i.numberOfOutputs}))({..._l,...f});super(d,!1,e(p,g),o(p)?t():null)}})(jt,fc,dr,nt,Zt),Do=((i,t,e,s)=>(o,{offset:c,...l})=>{const d=o.createBuffer(1,2,44100),f=t(o,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),p=e(o,{...l,gain:c}),g=d.getChannelData(0);g[0]=1,g[1]=1,f.buffer=d,f.loop=!0;const y={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(w){p.channelCount=w},get channelCountMode(){return p.channelCountMode},set channelCountMode(w){p.channelCountMode=w},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(w){p.channelInterpretation=w},get context(){return p.context},get inputs(){return[]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get offset(){return p.gain},get onended(){return f.onended},set onended(w){f.onended=w},addEventListener:(...w)=>f.addEventListener(w[0],w[1],w[2]),dispatchEvent:(...w)=>f.dispatchEvent(w[0]),removeEventListener:(...w)=>f.removeEventListener(w[0],w[1],w[2]),start(w=0){f.start.call(f,w)},stop(w=0){f.stop.call(f,w)}};return i(o,f),s(Js(y,p),()=>f.connect(p),()=>f.disconnect(p))})(Oo,Mi,on,Fs),ki=((i,t,e,s,o)=>(c,l)=>{if(void 0===c.createConstantSource)return e(c,l);const d=c.createConstantSource();return we(d,l),ce(d,l,"offset"),t(s,()=>s(c))||ur(d),t(o,()=>o(c))||lr(d),i(c,d),d})(Oo,Ie,Do,mr,ei),oh=((i,t,e,s,o)=>()=>{const c=new WeakMap;let l=null,d=null;const f=function(){var p=at(function*(g,y){let x=e(g);const A=Xt(x,y);return A||(x=t(y,{channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation,offset:x.offset.value}),null!==l&&x.start(l),null!==d&&x.stop(d)),c.set(y,x),A?yield i(y,g.offset,x.offset):yield s(y,g.offset,x.offset),yield o(g,y,x),x});return function(y,x){return p.apply(this,arguments)}}();return{set start(p){l=p},set stop(p){d=p},render(p,g){const y=c.get(g);return void 0!==y?Promise.resolve(y):f(p,g)}}})(rs,ki,ee,je,ve),fp=((i,t,e,s,o,c,l)=>class extends i{constructor(f,p){const g=o(f),y={...rf,...p},x=s(g,y),A=c(g),w=A?e():null;super(f,!1,x,w),this._constantSourceNodeRenderer=w,this._nativeConstantSourceNode=x,this._offset=t(this,A,x.offset,Me,ae),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(f){const p="function"==typeof f?l(this,f):null;this._nativeConstantSourceNode.onended=p;const g=this._nativeConstantSourceNode.onended;this._onended=null!==g&&g===p?f:g}start(f=0){if(this._nativeConstantSourceNode.start(f),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=f),"closed"!==this.context.state){H(this);const p=()=>{this._nativeConstantSourceNode.removeEventListener("ended",p),se(this)&&ct(this)};this._nativeConstantSourceNode.addEventListener("ended",p)}}stop(f=0){this._nativeConstantSourceNode.stop(f),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=f)}})(jt,Yn,oh,ki,nt,Zt,Oi),os=((i,t)=>(e,s)=>{const o=e.createConvolver();if(we(o,s),s.disableNormalization===o.normalize&&(o.normalize=!s.disableNormalization),Wt(o,s,"buffer"),s.channelCount>2||(t(o,"channelCount",c=>()=>c.call(o),c=>l=>{if(l>2)throw i();return c.call(o,l)}),"max"===s.channelCountMode))throw i();return t(o,"channelCountMode",c=>()=>c.call(o),c=>l=>{if("max"===l)throw i();return c.call(o,l)}),o})($t,ue),pc=((i,t,e)=>()=>{const s=new WeakMap,o=function(){var c=at(function*(l,d){let f=t(l);return Xt(f,d)||(f=i(d,{buffer:f.buffer,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,disableNormalization:!f.normalize})),s.set(d,f),Qs(f)?yield e(l,d,f.inputs[0]):yield e(l,d,f),f});return function(d,f){return c.apply(this,arguments)}}();return{render(c,l){const d=s.get(l);return void 0!==d?Promise.resolve(d):o(c,l)}}})(os,ee,ve),ii=((i,t,e,s,o,c)=>class extends i{constructor(d,f){const p=s(d),g={...of,...f},y=e(p,g);super(d,!1,y,o(p)?t():null),this._isBufferNullified=!1,this._nativeConvolverNode=y,null!==g.buffer&&c(this,g.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(d){if(this._nativeConvolverNode.buffer=d,null===d&&null!==this._nativeConvolverNode.buffer){const f=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=f.createBuffer(1,1,f.sampleRate),this._isBufferNullified=!0,c(this,0)}else this._isBufferNullified=!1,c(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(d){this._nativeConvolverNode.normalize=d}})(jt,pc,os,nt,Zt,si),En=((i,t,e,s,o)=>c=>{const l=new WeakMap,d=function(){var f=at(function*(p,g){let y=e(p);const x=Xt(y,g);return x||(y=t(g,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,delayTime:y.delayTime.value,maxDelayTime:c})),l.set(g,y),x?yield i(g,p.delayTime,y.delayTime):yield s(g,p.delayTime,y.delayTime),yield o(p,g,y),y});return function(g,y){return f.apply(this,arguments)}}();return{render(f,p){const g=l.get(p);return void 0!==g?Promise.resolve(g):d(f,p)}}})(rs,Wl,ee,je,ve),pp=((i,t,e,s,o,c,l)=>class extends i{constructor(f,p){const g=o(f),y={...Al,...p},x=s(g,y),A=c(g);super(f,!1,x,A?e(y.maxDelayTime):null),this._delayTime=t(this,A,x.delayTime),l(this,y.maxDelayTime)}get delayTime(){return this._delayTime}})(jt,Yn,En,Wl,nt,Zt,si),gc=(i=>(t,e)=>{const s=t.createDynamicsCompressor();if(we(s,e),e.channelCount>2||"max"===e.channelCountMode)throw i();return ce(s,e,"attack"),ce(s,e,"knee"),ce(s,e,"ratio"),ce(s,e,"release"),ce(s,e,"threshold"),s})($t),ah=((i,t,e,s,o)=>()=>{const c=new WeakMap,l=function(){var d=at(function*(f,p){let g=e(f);const y=Xt(g,p);return y||(g=t(p,{attack:g.attack.value,channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,knee:g.knee.value,ratio:g.ratio.value,release:g.release.value,threshold:g.threshold.value})),c.set(p,g),y?(yield i(p,f.attack,g.attack),yield i(p,f.knee,g.knee),yield i(p,f.ratio,g.ratio),yield i(p,f.release,g.release),yield i(p,f.threshold,g.threshold)):(yield s(p,f.attack,g.attack),yield s(p,f.knee,g.knee),yield s(p,f.ratio,g.ratio),yield s(p,f.release,g.release),yield s(p,f.threshold,g.threshold)),yield o(f,p,g),g});return function(p,g){return d.apply(this,arguments)}}();return{render(d,f){const p=c.get(f);return void 0!==p?Promise.resolve(p):l(d,f)}}})(rs,gc,ee,je,ve),vr=((i,t,e,s,o,c,l,d)=>class extends i{constructor(p,g){const y=c(p),x={...df,...g},A=s(y,x),w=l(y);super(p,!1,A,w?e():null),this._attack=t(this,w,A.attack),this._knee=t(this,w,A.knee),this._nativeDynamicsCompressorNode=A,this._ratio=t(this,w,A.ratio),this._release=t(this,w,A.release),this._threshold=t(this,w,A.threshold),d(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(p){const g=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=p,p>2)throw this._nativeDynamicsCompressorNode.channelCount=g,o()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(p){const g=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=p,"max"===p)throw this._nativeDynamicsCompressorNode.channelCountMode=g,o()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(jt,Yn,ah,gc,$t,nt,Zt,si),Es=((i,t,e,s,o)=>()=>{const c=new WeakMap,l=function(){var d=at(function*(f,p){let g=e(f);const y=Xt(g,p);return y||(g=t(p,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:g.gain.value})),c.set(p,g),y?yield i(p,f.gain,g.gain):yield s(p,f.gain,g.gain),yield o(f,p,g),g});return function(p,g){return d.apply(this,arguments)}}();return{render(d,f){const p=c.get(f);return void 0!==p?Promise.resolve(p):l(d,f)}}})(rs,on,ee,je,ve),ch=((i,t,e,s,o,c)=>class extends i{constructor(d,f){const p=o(d),g={...vf,...f},y=s(p,g),x=c(p);super(d,!1,y,x?e():null),this._gain=t(this,x,y.gain,Me,ae)}get gain(){return this._gain}})(jt,Yn,Es,on,nt,Zt),gp=((i,t,e,s)=>(o,c,{channelCount:l,channelCountMode:d,channelInterpretation:f,feedback:p,feedforward:g})=>{const y=sc(c,o.sampleRate),x=p instanceof Float64Array?p:new Float64Array(p),A=g instanceof Float64Array?g:new Float64Array(g),w=x.length,S=A.length,F=Math.min(w,S);if(0===w||w>20)throw s();if(0===x[0])throw t();if(0===S||S>20)throw s();if(0===A[0])throw t();if(1!==x[0]){for(let N=0;N<S;N+=1)A[N]/=x[0];for(let N=1;N<w;N+=1)x[N]/=x[0]}const O=e(o,y,l,l);O.channelCount=l,O.channelCountMode=d,O.channelInterpretation=f;const B=[],j=[],M=[];for(let N=0;N<l;N+=1){B.push(0);const z=new Float32Array(32),U=new Float32Array(32);z.fill(0),U.fill(0),j.push(z),M.push(U)}O.onaudioprocess=N=>{const z=N.inputBuffer,U=N.outputBuffer,Q=z.numberOfChannels;for(let G=0;G<Q;G+=1){const et=z.getChannelData(G),ot=U.getChannelData(G);B[G]=yn(x,w,A,S,F,j[G],M[G],B[G],32,et,ot)}};const P=o.sampleRate/2;return Js({get bufferSize(){return y},get channelCount(){return O.channelCount},set channelCount(N){O.channelCount=N},get channelCountMode(){return O.channelCountMode},set channelCountMode(N){O.channelCountMode=N},get channelInterpretation(){return O.channelInterpretation},set channelInterpretation(N){O.channelInterpretation=N},get context(){return O.context},get inputs(){return[O]},get numberOfInputs(){return O.numberOfInputs},get numberOfOutputs(){return O.numberOfOutputs},addEventListener:(...N)=>O.addEventListener(N[0],N[1],N[2]),dispatchEvent:(...N)=>O.dispatchEvent(N[0]),getFrequencyResponse(N,z,U){if(N.length!==z.length||z.length!==U.length)throw i();const Q=N.length;for(let G=0;G<Q;G+=1){const et=-Math.PI*(N[G]/P),ot=[Math.cos(et),Math.sin(et)],lt=Hn(jl(A,ot),jl(x,ot));z[G]=Math.sqrt(lt[0]*lt[0]+lt[1]*lt[1]),U[G]=Math.atan2(lt[1],lt[0])}},removeEventListener:(...N)=>O.removeEventListener(N[0],N[1],N[2])},O)})(ar,ye,Rt,$t),ri=((i,t,e,s)=>o=>i(Xs,()=>Xs(o))?Promise.resolve(i(s,s)).then(c=>{if(!c){const l=e(o,512,0,1);o.oncomplete=()=>{l.onaudioprocess=null,l.disconnect()},l.onaudioprocess=()=>o.currentTime,l.connect(o.destination)}return o.startRendering()}):new Promise(c=>{const l=t(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});o.oncomplete=d=>{l.disconnect(),c(d.renderedBuffer)},l.connect(o.destination),o.startRendering()}))(Ie,on,Rt,((i,t)=>()=>{if(null===t)return Promise.resolve(!1);const e=new t(1,1,44100),s=i(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(o=>{e.oncomplete=()=>{s.disconnect(),o(0!==e.currentTime)},e.startRendering()})})(on,ke)),mp=((i,t,e,s,o)=>(c,l)=>{const d=new WeakMap;let f=null;const p=function(){var g=at(function*(y,x){let A=null,w=t(y);const S=Xt(w,x);if(void 0===x.createIIRFilter?A=i(x,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):S||(w=x.createIIRFilter(l,c)),d.set(x,null===A?w:A),null!==A){if(null===f){if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");const O=new e(y.context.destination.channelCount,y.context.length,x.sampleRate);f=at(function*(){return yield s(y,O,O.destination),((i,t,e,s)=>{const o=e instanceof Float64Array?e:new Float64Array(e),c=s instanceof Float64Array?s:new Float64Array(s),l=o.length,d=c.length,f=Math.min(l,d);if(1!==o[0]){for(let w=0;w<l;w+=1)c[w]/=o[0];for(let w=1;w<d;w+=1)o[w]/=o[0]}const g=new Float32Array(32),y=new Float32Array(32),x=t.createBuffer(i.numberOfChannels,i.length,i.sampleRate),A=i.numberOfChannels;for(let w=0;w<A;w+=1){const S=i.getChannelData(w),F=x.getChannelData(w);g.fill(0),y.fill(0),yn(o,l,c,d,f,g,y,0,32,S,F)}return x})(yield o(O),x,c,l)})()}const F=yield f;return A.buffer=F,A.start(0),A}return yield s(y,x,w),w});return function(x,A){return g.apply(this,arguments)}}();return{render(g,y){const x=d.get(y);return void 0!==x?Promise.resolve(x):p(g,y)}}})(Mi,ee,ke,ve,ri),uh=(i=>(t,e,s)=>{if(void 0===t.createIIRFilter)return i(t,e,s);const o=t.createIIRFilter(s.feedforward,s.feedback);return we(o,s),o})(gp),Pe=((i,t,e,s,o,c)=>class extends i{constructor(d,f){const p=s(d),g=o(p),y={...Ml,...f},x=t(p,g?null:d.baseLatency,y);super(d,!1,x,g?e(y.feedback,y.feedforward):null),(i=>{var t;i.getFrequencyResponse=(t=i.getFrequencyResponse,(e,s,o)=>{if(e.length!==s.length||s.length!==o.length)throw ar();return t.call(i,e,s,o)})})(x),this._nativeIIRFilterNode=x,c(this,1)}getFrequencyResponse(d,f,p){return this._nativeIIRFilterNode.getFrequencyResponse(d,f,p)}})(jt,uh,mp,nt,Zt,si),mc=((i,t,e,s,o,c,l,d)=>(f,p)=>{const g=p.listener,{forwardX:x,forwardY:A,forwardZ:w,positionX:S,positionY:F,positionZ:O,upX:I,upY:B,upZ:j}=void 0===g.forwardX?(()=>{const M=new Float32Array(1),P=t(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),R=l(p);let N=!1,z=[0,0,-1,0,1,0],U=[0,0,0];const Q=()=>{if(N)return;N=!0;const rt=s(p,256,9,0);rt.onaudioprocess=({inputBuffer:it})=>{const lt=[c(it,M,0),c(it,M,1),c(it,M,2),c(it,M,3),c(it,M,4),c(it,M,5)];lt.some((yt,Dt)=>yt!==z[Dt])&&(g.setOrientation(...lt),z=lt);const xt=[c(it,M,6),c(it,M,7),c(it,M,8)];xt.some((yt,Dt)=>yt!==U[Dt])&&(g.setPosition(...xt),U=xt)},P.connect(rt)},G=rt=>it=>{it!==z[rt]&&(z[rt]=it,g.setOrientation(...z))},et=rt=>it=>{it!==U[rt]&&(U[rt]=it,g.setPosition(...U))},ot=(rt,it,lt)=>{const xt=e(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:it});xt.connect(P,0,rt),xt.start(),Object.defineProperty(xt.offset,"defaultValue",{get:()=>it});const yt=i({context:f},R,xt.offset,Me,ae);return d(yt,"value",Dt=>()=>Dt.call(yt),Dt=>kt=>{try{Dt.call(yt,kt)}catch(oe){if(9!==oe.code)throw oe}Q(),R&&lt(kt)}),yt.cancelAndHoldAtTime=(Dt=yt.cancelAndHoldAtTime,R?()=>{throw o()}:(...kt)=>{const oe=Dt.apply(yt,kt);return Q(),oe}),yt.cancelScheduledValues=(Dt=>R?()=>{throw o()}:(...kt)=>{const oe=Dt.apply(yt,kt);return Q(),oe})(yt.cancelScheduledValues),yt.exponentialRampToValueAtTime=(Dt=>R?()=>{throw o()}:(...kt)=>{const oe=Dt.apply(yt,kt);return Q(),oe})(yt.exponentialRampToValueAtTime),yt.linearRampToValueAtTime=(Dt=>R?()=>{throw o()}:(...kt)=>{const oe=Dt.apply(yt,kt);return Q(),oe})(yt.linearRampToValueAtTime),yt.setTargetAtTime=(Dt=>R?()=>{throw o()}:(...kt)=>{const oe=Dt.apply(yt,kt);return Q(),oe})(yt.setTargetAtTime),yt.setValueAtTime=(Dt=>R?()=>{throw o()}:(...kt)=>{const oe=Dt.apply(yt,kt);return Q(),oe})(yt.setValueAtTime),yt.setValueCurveAtTime=(Dt=>R?()=>{throw o()}:(...kt)=>{const oe=Dt.apply(yt,kt);return Q(),oe})(yt.setValueCurveAtTime),yt;var Dt};return{forwardX:ot(0,0,G(0)),forwardY:ot(1,0,G(1)),forwardZ:ot(2,-1,G(2)),positionX:ot(6,0,et(0)),positionY:ot(7,0,et(1)),positionZ:ot(8,0,et(2)),upX:ot(3,0,G(3)),upY:ot(4,1,G(4)),upZ:ot(5,0,G(5))}})():g;return{get forwardX(){return x},get forwardY(){return A},get forwardZ(){return w},get positionX(){return S},get positionY(){return F},get positionZ(){return O},get upX(){return I},get upY(){return B},get upZ(){return j}}})(Yn,ys,ki,Rt,$t,Xl,Zt,ue),_c=new WeakMap,Rn=((i,t,e,s,o,c)=>class extends e{constructor(d,f){super(d),this._nativeContext=d,gs.set(this,d),s(d)&&o.set(d,new Set),this._destination=new i(this,f),this._listener=t(this,d),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(d){const f="function"==typeof d?c(this,d):null;this._nativeContext.onstatechange=f;const p=this._nativeContext.onstatechange;this._onstatechange=null!==p&&p===f?d:p}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(cp,mc,Ns,Zt,_c,Oi),Mo=((i,t,e,s,o,c)=>(l,d)=>{const f=l.createOscillator();return we(f,d),ce(f,d,"detune"),ce(f,d,"frequency"),void 0!==d.periodicWave?f.setPeriodicWave(d.periodicWave):Wt(f,d,"type"),t(e,()=>e(l))||ur(f),t(s,()=>s(l))||c(f,l),t(o,()=>o(l))||lr(f),i(l,f),f})(Oo,Ie,mr,ti,ei,ni),ko=((i,t,e,s,o)=>()=>{const c=new WeakMap;let l=null,d=null,f=null;const p=function(){var g=at(function*(y,x){let A=e(y);const w=Xt(A,x);return w||(A=t(x,{channelCount:A.channelCount,channelCountMode:A.channelCountMode,channelInterpretation:A.channelInterpretation,detune:A.detune.value,frequency:A.frequency.value,periodicWave:null===l?void 0:l,type:A.type}),null!==d&&A.start(d),null!==f&&A.stop(f)),c.set(x,A),w?(yield i(x,y.detune,A.detune),yield i(x,y.frequency,A.frequency)):(yield s(x,y.detune,A.detune),yield s(x,y.frequency,A.frequency)),yield o(y,x,A),A});return function(x,A){return g.apply(this,arguments)}}();return{set periodicWave(g){l=g},set start(g){d=g},set stop(g){f=g},render(g,y){const x=c.get(y);return void 0!==x?Promise.resolve(x):p(g,y)}}})(rs,Mo,ee,je,ve),oi=((i,t,e,s,o,c,l)=>class extends i{constructor(f,p){const g=o(f),y={...Ti,...p},x=e(g,y),A=c(g),w=A?s():null,S=f.sampleRate/2;super(f,!1,x,w),this._detune=t(this,A,x.detune,153600,-153600),this._frequency=t(this,A,x.frequency,S,-S),this._nativeOscillatorNode=x,this._onended=null,this._oscillatorNodeRenderer=w,null!==this._oscillatorNodeRenderer&&void 0!==y.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=y.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(f){const p="function"==typeof f?l(this,f):null;this._nativeOscillatorNode.onended=p;const g=this._nativeOscillatorNode.onended;this._onended=null!==g&&g===p?f:g}get type(){return this._nativeOscillatorNode.type}set type(f){this._nativeOscillatorNode.type=f,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(f){this._nativeOscillatorNode.setPeriodicWave(f),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=f)}start(f=0){if(this._nativeOscillatorNode.start(f),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=f),"closed"!==this.context.state){H(this);const p=()=>{this._nativeOscillatorNode.removeEventListener("ended",p),se(this)&&ct(this)};this._nativeOscillatorNode.addEventListener("ended",p)}}stop(f=0){this._nativeOscillatorNode.stop(f),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=f)}})(jt,Yn,Mo,ko,nt,Zt,Oi),yc=(i=>(t,e)=>{const s=i(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),o=t.createBuffer(1,2,44100);return s.buffer=o,s.loop=!0,s.connect(e),s.start(),()=>{s.stop(),s.disconnect(e)}})(Mi),Je=((i,t,e,s,o)=>(c,{curve:l,oversample:d,...f})=>{const p=c.createWaveShaper(),g=c.createWaveShaper();we(p,f),we(g,f);const y=e(c,{...f,gain:1}),x=e(c,{...f,gain:-1}),A=e(c,{...f,gain:1}),w=e(c,{...f,gain:-1});let S=null,F=!1,O=null;const I={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(M){y.channelCount=M,x.channelCount=M,p.channelCount=M,A.channelCount=M,g.channelCount=M,w.channelCount=M},get channelCountMode(){return p.channelCountMode},set channelCountMode(M){y.channelCountMode=M,x.channelCountMode=M,p.channelCountMode=M,A.channelCountMode=M,g.channelCountMode=M,w.channelCountMode=M},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(M){y.channelInterpretation=M,x.channelInterpretation=M,p.channelInterpretation=M,A.channelInterpretation=M,g.channelInterpretation=M,w.channelInterpretation=M},get context(){return p.context},get curve(){return O},set curve(M){if(null!==M&&M.length<2)throw t();if(null===M)p.curve=M,g.curve=M;else{const P=M.length,R=new Float32Array(P+2-P%2),N=new Float32Array(P+2-P%2);R[0]=M[0],N[0]=-M[P-1];const z=Math.ceil((P+1)/2),U=(P+1)/2-1;for(let Q=1;Q<z;Q+=1){const G=Q/z*U,et=Math.floor(G),ot=Math.ceil(G);R[Q]=et===ot?M[et]:(1-(G-et))*M[et]+(1-(ot-G))*M[ot],N[Q]=et===ot?-M[P-1-et]:-(1-(G-et))*M[P-1-et]-(1-(ot-G))*M[P-1-ot]}R[z]=P%2==1?M[z-1]:(M[z-2]+M[z-1])/2,p.curve=R,g.curve=N}O=M,F&&(s(O)&&null===S?S=i(c,y):null!==S&&(S(),S=null))},get inputs(){return[y]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get oversample(){return p.oversample},set oversample(M){p.oversample=M,g.oversample=M},addEventListener:(...M)=>y.addEventListener(M[0],M[1],M[2]),dispatchEvent:(...M)=>y.dispatchEvent(M[0]),removeEventListener:(...M)=>y.removeEventListener(M[0],M[1],M[2])};return null!==l&&(I.curve=l instanceof Float32Array?l:new Float32Array(l)),d!==I.oversample&&(I.oversample=d),o(Js(I,A),()=>{y.connect(p).connect(A),y.connect(x).connect(g).connect(w).connect(A),F=!0,s(O)&&(S=i(c,y))},()=>{y.disconnect(p),p.disconnect(A),y.disconnect(x),x.disconnect(g),g.disconnect(w),w.disconnect(A),F=!1,null!==S&&(S(),S=null)})})(yc,ye,on,Jl,Fs),Ni=((i,t,e,s,o,c,l)=>(d,f)=>{const p=d.createWaveShaper();if(null!==c&&"webkitAudioContext"===c.name&&void 0===d.createGain().gain.automationRate)return e(d,f);we(p,f);const g=null===f.curve||f.curve instanceof Float32Array?f.curve:new Float32Array(f.curve);if(null!==g&&g.length<2)throw t();Wt(p,{curve:g},"curve"),Wt(p,f,"oversample");let y=null,x=!1;return l(p,"curve",S=>()=>S.call(p),S=>F=>(S.call(p,F),x&&(s(F)&&null===y?y=i(d,p):!s(F)&&null!==y&&(y(),y=null)),F)),o(p,()=>{x=!0,s(p.curve)&&(y=i(d,p))},()=>{x=!1,null!==y&&(y(),y=null)})})(yc,ye,Je,Jl,Fs,_s,ue),_p=((i,t,e,s,o,c,l,d,f,p)=>(g,{coneInnerAngle:y,coneOuterAngle:x,coneOuterGain:A,distanceModel:w,maxDistance:S,orientationX:F,orientationY:O,orientationZ:I,panningModel:B,positionX:j,positionY:M,positionZ:P,refDistance:R,rolloffFactor:N,...z})=>{const U=g.createPanner();if(z.channelCount>2||"max"===z.channelCountMode)throw l();we(U,z);const Q={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},G=e(g,{...Q,channelInterpretation:"speakers",numberOfInputs:6}),et=s(g,{...z,gain:1}),ot=s(g,{...Q,gain:1}),rt=s(g,{...Q,gain:0}),it=s(g,{...Q,gain:0}),lt=s(g,{...Q,gain:0}),xt=s(g,{...Q,gain:0}),yt=s(g,{...Q,gain:0}),Dt=o(g,256,6,1),kt=c(g,{...Q,curve:new Float32Array([1,1]),oversample:"none"});let oe=[F,O,I],Le=[j,M,P];const Dn=new Float32Array(1);Dt.onaudioprocess=({inputBuffer:X})=>{const Be=[f(X,Dn,0),f(X,Dn,1),f(X,Dn,2)];Be.some((Ra,Va)=>Ra!==oe[Va])&&(U.setOrientation(...Be),oe=Be);const Us=[f(X,Dn,3),f(X,Dn,4),f(X,Dn,5)];Us.some((Ra,Va)=>Ra!==Le[Va])&&(U.setPosition(...Us),Le=Us)},Object.defineProperty(rt.gain,"defaultValue",{get:()=>0}),Object.defineProperty(it.gain,"defaultValue",{get:()=>0}),Object.defineProperty(lt.gain,"defaultValue",{get:()=>0}),Object.defineProperty(xt.gain,"defaultValue",{get:()=>0}),Object.defineProperty(yt.gain,"defaultValue",{get:()=>0});const It={get bufferSize(){},get channelCount(){return U.channelCount},set channelCount(X){if(X>2)throw l();et.channelCount=X,U.channelCount=X},get channelCountMode(){return U.channelCountMode},set channelCountMode(X){if("max"===X)throw l();et.channelCountMode=X,U.channelCountMode=X},get channelInterpretation(){return U.channelInterpretation},set channelInterpretation(X){et.channelInterpretation=X,U.channelInterpretation=X},get coneInnerAngle(){return U.coneInnerAngle},set coneInnerAngle(X){U.coneInnerAngle=X},get coneOuterAngle(){return U.coneOuterAngle},set coneOuterAngle(X){U.coneOuterAngle=X},get coneOuterGain(){return U.coneOuterGain},set coneOuterGain(X){if(X<0||X>1)throw t();U.coneOuterGain=X},get context(){return U.context},get distanceModel(){return U.distanceModel},set distanceModel(X){U.distanceModel=X},get inputs(){return[et]},get maxDistance(){return U.maxDistance},set maxDistance(X){if(X<0)throw new RangeError;U.maxDistance=X},get numberOfInputs(){return U.numberOfInputs},get numberOfOutputs(){return U.numberOfOutputs},get orientationX(){return ot.gain},get orientationY(){return rt.gain},get orientationZ(){return it.gain},get panningModel(){return U.panningModel},set panningModel(X){U.panningModel=X},get positionX(){return lt.gain},get positionY(){return xt.gain},get positionZ(){return yt.gain},get refDistance(){return U.refDistance},set refDistance(X){if(X<0)throw new RangeError;U.refDistance=X},get rolloffFactor(){return U.rolloffFactor},set rolloffFactor(X){if(X<0)throw new RangeError;U.rolloffFactor=X},addEventListener:(...X)=>et.addEventListener(X[0],X[1],X[2]),dispatchEvent:(...X)=>et.dispatchEvent(X[0]),removeEventListener:(...X)=>et.removeEventListener(X[0],X[1],X[2])};return y!==It.coneInnerAngle&&(It.coneInnerAngle=y),x!==It.coneOuterAngle&&(It.coneOuterAngle=x),A!==It.coneOuterGain&&(It.coneOuterGain=A),w!==It.distanceModel&&(It.distanceModel=w),S!==It.maxDistance&&(It.maxDistance=S),F!==It.orientationX.value&&(It.orientationX.value=F),O!==It.orientationY.value&&(It.orientationY.value=O),I!==It.orientationZ.value&&(It.orientationZ.value=I),B!==It.panningModel&&(It.panningModel=B),j!==It.positionX.value&&(It.positionX.value=j),M!==It.positionY.value&&(It.positionY.value=M),P!==It.positionZ.value&&(It.positionZ.value=P),R!==It.refDistance&&(It.refDistance=R),N!==It.rolloffFactor&&(It.rolloffFactor=N),(1!==oe[0]||0!==oe[1]||0!==oe[2])&&U.setOrientation(...oe),(0!==Le[0]||0!==Le[1]||0!==Le[2])&&U.setPosition(...Le),p(Js(It,U),()=>{et.connect(U),i(et,kt,0,0),kt.connect(ot).connect(G,0,0),kt.connect(rt).connect(G,0,1),kt.connect(it).connect(G,0,2),kt.connect(lt).connect(G,0,3),kt.connect(xt).connect(G,0,4),kt.connect(yt).connect(G,0,5),G.connect(Dt).connect(g.destination)},()=>{et.disconnect(U),d(et,kt,0,0),kt.disconnect(ot),ot.disconnect(G),kt.disconnect(rt),rt.disconnect(G),kt.disconnect(it),it.disconnect(G),kt.disconnect(lt),lt.disconnect(G),kt.disconnect(xt),xt.disconnect(G),kt.disconnect(yt),yt.disconnect(G),G.disconnect(Dt),Dt.disconnect(g.destination)})})(er,ye,ys,on,Rt,Ni,$t,nr,Xl,Fs),lh=(i=>(t,e)=>{const s=t.createPanner();return void 0===s.orientationX?i(t,e):(we(s,e),ce(s,e,"orientationX"),ce(s,e,"orientationY"),ce(s,e,"orientationZ"),ce(s,e,"positionX"),ce(s,e,"positionY"),ce(s,e,"positionZ"),Wt(s,e,"coneInnerAngle"),Wt(s,e,"coneOuterAngle"),Wt(s,e,"coneOuterGain"),Wt(s,e,"distanceModel"),Wt(s,e,"maxDistance"),Wt(s,e,"panningModel"),Wt(s,e,"refDistance"),Wt(s,e,"rolloffFactor"),s)})(_p),yp=((i,t,e,s,o,c,l,d,f,p)=>()=>{const g=new WeakMap;let y=null;const x=function(){var A=at(function*(w,S){let F=null,O=c(w);const I={channelCount:O.channelCount,channelCountMode:O.channelCountMode,channelInterpretation:O.channelInterpretation},B={...I,coneInnerAngle:O.coneInnerAngle,coneOuterAngle:O.coneOuterAngle,coneOuterGain:O.coneOuterGain,distanceModel:O.distanceModel,maxDistance:O.maxDistance,panningModel:O.panningModel,refDistance:O.refDistance,rolloffFactor:O.rolloffFactor},j=Xt(O,S);if("bufferSize"in O)F=s(S,{...I,gain:1});else if(!j){const M={...B,orientationX:O.orientationX.value,orientationY:O.orientationY.value,orientationZ:O.orientationZ.value,positionX:O.positionX.value,positionY:O.positionY.value,positionZ:O.positionZ.value};O=o(S,M)}if(g.set(S,null===F?O:F),null!==F){if(null===y){if(null===l)throw new Error("Missing the native OfflineAudioContext constructor.");const G=new l(6,w.context.length,S.sampleRate),et=t(G,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});et.connect(G.destination),y=at(function*(){const ot=yield Promise.all([w.orientationX,w.orientationY,w.orientationZ,w.positionX,w.positionY,w.positionZ].map(function(){var rt=at(function*(it,lt){const xt=e(G,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===lt?1:0});return yield d(G,it,xt.offset),xt});return function(it,lt){return rt.apply(this,arguments)}}()));for(let rt=0;rt<6;rt+=1)ot[rt].connect(et,0,rt),ot[rt].start(0);return p(G)})()}const M=yield y,P=s(S,{...I,gain:1});yield f(w,S,P);const R=[];for(let G=0;G<M.numberOfChannels;G+=1)R.push(M.getChannelData(G));let N=[R[0][0],R[1][0],R[2][0]],z=[R[3][0],R[4][0],R[5][0]],U=s(S,{...I,gain:1}),Q=o(S,{...B,orientationX:N[0],orientationY:N[1],orientationZ:N[2],positionX:z[0],positionY:z[1],positionZ:z[2]});P.connect(U).connect(Q.inputs[0]),Q.connect(F);for(let G=128;G<M.length;G+=128){const et=[R[0][G],R[1][G],R[2][G]],ot=[R[3][G],R[4][G],R[5][G]];if(et.some((rt,it)=>rt!==N[it])||ot.some((rt,it)=>rt!==z[it])){N=et,z=ot;const rt=G/S.sampleRate;U.gain.setValueAtTime(0,rt),U=s(S,{...I,gain:0}),Q=o(S,{...B,orientationX:N[0],orientationY:N[1],orientationZ:N[2],positionX:z[0],positionY:z[1],positionZ:z[2]}),U.gain.setValueAtTime(1,rt),P.connect(U).connect(Q.inputs[0]),Q.connect(F)}}return F}return j?(yield i(S,w.orientationX,O.orientationX),yield i(S,w.orientationY,O.orientationY),yield i(S,w.orientationZ,O.orientationZ),yield i(S,w.positionX,O.positionX),yield i(S,w.positionY,O.positionY),yield i(S,w.positionZ,O.positionZ)):(yield d(S,w.orientationX,O.orientationX),yield d(S,w.orientationY,O.orientationY),yield d(S,w.orientationZ,O.orientationZ),yield d(S,w.positionX,O.positionX),yield d(S,w.positionY,O.positionY),yield d(S,w.positionZ,O.positionZ)),Qs(O)?yield f(w,S,O.inputs[0]):yield f(w,S,O),O});return function(S,F){return A.apply(this,arguments)}}();return{render(A,w){const S=g.get(w);return void 0!==S?Promise.resolve(S):x(A,w)}}})(rs,ys,ki,on,lh,ee,ke,je,ve,ri),vc=((i,t,e,s,o,c,l)=>class extends i{constructor(f,p){const g=o(f),y={...Ut,...p},x=e(g,y),A=c(g);super(f,!1,x,A?s():null),this._nativePannerNode=x,this._orientationX=t(this,A,x.orientationX,Me,ae),this._orientationY=t(this,A,x.orientationY,Me,ae),this._orientationZ=t(this,A,x.orientationZ,Me,ae),this._positionX=t(this,A,x.positionX,Me,ae),this._positionY=t(this,A,x.positionY,Me,ae),this._positionZ=t(this,A,x.positionZ,Me,ae),l(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(f){this._nativePannerNode.coneInnerAngle=f}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(f){this._nativePannerNode.coneOuterAngle=f}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(f){this._nativePannerNode.coneOuterGain=f}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(f){this._nativePannerNode.distanceModel=f}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(f){this._nativePannerNode.maxDistance=f}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(f){this._nativePannerNode.panningModel=f}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(f){this._nativePannerNode.refDistance=f}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(f){this._nativePannerNode.rolloffFactor=f}})(jt,Yn,lh,yp,nt,Zt,si),vp=(i=>(t,{disableNormalization:e,imag:s,real:o})=>{const c=s instanceof Float32Array?s:new Float32Array(s),l=o instanceof Float32Array?o:new Float32Array(o),d=t.createPeriodicWave(l,c,{disableNormalization:e});if(Array.from(s).length<2)throw i();return d})(De),xr=((i,t,e,s)=>class km{constructor(c,l){const d=t(c),f=(i=>{const{imag:t,real:e}=i;return void 0===t?void 0===e?{...i,imag:[0,0],real:[0,0]}:{...i,imag:Array.from(e,()=>0),real:e}:void 0===e?{...i,imag:t,real:Array.from(t,()=>0)}:{...i,imag:t,real:e}})({...yo,...l}),p=i(d,f);return e.add(p),p}static[Symbol.hasInstance](c){return null!==c&&"object"==typeof c&&Object.getPrototypeOf(c)===km.prototype||e.has(c)}})(vp,nt,new WeakSet),hh=((i,t,e,s,o,c)=>{const d=new Float32Array([1,1]),f=Math.PI/2,p={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},g={...p,oversample:"none"},A=(w,S,F,O,I)=>{if(1===S)return((w,S,F,O)=>{const I=new Float32Array(16385),B=new Float32Array(16385);for(let z=0;z<16385;z+=1){const U=z/16384*f;I[z]=Math.cos(U),B[z]=Math.sin(U)}const j=e(w,{...p,gain:0}),M=s(w,{...g,curve:I}),P=s(w,{...g,curve:d}),R=e(w,{...p,gain:0}),N=s(w,{...g,curve:B});return{connectGraph(){S.connect(j),S.connect(void 0===P.inputs?P:P.inputs[0]),S.connect(R),P.connect(F),F.connect(void 0===M.inputs?M:M.inputs[0]),F.connect(void 0===N.inputs?N:N.inputs[0]),M.connect(j.gain),N.connect(R.gain),j.connect(O,0,0),R.connect(O,0,1)},disconnectGraph(){S.disconnect(j),S.disconnect(void 0===P.inputs?P:P.inputs[0]),S.disconnect(R),P.disconnect(F),F.disconnect(void 0===M.inputs?M:M.inputs[0]),F.disconnect(void 0===N.inputs?N:N.inputs[0]),M.disconnect(j.gain),N.disconnect(R.gain),j.disconnect(O,0,0),R.disconnect(O,0,1)}}})(w,F,O,I);if(2===S)return((w,S,F,O)=>{const I=new Float32Array(16385),B=new Float32Array(16385),j=new Float32Array(16385),M=new Float32Array(16385),P=Math.floor(8192.5);for(let lt=0;lt<16385;lt+=1)if(lt>P){const xt=(lt-P)/(16384-P)*f;I[lt]=Math.cos(xt),B[lt]=Math.sin(xt),j[lt]=0,M[lt]=1}else{const xt=lt/(16384-P)*f;I[lt]=1,B[lt]=0,j[lt]=Math.cos(xt),M[lt]=Math.sin(xt)}const R=t(w,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),N=e(w,{...p,gain:0}),z=s(w,{...g,curve:I}),U=e(w,{...p,gain:0}),Q=s(w,{...g,curve:B}),G=s(w,{...g,curve:d}),et=e(w,{...p,gain:0}),ot=s(w,{...g,curve:j}),rt=e(w,{...p,gain:0}),it=s(w,{...g,curve:M});return{connectGraph(){S.connect(R),S.connect(void 0===G.inputs?G:G.inputs[0]),R.connect(N,0),R.connect(U,0),R.connect(et,1),R.connect(rt,1),G.connect(F),F.connect(void 0===z.inputs?z:z.inputs[0]),F.connect(void 0===Q.inputs?Q:Q.inputs[0]),F.connect(void 0===ot.inputs?ot:ot.inputs[0]),F.connect(void 0===it.inputs?it:it.inputs[0]),z.connect(N.gain),Q.connect(U.gain),ot.connect(et.gain),it.connect(rt.gain),N.connect(O,0,0),et.connect(O,0,0),U.connect(O,0,1),rt.connect(O,0,1)},disconnectGraph(){S.disconnect(R),S.disconnect(void 0===G.inputs?G:G.inputs[0]),R.disconnect(N,0),R.disconnect(U,0),R.disconnect(et,1),R.disconnect(rt,1),G.disconnect(F),F.disconnect(void 0===z.inputs?z:z.inputs[0]),F.disconnect(void 0===Q.inputs?Q:Q.inputs[0]),F.disconnect(void 0===ot.inputs?ot:ot.inputs[0]),F.disconnect(void 0===it.inputs?it:it.inputs[0]),z.disconnect(N.gain),Q.disconnect(U.gain),ot.disconnect(et.gain),it.disconnect(rt.gain),N.disconnect(O,0,0),et.disconnect(O,0,0),U.disconnect(O,0,1),rt.disconnect(O,0,1)}}})(w,F,O,I);throw o()};return(w,{channelCount:S,channelCountMode:F,pan:O,...I})=>{if("max"===F)throw o();const B=i(w,{...I,channelCount:1,channelCountMode:F,numberOfInputs:2}),j=e(w,{...I,channelCount:S,channelCountMode:F,gain:1}),M=e(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:O});let{connectGraph:P,disconnectGraph:R}=A(w,S,j,M,B);Object.defineProperty(M.gain,"defaultValue",{get:()=>0}),Object.defineProperty(M.gain,"maxValue",{get:()=>1}),Object.defineProperty(M.gain,"minValue",{get:()=>-1});const N={get bufferSize(){},get channelCount(){return j.channelCount},set channelCount(G){j.channelCount!==G&&(z&&R(),({connectGraph:P,disconnectGraph:R}=A(w,G,j,M,B)),z&&P()),j.channelCount=G},get channelCountMode(){return j.channelCountMode},set channelCountMode(G){if("clamped-max"===G||"max"===G)throw o();j.channelCountMode=G},get channelInterpretation(){return j.channelInterpretation},set channelInterpretation(G){j.channelInterpretation=G},get context(){return j.context},get inputs(){return[j]},get numberOfInputs(){return j.numberOfInputs},get numberOfOutputs(){return j.numberOfOutputs},get pan(){return M.gain},addEventListener:(...G)=>j.addEventListener(G[0],G[1],G[2]),dispatchEvent:(...G)=>j.dispatchEvent(G[0]),removeEventListener:(...G)=>j.removeEventListener(G[0],G[1],G[2])};let z=!1;return c(Js(N,B),()=>{P(),z=!0},()=>{R(),z=!1})}})(ys,dr,on,Ni,$t,Fs),dh=((i,t)=>(e,s)=>{const o=s.channelCountMode;if("clamped-max"===o)throw t();if(void 0===e.createStereoPanner)return i(e,s);const c=e.createStereoPanner();return we(c,s),ce(c,s,"pan"),Object.defineProperty(c,"channelCountMode",{get:()=>o,set:l=>{if(l!==o)throw t()}}),c})(hh,$t),xp=((i,t,e,s,o)=>()=>{const c=new WeakMap,l=function(){var d=at(function*(f,p){let g=e(f);const y=Xt(g,p);return y||(g=t(p,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,pan:g.pan.value})),c.set(p,g),y?yield i(p,f.pan,g.pan):yield s(p,f.pan,g.pan),Qs(g)?yield o(f,p,g.inputs[0]):yield o(f,p,g),g});return function(p,g){return d.apply(this,arguments)}}();return{render(d,f){const p=c.get(f);return void 0!==p?Promise.resolve(p):l(d,f)}}})(rs,dh,ee,je,ve),br=((i,t,e,s,o,c)=>class extends i{constructor(d,f){const p=o(d),g={...Zl,...f},y=e(p,g),x=c(p);super(d,!1,y,x?s():null),this._pan=t(this,x,y.pan)}get pan(){return this._pan}})(jt,Yn,dh,xp,nt,Zt),bp=((i,t,e)=>()=>{const s=new WeakMap,o=function(){var c=at(function*(l,d){let f=t(l);return Xt(f,d)||(f=i(d,{channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,curve:f.curve,oversample:f.oversample})),s.set(d,f),Qs(f)?yield e(l,d,f.inputs[0]):yield e(l,d,f),f});return function(d,f){return c.apply(this,arguments)}}();return{render(c,l){const d=s.get(l);return void 0!==d?Promise.resolve(d):o(c,l)}}})(Ni,ee,ve),wp=((i,t,e,s,o,c,l)=>class extends i{constructor(f,p){const g=o(f),y={...Qf,...p},x=e(g,y);super(f,!0,x,c(g)?s():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=x,l(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(f){if(null===f)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(f.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=f}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(f){this._nativeWaveShaperNode.oversample=f}})(jt,ye,Ni,bp,nt,Zt,si),No=(i=>null!==i&&i.isSecureContext)(Nn),Fo=(i=>(t,e,s)=>{Object.defineProperties(i,{currentFrame:{configurable:!0,get:()=>Math.round(t*e)},currentTime:{configurable:!0,get:()=>t}});try{return s()}finally{null!==i&&(delete i.currentFrame,delete i.currentTime)}})(Nn),fh=new WeakMap,Cp=((i,t)=>e=>{let s=i.get(e);if(void 0!==s)return s;if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new t(1,1,44100),i.set(e,s),s})(fh,ke),Ap=No?((i,t,e,s,o,c,l,d,f,p,g,y,x)=>{let A=0;return(w,S,F={credentials:"omit"})=>{const O=g.get(w);if(void 0!==O&&O.has(S))return Promise.resolve();const I=p.get(w);if(void 0!==I){const M=I.get(S);if(void 0!==M)return M}const B=c(w),j=void 0===B.audioWorklet?o(S).then(([M,P])=>{const[R,N]=to(M,P);return e(`${R};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${N}\n})})(window,'_AWGS')`)}).then(()=>{const M=x._AWGS.pop();if(void 0===M)throw new SyntaxError;s(B.currentTime,B.sampleRate,()=>M(class{},void 0,(P,R)=>{if(""===P.trim())throw t();const N=Xe.get(B);if(void 0!==N){if(N.has(P))throw t();no(R),eo(R.parameterDescriptors),N.set(P,R)}else no(R),eo(R.parameterDescriptors),Xe.set(B,new Map([[P,R]]))},B.sampleRate,void 0,void 0))}):Promise.all([o(S),Promise.resolve(i(y,y))]).then(([[M,P],R])=>{const N=A+1;A=N;const[z,U]=to(M,P),rt=new Blob([`${z};((AudioWorkletProcessor,registerProcessor)=>{${U}\n})(${R?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${R?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${R?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${N}',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),it=URL.createObjectURL(rt);return B.audioWorklet.addModule(it,F).then(()=>{if(d(B))return B;const lt=l(B);return lt.audioWorklet.addModule(it,F).then(()=>lt)}).then(lt=>{if(null===f)throw new SyntaxError;try{new f(lt,`__sac${N}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(it))});return void 0===I?p.set(w,new Map([[S,j]])):I.set(S,j),j.then(()=>{const M=g.get(w);void 0===M?g.set(w,new Set([S])):M.add(S)}).finally(()=>{const M=p.get(w);void 0!==M&&M.delete(S)}),j}})(Ie,$t,(i=>t=>new Promise((e,s)=>{if(null===i)return void s(new SyntaxError);const o=i.document.head;if(null===o)s(new SyntaxError);else{const c=i.document.createElement("script"),l=new Blob([t],{type:"application/javascript"}),d=URL.createObjectURL(l),f=i.onerror,p=()=>{i.onerror=f,URL.revokeObjectURL(d)};i.onerror=(g,y,x,A,w)=>y===d||y===i.location.href&&1===x&&1===A?(p(),s(w),!1):null!==f?f(g,y,x,A,w):void 0,c.onerror=()=>{p(),s(new SyntaxError)},c.onload=()=>{p(),e()},c.src=d,c.type="module",o.appendChild(c)}}))(Nn),Fo,function(){var t=at(function*(e){try{const s=yield fetch(e);if(s.ok)return[yield s.text(),s.url]}catch{}throw new DOMException("","AbortError")});return function(e){return t.apply(this,arguments)}}(),nt,Cp,Zt,Di,new WeakMap,new WeakMap,((i,t)=>at(function*(){if(null===i)return!0;if(null===t)return!1;const e=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new t(1,128,44100),o=URL.createObjectURL(e);let c=!1,l=!1;try{yield s.audioWorklet.addModule(o);const d=new i(s,"a",{numberOfOutputs:0}),f=s.createOscillator();d.port.onmessage=()=>c=!0,d.onprocessorerror=()=>l=!0,f.connect(d),f.start(0),yield s.startRendering()}catch{}finally{URL.revokeObjectURL(o)}return c&&!l}))(Di,ke),Nn):void 0,ph=((i,t)=>e=>i(e)||t(e))(uc,Zt),xc=((i,t,e,s,o,c,l,d,f,p,g)=>(y,x)=>{const A=l(y)?y:c(y);if(o.has(x)){const w=new DOMException("","DataCloneError");return Promise.reject(w)}try{o.add(x)}catch{}return t(f,()=>f(A))?A.decodeAudioData(x).then(w=>(Za(x).catch(()=>{}),t(d,()=>d(w))||g(w),i.add(w),w)):new Promise((w,S)=>{const F=function(){var I=at(function*(){try{yield Za(x)}catch{}});return function(){return I.apply(this,arguments)}}(),O=I=>{S(I),F()};try{A.decodeAudioData(x,I=>{"function"!=typeof I.copyFromChannel&&(p(I),_n(I)),i.add(I),F().then(()=>w(I))},I=>{O(null===I?new DOMException("","EncodingError"):I)})}catch(I){O(I)}})})(hc,Ie,0,0,new WeakSet,nt,ph,ms,Xs,dc,Zn),gh=((i,t,e,s,o,c,l,d,f,p,g,y,x,A,w,S,F,O,I,B)=>class extends w{constructor(M,P){super(M,P),this._nativeContext=M,this._audioWorklet=void 0===i?void 0:{addModule:(R,N)=>i(this,R,N)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new o(this)}createBuffer(M,P,R){return new e({length:P,numberOfChannels:M,sampleRate:R})}createBufferSource(){return new s(this)}createChannelMerger(M=6){return new c(this,{numberOfInputs:M})}createChannelSplitter(M=6){return new l(this,{numberOfOutputs:M})}createConstantSource(){return new d(this)}createConvolver(){return new f(this)}createDelay(M=1){return new g(this,{maxDelayTime:M})}createDynamicsCompressor(){return new y(this)}createGain(){return new x(this)}createIIRFilter(M,P){return new A(this,{feedback:P,feedforward:M})}createOscillator(){return new S(this)}createPanner(){return new F(this)}createPeriodicWave(M,P,R={disableNormalization:!1}){return new O(this,{...R,imag:P,real:M})}createStereoPanner(){return new I(this)}createWaveShaper(){return new B(this)}decodeAudioData(M,P,R){return p(this._nativeContext,M).then(N=>("function"==typeof P&&P(N),N),N=>{throw"function"==typeof R&&R(N),N})}})(Ap,rp,op,Qn,lp,dp,yr,fp,ii,xc,pp,vr,ch,Pe,Rn,oi,vc,xr,br,wp),bc=((i,t,e,s)=>class extends i{constructor(c,l){const d=e(c),f=((i,t)=>i.createMediaElementSource(t.mediaElement))(d,l);if(s(d))throw TypeError();super(c,!0,f,null),this._nativeMediaElementAudioSourceNode=f}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})(jt,0,nt,Zt),mh=((i,t,e,s)=>class extends i{constructor(c,l){const d=e(c);if(s(d))throw new TypeError;const p=((i,t)=>{const e=i.createMediaStreamDestination();return we(e,t),1===e.numberOfOutputs&&Object.defineProperty(e,"numberOfOutputs",{get:()=>0}),e})(d,{...ie,...l});super(c,!1,p,null),this._nativeMediaStreamAudioDestinationNode=p}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(jt,0,nt,Zt),_h=((i,t,e,s)=>class extends i{constructor(c,l){const d=e(c),f=((i,{mediaStream:t})=>{const e=t.getAudioTracks();e.sort((c,l)=>c.id<l.id?-1:c.id>l.id?1:0);const s=e.slice(0,1),o=i.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(o,"mediaStream",{value:t}),o})(d,l);if(s(d))throw new TypeError;super(c,!0,f,null),this._nativeMediaStreamAudioSourceNode=f}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(jt,0,nt,Zt),yh=((i,t)=>(e,{mediaStreamTrack:s})=>{if("function"==typeof e.createMediaStreamTrackSource)return e.createMediaStreamTrackSource(s);const o=new MediaStream([s]),c=e.createMediaStreamSource(o);if("audio"!==s.kind)throw i();if(t(e))throw new TypeError;return c})(ye,Zt),Eo=((i,t,e)=>class extends i{constructor(o,c){const l=e(o);super(o,!0,t(l,c),null)}})(jt,yh,nt),Sp=((i,t,e,s,o,c,l,d,f)=>class extends i{constructor(g={}){if(null===f)throw new Error("Missing the native AudioContext constructor.");let y;try{y=new f(g)}catch(w){throw 12===w.code&&"sampleRate is not in range"===w.message?e():w}if(null===y)throw s();if(!(i=>void 0===i||"number"==typeof i||"string"==typeof i&&("balanced"===i||"interactive"===i||"playback"===i))(g.latencyHint))throw new TypeError(`The provided value '${g.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==g.sampleRate&&y.sampleRate!==g.sampleRate)throw e();super(y,2);const{latencyHint:x}=g,{sampleRate:A}=y;if(this._baseLatency="number"==typeof y.baseLatency?y.baseLatency:"balanced"===x?512/A:"interactive"===x||void 0===x?256/A:"playback"===x?1024/A:128*Math.max(2,Math.min(128,Math.round(x*A/128)))/A,this._nativeAudioContext=y,"webkitAudioContext"===f.name?(this._nativeGainNode=y.createGain(),this._nativeOscillatorNode=y.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(y.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===y.state){this._state="suspended";const w=()=>{"suspended"===this._state&&(this._state=null),y.removeEventListener("statechange",w)};y.addEventListener("statechange",w)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then(()=>{throw t()}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then(()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),xi(this)}))}createMediaElementSource(g){return new o(this,{mediaElement:g})}createMediaStreamDestination(){return new c(this)}createMediaStreamSource(g){return new l(this,{mediaStream:g})}createMediaStreamTrackSource(g){return new d(this,{mediaStreamTrack:g})}resume(){return"suspended"===this._state?new Promise((g,y)=>{const x=()=>{this._nativeAudioContext.removeEventListener("statechange",x),"running"===this._nativeAudioContext.state?g():this.resume().then(g,y)};this._nativeAudioContext.addEventListener("statechange",x)}):this._nativeAudioContext.resume().catch(g=>{throw void 0===g||15===g.code?t():g})}suspend(){return this._nativeAudioContext.suspend().catch(g=>{throw void 0===g?t():g})}})(gh,ye,$t,pr,bc,mh,_h,Eo,_s),Ro=(i=>t=>{const e=i.get(t);if(void 0===e)throw new Error("The context has no set of AudioWorkletNodes.");return e})(_c),vh=(i=>(t,e)=>{i(t).add(e)})(Ro),xh=(i=>(t,e,s=0,o=0)=>{const c=t[s];if(void 0===c)throw i();return ro(e)?c.connect(e,0,o):c.connect(e,0)})(De),bh=(i=>(t,e)=>{i(t).delete(e)})(Ro),wh=(i=>(t,e=void 0,s=void 0,o=0)=>void 0===e?t.forEach(c=>c.disconnect()):"number"==typeof e?or(i,t,e).disconnect():ro(e)?void 0===s?t.forEach(c=>c.disconnect(e)):void 0===o?or(i,t,s).disconnect(e,0):or(i,t,s).disconnect(e,0,o):void 0===s?t.forEach(c=>c.disconnect(e)):or(i,t,s).disconnect(e,0))(De),Vo=new WeakMap,Ch=((i,t)=>e=>t(i,e))(Vo,rn),wc=((i,t,e,s,o,c,l,d,f,p,g,y,x)=>(A,w,S,F)=>{if(0===F.numberOfInputs&&0===F.numberOfOutputs)throw f();const O=Array.isArray(F.outputChannelCount)?F.outputChannelCount:Array.from(F.outputChannelCount);if(O.some(tt=>tt<1))throw f();if(O.length!==F.numberOfOutputs)throw t();if("explicit"!==F.channelCountMode)throw f();const I=F.channelCount*F.numberOfInputs,B=O.reduce((tt,bt)=>tt+bt,0),j=void 0===S.parameterDescriptors?0:S.parameterDescriptors.length;if(I+j>6||B>6)throw f();const M=new MessageChannel,P=[],R=[];for(let tt=0;tt<F.numberOfInputs;tt+=1)P.push(l(A,{channelCount:F.channelCount,channelCountMode:F.channelCountMode,channelInterpretation:F.channelInterpretation,gain:1})),R.push(o(A,{channelCount:F.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:F.channelCount}));const N=[];if(void 0!==S.parameterDescriptors)for(const{defaultValue:tt,maxValue:bt,minValue:Ge,name:me}of S.parameterDescriptors){const Ht=c(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==F.parameterData[me]?F.parameterData[me]:void 0===tt?0:tt});Object.defineProperties(Ht.offset,{defaultValue:{get:()=>void 0===tt?0:tt},maxValue:{get:()=>void 0===bt?Me:bt},minValue:{get:()=>void 0===Ge?ae:Ge}}),N.push(Ht)}const z=s(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,I+j)}),U=sc(w,A.sampleRate),Q=d(A,U,I+j,Math.max(1,B)),G=o(A,{channelCount:Math.max(1,B),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,B)}),et=[];for(let tt=0;tt<F.numberOfOutputs;tt+=1)et.push(s(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:O[tt]}));for(let tt=0;tt<F.numberOfInputs;tt+=1){P[tt].connect(R[tt]);for(let bt=0;bt<F.channelCount;bt+=1)R[tt].connect(z,bt,tt*F.channelCount+bt)}const ot=new hl(void 0===S.parameterDescriptors?[]:S.parameterDescriptors.map(({name:tt},bt)=>{const Ge=N[bt];return Ge.connect(z,0,I+bt),Ge.start(0),[tt,Ge.offset]}));z.connect(Q);let rt=F.channelInterpretation,it=null;const lt=0===F.numberOfOutputs?[Q]:et,xt={get bufferSize(){return U},get channelCount(){return F.channelCount},set channelCount(tt){throw e()},get channelCountMode(){return F.channelCountMode},set channelCountMode(tt){throw e()},get channelInterpretation(){return rt},set channelInterpretation(tt){for(const bt of P)bt.channelInterpretation=tt;rt=tt},get context(){return Q.context},get inputs(){return P},get numberOfInputs(){return F.numberOfInputs},get numberOfOutputs(){return F.numberOfOutputs},get onprocessorerror(){return it},set onprocessorerror(tt){"function"==typeof it&&xt.removeEventListener("processorerror",it),it="function"==typeof tt?tt:null,"function"==typeof it&&xt.addEventListener("processorerror",it)},get parameters(){return ot},get port(){return M.port2},addEventListener:(...tt)=>Q.addEventListener(tt[0],tt[1],tt[2]),connect:i.bind(null,lt),disconnect:p.bind(null,lt),dispatchEvent:(...tt)=>Q.dispatchEvent(tt[0]),removeEventListener:(...tt)=>Q.removeEventListener(tt[0],tt[1],tt[2])},yt=new Map;var tt;M.port1.addEventListener=(tt=M.port1.addEventListener,(...bt)=>{if("message"===bt[0]){const Ge="function"==typeof bt[1]?bt[1]:"object"==typeof bt[1]&&null!==bt[1]&&"function"==typeof bt[1].handleEvent?bt[1].handleEvent:null;if(null!==Ge){const me=yt.get(bt[1]);void 0!==me?bt[1]=me:(bt[1]=Ht=>{g(A.currentTime,A.sampleRate,()=>Ge(Ht))},yt.set(Ge,bt[1]))}}return tt.call(M.port1,bt[0],bt[1],bt[2])}),M.port1.removeEventListener=(tt=>(...bt)=>{if("message"===bt[0]){const Ge=yt.get(bt[1]);void 0!==Ge&&(yt.delete(bt[1]),bt[1]=Ge)}return tt.call(M.port1,bt[0],bt[1],bt[2])})(M.port1.removeEventListener);let Dt=null;Object.defineProperty(M.port1,"onmessage",{get:()=>Dt,set:tt=>{"function"==typeof Dt&&M.port1.removeEventListener("message",Dt),Dt="function"==typeof tt?tt:null,"function"==typeof Dt&&(M.port1.addEventListener("message",Dt),M.port1.start())}}),S.prototype.port=M.port1;let kt=null;((i,t,e,s)=>{let o=ns.get(i);void 0===o&&(o=new WeakMap,ns.set(i,o));const c=Rf(e,s);return o.set(t,c),c})(A,xt,S,F).then(tt=>kt=tt);const Le=co(F.numberOfInputs,F.channelCount),Dn=co(F.numberOfOutputs,O),It=void 0===S.parameterDescriptors?[]:S.parameterDescriptors.reduce((tt,{name:bt})=>({...tt,[bt]:new Float32Array(128)}),{});let _i=!0;const Yi=()=>{F.numberOfOutputs>0&&Q.disconnect(G);for(let tt=0,bt=0;tt<F.numberOfOutputs;tt+=1){const Ge=et[tt];for(let me=0;me<O[tt];me+=1)G.disconnect(Ge,bt+me,me);bt+=O[tt]}},X=new Map;Q.onaudioprocess=({inputBuffer:tt,outputBuffer:bt})=>{if(null!==kt){const Ge=y(xt);for(let me=0;me<U;me+=128){for(let Ht=0;Ht<F.numberOfInputs;Ht+=1)for(let xe=0;xe<F.channelCount;xe+=1)ao(tt,Le[Ht],xe,xe,me);void 0!==S.parameterDescriptors&&S.parameterDescriptors.forEach(({name:Ht},xe)=>{ao(tt,It,Ht,I+xe,me)});for(let Ht=0;Ht<F.numberOfInputs;Ht+=1)for(let xe=0;xe<O[Ht];xe+=1)0===Dn[Ht][xe].byteLength&&(Dn[Ht][xe]=new Float32Array(128));try{const Ht=Le.map((ps,Qi)=>{if(Ge[Qi].size>0)return X.set(Qi,U/128),ps;const xg=X.get(Qi);return void 0===xg?[]:(ps.every(f_=>f_.every(p_=>0===p_))&&(1===xg?X.delete(Qi):X.set(Qi,xg-1)),ps)});_i=g(A.currentTime+me/A.sampleRate,A.sampleRate,()=>kt.process(Ht,Dn,It));for(let ps=0,Qi=0;ps<F.numberOfOutputs;ps+=1){for(let nl=0;nl<O[ps];nl+=1)rr(bt,Dn[ps],nl,Qi+nl,me);Qi+=O[ps]}}catch(Ht){_i=!1,xt.dispatchEvent(new ErrorEvent("processorerror",{colno:Ht.colno,filename:Ht.filename,lineno:Ht.lineno,message:Ht.message}))}if(!_i){for(let Ht=0;Ht<F.numberOfInputs;Ht+=1){P[Ht].disconnect(R[Ht]);for(let xe=0;xe<F.channelCount;xe+=1)R[me].disconnect(z,xe,Ht*F.channelCount+xe)}if(void 0!==S.parameterDescriptors){const Ht=S.parameterDescriptors.length;for(let xe=0;xe<Ht;xe+=1){const ps=N[xe];ps.disconnect(z,0,I+xe),ps.stop()}}z.disconnect(Q),Q.onaudioprocess=null,Be?Yi():Va();break}}}};let Be=!1;const Us=l(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Ra=()=>Q.connect(Us).connect(A.destination),Va=()=>{Q.disconnect(Us),Us.disconnect()};return Ra(),x(xt,()=>{if(_i){Va(),F.numberOfOutputs>0&&Q.connect(G);for(let tt=0,bt=0;tt<F.numberOfOutputs;tt+=1){const Ge=et[tt];for(let me=0;me<O[tt];me+=1)G.connect(Ge,bt+me,me);bt+=O[tt]}}Be=!0},()=>{_i&&(Ra(),Yi()),Be=!1})})(xh,De,ye,ys,dr,ki,on,Rt,$t,wh,Fo,Ch,Fs),Tp=((i,t,e,s,o)=>(c,l,d,f,p,g)=>{if(null!==d)try{const y=new d(c,f,g),x=new Map;let A=null;if(Object.defineProperties(y,{channelCount:{get:()=>g.channelCount,set:()=>{throw i()}},channelCountMode:{get:()=>"explicit",set:()=>{throw i()}},onprocessorerror:{get:()=>A,set:w=>{"function"==typeof A&&y.removeEventListener("processorerror",A),A="function"==typeof w?w:null,"function"==typeof A&&y.addEventListener("processorerror",A)}}}),y.addEventListener=(w=y.addEventListener,(...S)=>{if("processorerror"===S[0]){const F="function"==typeof S[1]?S[1]:"object"==typeof S[1]&&null!==S[1]&&"function"==typeof S[1].handleEvent?S[1].handleEvent:null;if(null!==F){const O=x.get(S[1]);void 0!==O?S[1]=O:(S[1]=I=>{"error"===I.type?(Object.defineProperties(I,{type:{value:"processorerror"}}),F(I)):F(new ErrorEvent(S[0],{...I}))},x.set(F,S[1]))}}return w.call(y,"error",S[1],S[2]),w.call(y,...S)}),y.removeEventListener=(w=>(...S)=>{if("processorerror"===S[0]){const F=x.get(S[1]);void 0!==F&&(x.delete(S[1]),S[1]=F)}return w.call(y,"error",S[1],S[2]),w.call(y,S[0],S[1],S[2])})(y.removeEventListener),0!==g.numberOfOutputs){const w=e(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return y.connect(w).connect(c.destination),o(y,()=>w.disconnect(),()=>w.connect(c.destination))}return y}catch(y){throw 11===y.code?s():y}var w;if(void 0===p)throw s();return(i=>{const{port1:t}=new MessageChannel;try{t.postMessage(i)}finally{t.close()}})(g),t(c,l,p,g)})(ye,wc,on,$t,Fs),Cc=((i,t,e,s,o,c,l,d,f,p,g,y,x,A,w,S)=>(F,O,I)=>{const B=new WeakMap;let j=null;const M=function(){var P=at(function*(R,N){let z=g(R),U=null;const Q=Xt(z,N),G=Array.isArray(O.outputChannelCount)?O.outputChannelCount:Array.from(O.outputChannelCount);if(null===y){const et=G.reduce((lt,xt)=>lt+xt,0),ot=o(N,{channelCount:Math.max(1,et),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,et)}),rt=[];for(let lt=0;lt<R.numberOfOutputs;lt+=1)rt.push(s(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:G[lt]}));const it=l(N,{channelCount:O.channelCount,channelCountMode:O.channelCountMode,channelInterpretation:O.channelInterpretation,gain:1});it.connect=t.bind(null,rt),it.disconnect=f.bind(null,rt),U=[ot,rt,it]}else Q||(z=new y(N,F));if(B.set(N,null===U?z:U[2]),null!==U){if(null===j){if(void 0===I)throw new Error("Missing the processor constructor.");if(null===x)throw new Error("Missing the native OfflineAudioContext constructor.");const xt=R.channelCount*R.numberOfInputs,yt=void 0===I.parameterDescriptors?0:I.parameterDescriptors.length,Dt=xt+yt;j=Jd(R,0===Dt?null:yield function(){var oe=at(function*(){const Le=new x(Dt,128*Math.ceil(R.context.length/128),N.sampleRate),Dn=[],It=[];for(let X=0;X<O.numberOfInputs;X+=1)Dn.push(l(Le,{channelCount:O.channelCount,channelCountMode:O.channelCountMode,channelInterpretation:O.channelInterpretation,gain:1})),It.push(o(Le,{channelCount:O.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:O.channelCount}));const _i=yield Promise.all(Array.from(R.parameters.values()).map(function(){var X=at(function*(Be){const Us=c(Le,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Be.value});return yield A(Le,Be,Us.offset),Us});return function(Be){return X.apply(this,arguments)}}())),Yi=s(Le,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,xt+yt)});for(let X=0;X<O.numberOfInputs;X+=1){Dn[X].connect(It[X]);for(let Be=0;Be<O.channelCount;Be+=1)It[X].connect(Yi,Be,X*O.channelCount+Be)}for(const[X,Be]of _i.entries())Be.connect(Yi,0,xt+X),Be.start(0);return Yi.connect(Le.destination),yield Promise.all(Dn.map(X=>w(R,Le,X))),S(Le)});return function(){return oe.apply(this,arguments)}}()(),N,O,G,I,p)}const et=yield j,ot=e(N,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[rt,it,lt]=U;null!==et&&(ot.buffer=et,ot.start(0)),ot.connect(rt);for(let xt=0,yt=0;xt<R.numberOfOutputs;xt+=1){const Dt=it[xt];for(let kt=0;kt<G[xt];kt+=1)rt.connect(Dt,yt+kt,kt);yt+=G[xt]}return lt}if(Q)for(const[et,ot]of R.parameters.entries())yield i(N,ot,z.parameters.get(et));else for(const[et,ot]of R.parameters.entries())yield A(N,ot,z.parameters.get(et));return yield w(R,N,z),z});return function(N,z){return P.apply(this,arguments)}}();return{render(P,R){d(R,P);const N=B.get(R);return void 0!==N?Promise.resolve(N):M(P,R)}}})(rs,xh,Mi,ys,dr,ki,on,bh,wh,Fo,ee,Di,ke,je,ve,ri),Mt=(i=>t=>i.get(t))(fh),Op=(i=>(t,e)=>{i.set(t,e)})(Vo),Ah=No?((i,t,e,s,o,c,l,d,f,p,g,y,x,A)=>class extends t{constructor(S,F,O){var I;const B=d(S),j=f(B),M=(i=>({...i,outputChannelCount:void 0!==i.outputChannelCount?i.outputChannelCount:1===i.numberOfInputs&&1===i.numberOfOutputs?[i.channelCount]:Array.from({length:i.numberOfOutputs},()=>1)}))({...$d,...O});(i=>{const{port1:t,port2:e}=new MessageChannel;try{t.postMessage(i)}finally{t.close(),e.close()}})(M);const P=Xe.get(B),R=P?.get(F),N=j||"closed"!==B.state?B:null!==(I=l(B))&&void 0!==I?I:B,z=o(N,j?null:S.baseLatency,p,F,R,M);super(S,!0,z,j?s(F,M,R):null);const Q=[];z.parameters.forEach((et,ot)=>{const rt=e(this,j,et);Q.push([ot,rt])}),this._nativeAudioWorkletNode=z,this._onprocessorerror=null,this._parameters=new hl(Q),j&&i(B,this);const{activeInputs:G}=c(this);y(z,G)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(S){const F="function"==typeof S?A(this,S):null;this._nativeAudioWorkletNode.onprocessorerror=F;const O=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==O&&O===F?S:O}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(vh,jt,Yn,Cc,Tp,be,Mt,nt,Zt,Di,0,Op,0,Oi):void 0,Ac=((i,t)=>(e,s,o)=>{if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(e,s,o)}catch(c){throw"SyntaxError"===c.name?i():c}})($t,ke),Sh=((i,t,e,s,o,c,l,d)=>(f,p)=>e(f).render(f,p).then(()=>Promise.all(Array.from(s(p)).map(g=>e(g).render(g,p)))).then(()=>o(p)).then(g=>("function"!=typeof g.copyFromChannel?(l(g),_n(g)):t(c,()=>c(g))||d(g),i.add(g),g)))(hc,Ie,ks,Ro,ri,ms,dc,Zn),Vn=((i,t,e,s,o)=>class extends i{constructor(l,d,f){let p;if("number"==typeof l&&void 0!==d&&void 0!==f)p={length:d,numberOfChannels:l,sampleRate:f};else{if("object"!=typeof l)throw new Error("The given parameters are not valid.");p=l}const{length:g,numberOfChannels:y,sampleRate:x}={...go,...p},A=s(y,g,x);t(Xs,()=>Xs(A))||A.addEventListener("statechange",(()=>{let w=0;const S=F=>{"running"===this._state&&(w>0?(A.removeEventListener("statechange",S),F.stopImmediatePropagation(),this._waitForThePromiseToSettle(F)):w+=1)};return S})()),super(A,y),this._length=g,this._nativeOfflineAudioContext=A,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(e()):(this._state="running",o(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,xi(this)}))}_waitForThePromiseToSettle(l){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(l):setTimeout(()=>this._waitForThePromiseToSettle(l))}})(gh,Ie,ye,Ac,Sh),Dp=((i,t)=>e=>{const s=i.get(e);return t(s)||t(e)})(gs,uc),Po=((i,t)=>e=>i.has(e)||t(e))(es,lc),Sc=((i,t)=>e=>i.has(e)||t(e))(mn,eh),Th=((i,t)=>e=>{const s=i.get(e);return t(s)||t(e)})(gs,Zt);var i;function gt(i,t){if(!i)throw new Error(t)}function Ke(i,t,e=1/0){if(!(t<=i&&i<=e))throw new RangeError(`Value must be within [${t}, ${e}], got: ${i}`)}function qo(i){!i.isOffline&&"running"!==i.state&&Bo('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let Lo=console;function Bo(...i){Lo.warn(...i)}function an(i){return typeof i>"u"}function St(i){return!an(i)}function ze(i){return"number"==typeof i}function Rs(i){return"[object Object]"===Object.prototype.toString.call(i)&&i.constructor===Object}function vs(i){return"boolean"==typeof i}function bn(i){return Array.isArray(i)}function $n(i){return"string"==typeof i}function Fi(i){return $n(i)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(i)}function Np(i,t,e){return new Vn(i,t,e)}const ai="object"==typeof self?self:null,Dh=ai&&(ai.hasOwnProperty("AudioContext")||ai.hasOwnProperty("webkitAudioContext"));var Bt=ut(7582);class kh{constructor(t,e,s){this._callback=t,this._type=e,this._updateInterval=s,this._createClock()}_createWorker(){const t=new Blob([`\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t`],{type:"text/javascript"}),e=URL.createObjectURL(t),s=new Worker(e);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch{this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){this._updateInterval=Math.max(t,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*t,1))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function Vs(i){return Sc(i)}function fe(i){return Po(i)}function wn(i){return Th(i)}function Ei(i){return Dp(i)}function Nh(i){return i instanceof AudioBuffer}function Go(i,t){return"value"===i||Vs(t)||fe(t)||Nh(t)}function Xn(i,...t){if(!t.length)return i;const e=t.shift();if(Rs(i)&&Rs(e))for(const s in e)Go(s,e[s])?i[s]=e[s]:Rs(e[s])?(i[s]||Object.assign(i,{[s]:{}}),Xn(i[s],e[s])):Object.assign(i,{[s]:e[s]});return Xn(i,...t)}function Z(i,t,e=[],s){const o={},c=Array.from(t);if(Rs(c[0])&&s&&!Reflect.has(c[0],s)&&(Object.keys(c[0]).some(d=>Reflect.has(i,d))||(Xn(o,{[s]:c[0]}),e.splice(e.indexOf(s),1),c.shift())),1===c.length&&Rs(c[0]))Xn(o,c[0]);else for(let l=0;l<e.length;l++)St(c[l])&&(o[e[l]]=c[l]);return Xn(i,o)}function Jn(i,t){return an(i)?t:i}function ci(i,t){return t.forEach(e=>{Reflect.has(i,e)&&delete i[e]}),i}let In=(()=>{class i{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||ai&&this.toString()===ai.TONE_DEBUG_CLASS)&&function Oh(...i){Lo.log(...i)}(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}return i.version=he,i})();const Dc=1e-6;function wr(i,t){return i>t+Dc}function Wo(i,t){return wr(i,t)||Pn(i,t)}function Cr(i,t){return i+Dc<t}function Pn(i,t){return Math.abs(i-t)<Dc}class qn extends In{constructor(){super(),this.name="Timeline",this._timeline=[];const t=Z(qn.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(gt(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length)gt(Wo(t.time,this._timeline[this.length-1].time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t);else{const e=this._search(t.time);this._timeline.splice(e+1,0,t)}return this.length>this.memory&&this._timeline.splice(0,this.length-this.memory),this}remove(t){const e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this}get(t,e="time"){const s=this._search(t,e);return-1!==s?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){const s=this._search(t,e);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(t){const e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];const s=this._search(t);return s-1>=0?this._timeline[s-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(Pn(this._timeline[e].time,t)){for(let s=e;s>=0&&Pn(this._timeline[s].time,t);s--)e=s;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&Wo(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){const e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(0===this._timeline.length)return-1;let s=0;const o=this._timeline.length;let c=o;if(o>0&&this._timeline[o-1][e]<=t)return o-1;for(;s<c;){let l=Math.floor(s+(c-s)/2);const d=this._timeline[l],f=this._timeline[l+1];if(Pn(d[e],t)){for(let p=l;p<this._timeline.length&&Pn(this._timeline[p][e],t);p++)l=p;return l}if(Cr(d[e],t)&&wr(f[e],t))return l;wr(d[e],t)?c=l:s=l+1}return-1}_iterate(t,e=0,s=this._timeline.length-1){this._timeline.slice(e,s+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){const s=this._search(t);return-1!==s&&this._iterate(e,0,s),this}forEachAfter(t,e){const s=this._search(t);return this._iterate(e,s+1),this}forEachBetween(t,e,s){let o=this._search(t),c=this._search(e);return-1!==o&&-1!==c?(this._timeline[o].time!==t&&(o+=1),this._timeline[c].time===e&&(c-=1),this._iterate(s,o,c)):-1===o&&this._iterate(s,0,c),this}forEachFrom(t,e){let s=this._search(t);for(;s>=0&&this._timeline[s].time>=t;)s--;return this._iterate(e,s+1),this}forEachAtTime(t,e){const s=this._search(t);if(-1!==s&&Pn(this._timeline[s].time,t)){let o=s;for(let c=s;c>=0&&Pn(this._timeline[c].time,t);c--)o=c;this._iterate(c=>{e(c)},o,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const Ar=[];function jo(i){Ar.push(i)}const Sr=[];function Tr(i){Sr.push(i)}class Or extends In{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach(o=>{an(this._events)&&(this._events={}),this._events.hasOwnProperty(o)||(this._events[o]=[]),this._events[o].push(e)}),this}once(t,e){const s=(...o)=>{e(...o),this.off(t,s)};return this.on(t,s),this}off(t,e){return t.split(/\W+/).forEach(o=>{if(an(this._events)&&(this._events={}),this._events.hasOwnProperty(t))if(an(e))this._events[t]=[];else{const c=this._events[t];for(let l=c.length-1;l>=0;l--)c[l]===e&&c.splice(l,1)}}),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){const s=this._events[t].slice(0);for(let o=0,c=s.length;o<c;o++)s[o].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach(e=>{const s=Object.getOwnPropertyDescriptor(Or.prototype,e);Object.defineProperty(t.prototype,e,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class kc extends Or{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Cn extends kc{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new qn,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const t=Z(Cn.getDefaults(),arguments,["context"]);this._context=t.context?t.context:function kp(i){return new Sp(i)}({latencyHint:t.latencyHint}),this._ticker=new kh(this.emit.bind(this,"tick"),t.clockSource,t.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(t.latencyHint),this.lookAhead=t.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(function Eh(i){Ar.forEach(t=>t(i))}(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,s){return this._context.createBuffer(t,e,s)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,s){return this._context.createPeriodicWave(t,e,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return gt(Ei(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return gt(Ei(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return gt(Ei(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){gt(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){gt(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){gt(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){gt(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return function Mh(i,t,e){return gt(St(Ah),"This node only works in a secure context (https or localhost)"),new Ah(i,t,e)}(this.rawContext,t,e)}addAudioWorkletModule(t,e){return(0,Bt.mG)(this,void 0,void 0,function*(){gt(St(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(e)||this._workletModules.set(e,this.rawContext.audioWorklet.addModule(t)),yield this._workletModules.get(e)})}workletsAreReady(){return(0,Bt.mG)(this,void 0,void 0,function*(){const t=[];this._workletModules.forEach(e=>t.push(e)),yield Promise.all(t)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get latencyHint(){return this._latencyHint}_setLatencyHint(t){let e=0;if(this._latencyHint=t,$n(t))switch(t){case"interactive":e=.1;break;case"playback":e=.5;break;case"balanced":e=.25}this.lookAhead=e,this.updateInterval=e/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return Ei(this._context)?this._context.resume():Promise.resolve()}close(){return(0,Bt.mG)(this,void 0,void 0,function*(){Ei(this._context)&&(yield this._context.close()),this._initialized&&function Mc(i){Sr.forEach(t=>t(i))}(this)})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const e=this._context.createBuffer(1,128,this._context.sampleRate),s=e.getChannelData(0);for(let c=0;c<s.length;c++)s[c]=t;const o=this._context.createBufferSource();return o.channelCount=1,o.channelCountMode="explicit",o.buffer=e,o.loop=!0,o.start(0),this._constants.set(t,o),o}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this}_timeoutLoop(){const t=this.now();let e=this._timeouts.peek();for(;this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()}setTimeout(t,e){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:s+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(e=>{e.id===t&&this._timeouts.remove(e)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){const s=++this._timeoutIds,o=()=>{const c=this.now();this._timeouts.add({callback:()=>{t(),o()},id:s,time:c+e})};return o(),s}}function le(i,t){bn(t)?t.forEach(e=>le(i,e)):Object.defineProperty(i,t,{enumerable:!0,writable:!1})}function Vh(i,t){bn(t)?t.forEach(e=>Vh(i,e)):Object.defineProperty(i,t,{writable:!0})}const zt=()=>{};let as=(()=>{class i extends In{constructor(){super(),this.name="ToneAudioBuffer",this.onload=zt;const e=Z(i.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,e.url&&Nh(e.url)||e.url instanceof i?this.set(e.url):$n(e.url)&&this.load(e.url).catch(e.onerror)}static getDefaults(){return{onerror:zt,onload:zt,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:An().sampleRate}set(e){return e instanceof i?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return(0,Bt.mG)(this,void 0,void 0,function*(){const s=i.load(e).then(o=>{this.set(o),this.onload(this)});i.downloads.push(s);try{yield s}finally{const o=i.downloads.indexOf(s);i.downloads.splice(o,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const s=bn(e)&&e[0].length>0,o=s?e.length:1,c=s?e[0].length:e.length,l=An(),d=l.createBuffer(o,c,l.sampleRate),f=s||1!==o?e:[e];for(let p=0;p<o;p++)d.copyToChannel(f[p],p);return this._buffer=d,this}toMono(e){if(ze(e))this.fromArray(this.toArray(e));else{let s=new Float32Array(this.length);const o=this.numberOfChannels;for(let c=0;c<o;c++){const l=this.toArray(c);for(let d=0;d<l.length;d++)s[d]+=l[d]}s=s.map(c=>c/o),this.fromArray(s)}return this}toArray(e){if(ze(e))return this.getChannelData(e);if(1===this.numberOfChannels)return this.toArray(0);{const s=[];for(let o=0;o<this.numberOfChannels;o++)s[o]=this.getChannelData(o);return s}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,s=this.duration){const o=Math.floor(e*this.sampleRate),c=Math.floor(s*this.sampleRate);gt(o<c,"The start time must be less than the end time");const l=c-o,d=An().createBuffer(this.numberOfChannels,l,this.sampleRate);for(let f=0;f<this.numberOfChannels;f++)d.copyToChannel(this.getChannelData(f).subarray(o,c),f);return new i(d)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return(new i).fromArray(e)}static fromUrl(e){return(0,Bt.mG)(this,void 0,void 0,function*(){return yield(new i).load(e)})}static load(e){return(0,Bt.mG)(this,void 0,void 0,function*(){const s=e.match(/\[([^\]\[]+\|.+)\]$/);if(s){const f=s[1].split("|");let p=f[0];for(const g of f)if(i.supportsType(g)){p=g;break}e=e.replace(s[0],p)}const o=""===i.baseUrl||i.baseUrl.endsWith("/")?i.baseUrl:i.baseUrl+"/",c=yield fetch(o+e);if(!c.ok)throw new Error(`could not load url: ${e}`);const l=yield c.arrayBuffer();return yield An().decodeAudioData(l)})}static supportsType(e){const s=e.split("."),o=s[s.length-1];return""!==document.createElement("audio").canPlayType("audio/"+o)}static loaded(){return(0,Bt.mG)(this,void 0,void 0,function*(){for(yield Promise.resolve();i.downloads.length;)yield i.downloads[0]})}}return i.baseUrl="",i.downloads=[],i})();class Nc extends Cn{constructor(){super({clockSource:"offline",context:wn(arguments[0])?arguments[0]:Np(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:wn(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=wn(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return(0,Bt.mG)(this,void 0,void 0,function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;const s=Math.floor(this.sampleRate/128);t&&e%s==0&&(yield new Promise(o=>setTimeout(o,1)))}})}render(t=!0){return(0,Bt.mG)(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(t);const e=yield this._context.startRendering();return new as(e)})}close(){return Promise.resolve()}}const cs=new class Rh extends kc{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,s){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t,e){return(0,Bt.mG)(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}};let Is=cs;function An(){return Is===cs&&Dh&&function Fc(i){Is=Ei(i)?new Cn(i):wn(i)?new Nc(i):i}(new Cn),Is}if(ai&&!ai.TONE_SILENCE_LOGGING){console.log(`%c * Tone.js ${"v"}${he} * `,"background: #000; color: #fff")}function Zo(i){return Math.pow(2,i/12)}let us=440;function Yo(i){return Math.round(qe(i))}function qe(i){return 69+12*Math.log2(i/us)}class Rc extends In{constructor(t,e,s){super(),this.defaultUnits="s",this._val=e,this._units=s,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{const s=parseInt(t,10),o="."===e?1.5:1;return 1===s?this._beatsToUnits(this._getTimeSignature())*o:this._beatsToUnits(4/s)*o},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const e=parseInt(t,10);return this._beatsToUnits(8/(3*Math.floor(e)))},regexp:/^(\d+)t$/i},tr:{method:(t,e,s)=>{let o=0;return t&&"0"!==t&&(o+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(o+=this._beatsToUnits(parseFloat(e))),s&&"0"!==s&&(o+=this._beatsToUnits(parseFloat(s)/4)),o},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Rc&&this.fromType(this._val),an(this._val))return this._noArg();if($n(this._val)&&an(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(Rs(this._val)){let t=0;for(const e in this._val)if(St(this._val[e])){const s=this._val[e];t+=new this.constructor(this.context,e).valueOf()*s}return t}if(St(this._units)){const t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}return $n(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class Sn extends Rc{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const e=new Sn(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){const s=new this.constructor(this.context,t).valueOf(),o=this.valueOf();return o+(Math.round(o/s)*s-o)*e}toNotation(){const t=this.toSeconds(),e=["1m"];for(let c=1;c<9;c++){const l=Math.pow(2,c);e.push(l+"n."),e.push(l+"n"),e.push(l+"t")}e.push("0");let s=e[0],o=new Sn(this.context,e[0]).toSeconds();return e.forEach(c=>{const l=new Sn(this.context,c).toSeconds();Math.abs(l-t)<Math.abs(o-t)&&(s=c,o=l)}),s}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let e=this.valueOf()/t;e=parseFloat(e.toFixed(4));const s=Math.floor(e/this._getTimeSignature());let o=e%1*4;e=Math.floor(e)%this._getTimeSignature();const c=o.toString();return c.length>3&&(o=parseFloat(parseFloat(c).toFixed(3))),[s,e,o].join(":")}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return Yo(this.toFrequency())}_now(){return this.context.now()}}class cn extends Sn{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return function Ep(){return us}()}static set A4(t){!function Ec(i){us=i}(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return"midi"===this.defaultUnits?t:cn.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(t,e){const o=Vp[t.toLowerCase()]+12*(parseInt(e,10)+1);return"midi"===this.defaultUnits?o:cn.mtof(o)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,s){let o=1;return t&&"0"!==t&&(o*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(o*=this._beatsToUnits(parseFloat(e))),s&&"0"!==s&&(o*=this._beatsToUnits(parseFloat(s)/4)),o}}})}transpose(t){return new cn(this.context,this.valueOf()*Zo(t))}harmonize(t){return t.map(e=>this.transpose(e))}toMidi(){return Yo(this.valueOf())}toNote(){const t=this.toFrequency(),e=Math.log2(t/cn.A4);let s=Math.round(12*e)+57;const o=Math.floor(s/12);return o<0&&(s+=-12*o),Ip[s%12]+o.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return function Rp(i){return us*Math.pow(2,(i-69)/12)}(t)}static ftom(t){return Yo(t)}}const Vp={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},Ip=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class tn extends Sn{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Ne extends In{constructor(){super();const t=Z(Ne.getDefaults(),arguments,["context"]);this.context=this.defaultContext?this.defaultContext:t.context}static getDefaults(){return{context:An()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return new Sn(this.context,t).toSeconds()}toFrequency(t){return new cn(this.context,t).toFrequency()}toTicks(t){return new tn(this.context,t).toTicks()}_getPartialProperties(t){const e=this.get();return Object.keys(e).forEach(s=>{an(t[s])&&delete e[s]}),e}get(){const t=function Fp(i){return i.constructor.getDefaults()}(this);return Object.keys(t).forEach(e=>{if(Reflect.has(this,e)){const s=this[e];St(s)&&St(s.value)&&St(s.setValueAtTime)?t[e]=s.value:s instanceof Ne?t[e]=s._getPartialProperties(t[e]):bn(s)||ze(s)||$n(s)||vs(s)?t[e]=s:delete t[e]}}),t}set(t){return Object.keys(t).forEach(e=>{Reflect.has(this,e)&&St(this[e])&&(this[e]&&St(this[e].value)&&St(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof Ne?this[e].set(t[e]):this[e]=t[e])}),this}}class Mr extends qn{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const e=this.get(t);return null!==e?e.state:this._initial}setStateAtTime(t,e,s){return Ke(e,0),this.add(Object.assign({},s,{state:t,time:e})),this}getLastState(t,e){for(let o=this._search(e);o>=0;o--){const c=this._timeline[o];if(c.state===t)return c}}getNextState(t,e){const s=this._search(e);if(-1!==s)for(let o=s;o<this._timeline.length;o++){const c=this._timeline[o];if(c.state===t)return c}}}class Kt extends Ne{constructor(){super(Z(Kt.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const t=Z(Kt.getDefaults(),arguments,["param","units","convert"]);for(gt(St(t.param)&&(Vs(t.param)||t.param instanceof Kt),"param must be an AudioParam");!Vs(t.param);)t.param=t.param._param;this._swappable=!!St(t.swappable)&&t.swappable,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new qn(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,St(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Ne.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return St(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return St(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return St(this.maxValue)&&St(this.minValue)&&Ke(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?function _t(i){return Math.pow(10,i/20)}(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&"decibels"===this.units?function Ho(i){return Math.log(i)/Math.LN10*20}(t):t}setValueAtTime(t,e){const s=this.toSeconds(e),o=this._fromType(t);return gt(isFinite(o)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(o),this.log(this.units,"setValueAtTime",t,s),this._events.add({time:s,type:"setValueAtTime",value:o}),this._param.setValueAtTime(o,s),this}getValueAtTime(t){const e=Math.max(this.toSeconds(t),0),s=this._events.getAfter(e),o=this._events.get(e);let c=this._initialValue;if(null===o)c=this._initialValue;else if("setTargetAtTime"!==o.type||null!==s&&"setValueAtTime"!==s.type)if(null===s)c=o.value;else if("linearRampToValueAtTime"===s.type||"exponentialRampToValueAtTime"===s.type){let l=o.value;if("setTargetAtTime"===o.type){const d=this._events.getBefore(o.time);l=null===d?this._initialValue:d.value}c="linearRampToValueAtTime"===s.type?this._linearInterpolate(o.time,l,s.time,s.value,e):this._exponentialInterpolate(o.time,l,s.time,s.value,e)}else c=o.value;else{const l=this._events.getBefore(o.time);let d;d=null===l?this._initialValue:l.value,"setTargetAtTime"===o.type&&(c=this._exponentialApproach(o.time,d,o.value,o.constant,e))}return this._toType(c)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){const s=this._fromType(t),o=this.toSeconds(e);return gt(isFinite(s)&&isFinite(o),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(s),this._events.add({time:o,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",t,o),this._param.linearRampToValueAtTime(s,o),this}exponentialRampToValueAtTime(t,e){let s=this._fromType(t);s=Pn(s,0)?this._minOutput:s,this._assertRange(s);const o=this.toSeconds(e);return gt(isFinite(s)&&isFinite(o),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:o,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",t,o),this._param.exponentialRampToValueAtTime(s,o),this}exponentialRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(t,s+this.toSeconds(e)),this}linearRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(t,s+this.toSeconds(e)),this}targetRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(t,s,e),this}exponentialApproachValueAtTime(t,e,s){e=this.toSeconds(e),s=this.toSeconds(s);const o=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(t,e,o),this.cancelAndHoldAtTime(e+.9*s),this.linearRampToValueAtTime(t,e+s),this}setTargetAtTime(t,e,s){const o=this._fromType(t);gt(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const c=this.toSeconds(e);return this._assertRange(o),gt(isFinite(o)&&isFinite(c),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:s,time:c,type:"setTargetAtTime",value:o}),this.log(this.units,"setTargetAtTime",t,c,s),this._param.setTargetAtTime(o,c,s),this}setValueCurveAtTime(t,e,s,o=1){s=this.toSeconds(s),e=this.toSeconds(e);const c=this._fromType(t[0])*o;this.setValueAtTime(this._toType(c),e);const l=s/(t.length-1);for(let d=1;d<t.length;d++){const f=this._fromType(t[d])*o;this.linearRampToValueAtTime(this._toType(f),e+d*l)}return this}cancelScheduledValues(t){const e=this.toSeconds(t);return gt(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){const e=this.toSeconds(t),s=this._fromType(this.getValueAtTime(e));gt(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+s);const o=this._events.get(e),c=this._events.getAfter(e);return o&&Pn(o.time,e)?c?(this._param.cancelScheduledValues(c.time),this._events.cancel(c.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):c&&(this._param.cancelScheduledValues(c.time),this._events.cancel(c.time),"linearRampToValueAtTime"===c.type?this.linearRampToValueAtTime(this._toType(s),e):"exponentialRampToValueAtTime"===c.type&&this.exponentialRampToValueAtTime(this._toType(s),e)),this._events.add({time:e,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,e),this}rampTo(t,e=.1,s){return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,s):this.linearRampTo(t,e,s),this}apply(t){const e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);const s=this._events.get(e);if(s&&"setTargetAtTime"===s.type){const o=this._events.getAfter(s.time),c=o?o.time:e+2,l=(c-e)/10;for(let d=e;d<c;d+=l)t.linearRampToValueAtTime(this.getValueAtTime(d),d)}return this._events.forEachAfter(this.context.currentTime,o=>{"cancelScheduledValues"===o.type?t.cancelScheduledValues(o.time):"setTargetAtTime"===o.type?t.setTargetAtTime(o.value,o.time,o.constant):t[o.type](o.value,o.time)}),this}setParam(t){gt(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,s,o,c){return s+(e-s)*Math.exp(-(c-t)/o)}_linearInterpolate(t,e,s,o,c){return e+(c-t)/(s-t)*(o-e)}_exponentialInterpolate(t,e,s,o,c){return e*Math.pow(o/e,(c-t)/(s-t))}}class Et extends Ne{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return St(this.input)?Vs(this.input)||this.input instanceof Kt?1:this.input.numberOfInputs:0}get numberOfOutputs(){return St(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return St(t)&&(t instanceof Et||fe(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(s=>{s.channelCount=t.channelCount,s.channelCountMode=t.channelCountMode,s.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){const t=this._getInternalNodes();gt(t.length>0,"ToneAudioNode does not have any internal nodes");const e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,s=0){return ls(this,t,e,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Bo("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,s=0){return function Ih(i,t,e=0,s=0){if(St(t))for(;t instanceof Et;)t=t.input;for(;!fe(i);)St(i.output)&&(i=i.output);Vs(t)?i.disconnect(t,e):fe(t)?i.disconnect(t,e,s):i.disconnect()}(this,t,e,s),this}chain(...t){return Vc(this,...t),this}fan(...t){return t.forEach(e=>this.connect(e)),this}dispose(){return super.dispose(),St(this.input)&&(this.input instanceof Et?this.input.dispose():fe(this.input)&&this.input.disconnect()),St(this.output)&&(this.output instanceof Et?this.output.dispose():fe(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Vc(...i){const t=i.shift();i.reduce((e,s)=>(e instanceof Et?e.connect(s):fe(e)&&ls(e,s),s),t)}function ls(i,t,e=0,s=0){for(gt(St(i),"Cannot connect from undefined node"),gt(St(t),"Cannot connect to undefined node"),(t instanceof Et||fe(t))&&gt(t.numberOfInputs>0,"Cannot connect to node with no inputs"),gt(i.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof Et||t instanceof Kt;)St(t.input)&&(t=t.input);for(;i instanceof Et;)St(i.output)&&(i=i.output);Vs(t)?i.connect(t,e):i.connect(t,e,s)}class He extends Et{constructor(){super(Z(He.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const t=Z(He.getDefaults(),arguments,["gain","units"]);this.gain=new Kt({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),le(this,"gain")}static getDefaults(){return Object.assign(Et.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Ri extends Et{constructor(t){super(t),this.onended=zt,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new He({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(e){const s=this.toSeconds(e);return-1!==this._startTime&&s>=this._startTime&&(-1===this._stopTime||s<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(Et.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:zt})}_startGain(t,e=1){gt(-1===this._startTime,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=t+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+s):this._gainNode.gain.exponentialApproachValueAtTime(e,t,s)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){gt(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();const e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.context.currentTime),e>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s="exponential"===this._curve?2*e:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==zt&&(this.onended(this),this.onended=zt,!this.context.isOffline)){const t=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(t):setTimeout(t,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),gt(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class Qo extends Ri{constructor(){super(Z(Qo.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const t=Z(Qo.getDefaults(),arguments,["offset"]);ls(this._source,this._gainNode),this.offset=new Kt({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(Ri.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Ae extends Et{constructor(){super(Z(Ae.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const t=Z(Ae.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Qo({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(Et.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,s=0){return Ic(this,t,e,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,s){return this._param.exponentialRampTo(t,e,s),this}linearRampTo(t,e,s){return this._param.linearRampTo(t,e,s),this}targetRampTo(t,e,s){return this._param.targetRampTo(t,e,s),this}exponentialApproachValueAtTime(t,e,s){return this._param.exponentialApproachValueAtTime(t,e,s),this}setTargetAtTime(t,e,s){return this._param.setTargetAtTime(t,e,s),this}setValueCurveAtTime(t,e,s,o){return this._param.setValueCurveAtTime(t,e,s,o),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,s){return this._param.rampTo(t,e,s),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function Ic(i,t,e,s){(t instanceof Kt||Vs(t)||t instanceof Ae&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof Ae&&(t.overridden=!0)),ls(i,t,e,s)}class kr extends Kt{constructor(){super(Z(kr.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new qn(1/0),this._multiplier=1;const t=Z(kr.getDefaults(),arguments,["value"]);this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Kt.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,s){e=this.toSeconds(e),this.setRampPoint(e);const o=this._fromType(t),c=this._events.get(e),l=Math.round(Math.max(1/s,1));for(let d=0;d<=l;d++){const f=s*d+e,p=this._exponentialApproach(c.time,c.value,o,s,f);this.linearRampToValueAtTime(this._toType(p),f)}return this}setValueAtTime(t,e){const s=this.toSeconds(e);super.setValueAtTime(t,e);const o=this._events.get(s),c=this._events.previousEvent(o),l=this._getTicksUntilEvent(c,s);return o.ticks=Math.max(l,0),this}linearRampToValueAtTime(t,e){const s=this.toSeconds(e);super.linearRampToValueAtTime(t,e);const o=this._events.get(s),c=this._events.previousEvent(o),l=this._getTicksUntilEvent(c,s);return o.ticks=Math.max(l,0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);const s=this._fromType(t),o=this._events.get(e),c=Math.round(Math.max(10*(e-o.time),1)),l=(e-o.time)/c;for(let d=0;d<=c;d++){const f=l*d+o.time,p=this._exponentialInterpolate(o.time,o.value,e,s,f);this.linearRampToValueAtTime(this._toType(p),f)}return this}_getTicksUntilEvent(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(an(t.ticks)){const l=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(l,t.time)}const s=this._fromType(this.getValueAtTime(t.time));let o=this._fromType(this.getValueAtTime(e));const c=this._events.get(e);return c&&c.time===e&&"setValueAtTime"===c.type&&(o=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(s+o)+t.ticks}getTicksAtTime(t){const e=this.toSeconds(t),s=this._events.get(e);return Math.max(this._getTicksUntilEvent(s,e),0)}getDurationOfTicks(t,e){const s=this.toSeconds(e),o=this.getTicksAtTime(e);return this.getTimeOfTick(o+t)-s}getTimeOfTick(t){const e=this._events.get(t,"ticks"),s=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&s&&"linearRampToValueAtTime"===s.type&&e.value!==s.value){const o=this._fromType(this.getValueAtTime(e.time)),l=(this._fromType(this.getValueAtTime(s.time))-o)/(s.time-e.time),d=Math.sqrt(Math.pow(o,2)-2*l*(e.ticks-t)),f=(-o+d)/l;return(f>0?f:(-o-d)/l)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){const s=this.toSeconds(e),o=this.toSeconds(t),c=this.getTicksAtTime(s);return this.getTicksAtTime(s+o)-c}_fromType(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class Nr extends Ae{constructor(){super(Z(Nr.getDefaults(),arguments,["value"])),this.name="TickSignal";const t=Z(Nr.getDefaults(),arguments,["value"]);this.input=this._param=new kr({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(Ae.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class $o extends Ne{constructor(){super(Z($o.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new Mr,this._tickOffset=new qn;const t=Z($o.getDefaults(),arguments,["frequency"]);this.frequency=new Nr({context:this.context,units:t.units,value:t.frequency}),le(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Ne.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){const s=this.toSeconds(t);return"started"!==this._state.getValueAtTime(s)&&(this._state.setStateAtTime("started",s),St(e)&&this.setTicksAtTime(e,s)),this}stop(t){const e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){const s=this._state.get(e);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&this._state.setStateAtTime("paused",e),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this}getTicksAtTime(t){const e=this.toSeconds(t),s=this._state.getLastState("stopped",e),o={state:"paused",time:e};this._state.add(o);let c=s,l=0;return this._state.forEachBetween(s.time,e+this.sampleTime,d=>{let f=c.time;const p=this._tickOffset.get(d.time);p&&p.time>=c.time&&(l=p.ticks,f=p.time),"started"===c.state&&"started"!==d.state&&(l+=this.frequency.getTicksAtTime(d.time)-this.frequency.getTicksAtTime(f)),c=d}),this._state.remove(o),l}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const e=this.now(),s=this.frequency.timeToTicks(t,e);this.setTicksAtTime(s,e)}getSecondsAtTime(t){t=this.toSeconds(t);const e=this._state.getLastState("stopped",t),s={state:"paused",time:t};this._state.add(s);let o=e,c=0;return this._state.forEachBetween(e.time,t+this.sampleTime,l=>{let d=o.time;const f=this._tickOffset.get(l.time);f&&f.time>=o.time&&(c=f.seconds,d=f.time),"started"===o.state&&"started"!==l.state&&(c+=l.time-d),o=l}),this._state.remove(s),c}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){const s=this._tickOffset.get(e),o=this._state.get(e),c=Math.max(s.time,o.time),l=this.frequency.getTicksAtTime(c)+t-s.ticks;return this.frequency.getTimeOfTick(l)}forEachTickBetween(t,e,s){let o=this._state.get(t);this._state.forEachBetween(t,e,l=>{o&&"started"===o.state&&"started"!==l.state&&this.forEachTickBetween(Math.max(o.time,t),l.time-this.sampleTime,s),o=l});let c=null;if(o&&"started"===o.state){const l=Math.max(o.time,t),d=this.frequency.getTicksAtTime(l),p=d-this.frequency.getTicksAtTime(o.time);let g=Math.ceil(p)-p;g=Pn(g,1)?0:g;let y=this.frequency.getTimeOfTick(d+g);for(;y<e;){try{s(y,Math.round(this.getTicksAtTime(y)))}catch(x){c=x;break}y+=this.frequency.getDurationOfTicks(1,y)}}if(c)throw c;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class ui extends Ne{constructor(){super(Z(ui.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=zt,this._lastUpdate=0,this._state=new Mr("stopped"),this._boundLoop=this._loop.bind(this);const t=Z(ui.getDefaults(),arguments,["callback","frequency"]);this.callback=t.callback,this._tickSource=new $o({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,le(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Ne.getDefaults(),{callback:zt,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){qo(this.context);const s=this.toSeconds(t);return this.log("start",s),"started"!==this._state.getValueAtTime(s)&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,e),s<this._lastUpdate&&this.emit("start",s,e)),this}stop(t){const e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){const s=this.toSeconds(e),o=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(o+t,s)}_loop(){const t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,s=>{switch(s.state){case"started":const o=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,o);break;case"stopped":0!==s.time&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time)}}),this._tickSource.forEachTickBetween(t,e,(s,o)=>{this.callback(s,o)}))}getStateAtTime(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Or.mixin(ui);class Fr extends In{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=Z(Fr.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(e=>{this._loadingCount++,this.add(e,t.urls[e],this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:zt,onload:zt,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return gt(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,0===this._loadingCount&&t&&t()}get loaded(){return Array.from(this._buffers).every(([t,e])=>e.loaded)}add(t,e,s=zt,o=zt){return $n(e)?this._buffers.set(t.toString(),new as(this.baseUrl+e,s,o)):this._buffers.set(t.toString(),new as(e,s,o)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}}class te extends tn{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class hs extends Ne{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new qn,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=t;){const e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}jo(i=>{i.draw=new hs({context:i})}),Tr(i=>{i.draw.dispose()});class li extends In{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){gt(St(t.time),"Events must have a time property"),gt(St(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new Lp(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(null!==this._root){const e=[];this._root.search(t.time,e);for(const s of e)if(s.event===t){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,e=>this.remove(e)),this}_setRoot(t){this._root=t,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{let s,o=null;if(t.getBalance()>0)if(null===t.left.right)s=t.left,s.right=t.right,o=s;else{for(s=t.left.right;null!==s.right;)s=s.right;s.parent&&(s.parent.right=s.left,o=s.parent,s.left=t.left,s.right=t.right)}else if(null===t.right.left)s=t.right,s.left=t.left,o=s;else{for(s=t.right.left;null!==s.left;)s=s.left;s.parent&&(s.parent.left=s.right,o=s.parent,s.left=t.left,s.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=s:t.parent.right=s:this._setRoot(s),o&&this._rebalance(o)}t.dispose()}_rotateLeft(t){const e=t.parent,s=t.isLeftChild(),o=t.right;o&&(t.right=o.left,o.left=t),null!==e?s?e.left=o:e.right=o:this._setRoot(o)}_rotateRight(t){const e=t.parent,s=t.isLeftChild(),o=t.left;o&&(t.left=o.right,o.right=t),null!==e?s?e.left=o:e.right=o:this._setRoot(o)}_rebalance(t){const e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(null!==this._root){const e=[];if(this._root.search(t,e),e.length>0){let s=e[0];for(let o=1;o<e.length;o++)e[o].low>s.low&&(s=e[o]);return s.event}}return null}forEach(t){if(null!==this._root){const e=[];this._root.traverse(s=>e.push(s)),e.forEach(s=>{s.event&&t(s.event)})}return this}forEachAtTime(t,e){if(null!==this._root){const s=[];this._root.search(t,s),s.forEach(o=>{o.event&&e(o.event)})}return this}forEachFrom(t,e){if(null!==this._root){const s=[];this._root.searchAfter(t,s),s.forEach(o=>{o.event&&e(o.event)})}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse(t=>t.dispose()),this._root=null,this}}class Lp{constructor(t,e,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),!(this.low>t)&&null!==this.right&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)}traverse(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)}updateHeight(){this.height=null!==this.left&&null!==this.right?Math.max(this.left.height,this.right.height)+1:null!==this.right?this.right.height+1:null!==this.left?this.left.height+1:0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Ps extends Et{constructor(){super(Z(Ps.getDefaults(),arguments,["volume"])),this.name="Volume";const t=Z(Ps.getDefaults(),arguments,["volume"]);this.input=this.output=new He({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,le(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(Et.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class ta extends Et{constructor(){super(Z(ta.getDefaults(),arguments)),this.name="Destination",this.input=new Ps({context:this.context}),this.output=new He({context:this.context}),this.volume=this.input.volume;const t=Z(ta.getDefaults(),arguments);Vc(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(Et.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),Vc(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}jo(i=>{i.destination=new ta({context:i})}),Tr(i=>{i.destination.dispose()});class Bp extends In{constructor(t){super(),this.name="TimelineValue",this._timeline=new qn({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){const e=this._timeline.get(t);return e?e.value:this._initialValue}}let ea=(()=>{class i{constructor(e,s){this.id=i._eventId++;const o=Object.assign(i.getDefaults(),s);this.transport=e,this.callback=o.callback,this._once=o.once,this.time=o.time}static getDefaults(){return{callback:zt,once:!1,time:0}}invoke(e){this.callback&&(this.callback(e),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}return i._eventId=0,i})();class Pc extends ea{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(Pc.getDefaults(),e);this.duration=new te(t.context,s.duration).valueOf(),this._interval=new te(t.context,s.interval).valueOf(),this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},ea.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvents(t){const e=this.transport.getTicksAtTime(t);e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new te(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const e=this.transport.getTicksAtTime(t);e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new te(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new te(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class Er extends Ne{constructor(){super(Z(Er.getDefaults(),arguments)),this.name="Transport",this._loop=new Bp(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new qn,this._repeatedEvents=new li,this._syncedSignals=[],this._swingAmount=0;const t=Z(Er.getDefaults(),arguments);this._ppq=t.ppq,this._clock=new ui({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),le(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(Ne.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!=0&&e%(2*this._swingTicks)!=0){const o=Math.sin(e%(2*this._swingTicks)/(2*this._swingTicks)*Math.PI)*this._swingAmount;t+=new te(this.context,2*this._swingTicks/3).toSeconds()*o}this._timeline.forEachAtTime(e,s=>s.invoke(t))}schedule(t,e){const s=new ea(this,{callback:t,time:new tn(this.context,e).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(t,e,s,o=1/0){const c=new Pc(this,{callback:t,duration:new Sn(this.context,o).toTicks(),interval:new Sn(this.context,e).toTicks(),time:new tn(this.context,s).toTicks()});return this._addEvent(c,this._repeatedEvents)}scheduleOnce(t,e){const s=new ea(this,{callback:t,once:!0,time:new tn(this.context,e).toTicks()});return this._addEvent(s,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){const e=this.toTicks(t);return this._timeline.forEachFrom(e,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(e,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(t,e)=>{e=new te(this.context,e).toSeconds(),this.emit("start",t,e)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){let s;return St(e)&&(s=this.toTicks(e)),this._clock.start(t,s),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){bn(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new Sn(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new Sn(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new te(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),e=this._clock.getTicksAtTime(t);return new te(this.context,e).toBarsBeatsSixteenths()}set position(t){const e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){const e=this.now(),s=this._clock.frequency.timeToTicks(t,e);this.ticks=s}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const e=this.now();if("started"===this.state){const s=this._clock.getTicksAtTime(e),c=e+this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,e);this.emit("stop",c),this._clock.setTicksAtTime(t,c),this.emit("start",c,this._clock.getSecondsAtTime(c))}else this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return Math.round(this._clock.getTicksAtTime(t))}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),"started"!==this.state)return 0;{const e=this.now(),s=this.getTicksAtTime(e);return this._clock.nextTickTime(t-s%t,e)}}syncSignal(t,e){if(!e){const o=this.now();if(0!==t.getValueAtTime(o)){const l=1/(60/this.bpm.getValueAtTime(o)/this.PPQ);e=t.getValueAtTime(o)/l}else e=0}const s=new He(e);return this.bpm.connect(s),s.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:s,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){const s=this._syncedSignals[e];s.signal===t&&(s.ratio.dispose(),s.signal.value=s.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Vh(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Or.mixin(Er),jo(i=>{i.transport=new Er({context:i})}),Tr(i=>{i.transport.dispose()});class Tn extends Et{constructor(t){super(t),this.input=void 0,this._state=new Mr("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=zt,this._syncedStop=zt,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Ps({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,le(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(Et.getDefaults(),{mute:!1,onstop:zt,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,s){let o=an(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(o=this._clampToCurrentTime(o),this._synced||"started"!==this._state.getValueAtTime(o))if(this.log("start",o),this._state.setStateAtTime("started",o),this._synced){const c=this._state.get(o);c&&(c.offset=this.toSeconds(Jn(e,0)),c.duration=s?this.toSeconds(s):void 0);const l=this.context.transport.schedule(d=>{this._start(d,e,s)},o);this._scheduled.push(l),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>o&&this._syncedStart(this.now(),this.context.transport.seconds)}else qo(this.context),this._start(o,e,s);else gt(wr(o,this._state.get(o).time),"Start time must be strictly greater than previous start time"),this._state.cancel(o),this._state.setStateAtTime("started",o),this.log("restart",o),this.restart(o,e,s);return this}stop(t){let e=an(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),"started"===this._state.getValueAtTime(e)||St(this._state.getNextState("started",e))){if(this.log("stop",e),this._synced){const s=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(s)}else this._stop(e);this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,s){return t=this.toSeconds(t),"started"===this._state.getValueAtTime(t)&&(this._state.cancel(t),this._restart(t,e,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(e>0){const s=this._state.get(e);if(s&&"started"===s.state&&s.time!==e){const o=e-this.toSeconds(s.time);let c;s.duration&&(c=this.toSeconds(s.duration)-o),this._start(t,this.toSeconds(s.offset)+o,c)}}},this._syncedStop=t=>{const e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));"started"===this._state.getValueAtTime(e)&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=zt,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Rr extends Ri{constructor(){super(Z(Rr.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const t=Z(Rr.getDefaults(),arguments,["url","onload"]);ls(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Kt({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new as(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Ri.getDefaults(),{url:new as,loop:!1,loopEnd:0,loopStart:0,onload:zt,onerror:zt,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,s,o=1){gt(this.buffer.loaded,"buffer is either not set or not loaded");const c=this.toSeconds(t);this._startGain(c,o),e=Jn(e,this.loop?this.loopStart:0);let l=Math.max(this.toSeconds(e),0);if(this.loop){const d=this.toSeconds(this.loopEnd)||this.buffer.duration,f=this.toSeconds(this.loopStart),p=d-f;Wo(l,d)&&(l=(l-f)%p+f),Pn(l,this.buffer.duration)&&(l=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Cr(l,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(c,l)),St(s)){let d=this.toSeconds(s);d=Math.max(d,0),this.stop(c+d)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function qs(i,t){return(0,Bt.mG)(this,void 0,void 0,function*(){const e=t/i.context.sampleRate,s=new Nc(1,e,i.context.sampleRate);return new i.constructor(Object.assign(i.get(),{frequency:2/e,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class na extends Ri{constructor(){super(Z(na.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const t=Z(na.getDefaults(),arguments,["frequency","type"]);ls(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new Kt({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new Kt({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),le(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ri.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}let Ln=(()=>{class i extends Tn{constructor(){super(Z(i.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=Z(i.getDefaults(),arguments,["frequency","type"]);this.frequency=new Ae({context:this.context,units:"frequency",value:e.frequency}),le(this,"frequency"),this.detune=new Ae({context:this.context,units:"cents",value:e.detune}),le(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&"custom"!==e.type&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(Tn.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const s=this.toSeconds(e),o=new na({context:this.context,onended:()=>this.onstop(this)});this._oscillator=o,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(s)}_stop(e){const s=this.toSeconds(e);this._oscillator&&this._oscillator.stop(s)}_restart(e){const s=this.toSeconds(e);return this.log("restart",s),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(s),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type)return i._periodicWaveCache.find(s=>s.phase===this._phase&&function Fh(i,t){return i.length===t.length&&i.every((e,s)=>t[s]===e)}(s.partials,this._partials));{const e=i._periodicWaveCache.find(s=>s.type===this._type&&s.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const s=-1!==["sine","square","sawtooth","triangle"].indexOf(e);if(0===this._phase&&s)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=e);else{const o=this._getCachedPeriodicWave();if(St(o)){const{partials:c,wave:l}=o;this._wave=l,this._partials=c,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{const[c,l]=this._getRealImaginary(e,this._phase),d=this.context.createPeriodicWave(c,l);this._wave=d,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),i._periodicWaveCache.push({imag:l,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:c,type:this._type,wave:this._wave}),i._periodicWaveCache.length>100&&i._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.type=this.partialCount&&"custom"!==this._type&&"custom"!==e?e+this.partialCount:e}get partialCount(){return this._partialCount}set partialCount(e){Ke(e,0);let s=this._type;const o=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(o&&(s=o[1]),"custom"!==this._type)this.type=0===e?s:s+e.toString();else{const c=new Float32Array(e);this._partials.forEach((l,d)=>c[d]=l),this._partials=Array.from(c),this.type=this._type}}_getRealImaginary(e,s){let c=2048;const l=new Float32Array(c),d=new Float32Array(c);let f=1;if("custom"===e){if(f=this._partials.length+1,this._partialCount=this._partials.length,c=f,0===this._partials.length)return[l,d]}else{const p=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);p?(f=parseInt(p[2],10)+1,this._partialCount=parseInt(p[2],10),e=p[1],f=Math.max(f,2),c=f):this._partialCount=0,this._partials=[]}for(let p=1;p<c;++p){const g=2/(p*Math.PI);let y;switch(e){case"sine":y=p<=f?1:0,this._partials[p-1]=y;break;case"square":y=1&p?2*g:0,this._partials[p-1]=y;break;case"sawtooth":y=g*(1&p?1:-1),this._partials[p-1]=y;break;case"triangle":y=1&p?g*g*2*(p-1>>1&1?-1:1):0,this._partials[p-1]=y;break;case"custom":y=this._partials[p-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}0!==y?(l[p]=-y*Math.sin(s*p),d[p]=y*Math.cos(s*p)):(l[p]=0,d[p]=0)}return[l,d]}_inverseFFT(e,s,o){let c=0;const l=e.length;for(let d=0;d<l;d++)c+=e[d]*Math.cos(d*o)+s[d]*Math.sin(d*o);return c}getInitialValue(){const[e,s]=this._getRealImaginary(this._type,0);let o=0;const c=2*Math.PI;for(let d=0;d<32;d++)o=Math.max(this._inverseFFT(e,s,d/32*c),o);return function Uo(i,t,e){return Math.max(Math.min(i,e),t)}(-this._inverseFFT(e,s,this._phase)/o,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return(0,Bt.mG)(this,void 0,void 0,function*(){return qs(this,e)})}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}return i._periodicWaveCache=[],i})();class sa extends Et{constructor(){super(Object.assign(Z(sa.getDefaults(),arguments,["context"])))}connect(t,e=0,s=0){return Ic(this,t,e,s),this}}class Pi extends sa{constructor(){super(Object.assign(Z(Pi.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const t=Z(Pi.getDefaults(),arguments,["mapping","length"]);bn(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):function Oc(i){return"function"==typeof i}(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(Ae.getDefaults(),{length:1024})}setMap(t,e=1024){const s=new Float32Array(e);for(let o=0,c=e;o<c;o++)s[o]=t(o/(c-1)*2-1,o);return this.curve=s,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){gt(["none","2x","4x"].some(s=>s.includes(t)),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Gp extends sa{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Pi({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class hi extends Ae{constructor(){super(Object.assign(Z(hi.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const t=Z(hi.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new He({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Ae.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Vr extends Tn{constructor(){super(Z(Vr.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new Gp({context:this.context}),this._modulationNode=new He({context:this.context});const t=Z(Vr.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Ln({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Ln({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new hi({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),le(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ln.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return(0,Bt.mG)(this,void 0,void 0,function*(){return qs(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Ir extends Tn{constructor(){super(Z(Ir.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new He({context:this.context,gain:0});const t=Z(Ir.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Ln({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new Ae({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new Ln({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new hi({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new hi({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),le(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ln.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return(0,Bt.mG)(this,void 0,void 0,function*(){return qs(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class qi extends Tn{constructor(){super(Z(qi.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new He({context:this.context,gain:0}),this._thresh=new Pi({context:this.context,mapping:e=>e<=0?-1:1});const t=Z(qi.getDefaults(),arguments,["frequency","width"]);this.width=new Ae({context:this.context,units:"audioRange",value:t.width}),this._triangle=new Ln({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),le(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Tn.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(t=1024){return(0,Bt.mG)(this,void 0,void 0,function*(){return qs(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Pr extends Tn{constructor(){super(Z(Pr.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const t=Z(Pr.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new Ae({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Ae({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,le(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ln.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(e=>e.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(e=>e.stop(t))}_restart(t){this._forEach(e=>e.restart(t))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach(e=>e.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const e=-t/2,s=t/(this._oscillators.length-1);this._forEach((o,c)=>o.detune.value=e+s*c)}}get count(){return this._oscillators.length}set count(t){if(Ke(t,1),this._oscillators.length!==t){this._forEach(e=>e.dispose()),this._oscillators=[];for(let e=0;e<t;e++){const s=new Ln({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:0===e?()=>this.onstop(this):zt});"custom"===this.type&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[e]=s}this.spread=this._spread,"started"===this.state&&this._forEach(e=>e.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((e,s)=>e.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(e=>e.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(e=>e.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(e=>e.partialCount=t),this._type=this._oscillators[0].type}asArray(t=1024){return(0,Bt.mG)(this,void 0,void 0,function*(){return qs(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}class Ze extends Tn{constructor(){super(Z(Ze.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new hi({context:this.context,value:2});const t=Z(Ze.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new qi({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Ln({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),le(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Tn.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(t=1024){return(0,Bt.mG)(this,void 0,void 0,function*(){return qs(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Ph={am:Vr,fat:Pr,fm:Ir,oscillator:Ln,pulse:qi,pwm:Ze};class qr extends Tn{constructor(){super(Z(qr.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const t=Z(qr.getDefaults(),arguments,["frequency","type"]);this.frequency=new Ae({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Ae({context:this.context,units:"cents",value:t.detune}),le(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(Ln.getDefaults(),Ir.getDefaults(),Vr.getDefaults(),Pr.getDefaults(),qi.getDefaults(),Ze.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(e=>this._sourceType===e)&&(t=this._sourceType),t+this._oscillator.type}set type(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const e=Ph[t],s=this.now();if(this._oscillator){const o=this._oscillator;o.stop(s),this.context.setTimeout(()=>o.dispose(),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")}_getOscType(t,e){return t instanceof Ph[e]}get baseType(){return this._oscillator.baseType}set baseType(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&"pulse"!==t&&"pwm"!==t&&(this._oscillator.baseType=t)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(t){this._getOscType(this._oscillator,"fat")&&ze(t)&&(this._oscillator.count=t)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(t){this._getOscType(this._oscillator,"fat")&&ze(t)&&(this._oscillator.spread=t)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&$n(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(t=1024){return(0,Bt.mG)(this,void 0,void 0,function*(){return qs(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function Bh(i,t=1/0){const e=new WeakMap;return function(s,o){Reflect.defineProperty(s,o,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(c){Ke(c,i,t),e.set(this,c)}})}}function bs(i,t=1/0){const e=new WeakMap;return function(s,o){Reflect.defineProperty(s,o,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(c){Ke(this.toSeconds(c),i,t),e.set(this,c)}})}}class di extends Tn{constructor(){super(Z(di.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const t=Z(di.getDefaults(),arguments,["url","onload"]);this._buffer=new as({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(Tn.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:zt,onerror:zt,playbackRate:1,reverse:!1})}load(t){return(0,Bt.mG)(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}_onload(t=zt){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),0===this._activeSources.size&&!this._synced&&"started"===this._state.getValueAtTime(this.now())&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,s){return super.start(t,e,s),this}_start(t,e,s){e=Jn(e,this._loop?this._loopStart:0);const o=this.toSeconds(e),c=s;s=Jn(s,Math.max(this._buffer.duration-o,0));let l=this.toSeconds(s);l/=this._playbackRate,t=this.toSeconds(t);const d=new Rr({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(t+l),this._state.setStateAtTime("stopped",t+l,{implicitEnd:!0})),this._activeSources.add(d),this._loop&&an(c)?d.start(t,o):d.start(t,o,l-this.toSeconds(this.fadeOut))}_stop(t){const e=this.toSeconds(t);this._activeSources.forEach(s=>s.stop(e))}restart(t,e,s){return super.restart(t,e,s),this}_restart(t,e,s){this._stop(t),this._start(t,e,s)}seek(t,e){const s=this.toSeconds(e);if("started"===this._state.getValueAtTime(s)){const o=this.toSeconds(t);this._stop(s),this._start(s,o)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&Ke(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&Ke(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(e=>{e.loop=t}),t)){const e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const e=this.now(),s=this._state.getNextState("stopped",e);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(o=>o.cancelStop())),this._activeSources.forEach(o=>{o.playbackRate.setValueAtTime(t,e)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}(0,Bt.gn)([bs(0)],di.prototype,"fadeIn",void 0),(0,Bt.gn)([bs(0)],di.prototype,"fadeOut",void 0);class ws extends Et{constructor(){super(Z(ws.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new Ae({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const t=Z(ws.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(Et.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if($n(t))return t;{let s;for(s in ra)if(ra[s][e]===t)return s;return t}}_setCurve(t,e,s){if($n(s)&&Reflect.has(ra,s)){const o=ra[s];Rs(o)?"_decayCurve"!==t&&(this[t]=o[e]):this[t]=o}else{if(!bn(s)||"_decayCurve"===t)throw new Error("Envelope: invalid curve: "+s);this[t]=s}}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._decayCurve}set decayCurve(t){gt(["linear","exponential"].some(e=>e===t),`Invalid envelope curve: ${t}`),this._decayCurve=t}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);let o=this.toSeconds(this.attack);const c=this.toSeconds(this.decay),l=this.getValueAtTime(t);if(l>0&&(o=(1-l)/(1/o)),o<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,o,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,o,t);else{this._sig.cancelAndHoldAtTime(t);let d=this._attackCurve;for(let f=1;f<d.length;f++)if(d[f-1]<=l&&l<=d[f]){d=this._attackCurve.slice(f),d[0]=l;break}this._sig.setValueCurveAtTime(d,t,o,e)}if(c&&this.sustain<1){const d=e*this.sustain,f=t+o;this.log("decay",f),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(d,c+f):this._sig.exponentialApproachValueAtTime(d,f,c)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const e=this.getValueAtTime(t);if(e>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,t):"linear"===this._releaseCurve?this._sig.linearRampTo(0,s,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,s,t):(gt(bn(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,s,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,s=1){return e=this.toSeconds(e),this.triggerAttack(e,s),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,s=0){return Ic(this,t,e,s),this}asArray(t=1024){return(0,Bt.mG)(this,void 0,void 0,function*(){const e=t/this.context.sampleRate,s=new Nc(1,e,this.context.sampleRate),o=this.toSeconds(this.attack)+this.toSeconds(this.decay),c=o+this.toSeconds(this.release),l=.1*c,d=c+l,f=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/d,decay:e*this.toSeconds(this.decay)/d,release:e*this.toSeconds(this.release)/d,context:s}));return f._sig.toDestination(),f.triggerAttackRelease(e*(o+l)/d,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}(0,Bt.gn)([bs(0)],ws.prototype,"attack",void 0),(0,Bt.gn)([bs(0)],ws.prototype,"decay",void 0),(0,Bt.gn)([Bh(0,1)],ws.prototype,"sustain",void 0),(0,Bt.gn)([bs(0)],ws.prototype,"release",void 0);const ra=(()=>{let t,e;const s=[];for(t=0;t<128;t++)s[t]=Math.sin(t/127*(Math.PI/2));const o=[];for(t=0;t<127;t++){e=t/127;const x=Math.sin(e*(2*Math.PI)*6.4-Math.PI/2)+1;o[t]=x/10+.83*e}o[127]=1;const l=[];for(t=0;t<128;t++)l[t]=Math.ceil(t/127*5)/5;const f=[];for(t=0;t<128;t++)e=t/127,f[t]=.5*(1-Math.cos(Math.PI*e));const p=[];for(t=0;t<128;t++){e=t/127;const x=4*Math.pow(e,3)+.2,A=Math.cos(x*Math.PI*2*e);p[t]=Math.abs(A*(1-e))}function g(x){const A=new Array(x.length);for(let w=0;w<x.length;w++)A[w]=1-x[w];return A}return{bounce:{In:g(p),Out:p},cosine:{In:s,Out:function y(x){return x.slice(0).reverse()}(s)},exponential:"exponential",linear:"linear",ripple:{In:o,Out:g(o)},sine:{In:f,Out:g(f)},step:{In:l,Out:g(l)}}})();class fi extends Et{constructor(){super(Z(fi.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const t=Z(fi.getDefaults(),arguments);this._volume=this.output=new Ps({context:this.context,volume:t.volume}),this.volume=this._volume.volume,le(this,"volume")}static getDefaults(){return Object.assign(Et.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){const s=this["_original_"+t]=this[t];this[t]=(...o)=>{const l=this.context.transport.schedule(d=>{o[e]=d,s.apply(this,o)},o[e]);this._scheduledEvents.push(l)}}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(t,e,s,o){const c=this.toSeconds(s),l=this.toSeconds(e);return this.triggerAttack(t,c,o),this.triggerRelease(c+l),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class pi extends fi{constructor(){super(Z(pi.getDefaults(),arguments));const t=Z(pi.getDefaults(),arguments);this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(fi.getDefaults(),{detune:0,onsilence:zt,portamento:0})}triggerAttack(t,e,s=1){this.log("triggerAttack",t,e,s);const o=this.toSeconds(e);return this._triggerEnvelopeAttack(o,s),this.setNote(t,o),this}triggerRelease(t){this.log("triggerRelease",t);const e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){const s=this.toSeconds(e),o=t instanceof cn?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const c=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(o,c,s)}else this.frequency.setValueAtTime(o,s);return this}}(0,Bt.gn)([bs(0)],pi.prototype,"portamento",void 0);class Zc extends ws{constructor(){super(Z(Zc.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new He({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Lr extends pi{constructor(){super(Z(Lr.getDefaults(),arguments)),this.name="Synth";const t=Z(Lr.getDefaults(),arguments);this.oscillator=new qr(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Zc(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),le(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(pi.getDefaults(),{envelope:Object.assign(ci(ws.getDefaults(),Object.keys(Et.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(ci(qr.getDefaults(),[...Object.keys(Tn.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain){const s=this.toSeconds(this.envelope.attack),o=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+s+o)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Gr extends Lr{constructor(){super(Z(Gr.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const t=Z(Gr.getDefaults(),arguments);this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,le(this,["oscillator","envelope"])}static getDefaults(){return Xn(pi.getDefaults(),Lr.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){const s=this.toSeconds(e),o=this.toFrequency(t instanceof cn?t.toFrequency():t);return this.oscillator.frequency.setValueAtTime(o*this.octaves,s),this.oscillator.frequency.exponentialRampToValueAtTime(o,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}(0,Bt.gn)([Bh(0)],Gr.prototype,"octaves",void 0),(0,Bt.gn)([bs(0)],Gr.prototype,"pitchDecay",void 0);const eu=new Set;function aa(i){eu.add(i)}function zh(i,t){eu.add(`registerProcessor("${i}", ${t})`)}aa('\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n'),aa("\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n"),aa("\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n"),zh("feedback-comb-filter",'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');class Li extends fi{constructor(){super(Z(Li.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const t=Z(Li.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),e={};Object.keys(t.urls).forEach(s=>{const o=parseInt(s,10);if(gt(Fi(s)||ze(o)&&isFinite(o),`url key is neither a note or midi pitch: ${s}`),Fi(s)){const c=new cn(this.context,s).toMidi();e[c]=t.urls[s]}else ze(o)&&isFinite(o)&&(e[o]=t.urls[o])}),this._buffers=new Fr({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(fi.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:zt,onerror:zt,release:.1,urls:{}})}_findClosest(t){let s=0;for(;s<96;){if(this._buffers.has(t+s))return-s;if(this._buffers.has(t-s))return s;s++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,s=1){return this.log("triggerAttack",t,e,s),Array.isArray(t)||(t=[t]),t.forEach(o=>{const c=qe(new cn(this.context,o).toFrequency()),l=Math.round(c),d=c-l,f=this._findClosest(l),g=this._buffers.get(l-f),y=Zo(f+d),x=new Rr({url:g,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:y}).connect(this.output);x.start(e,0,g.duration/y,s),bn(this._activeSources.get(l))||this._activeSources.set(l,[]),this._activeSources.get(l).push(x),x.onended=()=>{if(this._activeSources&&this._activeSources.has(l)){const A=this._activeSources.get(l),w=A.indexOf(x);-1!==w&&A.splice(w,1)}}}),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach(s=>{const o=new cn(this.context,s).toMidi();if(this._activeSources.has(o)&&this._activeSources.get(o).length){const c=this._activeSources.get(o);e=this.toSeconds(e),c.forEach(l=>{l.stop(e)}),this._activeSources.set(o,[])}}),this}releaseAll(t){const e=this.toSeconds(t);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(e)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,s,o=1){const c=this.toSeconds(s);return this.triggerAttack(t,c,o),bn(e)?(gt(bn(t),"notes must be an array when duration is array"),t.forEach((l,d)=>{const f=e[Math.min(d,e.length-1)];this.triggerRelease(l,c+this.toSeconds(f))})):this.triggerRelease(t,c+this.toSeconds(e)),this}add(t,e,s){if(gt(Fi(t)||isFinite(t),`note must be a pitch or midi: ${t}`),Fi(t)){const o=new cn(this.context,t).toMidi();this._buffers.add(o,e,s)}else this._buffers.add(t,e,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(e=>e.dispose())}),this._activeSources.clear(),this}}(0,Bt.gn)([bs(0)],Li.prototype,"attack",void 0),(0,Bt.gn)([bs(0)],Li.prototype,"release",void 0);class gi extends Ne{constructor(){super(Z(gi.getDefaults(),arguments,["callback","value"])),this.name="ToneEvent",this._state=new Mr("stopped"),this._startOffset=0;const t=Z(gi.getDefaults(),arguments,["callback","value"]);this._loop=t.loop,this.callback=t.callback,this.value=t.value,this._loopStart=this.toTicks(t.loopStart),this._loopEnd=this.toTicks(t.loopEnd),this._playbackRate=t.playbackRate,this._probability=t.probability,this._humanize=t.humanize,this.mute=t.mute,this._playbackRate=t.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(Ne.getDefaults(),{callback:zt,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(t=-1){this._state.forEachFrom(t,e=>{let s;if("started"===e.state){-1!==e.id&&this.context.transport.clear(e.id);const o=e.time+Math.round(this.startOffset/this._playbackRate);if(!0===this._loop||ze(this._loop)&&this._loop>1){s=1/0,ze(this._loop)&&(s=this._loop*this._getLoopDuration());const c=this._state.getAfter(o);null!==c&&(s=Math.min(s,c.time-o)),s!==1/0&&(this._state.setStateAtTime("stopped",o+s+1,{id:-1}),s=new te(this.context,s));const l=new te(this.context,this._getLoopDuration());e.id=this.context.transport.scheduleRepeat(this._tick.bind(this),l,new te(this.context,o),s)}else e.id=this.context.transport.schedule(this._tick.bind(this),new te(this.context,o))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t}get probability(){return this._probability}set probability(t){this._probability=t}get humanize(){return this._humanize}set humanize(t){this._humanize=t}start(t){const e=this.toTicks(t);return"stopped"===this._state.getValueAtTime(e)&&(this._state.add({id:-1,state:"started",time:e}),this._rescheduleEvents(e)),this}stop(t){this.cancel(t);const e=this.toTicks(t);if("started"===this._state.getValueAtTime(e)){this._state.setStateAtTime("stopped",e,{id:-1});const s=this._state.getBefore(e);let o=e;null!==s&&(o=s.time),this._rescheduleEvents(o)}return this}cancel(t){t=Jn(t,-1/0);const e=this.toTicks(t);return this._state.forEachFrom(e,s=>{this.context.transport.clear(s.id)}),this._state.cancel(e),this}_tick(t){const e=this.context.transport.getTicksAtTime(t);if(!this.mute&&"started"===this._state.getValueAtTime(e)){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let s=.02;vs(this.humanize)||(s=this.toSeconds(this.humanize)),t+=(2*Math.random()-1)*s}this.callback(t,this.value)}}_getLoopDuration(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)}get loop(){return this._loop}set loop(t){this._loop=t,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._rescheduleEvents()}get loopEnd(){return new te(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}get loopStart(){return new te(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const t=this.context.transport.ticks,e=this._state.get(t);if(null!==e&&"started"===e.state){const s=this._getLoopDuration();return(t-e.time)%s/s}return 0}return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class Wr extends gi{constructor(){super(Z(Wr.getDefaults(),arguments,["callback","events"])),this.name="Part",this._state=new Mr("stopped"),this._events=new Set;const t=Z(Wr.getDefaults(),arguments,["callback","events"]);this._state.increasing=!0,t.events.forEach(e=>{bn(e)?this.add(e[0],e[1]):this.add(e)})}static getDefaults(){return Object.assign(gi.getDefaults(),{events:[]})}start(t,e){const s=this.toTicks(t);if("started"!==this._state.getValueAtTime(s)){e=Jn(e,this._loop?this._loopStart:0),e=Jn(e,this._loop?this._loopStart:0);const o=this.toTicks(e);this._state.add({id:-1,offset:o,state:"started",time:s}),this._forEach(c=>{this._startNote(c,s,o)})}return this}_startNote(t,e,s){e-=s,this._loop?t.startOffset>=this._loopStart&&t.startOffset<this._loopEnd?(t.startOffset<s&&(e+=this._getLoopDuration()),t.start(new te(this.context,e))):t.startOffset<this._loopStart&&t.startOffset>=s&&(t.loop=!1,t.start(new te(this.context,e))):t.startOffset>=s&&t.start(new te(this.context,e))}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t,this._forEach(e=>{e.startOffset+=this._startOffset})}stop(t){const e=this.toTicks(t);return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._forEach(s=>{s.stop(t)}),this}at(t,e){const s=new tn(this.context,t).toTicks(),o=new te(this.context,1).toSeconds(),c=this._events.values();let l=c.next();for(;!l.done;){const d=l.value;if(Math.abs(s-d.startOffset)<o)return St(e)&&(d.value=e),d;l=c.next()}return St(e)?(this.add(t,e),this.at(t)):null}add(t,e){t instanceof Object&&Reflect.has(t,"time")&&(t=(e=t).time);const s=this.toTicks(t);let o;return e instanceof gi?(o=e,o.callback=this._tick.bind(this)):o=new gi({callback:this._tick.bind(this),context:this.context,value:e}),o.startOffset=s,o.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(o),this._restartEvent(o),this}_restartEvent(t){this._state.forEach(e=>{"started"===e.state?this._startNote(t,e.time,e.offset):t.stop(new te(this.context,e.time))})}remove(t,e){return Rs(t)&&t.hasOwnProperty("time")&&(t=(e=t).time),t=this.toTicks(t),this._events.forEach(s=>{s.startOffset===t&&(an(e)||St(e)&&s.value===e)&&(this._events.delete(s),s.dispose())}),this}clear(){return this._forEach(t=>t.dispose()),this._events.clear(),this}cancel(t){return this._forEach(e=>e.cancel(t)),this._state.cancel(this.toTicks(t)),this}_forEach(t){return this._events&&this._events.forEach(e=>{e instanceof Wr?e._forEach(t):t(e)}),this}_setAll(t,e){this._forEach(s=>{s[t]=e})}_tick(t,e){this.mute||this.callback(t,e)}_testLoopBoundries(t){this._loop&&(t.startOffset<this._loopStart||t.startOffset>=this._loopEnd)?t.cancel(0):"stopped"===t.state&&this._restartEvent(t)}get probability(){return this._probability}set probability(t){this._probability=t,this._setAll("probability",t)}get humanize(){return this._humanize}set humanize(t){this._humanize=t,this._setAll("humanize",t)}get loop(){return this._loop}set loop(t){this._loop=t,this._forEach(e=>{e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.loop=t,this._testLoopBoundries(e)})}get loopEnd(){return new te(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach(e=>{e.loopEnd=t,this._testLoopBoundries(e)})}get loopStart(){return new te(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach(e=>{e.loopStart=this.loopStart,this._testLoopBoundries(e)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._setAll("playbackRate",t)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}class la extends Et{constructor(){super(Object.assign(Z(la.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const t=Z(la.getDefaults(),arguments,["pan"]);this.pan=new Kt({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",le(this,"pan")}static getDefaults(){return Object.assign(Et.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}zh("bit-crusher","\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n");class Gt extends Et{constructor(){super(Z(Gt.getDefaults(),arguments,["solo"])),this.name="Solo";const t=Z(Gt.getDefaults(),arguments,["solo"]);this.input=this.output=new He({context:this.context}),Gt._allSolos.has(this.context)||Gt._allSolos.set(this.context,new Set),Gt._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(Et.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),Gt._allSolos.get(this.context).forEach(e=>e._updateSolo())}get muted(){return 0===this.input.gain.value}_addSolo(){Gt._soloed.has(this.context)||Gt._soloed.set(this.context,new Set),Gt._soloed.get(this.context).add(this)}_removeSolo(){Gt._soloed.has(this.context)&&Gt._soloed.get(this.context).delete(this)}_isSoloed(){return Gt._soloed.has(this.context)&&Gt._soloed.get(this.context).has(this)}_noSolos(){return!Gt._soloed.has(this.context)||Gt._soloed.has(this.context)&&0===Gt._soloed.get(this.context).size}_updateSolo(){this.input.gain.value=this._isSoloed()||this._noSolos()?1:0}dispose(){return super.dispose(),Gt._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Gt._allSolos=new Map,Gt._soloed=new Map;class ma extends Et{constructor(){super(Z(ma.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const t=Z(ma.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new la({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Ps({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,le(this,["pan","volume"])}static getDefaults(){return Object.assign(Et.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class mi extends Et{constructor(){super(Z(mi.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const t=Z(mi.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Gt({solo:t.solo,context:this.context}),this._panVol=this.output=new ma({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),le(this,["pan","volume"])}static getDefaults(){return Object.assign(Et.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return mi.buses.has(t)||mi.buses.set(t,new He({context:this.context})),mi.buses.get(t)}send(t,e=0){const s=this._getBus(t),o=new He({context:this.context,units:"decibels",gain:e});return this.connect(o),o.connect(s),o}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}mi.buses=new Map;class zp extends Et{constructor(){super(...arguments),this.name="Listener",this.positionX=new Kt({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Kt({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Kt({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Kt({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Kt({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Kt({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Kt({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Kt({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Kt({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(Et.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}jo(i=>{i.listener=new zp({context:i})}),Tr(i=>{i.listener.dispose()});const Kn=An().transport;An(),An(),An(),An();const _a=An();function Kh(){return as.loaded()}let va=(()=>{class i{constructor(){this.chordProgressionActive=(0,u.tdS)(!1),this.melodyActive=(0,u.tdS)(!1),this.samplerReady=(0,u.tdS)(!1)}start(){"started"!==Kn.state&&function zo(){Is.resume()}(),this.sampler=new Li({urls:{C6:"C6.mp3","D#6":"Ds6.mp3","F#6":"Fs6.mp3",A6:"A6.mp3",C5:"C5.mp3","D#5":"Ds5.mp3","F#5":"Fs5.mp3",A5:"A5.mp3",C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3",C3:"C3.mp3","D#3":"Ds3.mp3","F#3":"Fs3.mp3",A3:"A3.mp3",C2:"C2.mp3","D#2":"Ds2.mp3","F#2":"Fs2.mp3",A2:"A2.mp3",C1:"C1.mp3","D#1":"Ds1.mp3","F#1":"Fs1.mp3",A1:"A1.mp3",A0:"A0.mp3"},release:.5,baseUrl:"https://tonejs.github.io/audio/salamander/",onload:()=>{this.samplerReady.set(!0),this.sampler.context.resume()}}).toDestination()}setProgressionActive(){this.chordProgressionActive.set(!0)}setProgressionPassive(){this.chordProgressionActive.set(!1)}setMelodyActive(){this.melodyActive.set(!0)}setMelodyPassive(){this.melodyActive.set(!1)}playNote(e,s=0,o=.3){("suspended"!==_a.state||!this.samplerReady)&&Kh().then(()=>{this.sampler.triggerAttackRelease(e,o,_a.currentTime+s)})}playMelody(e,s=.3,o=.3){this.melodyActive()||!this.samplerReady||(this.setMelodyActive(),e.forEach((c,l)=>{this.playNote(c,l*s,o)}),setTimeout(()=>{this.setMelodyPassive()},1e3*s*(e.length-1)+1e3*o))}playChord(e,s=0,o=.5){("suspended"!==_a.state||!this.samplerReady)&&Kh().then(()=>{this.sampler.triggerAttackRelease(e,o,_a.currentTime+s)})}playProgression(e,s=.3,o=.3){if(this.chordProgressionActive()||!this.samplerReady)return;this.setProgressionActive();const c=new Wr((l,d)=>{this.sampler.triggerAttackRelease(d.chord,o,l)},e.map((l,d)=>({chord:l,time:d*s}))).start(0);Kn.start(),setTimeout(()=>{c.stop(),Kn.stop(),this.setProgressionPassive()},1e3*s*(e.length-1)+1e3*o)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),xa=(()=>{class i{constructor(e){this.audioSrv=e,this.notes=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],this.solfegeList=["Do","Ra","Re","Me","Mi","Fa","Se","So","Le","La","Te","Ti"],this.octaves=["0","1","2","3","4","5","6"],this.selectedNoteList=(0,u.tdS)(["C4","D4","E4","F4","G4","A4","B4"]),this.selectedSolfegeList=(0,u.tdS)(["Do","Re","Mi","Fa","So","La","Ti"]),this.selectedRandomNote=(0,u.tdS)("C"),this.selectedRootNote=(0,u.tdS)("C"),this.possibleRandomNoteIndices=(0,u.tdS)(Nt.range(this.selectedNoteList().length)),this.randomizerWorkingOctave=3,this.keyScaleDegrees=[0,2,4,5,7,9,11],this.randomizeWorkingKey()}randomizeWorkingKey(e=Nt.range(this.selectedNoteList().length),s={low:2,high:this.octaves.length-1}){const o=this.notes[Math.floor(Math.random()*this.notes.length)];this.selectedRootNote.set(o),this.selectedRootNote.mutate(c=>{}),this.selectedNoteList.set(this.getKeyNotesForOctave(o,this.randomizerWorkingOctave)),this.setRandomNote(o,s,e)}setRandomNote(e,s,o=Nt.range(this.selectedNoteList().length)){if(s.low>s.high||s.low<0||s.low>this.octaves.length-1||s.high<0||s.high>this.octaves.length-1)throw new Error("Invalid octave range!");this.possibleRandomNoteIndices.set(o);const c=this.getKey(e,this.keyScaleDegrees),l=c[o[Math.floor(Math.random()*c.length)%o.length]];this.selectedRandomNote.set(l+this.octaves[s.low+Math.floor(Math.random()*Math.min(this.octaves.length,s.high-s.low))])}getKeyNotesForOctave(e,s,o=!1){let c=o?this.getKeyChromatic(e):this.getKey(e,this.keyScaleDegrees);const l=c.map(d=>{const f=c;var p=this.notes.length;return f.forEach(g=>{this.notes.indexOf(g)<p&&(p=this.notes.indexOf(g))}),f.indexOf(d)<f.indexOf(this.notes[p])?d+this.octaves[s]:d+this.octaves[s+1]});return l.push(l[0].slice(0,-1)+this.octaves[this.octaves.indexOf(l[0].slice(-1))+1]),l}setScaleDegrees(e){this.keyScaleDegrees=e}getKey(e,s=[0,2,4,5,7,9,11]){this.notes.indexOf(e);var o=[],c=[];return s.forEach(l=>{o.push(this.notes[(this.notes.indexOf(e)+l)%this.notes.length]),c.push(this.solfegeList[l]),this.selectedSolfegeList.set(c)}),o}getKeyChromatic(e){this.notes.indexOf(e);var s=[];return Nt.range(this.solfegeList.length).forEach(o=>{s.push(this.notes[(this.notes.indexOf(e)+o)%this.notes.length])}),s}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(va))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Pu=(()=>{class i{constructor(e){this.keySrv=e,this.questions=(0,u.tdS)([]),this.state=(0,u.tdS)(Se.FirstInit),this.questionCount=20,this.activeQuestion=0,this.SessionState=Se,this.selectedKey=(0,u.Flj)(()=>this.keySrv.selectedNoteList().map(s=>s.slice(0,-1))),this.activeQuestionState={},this.canProceedToTheNextQuestion=!1,this.results={},this.correctGuess=!1}startSession(e=20){if(this.state()===Se.Active)throw new Error("Session already active");this.state.set(Se.Active),this.questionCount=e}resetSession(){this.state.set(Se.FirstInit),this.activeQuestionState={},this.canProceedToTheNextQuestion=!1,this.activeQuestion=0,this.questions.set([])}goToNextQuestion(){this.activeQuestionState.isCorrect=!this.activeQuestionState.wrongNoteIndexList,this.questions.mutate(e=>e.push(this.activeQuestionState)),this.questionCount-1>this.activeQuestion?(console.log("Active Question: ",this.activeQuestion,"\nQuestions Array: ",this.questions()),this.activeQuestionState={},this.activeQuestion=this.activeQuestion+1,this.canProceedToTheNextQuestion=!1,this.correctGuess=!1):(console.log("Active Question: ",this.activeQuestion,"\nQuestions Array: ",this.questions()),this.endSession())}endSession(){if(this.state()!==Se.Active)throw new Error("No active session to end");this.state.set(Se.AfterSession);let e=0;this.correctGuess=!1,this.questions().forEach(s=>{s.isCorrect&&e++}),this.results={correctCount:e,questionCount:this.questionCount}}guess(e,s){const o=this.selectedKey().indexOf(s),c=this.selectedKey().indexOf(e);this.activeQuestionState.correctNoteIndex||(this.activeQuestionState.correctNoteIndex=c),o===c&&(this.activeQuestionState.wrongNoteIndexList||(this.correctGuess=!0),this.canProceedToTheNextQuestion=!0),!this.canProceedToTheNextQuestion&&(this.activeQuestionState.wrongNoteIndexList?this.activeQuestionState.wrongNoteIndexList.includes(o)||this.activeQuestionState.wrongNoteIndexList.push(o):this.activeQuestionState.wrongNoteIndexList=[o])}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(xa))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Se=(()=>((Se=Se||{}).FirstInit="firstInit",Se.Active="active",Se.AfterSession="afterSession",Se))(),On=ut(7715),Ui=ut(5592),Qp=ut(7453),$p=ut(4829),Xp=ut(4564),Jp=ut(8251),Kp=ut(7400),td=ut(2714),Tt=ut(7398);let qu=(()=>{class i{constructor(e,s){this._renderer=e,this._elementRef=s,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(e,s){this._renderer.setProperty(this._elementRef.nativeElement,e,s)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.Qsj),u.Y36(u.SBq))},i.\u0275dir=u.lG2({type:i}),i})(),Fe=(()=>{class i extends qu{}return i.\u0275fac=function(){let t;return function(s){return(t||(t=u.n5z(i)))(s||i)}}(),i.\u0275dir=u.lG2({type:i,features:[u.qOj]}),i})();const ts=new u.OlP("NgValueAccessor"),tg={provide:ts,useExisting:(0,u.Gpc)(()=>Lt),multi:!0};let Lt=(()=>{class i extends Fe{writeValue(e){this.setProperty("checked",e)}}return i.\u0275fac=function(){let t;return function(s){return(t||(t=u.n5z(i)))(s||i)}}(),i.\u0275dir=u.lG2({type:i,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,s){1&e&&u.NdJ("change",function(c){return s.onChange(c.target.checked)})("blur",function(){return s.onTouched()})},features:[u._Bn([tg]),u.qOj]}),i})();const eg={provide:ts,useExisting:(0,u.Gpc)(()=>wa),multi:!0},ba=new u.OlP("CompositionEventMode");let wa=(()=>{class i extends qu{constructor(e,s,o){super(e,s),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ed(){const i=(0,pt.q)()?(0,pt.q)().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(ba,8))},i.\u0275dir=u.lG2({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,s){1&e&&u.NdJ("input",function(c){return s._handleInput(c.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(c){return s._compositionEnd(c.target.value)})},features:[u._Bn([eg]),u.qOj]}),i})();const Qe=new u.OlP("NgValidators"),Gs=new u.OlP("NgAsyncValidators");function ld(i){return null!=i}function hd(i){return(0,u.QGY)(i)?(0,On.D)(i):i}function dd(i){let t={};return i.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function Te(i,t){return t.map(e=>e(i))}function fd(i){return i.map(t=>function ln(i){return!i.validate}(t)?t:e=>t.validate(e))}function Lu(i){return null!=i?function pd(i){if(!i)return null;const t=i.filter(ld);return 0==t.length?null:function(e){return dd(Te(e,t))}}(fd(i)):null}function Gu(i){return null!=i?function Bu(i){if(!i)return null;const t=i.filter(ld);return 0==t.length?null:function(e){return function Cs(...i){const t=(0,Xp.jO)(i),{args:e,keys:s}=(0,Qp.D)(i),o=new Ui.y(c=>{const{length:l}=e;if(!l)return void c.complete();const d=new Array(l);let f=l,p=l;for(let g=0;g<l;g++){let y=!1;(0,$p.Xf)(e[g]).subscribe((0,Jp.x)(c,x=>{y||(y=!0,p--),d[g]=x},()=>f--,void 0,()=>{(!f||!y)&&(p||c.next(s?(0,td.n)(s,d):d),c.complete())}))}});return t?o.pipe((0,Kp.Z)(t)):o}(Te(e,t).map(hd)).pipe((0,Tt.U)(dd))}}(fd(i)):null}function gd(i,t){return null===i?[t]:Array.isArray(i)?[...i,t]:[i,t]}function md(i){return i._rawValidators}function Wu(i){return i._rawAsyncValidators}function Uu(i){return i?Array.isArray(i)?i:[i]:[]}function Aa(i,t){return Array.isArray(i)?i.includes(t):i===t}function _d(i,t){const e=Uu(t);return Uu(i).forEach(o=>{Aa(e,o)||e.push(o)}),e}function ju(i,t){return Uu(t).filter(e=>!Aa(i,e))}class zu{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Lu(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Gu(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class en extends zu{get formDirective(){return null}get path(){return null}}class Ws extends zu{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class yd{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let vd=(()=>{class i extends yd{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(Ws,2))},i.\u0275dir=u.lG2({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,s){2&e&&u.ekj("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[u.qOj]}),i})(),xd=(()=>{class i extends yd{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(en,10))},i.\u0275dir=u.lG2({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,s){2&e&&u.ekj("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[u.qOj]}),i})();const zr="VALID",Oa="INVALID",zi="PENDING",Hr="DISABLED";function Zu(i){return(Da(i)?i.validators:i)||null}function Yu(i,t){return(Da(t)?t.asyncValidators:i)||null}function Da(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}function Cd(i,t,e){const s=i.controls;if(!(t?Object.keys(s):s).length)throw new u.vHH(1e3,"");if(!s[e])throw new u.vHH(1001,"")}function Ad(i,t,e){i._forEachChild((s,o)=>{if(void 0===e[o])throw new u.vHH(1002,"")})}class Ma{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===zr}get invalid(){return this.status===Oa}get pending(){return this.status==zi}get disabled(){return this.status===Hr}get enabled(){return this.status!==Hr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(_d(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(_d(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(ju(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(ju(t,this._rawAsyncValidators))}hasValidator(t){return Aa(this._rawValidators,t)}hasAsyncValidator(t){return Aa(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=zi,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Hr,this.errors=null,this._forEachChild(s=>{s.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(s=>s(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=zr,this._forEachChild(s=>{s.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(s=>s(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===zr||this.status===zi)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Hr:zr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=zi,this._hasOwnPendingAsyncValidator=!0;const e=hd(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(s=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(s,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((s,o)=>s&&s._find(o),this)}getError(t,e){const s=e?this.get(e):this;return s&&s.errors?s.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?Hr:this.errors?Oa:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(zi)?zi:this._anyControlsHaveStatus(Oa)?Oa:zr}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Da(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function rg(i){return Array.isArray(i)?Lu(i):i||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function og(i){return Array.isArray(i)?Gu(i):i||null}(this._rawAsyncValidators)}}class Zr extends Ma{constructor(t,e,s){super(Zu(e),Yu(s,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,s={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,s={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){Ad(this,0,t),Object.keys(t).forEach(s=>{Cd(this,!0,s),this.controls[s].setValue(t[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(s=>{const o=this.controls[s];o&&o.patchValue(t[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((s,o)=>{s.reset(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,s)=>(t[s]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,s)=>!!s._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const s=this.controls[e];s&&t(s,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,s]of Object.entries(this.controls))if(this.contains(e)&&t(s))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,s,o)=>((s.enabled||this.disabled)&&(e[o]=s.value),e))}_reduceChildren(t,e){let s=t;return this._forEachChild((o,c)=>{s=e(s,o,c)}),s}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}class Qu extends Zr{}const Hi=new u.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>ka}),ka="always";function Zi(i,t){return[...t.path,i]}function Yr(i,t,e=ka){Qr(i,t),t.valueAccessor.writeValue(i.value),(i.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(i.disabled),function cg(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&Td(i,t)})}(i,t),function $u(i,t){const e=(s,o)=>{t.valueAccessor.writeValue(s),o&&t.viewToModelUpdate(s)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}(i,t),function ug(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&Td(i,t),"submit"!==i.updateOn&&i.markAsTouched()})}(i,t),function hn(i,t){if(t.valueAccessor.setDisabledState){const e=s=>{t.valueAccessor.setDisabledState(s)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}(i,t)}function Na(i,t,e=!0){const s=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(s),t.valueAccessor.registerOnTouched(s)),Ea(i,t),i&&(t._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function Fa(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Qr(i,t){const e=md(i);null!==t.validator?i.setValidators(gd(e,t.validator)):"function"==typeof e&&i.setValidators([e]);const s=Wu(i);null!==t.asyncValidator?i.setAsyncValidators(gd(s,t.asyncValidator)):"function"==typeof s&&i.setAsyncValidators([s]);const o=()=>i.updateValueAndValidity();Fa(t._rawValidators,o),Fa(t._rawAsyncValidators,o)}function Ea(i,t){let e=!1;if(null!==i){if(null!==t.validator){const o=md(i);if(Array.isArray(o)&&o.length>0){const c=o.filter(l=>l!==t.validator);c.length!==o.length&&(e=!0,i.setValidators(c))}}if(null!==t.asyncValidator){const o=Wu(i);if(Array.isArray(o)&&o.length>0){const c=o.filter(l=>l!==t.asyncValidator);c.length!==o.length&&(e=!0,i.setAsyncValidators(c))}}}const s=()=>{};return Fa(t._rawValidators,s),Fa(t._rawAsyncValidators,s),e}function Td(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function Md(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}function kd(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}const Jr=class extends Ma{constructor(t=null,e,s){super(Zu(e),Yu(s,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Da(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=kd(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(s=>s(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Md(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Md(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){kd(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};let Nd=(()=>{class i extends en{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Zi(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}return i.\u0275fac=function(){let t;return function(s){return(t||(t=u.n5z(i)))(s||i)}}(),i.\u0275dir=u.lG2({type:i,features:[u.qOj]}),i})(),Vd=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=u.lG2({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),i})();const _g={provide:ts,useExisting:(0,u.Gpc)(()=>n),multi:!0};let n=(()=>{class i extends Fe{writeValue(e){this.setProperty("value",e??"")}registerOnChange(e){this.onChange=s=>{e(""==s?null:parseFloat(s))}}}return i.\u0275fac=function(){let t;return function(s){return(t||(t=u.n5z(i)))(s||i)}}(),i.\u0275dir=u.lG2({type:i,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,s){1&e&&u.NdJ("input",function(c){return s.onChange(c.target.value)})("blur",function(){return s.onTouched()})},features:[u._Bn([_g]),u.qOj]}),i})(),h=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({}),i})();const k=new u.OlP("NgModelWithFormControlWarning"),W={provide:en,useExisting:(0,u.Gpc)(()=>Y)};let Y=(()=>{class i extends en{constructor(e,s,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(e),this._setAsyncValidators(s)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ea(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const s=this.form.get(e.path);return Yr(s,e,this.callSetDisabledState),s.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),s}getControl(e){return this.form.get(e.path)}removeControl(e){Na(e.control||null,e,!1),function tl(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,s){this.form.get(e.path).setValue(s)}onSubmit(e){return this.submitted=!0,function Dd(i,t){i._syncPendingControls(),t.forEach(e=>{const s=e.control;"submit"===s.updateOn&&s._pendingChange&&(e.viewToModelUpdate(s._pendingValue),s._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const s=e.control,o=this.form.get(e.path);s!==o&&(Na(s||null,e),(i=>i instanceof Jr)(o)&&(Yr(o,e,this.callSetDisabledState),e.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const s=this.form.get(e.path);(function Od(i,t){Qr(i,t)})(s,e),s.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const s=this.form.get(e.path);s&&function Xu(i,t){return Ea(i,t)}(s,e)&&s.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Qr(this.form,this),this._oldForm&&Ea(this._oldForm,this)}_checkFormPresent(){}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(Qe,10),u.Y36(Gs,10),u.Y36(Hi,8))},i.\u0275dir=u.lG2({type:i,selectors:[["","formGroup",""]],hostBindings:function(e,s){1&e&&u.NdJ("submit",function(c){return s.onSubmit(c)})("reset",function(){return s.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([W]),u.qOj,u.TTD]}),i})();const st={provide:en,useExisting:(0,u.Gpc)(()=>dt)};let dt=(()=>{class i extends Nd{constructor(e,s,o){super(),this.name=null,this._parent=e,this._setValidators(s),this._setAsyncValidators(o)}_checkParentType(){Ft(this._parent)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(en,13),u.Y36(Qe,10),u.Y36(Gs,10))},i.\u0275dir=u.lG2({type:i,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[u._Bn([st]),u.qOj]}),i})();const Ot={provide:en,useExisting:(0,u.Gpc)(()=>ft)};let ft=(()=>{class i extends en{constructor(e,s,o){super(),this.name=null,this._parent=e,this._setValidators(s),this._setAsyncValidators(o)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Zi(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){Ft(this._parent)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(en,13),u.Y36(Qe,10),u.Y36(Gs,10))},i.\u0275dir=u.lG2({type:i,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[u._Bn([Ot]),u.qOj]}),i})();function Ft(i){return!(i instanceof dt||i instanceof Y||i instanceof ft)}const Vt={provide:Ws,useExisting:(0,u.Gpc)(()=>nn)};let nn=(()=>{class i extends Ws{set isDisabled(e){}constructor(e,s,o,c,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.name=null,this.update=new u.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(s),this._setAsyncValidators(o),this.valueAccessor=function $r(i,t){if(!t)return null;let e,s,o;return Array.isArray(t),t.forEach(c=>{c.constructor===wa?e=c:function dg(i){return Object.getPrototypeOf(i.constructor)===Fe}(c)?s=c:o=c}),o||s||e||null}(0,c)}ngOnChanges(e){this._added||this._setUpControl(),function Ku(i,t){if(!i.hasOwnProperty("model"))return!1;const e=i.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return Zi(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return i._ngModelWarningSentOnce=!1,i.\u0275fac=function(e){return new(e||i)(u.Y36(en,13),u.Y36(Qe,10),u.Y36(Gs,10),u.Y36(ts,10),u.Y36(k,8))},i.\u0275dir=u.lG2({type:i,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[u._Bn([Vt]),u.qOj,u.TTD]}),i})();const sn={provide:ts,useExisting:(0,u.Gpc)(()=>fn),multi:!0};function dn(i,t){return null==i?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${i}: ${t}`.slice(0,50))}let fn=(()=>{class i extends Fe{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const o=dn(this._getOptionId(e),e);this.setProperty("value",o)}registerOnChange(e){this.onChange=s=>{this.value=this._getOptionValue(s),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const s of this._optionMap.keys())if(this._compareWith(this._optionMap.get(s),e))return s;return null}_getOptionValue(e){const s=function ge(i){return i.split(":")[0]}(e);return this._optionMap.has(s)?this._optionMap.get(s):e}}return i.\u0275fac=function(){let t;return function(s){return(t||(t=u.n5z(i)))(s||i)}}(),i.\u0275dir=u.lG2({type:i,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,s){1&e&&u.NdJ("change",function(c){return s.onChange(c.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([sn]),u.qOj]}),i})(),fs=(()=>{class i{constructor(e,s,o){this._element=e,this._renderer=s,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(dn(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(fn,9))},i.\u0275dir=u.lG2({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),i})();const Id={provide:ts,useExisting:(0,u.Gpc)(()=>yg),multi:!0};function fm(i,t){return null==i?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${i}: ${t}`.slice(0,50))}let yg=(()=>{class i extends Fe{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let s;if(this.value=e,Array.isArray(e)){const o=e.map(c=>this._getOptionId(c));s=(c,l)=>{c._setSelected(o.indexOf(l.toString())>-1)}}else s=(o,c)=>{o._setSelected(!1)};this._optionMap.forEach(s)}registerOnChange(e){this.onChange=s=>{const o=[],c=s.selectedOptions;if(void 0!==c){const l=c;for(let d=0;d<l.length;d++){const p=this._getOptionValue(l[d].value);o.push(p)}}else{const l=s.options;for(let d=0;d<l.length;d++){const f=l[d];if(f.selected){const p=this._getOptionValue(f.value);o.push(p)}}}this.value=o,e(o)}}_registerOption(e){const s=(this._idCounter++).toString();return this._optionMap.set(s,e),s}_getOptionId(e){for(const s of this._optionMap.keys())if(this._compareWith(this._optionMap.get(s)._value,e))return s;return null}_getOptionValue(e){const s=function Nm(i){return i.split(":")[0]}(e);return this._optionMap.has(s)?this._optionMap.get(s)._value:e}}return i.\u0275fac=function(){let t;return function(s){return(t||(t=u.n5z(i)))(s||i)}}(),i.\u0275dir=u.lG2({type:i,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,s){1&e&&u.NdJ("change",function(c){return s.onChange(c.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([Id]),u.qOj]}),i})(),pm=(()=>{class i{constructor(e,s,o){this._element=e,this._renderer=s,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(fm(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(fm(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(yg,9))},i.\u0275dir=u.lG2({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),i})(),Bm=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[h]}),i})();class Am extends Ma{constructor(t,e,s){super(Zu(e),Yu(s,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,s={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:s.emitEvent})}removeAt(t,e={}){let s=this._adjustIndex(t);s<0&&(s=0),this.controls[s]&&this.controls[s]._registerOnCollectionChange(()=>{}),this.controls.splice(s,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,s={}){let o=this._adjustIndex(t);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),e&&(this.controls.splice(o,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){Ad(this,0,t),t.forEach((s,o)=>{Cd(this,!1,o),this.at(o).setValue(s,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((s,o)=>{this.at(o)&&this.at(o).patchValue(s,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((s,o)=>{s.reset(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,s)=>!!s._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,s)=>{t(e,s)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}}function Sm(i){return!!i&&(void 0!==i.asyncValidators||void 0!==i.validators||void 0!==i.updateOn)}let Gm=(()=>{class i{constructor(){this.useNonNullable=!1}get nonNullable(){const e=new i;return e.useNonNullable=!0,e}group(e,s=null){const o=this._reduceControls(e);let c={};return Sm(s)?c=s:null!==s&&(c.validators=s.validator,c.asyncValidators=s.asyncValidator),new Zr(o,c)}record(e,s=null){const o=this._reduceControls(e);return new Qu(o,s)}control(e,s,o){let c={};return this.useNonNullable?(Sm(s)?c=s:(c.validators=s,c.asyncValidators=o),new Jr(e,{...c,nonNullable:!0})):new Jr(e,s,o)}array(e,s,o){const c=e.map(l=>this._createControl(l));return new Am(c,s,o)}_reduceControls(e){const s={};return Object.keys(e).forEach(o=>{s[o]=this._createControl(e[o])}),s}_createControl(e){return e instanceof Jr||e instanceof Ma?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Wm=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:k,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Hi,useValue:e.callSetDisabledState??ka}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[Bm]}),i})(),Tm=(()=>{class i{constructor(e){this.keySrv=e,this.possibleRandomNotesConfig=(0,u.tdS)([]),this.scaleConfig=(0,u.tdS)([]),this.walkModeConfig=(0,u.tdS)(Bn.ToRoot),this.octaveConfig=(0,u.tdS)({low:2,high:2}),this.chordProgressionConfig=(0,u.tdS)([[]]),this.chordsWithIndex=[[]],this.presets=new Map,this.activePresetId=this.generateRandomPresetId(),this.configObj=(0,u.tdS)({name:"preset",octaveConfigLow:2,octaveConfigHigh:6,scaleConfig:[!0,!1,!0,!1,!0,!0,!1,!0,!1,!0,!1,!0],possibleRandomNotesConfig:[!0,null,!0,null,!0,!0,null,!0,null,!0,null,!0],walkMode:Bn.ToRoot,chordsProgressionConfig:[{chordNotes:[!0,!1,!1,!1,!0,!1,!1,!0,!1,!1,!1,!1]},{chordNotes:[!0,!1,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1]}],chordsProgressionRandom:!1,showChordsChromatic:!1}),(0,u.cEC)(()=>{this.configObj(),(0,u.rg0)(()=>{let s=this.configObj().scaleConfig.reduce((p,g,y)=>(g&&p.push(y),p),[]);console.log("scaleNotes",s),this.scaleConfig.set(s);let o=0,c=this.configObj().possibleRandomNotesConfig.reduce((p,g)=>(g&&p.push(o),null!==g&&o++,p),[]);console.log("possibleNotes",c),0===c[0]&&c.push(c.length),console.log("possibleNotes",c),this.possibleRandomNotesConfig.set(c);let l={low:this.configObj().octaveConfigLow,high:this.configObj().octaveConfigHigh};this.octaveConfig.set(l),this.walkModeConfig.set(this.configObj().walkMode),this.chordsWithIndex=this.configObj().chordsProgressionConfig.map(p=>p.chordNotes.reduce((g,y,x)=>(y&&g.push(x),g),[])),console.log(this.chordsWithIndex);let d=this.keySrv.getKeyNotesForOctave(this.keySrv.selectedRootNote(),3,!0),f=this.chordsWithIndex.map(p=>p.map(g=>d[g]));this.chordProgressionConfig.set(f),console.log(f)})}),(0,u.cEC)(()=>{this.keySrv.selectedRootNote(),(0,u.rg0)(()=>{let s=this.keySrv.getKeyNotesForOctave(this.keySrv.selectedRootNote(),3,!0),o=this.chordsWithIndex.map(c=>c.map(l=>s[l]));this.chordProgressionConfig.set(this.configObj().chordsProgressionRandom?this.randomizeOctaves(o):o)})})}randomizeOctaves(e,s={low:2,high:5}){return e.map(o=>o.map(c=>c.slice(0,-1)+String(this.getRandomNumber(s.low,s.high))))}getRandomNumber(e,s){return Math.floor(Math.random()*(s-e+1))+e}addNewPreset(e){const s=this.generateRandomPresetId();this.presets.set(s,e),this.activePresetId=s,console.log(Object.fromEntries(this.presets.entries()))}setActivePreset(e){this.configObj.set(this.presets.get(e)??this.configObj()),this.activePresetId=e}removePreset(){this.presets.delete(this.activePresetId),this.setActivePreset(this.presets.keys().next().value)}applyChangesToActivePreset(e,s){this.presets.set(e,s??this.configObj())}generateRandomPresetId(){return Date.now().toString()+Math.random().toString().substring(5)}}return i.\u0275fac=function(e){return new(e||i)(u.LFG(xa))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Um(i,t){if(1&i){const e=u.EpF();u.TgZ(0,"button",22),u.NdJ("click",function(){const c=u.CHM(e).$implicit,l=u.oxw();return u.KtG(l.configSrv.setActivePreset(c.key))}),u._uU(1),u.qZA()}if(2&i){const e=t.$implicit;u.xp6(1),u.Oqu(e.value.name)}}function jm(i,t){if(1&i&&(u.TgZ(0,"div"),u._UZ(1,"input",23),u.TgZ(2,"label"),u._uU(3),u.qZA()()),2&i){const e=t.index,s=u.oxw();u.xp6(1),u.Q6J("formControlName",e),u.xp6(2),u.Oqu(s.keySrv.solfegeList[e])}}function zm(i,t){if(1&i&&(u.ynx(0),u._UZ(1,"input",23),u.TgZ(2,"label"),u._uU(3),u.qZA(),u.BQk()),2&i){const e=u.oxw().index,s=u.oxw();u.xp6(1),u.Q6J("formControlName",e),u.xp6(2),u.Oqu(s.keySrv.solfegeList[e])}}function Hm(i,t){if(1&i&&(u.TgZ(0,"div"),u.YNc(1,zm,4,2,"ng-container",24),u.qZA()),2&i){const e=t.index,s=u.oxw();u.xp6(1),u.Q6J("ngIf",s.scaleConfigFormArray.controls[e].value)}}function Zm(i,t){if(1&i&&(u.ynx(0),u._UZ(1,"input",23),u.TgZ(2,"label"),u._uU(3),u.qZA(),u.BQk()),2&i){const e=u.oxw().index,s=u.oxw(2);u.xp6(1),u.Q6J("formControlName",e),u.xp6(1),u.ekj("not-in-key",!s.scaleConfigFormArray.controls[e].value),u.xp6(1),u.Oqu(s.keySrv.solfegeList[e])}}function Ym(i,t){if(1&i&&(u.TgZ(0,"div"),u.YNc(1,Zm,4,4,"ng-container",24),u.qZA()),2&i){const e=t.index,s=u.oxw(2);u.xp6(1),u.Q6J("ngIf",s.configForm.controls.showChordsChromatic.value||s.scaleConfigFormArray.controls[e].value)}}function Qm(i,t){if(1&i){const e=u.EpF();u.TgZ(0,"button",22),u.NdJ("click",function(){u.CHM(e);const o=u.oxw().index,c=u.oxw();return u.KtG(c.removeNestedFormGroup(o))}),u._uU(1,"Delete"),u.qZA()}}function $m(i,t){if(1&i&&(u.TgZ(0,"div")(1,"div",25)(2,"div",26),u.YNc(3,Ym,2,1,"div",17),u.qZA()(),u.YNc(4,Qm,2,0,"button",27),u.qZA()),2&i){const e=t.index,s=u.oxw();u.xp6(1),u.Q6J("formGroupName",e),u.xp6(2),u.Q6J("ngForOf",s.chordNotes.controls),u.xp6(1),u.Q6J("ngIf",s.chordsProgressionConfigFormArray.controls.length>1)}}let Om=(()=>{class i{constructor(e,s,o){this.keySrv=e,this.formBuilder=s,this.configSrv=o,this.WalkMode=Bn,this.configForm=this.formBuilder.group({name:"",octaveConfigLow:"",octaveConfigHigh:"",scaleConfig:this.formBuilder.array([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]),possibleRandomNotesConfig:this.formBuilder.array([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]),walkMode:[],chordsProgressionConfig:this.formBuilder.array([this.createChordFormGroup()]),chordsProgressionRandom:[],showChordsChromatic:[]}),(0,u.cEC)(()=>{for(;0!==this.chordsProgressionConfigFormArray.controls.length;)this.removeNestedFormGroup(0);for(let c=0;c<this.configSrv.configObj().chordsProgressionConfig.length;c++)this.addNestedFormGroup();this.configForm.setValue(this.configSrv.configObj())}),this.possibleNotesSubscription=this.scaleConfigFormArray.valueChanges.subscribe(c=>{c.forEach((l,d)=>{this.possibleRandomNotesConfigArray.controls[d].setValue(!!l||null)})})}createChordFormGroup(){return this.formBuilder.group({chordNotes:this.formBuilder.array([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])})}addNestedFormGroup(){this.chordsProgressionConfigFormArray.length>10||this.chordsProgressionConfigFormArray.push(this.createChordFormGroup())}removeNestedFormGroup(e){this.configForm.get("chordsProgressionConfig").removeAt(e)}get scaleConfigFormArray(){return this.configForm.controls.scaleConfig}get possibleRandomNotesConfigArray(){return this.configForm.controls.possibleRandomNotesConfig}get chordsProgressionConfigFormArray(){return this.configForm.controls.chordsProgressionConfig}get chordNotes(){return this.chordsProgressionConfigFormArray.controls[0].get("chordNotes")}ngOnDestroy(){this.possibleNotesSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(xa),u.Y36(Gm),u.Y36(Tm))},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-configuration-panel"]],decls:61,vars:11,consts:[[3,"formGroup"],[1,"cet-config-wrapper"],[1,"cet-preset-belt"],[3,"click",4,"ngFor","ngForOf"],[1,"cet-configure-wrapper"],[1,"cet-configure-inner"],[1,"cet-scroll-wrapper"],["for","name"],["type","text","id","name","formControlName","name"],["for","octaveConfigLow"],["type","number","id","octaveConfigLow","formControlName","octaveConfigLow"],["for","octaveConfigHigh"],["type","number","id","octaveConfigHigh","formControlName","octaveConfigHigh"],["for","walk-mode"],["name","walk-mode","id","walk-mode","formControlName","walkMode"],[3,"value"],["formArrayName","scaleConfig",1,"scale-checkboxes"],[4,"ngFor","ngForOf"],["formArrayName","possibleRandomNotesConfig",1,"possible-checkboxes"],["type","checkbox","formControlName","chordsProgressionRandom"],["type","checkbox","formControlName","showChordsChromatic"],["formArrayName","chordsProgressionConfig",1,"scale-checkboxes"],[3,"click"],["type","checkbox",3,"formControlName"],[4,"ngIf"],[3,"formGroupName"],["formArrayName","chordNotes"],[3,"click",4,"ngIf"]],template:function(e,s){1&e&&(u.TgZ(0,"h2"),u._uU(1,"Presets"),u.qZA(),u.TgZ(2,"form",0)(3,"div",1)(4,"div",2),u.YNc(5,Um,2,1,"button",3),u.ALo(6,"keyvalue"),u.qZA(),u.TgZ(7,"div",4)(8,"h2"),u._uU(9,"Configure"),u.qZA(),u.TgZ(10,"div",5)(11,"div",6)(12,"div")(13,"label",7),u._uU(14,"Name:"),u.qZA(),u._UZ(15,"input",8),u.qZA(),u.TgZ(16,"div")(17,"label",9),u._uU(18,"Octave Config Low:"),u.qZA(),u._UZ(19,"input",10),u.qZA(),u.TgZ(20,"div")(21,"label",11),u._uU(22,"Octave Config High:"),u.qZA(),u._UZ(23,"input",12),u.qZA(),u.TgZ(24,"div")(25,"label",13),u._uU(26,"Walk Mode:"),u.qZA(),u.TgZ(27,"select",14)(28,"option",15),u._uU(29,"To Root"),u.qZA(),u.TgZ(30,"option",15),u._uU(31,"From Root"),u.qZA(),u.TgZ(32,"option",15),u._uU(33,"Jump to Root"),u.qZA(),u.TgZ(34,"option",15),u._uU(35,"No Walk"),u.qZA()()(),u.TgZ(36,"div")(37,"label"),u._uU(38,"Scale Config:"),u.qZA(),u.TgZ(39,"div",16),u.YNc(40,jm,4,2,"div",17),u.qZA()(),u.TgZ(41,"div")(42,"label"),u._uU(43,"Possible Random Notes:"),u.qZA(),u.TgZ(44,"div",18),u.YNc(45,Hm,2,1,"div",17),u.qZA()(),u.TgZ(46,"div")(47,"label"),u._uU(48,"Chord Progression Randomize Octaves?"),u.qZA(),u._UZ(49,"input",19),u.qZA(),u.TgZ(50,"div")(51,"label"),u._uU(52,"Show Chords Chromatic"),u.qZA(),u._UZ(53,"input",20),u.qZA(),u.TgZ(54,"div")(55,"label"),u._uU(56,"Chord Progression:"),u.qZA(),u.TgZ(57,"div",21),u.YNc(58,$m,5,3,"div",17),u.qZA()(),u.TgZ(59,"button",22),u.NdJ("click",function(){return s.addNestedFormGroup()}),u._uU(60,"Add Chord"),u.qZA()()()()()()),2&e&&(u.xp6(2),u.Q6J("formGroup",s.configForm),u.xp6(3),u.Q6J("ngForOf",u.lcZ(6,9,s.configSrv.presets)),u.xp6(23),u.s9C("value",s.WalkMode.ToRoot),u.xp6(2),u.s9C("value",s.WalkMode.FromRoot),u.xp6(2),u.s9C("value",s.WalkMode.JumpToRoot),u.xp6(2),u.s9C("value",s.WalkMode.NoWalk),u.xp6(6),u.Q6J("ngForOf",s.scaleConfigFormArray.controls),u.xp6(5),u.Q6J("ngForOf",s.scaleConfigFormArray.controls),u.xp6(13),u.Q6J("ngForOf",s.chordsProgressionConfigFormArray.controls))},dependencies:[pt.sg,pt.O5,Vd,fs,pm,wa,n,Lt,fn,vd,xd,Y,nn,dt,ft,pt.Nd],styles:["[_nghost-%COMP%]{height:100%}form[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-start;align-items:center;flex-direction:column;height:100%}.cet-config-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;flex-direction:column;width:calc(100vw - 20px);max-width:calc(100vw - 20px);gap:10px;height:100%}.check-group[_ngcontent-%COMP%], .possible-checkboxes[_ngcontent-%COMP%], .scale-checkboxes[_ngcontent-%COMP%]{display:flex;flex-direction:row}.not-in-key[_ngcontent-%COMP%]{opacity:.5}.cet-preset-belt[_ngcontent-%COMP%]{width:100%;height:57px;min-height:57px;border-block:solid #000000 3px;display:flex;flex-direction:row;align-items:center;overflow-x:auto;gap:6px;box-shadow:0 4px #000}.cet-preset-belt[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:40px;width:130px;min-width:130px;border-radius:10px}.cet-configure-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:3px;height:calc(100% - 240px)}.cet-configure-inner[_ngcontent-%COMP%]{border:3px solid #000000;box-shadow:4px 4px #000;border-radius:10px;height:100%;padding:5px}.cet-configure-inner[_ngcontent-%COMP%]   .cet-scroll-wrapper[_ngcontent-%COMP%]{overflow-y:auto;height:100%}.cet-configure-inner[_ngcontent-%COMP%]   .cet-scroll-wrapper[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:5px}"]}),i})();var Xm=ut(5994);function Jm(i,t){if(1&i){const e=u.EpF();u.ynx(0),u.TgZ(1,"button",2),u.NdJ("click",function(){u.CHM(e);const o=u.oxw();return u.KtG(o.configSrv.removePreset())}),u._uU(2,"Delete"),u.qZA(),u._UZ(3,"app-configuration-panel"),u.TgZ(4,"div",3)(5,"button",4),u.NdJ("click",function(){u.CHM(e);const o=u.oxw();return u.KtG(o.initialize())}),u._uU(6,"START"),u.qZA(),u.TgZ(7,"button",5),u.NdJ("click",function(){u.CHM(e);const o=u.oxw();return u.KtG(o.configSrv.addNewPreset(o.configComponent.configForm.value))}),u._uU(8,"Add Preset"),u.qZA(),u.TgZ(9,"button",5),u.NdJ("click",function(){u.CHM(e);const o=u.oxw();return u.KtG(o.configSrv.applyChangesToActivePreset(o.configSrv.activePresetId,o.configComponent.configForm.value))}),u._uU(10,"Apply Changes"),u.qZA()(),u.BQk()}}function Km(i,t){if(1&i){const e=u.EpF();u.TgZ(0,"button",15),u.NdJ("click",function(){const c=u.CHM(e).$implicit,l=u.oxw(2);return u.KtG(l.userGuess(c))}),u._uU(1),u.qZA()}if(2&i){const e=t.index,s=u.oxw(2);u.s9C("id","note-"+e),u.Q6J("disabled",!s.keySrv.possibleRandomNoteIndices().includes(e)),u.xp6(1),u.hij(" ",s.keySrv.selectedSolfegeList()[e%s.keySrv.selectedSolfegeList().length]," ")}}function t_(i,t){if(1&i){const e=u.EpF();u.ynx(0)(1),u._UZ(2,"app-progress-info"),u.TgZ(3,"div",6)(4,"div",7),u.YNc(5,Km,2,3,"button",8),u.qZA(),u.TgZ(6,"div",9)(7,"p"),u._uU(8),u.qZA()(),u.TgZ(9,"div",10)(10,"button",11),u.NdJ("click",function(){u.CHM(e);const o=u.oxw();return u.KtG(o.audioSrv.playNote(o.keySrv.selectedRandomNote()))}),u._uU(11," Note "),u.qZA(),u.TgZ(12,"button",12),u.NdJ("click",function(){u.CHM(e);const o=u.oxw();return u.KtG(o.audioSrv.playProgression(o.configSrv.chordProgressionConfig()))}),u._uU(13," Reference "),u.qZA(),u.TgZ(14,"button",13),u.NdJ("click",function(){u.CHM(e);const o=u.oxw();return u.KtG(o.setNewKey())}),u._uU(15,"Next"),u.qZA()(),u.TgZ(16,"button",14),u.NdJ("click",function(){u.CHM(e);const o=u.oxw();return u.KtG(o.sessionSrv.endSession())}),u._uU(17,"Give up"),u.qZA()(),u.BQk()()}if(2&i){const e=u.oxw();u.xp6(5),u.Q6J("ngForOf",e.keySrv.selectedNoteList()),u.xp6(3),u.AsE("Question ",e.sessionSrv.activeQuestion+1," of ",e.sessionSrv.questionCount,""),u.xp6(6),u.Q6J("disabled",!e.sessionSrv.canProceedToTheNextQuestion||e.audioSrv.melodyActive()||e.audioSrv.chordProgressionActive())}}function e_(i,t){if(1&i){const e=u.EpF();u.ynx(0),u._UZ(1,"app-progress-info"),u.TgZ(2,"div",16)(3,"div",17)(4,"p"),u._uU(5,"SCORE:"),u.qZA(),u.TgZ(6,"p"),u._uU(7),u.qZA()(),u.TgZ(8,"div",18)(9,"button",19),u.NdJ("click",function(){u.CHM(e);const o=u.oxw();return u.KtG(o.resetSession())}),u._uU(10,"Main Menu"),u.qZA(),u.TgZ(11,"button",20),u.NdJ("click",function(){u.CHM(e);const o=u.oxw();return u.KtG(o.resetSession())}),u._uU(12,"Restart"),u.qZA()()(),u.BQk()}if(2&i){const e=u.oxw();u.xp6(7),u.AsE(" ",e.sessionSrv.results.correctCount," / ",e.sessionSrv.results.questionCount,"")}}let Dm=(()=>{class i{constructor(e,s,o,c,l){var d=this;this.audioSrv=e,this.keySrv=s,this.sessionSrv=o,this.loadingSrv=c,this.configSrv=l,this.trainerStarted=(0,u.tdS)(!1),this.coloringActive=(0,u.tdS)(!1),this.guessFeedback=(0,u.tdS)(As.default),this.GuessState=As,this.msMelodySpeed=400,this.msAfterUserIsAllowedToClick=this.msMelodySpeed,this.SessionState=Se,(0,u.cEC)(at(function*(){d.audioSrv.samplerReady()&&(0,u.rg0)(()=>{d.loadingSrv.hideLoading(),d.playSelectedProgressionAndNote()})})),(0,u.cEC)(at(function*(){d.configSrv.chordProgressionConfig(),(0,u.rg0)(()=>{d.sessionSrv.state()===Se.Active&&d.audioSrv.samplerReady()&&d.playSelectedProgressionAndNote()})}))}ngOnInit(){this.sessionSrv.resetSession()}setNewKey(){this.keySrv.randomizeWorkingKey(this.configSrv.possibleRandomNotesConfig(),this.configSrv.octaveConfig()),this.guessFeedback.set(As.default),this.sessionSrv.goToNextQuestion()}playSelectedProgressionAndNote(){console.log(this.configSrv.chordProgressionConfig()),this.audioSrv.playProgression(this.configSrv.chordProgressionConfig()),this.audioSrv.playNote(this.keySrv.selectedRandomNote(),this.configSrv.chordProgressionConfig().length*this.msMelodySpeed/1e3+.5)}userGuess(e){if(this.coloringActive())return;const s=e.slice(0,-1),o=this.keySrv.selectedRandomNote().slice(0,-1);if(this.sessionSrv.guess(o,s),s===o){this.guessFeedback.set(As.success);const c=this.changeOctave(Number(e.slice(-1))-Number(this.keySrv.selectedRandomNote().slice(-1))),l=this.getNotesIndicesToWalkOn(c,this.configSrv.walkModeConfig()),d=this.getNotesToWalkOn(c,this.configSrv.walkModeConfig());this.audioSrv.playMelody(d,.001*this.msMelodySpeed,.001*this.msMelodySpeed),this.colorPlaying(l,this.msMelodySpeed)}else{this.guessFeedback.set(As.failure);let c=document.getElementById("note-"+this.keySrv.selectedNoteList().indexOf(e));c&&(c.classList.add("cet-failure"),setTimeout(()=>{c?.classList.remove("cet-failure")},this.msMelodySpeed))}}getNotesToWalkOn(e,s){let o;return o=e.indexOf(this.keySrv.selectedRandomNote())<e.length/2?e.slice(0,e.indexOf(this.keySrv.selectedRandomNote())+1).reverse():e.slice(e.indexOf(this.keySrv.selectedRandomNote()),e.length),this.transformResultForSelectedWalkMode(o,s)}getNotesIndicesToWalkOn(e,s){let o;return o=e.indexOf(this.keySrv.selectedRandomNote())<e.length/2?Nt.range(e.indexOf(this.keySrv.selectedRandomNote()),-1):Nt.range(e.indexOf(this.keySrv.selectedRandomNote()),e.length),this.transformResultForSelectedWalkMode(o,s)}transformResultForSelectedWalkMode(e,s){switch(s){case Bn.ToRoot:return e;case Bn.FromRoot:return e.reverse();case Bn.JumpToRoot:let o=[];return o.push(e[0]),e[0]!==e[e.length-1]&&o.push(e[e.length-1]),o;case Bn.NoWalk:return[e[0]];default:return e}}colorPlaying(e,s){this.coloringActive()||(this.coloringActive.set(!0),e.forEach((o,c)=>{let l=document.getElementById("note-"+o);l&&setTimeout(()=>{l?.classList.add("cet-playing"),setTimeout(()=>{l?.classList.remove("cet-playing")},s)},s*c)}),setTimeout(()=>{this.coloringActive.set(!1)},e.length*s+this.msAfterUserIsAllowedToClick))}changeOctave(e){return this.keySrv.selectedNoteList().map(c=>{const d=Number(c.slice(-1))-e;return c.slice(0,-1)+d})}initialize(){this.configSrv.configObj.set(this.configComponent.configForm.value),this.loadingSrv.showLoading(),setTimeout(()=>{this.audioSrv.start(),this.keySrv.setScaleDegrees(this.configSrv.scaleConfig()),this.keySrv.randomizeWorkingKey(this.configSrv.possibleRandomNotesConfig(),this.configSrv.octaveConfig()),this.sessionSrv.startSession(10),this.trainerStarted.set(!0)},1e3)}resetSession(){this.sessionSrv.resetSession(),this.audioSrv.samplerReady.set(!1)}ngOnDestroy(){this.audioSrv.samplerReady.set(!1)}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(va),u.Y36(xa),u.Y36(Pu),u.Y36(Xm.b),u.Y36(Tm))},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-functional-trainer"]],viewQuery:function(e,s){if(1&e&&u.Gf(Om,5),2&e){let o;u.iGM(o=u.CRH())&&(s.configComponent=o.first)}},decls:4,vars:3,consts:[[1,"cet-functional-wrapper"],[4,"ngIf"],[1,"cet-button-remove",3,"click"],[1,"cet-start-wrapper"],[1,"cet-large-button","cet-important-button",3,"click"],[1,"cet-large-button",3,"click"],[1,"cet-controls-wrapper"],[1,"cet-scale"],["class","cet-note",3,"disabled","id","click",4,"ngFor","ngForOf"],[1,"cet-question-belt"],[1,"cet-controls"],[1,"left",3,"click"],[1,"middle",3,"click"],[1,"right",3,"disabled","click"],[1,"cet-give-up",3,"click"],[1,"cet-note",3,"disabled","id","click"],[1,"cet-finish-wrapper"],[1,"cet-finish-belt"],[1,"cet-end-buttons-wrapper"],["routerLink","/home",1,"left",3,"click"],[1,"right",3,"click"]],template:function(e,s){1&e&&(u.TgZ(0,"div",0),u.YNc(1,Jm,11,0,"ng-container",1),u.YNc(2,t_,18,4,"ng-container",1),u.YNc(3,e_,13,2,"ng-container",1),u.qZA()),2&e&&(u.xp6(1),u.Q6J("ngIf",s.sessionSrv.state()===s.SessionState.FirstInit),u.xp6(1),u.Q6J("ngIf",s.sessionSrv.state()===s.SessionState.Active),u.xp6(1),u.Q6J("ngIf",s.sessionSrv.state()===s.SessionState.AfterSession))},styles:[".cet-playing[_ngcontent-%COMP%], .cet-playing[_ngcontent-%COMP%]:hover{background-color:#ffd66d}.cet-failure[_ngcontent-%COMP%], .cet-failure[_ngcontent-%COMP%]:hover{background-color:#ff4141}.cet-functional-wrapper[_ngcontent-%COMP%]{padding-top:10px;padding-inline:10px;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;height:calc(100% - 161px);gap:10px;position:relative}.cet-functional-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{position:absolute;top:120px}.cet-functional-wrapper[_ngcontent-%COMP%]   .cet-controls-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:flex-end;gap:20px;width:100%;height:100%;padding-bottom:30px;height:calc(100% - 130px)}.cet-scale[_ngcontent-%COMP%]{overflow-y:auto;display:flex;flex-direction:column-reverse;align-items:center;gap:3px;width:100%;gap:10px;height:100%;padding:3px}.cet-scale[_ngcontent-%COMP%]   .cet-note[_ngcontent-%COMP%]{width:100%;height:37px;min-width:unset;border-radius:10px;font-family:LexendZetta-ExtraBold;font-size:24px}.cet-controls[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;width:100%}.cet-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;height:64px;border-radius:0;box-shadow:4px 4px #000;font-size:24px}.cet-controls[_ngcontent-%COMP%]   button.left[_ngcontent-%COMP%]{z-index:1;width:100px;border-radius:10px 0 0 10px}.cet-controls[_ngcontent-%COMP%]   button.middle[_ngcontent-%COMP%]{z-index:2;border-inline:none;box-shadow:4px 4px #000}.cet-controls[_ngcontent-%COMP%]   button.right[_ngcontent-%COMP%]{z-index:3;width:100px;border-radius:0 10px 10px 0;background-color:#bb92ff}.cet-large-button[_ngcontent-%COMP%]{height:66px;padding-inline:10px;font-size:24px;border-radius:10px;max-width:130px}.cet-button-remove[_ngcontent-%COMP%]{position:absolute;right:10px;top:110px;background-color:#ff4141;height:30px}.cet-start-wrapper[_ngcontent-%COMP%]{width:95%;display:flex;flex-direction:row-reverse;justify-content:space-between;position:fixed;bottom:85px}.cet-question-belt[_ngcontent-%COMP%]{width:100%;height:33px;border-block:solid #000000 3px;display:flex;flex-direction:row;align-items:center;justify-content:center;gap:6px;box-shadow:0 4px #000}.cet-question-belt[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:LexendZetta-ExtraBold;font-size:24px}.cet-give-up[_ngcontent-%COMP%]{position:absolute;top:75px;right:13px;background-color:#ff4141;height:36px;border-radius:0}.cet-end-buttons-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%}.cet-end-buttons-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:66px;padding-inline:10px;font-size:24px;width:100%}.cet-end-buttons-wrapper[_ngcontent-%COMP%]   button.left[_ngcontent-%COMP%]{border-radius:10px 0 0 10px}.cet-end-buttons-wrapper[_ngcontent-%COMP%]   button.right[_ngcontent-%COMP%]{border-radius:0 10px 10px 0}.cet-finish-belt[_ngcontent-%COMP%]{width:100%;height:145px;border-block:solid #000000 3px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;box-shadow:0 4px #000}.cet-finish-belt[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:LexendZetta-ExtraBold;font-size:24px}.cet-finish-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;padding-block:30px}"]}),i})();var As=(()=>((As=As||{}).default="def",As.success="success",As.failure="fail",As))(),Bn=(()=>((Bn=Bn||{}).ToRoot="toRoot",Bn.FromRoot="fromRoot",Bn.JumpToRoot="jumpToRoot",Bn.NoWalk="noWalk",Bn))();const n_=[{path:"",component:Dm}];let s_=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[b.Bz.forChild(n_),b.Bz]}),i})();function i_(i,t){if(1&i&&u._UZ(0,"div",7),2&i){const e=t.$implicit;u.ekj("correct",e.isCorrect)("incorrect",!e.isCorrect)("default",void 0===e.isCorrect)}}function r_(i,t){1&i&&u._UZ(0,"div",8)}function o_(i,t){1&i&&(u.TgZ(0,"p",9),u._uU(1,"WRONG"),u.qZA())}function a_(i,t){1&i&&(u.TgZ(0,"p",10),u._uU(1,"CORRECT!"),u.qZA())}let c_=(()=>{class i{constructor(e){this.sessionSrv=e,this.remainingBoxes=(0,u.tdS)([]),this.SessionState=Se,this.remainingBoxes=(0,u.Flj)(()=>Array(this.sessionSrv.questionCount-this.sessionSrv.questions().length))}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)(u.Y36(Pu))},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-progress-info"]],decls:7,vars:4,consts:[[1,"cet-progress-info"],[1,"container"],["class","box",3,"correct","incorrect","default",4,"ngFor","ngForOf"],["class","box default",4,"ngFor","ngForOf"],[1,"cet-current-info"],["class","cet-incorrect-text",4,"ngIf"],["class","cet-correct-text",4,"ngIf"],[1,"box"],[1,"box","default"],[1,"cet-incorrect-text"],[1,"cet-correct-text"]],template:function(e,s){1&e&&(u.TgZ(0,"div",0)(1,"div",1),u.YNc(2,i_,1,6,"div",2),u.YNc(3,r_,1,0,"div",3),u.qZA(),u.TgZ(4,"div",4),u.YNc(5,o_,2,0,"p",5),u.YNc(6,a_,2,0,"p",6),u.qZA()()),2&e&&(u.xp6(2),u.Q6J("ngForOf",s.sessionSrv.questions()),u.xp6(1),u.Q6J("ngForOf",s.remainingBoxes()),u.xp6(2),u.Q6J("ngIf",s.sessionSrv.activeQuestionState.wrongNoteIndexList&&s.sessionSrv.state()===s.SessionState.Active),u.xp6(1),u.Q6J("ngIf",s.sessionSrv.correctGuess&&s.sessionSrv.state()===s.SessionState.Active))},dependencies:[pt.sg,pt.O5],styles:["[_nghost-%COMP%]{width:100%}.cet-progress-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%}.container[_ngcontent-%COMP%]{width:100%;height:53px;border-block:solid #000000 3px;display:flex;flex-direction:row;align-items:center;gap:6px;box-shadow:0 4px #000;overflow-x:auto}.box[_ngcontent-%COMP%]{width:36px;height:36px;min-width:36px;background-color:#fff;border-radius:10px;box-shadow:3px 3px #000;border:solid #000000 2px}.box.correct[_ngcontent-%COMP%]{background-color:#ffd66d}.box.incorrect[_ngcontent-%COMP%]{background-color:#ff4141}.box.default[_ngcontent-%COMP%]{background-color:#fff}.cet-current-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:30px}.cet-current-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;font-family:LexendMega-ExtraBold;justify-content:center;align-items:center;height:30px}.cet-current-info[_ngcontent-%COMP%]   .cet-incorrect-text[_ngcontent-%COMP%]{color:#ff4141;text-shadow:2px 0 #AB2B2B,-2px 0 #AB2B2B,0 2px #AB2B2B,0 -2px #AB2B2B,1px 1px #AB2B2B,-1px -1px #AB2B2B,1px -1px #AB2B2B,-1px 1px #AB2B2B}.cet-current-info[_ngcontent-%COMP%]   .cet-correct-text[_ngcontent-%COMP%]{color:#ffd66d;text-shadow:2px 0 #B4974C,-2px 0 #B4974C,0 2px #B4974C,0 -2px #B4974C,1px 1px #B4974C,-1px -1px #B4974C,1px -1px #B4974C,-1px 1px #B4974C}"]}),i})();var u_=ut(6992);let l_=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[pt.ez,s_,u_.N,Wm]}),i})();u.B6R(Dm,[pt.sg,pt.O5,b.rH,c_,Om],[])},9884:function(J,Yt,ut){!function(pt,b,Pt,at){"use strict";var u=function(K,ht,H){return{endTime:ht,insertTime:H,type:"exponentialRampToValue",value:K}},Nt=function(K,ht,H){return{endTime:ht,insertTime:H,type:"linearRampToValue",value:K}},he=function(K,ht){return{startTime:ht,type:"setValue",value:K}},Oe=function(K,ht,H){return{duration:H,startTime:ht,type:"setValueCurve",values:K}},js=function(K,ht,H){var ct=H.target;return ct+(ht-ct)*Math.exp((H.startTime-K)/H.timeConstant)},pn=function(K){return"exponentialRampToValue"===K.type},gn=function(K){return"linearRampToValue"===K.type},Gn=function(K){return pn(K)||gn(K)},$e=function(K){return"setValue"===K.type},Ee=function(K){return"setValueCurve"===K.type},es=function qt(K,ht,H,wt){var ct=K[ht];return void 0===ct?wt:Gn(ct)||$e(ct)?ct.value:Ee(ct)?ct.values[ct.values.length-1]:js(H,qt(K,ht-1,ct.startTime,wt),ct)},We=function(K,ht,H,wt,ct){return void 0===H?[wt.insertTime,ct]:Gn(H)?[H.endTime,H.value]:$e(H)?[H.startTime,H.value]:Ee(H)?[H.startTime+H.duration,H.values[H.values.length-1]]:[H.startTime,es(K,ht-1,H.startTime,ct)]},mn=function(K){return"cancelAndHold"===K.type},gs=function(K){return"cancelScheduledValues"===K.type},_e=function(K){return mn(K)||gs(K)?K.cancelTime:pn(K)||gn(K)?K.endTime:K.startTime},Wn=function(K,ht,H,wt){var At=wt.value;return H===At?At:0<H&&0<At||H<0&&At<0?H*Math.pow(At/H,(K-ht)/(wt.endTime-ht)):0},Xe=function(K,ht,H,wt){return H+(K-ht)/(wt.endTime-ht)*(wt.value-H)},Mn=function(K,ht){var ct=ht.values;return function(K,ht){var H=Math.floor(ht),wt=Math.ceil(ht);return H===wt?K[H]:(1-(ht-H))*K[H]+(1-(wt-ht))*K[wt]}(ct,(K-ht.startTime)/ht.duration*(ct.length-1))},ss=function(K){return"setTarget"===K.type},yi=function(qt){function K(ht){Pt(this,K),this._automationEvents=[],this._currenTime=0,this._defaultValue=ht}return at(K,[{key:qt,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(H){var wt=_e(H);if(mn(H)||gs(H)){var ct=this._automationEvents.findIndex(function(se){return gs(H)&&Ee(se)?se.startTime+se.duration>=wt:_e(se)>=wt}),At=this._automationEvents[ct];if(-1!==ct&&(this._automationEvents=this._automationEvents.slice(0,ct)),mn(H)){var mt=this._automationEvents[this._automationEvents.length-1];if(void 0!==At&&Gn(At)){if(void 0!==mt&&ss(mt))throw new Error("The internal list is malformed.");var vi=void 0===mt?At.insertTime:Ee(mt)?mt.startTime+mt.duration:_e(mt),zs=void 0===mt?this._defaultValue:Ee(mt)?mt.values[mt.values.length-1]:mt.value,Un=pn(At)?Wn(wt,vi,zs,At):Xe(wt,vi,zs,At),Ss=pn(At)?u(Un,wt,this._currenTime):Nt(Un,wt,this._currenTime);this._automationEvents.push(Ss)}if(void 0!==mt&&ss(mt)&&this._automationEvents.push(he(this.getValue(wt),wt)),void 0!==mt&&Ee(mt)&&mt.startTime+mt.duration>wt){var Hs=wt-mt.startTime,Xt=(mt.values.length-1)/mt.duration,jn=Math.max(2,1+Math.ceil(Hs*Xt)),ms=Hs/(jn-1)*Xt,De=mt.values.slice(0,jn);if(ms<1)for(var _n=1;_n<jn;_n+=1){var $i=ms*_n%1;De[_n]=mt.values[_n-1]*(1-$i)+mt.values[_n]*$i}this._automationEvents[this._automationEvents.length-1]=Oe(De,mt.startTime,Hs)}}}else{var Re=this._automationEvents.findIndex(function(se){return _e(se)>wt}),ae=-1===Re?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[Re-1];if(void 0!==ae&&Ee(ae)&&_e(ae)+ae.duration>wt)return!1;var Me=pn(H)?u(H.value,H.endTime,this._currenTime):gn(H)?Nt(H.value,wt,this._currenTime):H;if(-1===Re)this._automationEvents.push(Me);else{if(Ee(H)&&wt+H.duration>_e(this._automationEvents[Re]))return!1;this._automationEvents.splice(Re,0,Me)}}return!0}},{key:"flush",value:function(H){var wt=this._automationEvents.findIndex(function(mt){return _e(mt)>H});if(wt>1){var ct=this._automationEvents.slice(wt-1),At=ct[0];ss(At)&&ct.unshift(he(es(this._automationEvents,wt-2,At.startTime,this._defaultValue),At.startTime)),this._automationEvents=ct}}},{key:"getValue",value:function(H){if(0===this._automationEvents.length)return this._defaultValue;var wt=this._automationEvents.findIndex(function(De){return _e(De)>H}),ct=this._automationEvents[wt],At=(-1===wt?this._automationEvents.length:wt)-1,mt=this._automationEvents[At];if(void 0!==mt&&ss(mt)&&(void 0===ct||!Gn(ct)||ct.insertTime>H))return js(H,es(this._automationEvents,At-1,mt.startTime,this._defaultValue),mt);if(void 0!==mt&&$e(mt)&&(void 0===ct||!Gn(ct)))return mt.value;if(void 0!==mt&&Ee(mt)&&(void 0===ct||!Gn(ct)||mt.startTime+mt.duration>H))return H<mt.startTime+mt.duration?Mn(H,mt):mt.values[mt.values.length-1];if(void 0!==mt&&Gn(mt)&&(void 0===ct||!Gn(ct)))return mt.value;if(void 0!==ct&&pn(ct)){var vi=We(this._automationEvents,At,mt,ct,this._defaultValue),zs=b(vi,2);return Wn(H,zs[0],zs[1],ct)}if(void 0!==ct&&gn(ct)){var Hs=We(this._automationEvents,At,mt,ct,this._defaultValue),Xt=b(Hs,2);return Xe(H,Xt[0],Xt[1],ct)}return this._defaultValue}}]),K}(Symbol.iterator);pt.AutomationEventList=yi,pt.createCancelAndHoldAutomationEvent=function(K){return{cancelTime:K,type:"cancelAndHold"}},pt.createCancelScheduledValuesAutomationEvent=function(K){return{cancelTime:K,type:"cancelScheduledValues"}},pt.createExponentialRampToValueAutomationEvent=function(K,ht){return{endTime:ht,type:"exponentialRampToValue",value:K}},pt.createLinearRampToValueAutomationEvent=function(K,ht){return{endTime:ht,type:"linearRampToValue",value:K}},pt.createSetTargetAutomationEvent=function(K,ht,H){return{startTime:ht,target:K,timeConstant:H,type:"setTarget"}},pt.createSetValueAutomationEvent=he,pt.createSetValueCurveAutomationEvent=Oe}(Yt,ut(7424),ut(6690),ut(9728))},6990:function(J,Yt,ut){var pt;J=ut.nmd(J),function(){var b,Nt="Expected a function",Oe="__lodash_hash_undefined__",pn="__lodash_placeholder__",ht=1/0,H=9007199254740991,At=4294967295,zs=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Un="[object Arguments]",Ss="[object Array]",Xt="[object Boolean]",jn="[object Date]",De="[object Error]",_n="[object Function]",$i="[object GeneratorFunction]",Re="[object Map]",ae="[object Number]",se="[object Object]",sl="[object Promise]",Xi="[object RegExp]",zn="[object Set]",Ji="[object String]",so="[object Symbol]",Ki="[object WeakMap]",be="[object ArrayBuffer]",is="[object DataView]",tr="[object Float32Array]",xi="[object Float64Array]",io="[object Int8Array]",Pa="[object Int16Array]",qa="[object Int32Array]",La="[object Uint8Array]",Ba="[object Uint8ClampedArray]",bi="[object Uint16Array]",Zs="[object Uint32Array]",Ys=/\b__p \+= '';/g,il=/\b(__p \+=) '' \+/g,rl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Qs=/&(?:amp|lt|gt|quot|#39);/g,er=/[&<>"']/g,ol=RegExp(Qs.source),Bd=RegExp(er.source),al=/<%-([\s\S]+?)%>/g,cl=/<%([\s\S]+?)%>/g,nr=/<%=([\s\S]+?)%>/g,ee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sr=/^\w*$/,$s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wi=/[\\^$.*+?()[\]{}|]/g,ul=RegExp(wi.source),ir=/^\s+/,ro=/\s/,Gd=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Wd=/\{\n\/\* \[wrapped with (.+)\] \*/,Ud=/,? & /,jd=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ga=/[()=,{}\[\]\/\s]/,Wa=/\\(\\)?/g,zd=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ll=/\w*$/,Hd=/^[-+]0x[0-9a-f]+$/i,Zd=/^0b[01]+$/i,Yd=/^\[object .+?Constructor\]$/,Qd=/^0o[0-7]+$/i,hl=/^(?:0|[1-9]\d*)$/,$d=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,oo=/($^)/,ao=/['\n\r\u2028\u2029\\]/g,rr="\\ud800-\\udfff",dl="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",fl="\\u2700-\\u27bf",pl="a-z\\xdf-\\xf6\\xf8-\\xff",gl="A-Z\\xc0-\\xd6\\xd8-\\xde",ml="\\ufe0e\\ufe0f",_l="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",sf="["+rr+"]",yl="["+_l+"]",uo="["+dl+"]",vl="\\d+",rf="["+fl+"]",xl="["+pl+"]",bl="[^"+rr+_l+vl+fl+pl+gl+"]",ja="\\ud83c[\\udffb-\\udfff]",wl="[^"+rr+"]",za="(?:\\ud83c[\\udde6-\\uddff]){2}",Ha="[\\ud800-\\udbff][\\udc00-\\udfff]",Ci="["+gl+"]",Cl="(?:"+xl+"|"+bl+")",af="(?:"+Ci+"|"+bl+")",Al="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Sl="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Tl="(?:"+uo+"|"+ja+")?",Ol="["+ml+"]?",or=Ol+Tl+"(?:\\u200d(?:"+[wl,za,Ha].join("|")+")"+Ol+Tl+")*",hf="(?:"+[rf,za,Ha].join("|")+")"+or,df="(?:"+[wl+uo+"?",uo,za,Ha,sf].join("|")+")",ff=RegExp("['\u2019]","g"),pf=RegExp(uo,"g"),Ya=RegExp(ja+"(?="+ja+")|"+df+or,"g"),gf=RegExp([Ci+"?"+xl+"+"+Al+"(?="+[yl,Ci,"$"].join("|")+")",af+"+"+Sl+"(?="+[yl,Ci+Cl,"$"].join("|")+")",Ci+"?"+Cl+"+"+Al,Ci+"+"+Sl,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",vl,hf].join("|"),"g"),mf=RegExp("[\\u200d"+rr+dl+ml+"]"),_f=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,yf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],vf=-1,ne={};ne[tr]=ne[xi]=ne[io]=ne[Pa]=ne[qa]=ne[La]=ne[Ba]=ne[bi]=ne[Zs]=!0,ne[Un]=ne[Ss]=ne[be]=ne[Xt]=ne[is]=ne[jn]=ne[De]=ne[_n]=ne[Re]=ne[ae]=ne[se]=ne[Xi]=ne[zn]=ne[Ji]=ne[Ki]=!1;var Jt={};Jt[Un]=Jt[Ss]=Jt[be]=Jt[is]=Jt[Xt]=Jt[jn]=Jt[tr]=Jt[xi]=Jt[io]=Jt[Pa]=Jt[qa]=Jt[Re]=Jt[ae]=Jt[se]=Jt[Xi]=Jt[zn]=Jt[Ji]=Jt[so]=Jt[La]=Jt[Ba]=Jt[bi]=Jt[Zs]=!0,Jt[De]=Jt[_n]=Jt[Ki]=!1;var Cf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Af=parseFloat,ye=parseInt,Dl="object"==typeof global&&global&&global.Object===Object&&global,Sf="object"==typeof self&&self&&self.Object===Object&&self,Ve=Dl||Sf||Function("return this")(),ar=Yt&&!Yt.nodeType&&Yt,cr=ar&&J&&!J.nodeType&&J,Ml=cr&&cr.exports===ar,Qa=Ml&&Dl.process,yn=function(){try{return cr&&cr.require&&cr.require("util").types||Qa&&Qa.binding&&Qa.binding("util")}catch{}}(),kl=yn&&yn.isArrayBuffer,Nl=yn&&yn.isDate,Fl=yn&&yn.isMap,El=yn&&yn.isRegExp,Rl=yn&&yn.isSet,Vl=yn&&yn.isTypedArray;function vn(D,V,E){switch(E.length){case 0:return D.call(V);case 1:return D.call(V,E[0]);case 2:return D.call(V,E[0],E[1]);case 3:return D.call(V,E[0],E[1],E[2])}return D.apply(V,E)}function Tf(D,V,E,$){for(var Ct=-1,Rt=null==D?0:D.length;++Ct<Rt;){var Ce=D[Ct];V($,Ce,E(Ce),D)}return $}function kn(D,V){for(var E=-1,$=null==D?0:D.length;++E<$&&!1!==V(D[E],E,D););return D}function Of(D,V){for(var E=null==D?0:D.length;E--&&!1!==V(D[E],E,D););return D}function Il(D,V){for(var E=-1,$=null==D?0:D.length;++E<$;)if(!V(D[E],E,D))return!1;return!0}function Ts(D,V){for(var E=-1,$=null==D?0:D.length,Ct=0,Rt=[];++E<$;){var Ce=D[E];V(Ce,E,D)&&(Rt[Ct++]=Ce)}return Rt}function lo(D,V){return!(null==D||!D.length)&&Wt(D,V,0)>-1}function $a(D,V,E){for(var $=-1,Ct=null==D?0:D.length;++$<Ct;)if(E(V,D[$]))return!0;return!1}function ie(D,V){for(var E=-1,$=null==D?0:D.length,Ct=Array($);++E<$;)Ct[E]=V(D[E],E,D);return Ct}function Os(D,V){for(var E=-1,$=V.length,Ct=D.length;++E<$;)D[Ct+E]=V[E];return D}function Xa(D,V,E,$){var Ct=-1,Rt=null==D?0:D.length;for($&&Rt&&(E=D[++Ct]);++Ct<Rt;)E=V(E,D[Ct],Ct,D);return E}function Df(D,V,E,$){var Ct=null==D?0:D.length;for($&&Ct&&(E=D[--Ct]);Ct--;)E=V(E,D[Ct],Ct,D);return E}function Ja(D,V){for(var E=-1,$=null==D?0:D.length;++E<$;)if(V(D[E],E,D))return!0;return!1}var Mf=tc("length");function Pl(D,V,E){var $;return E(D,function(Ct,Rt,Ce){if(V(Ct,Rt,Ce))return $=Rt,!1}),$}function ho(D,V,E,$){for(var Ct=D.length,Rt=E+($?1:-1);$?Rt--:++Rt<Ct;)if(V(D[Rt],Rt,D))return Rt;return-1}function Wt(D,V,E){return V==V?function qf(D,V,E){for(var $=E-1,Ct=D.length;++$<Ct;)if(D[$]===V)return $;return-1}(D,V,E):ho(D,Ka,E)}function we(D,V,E,$){for(var Ct=E-1,Rt=D.length;++Ct<Rt;)if($(D[Ct],V))return Ct;return-1}function Ka(D){return D!=D}function ql(D,V){var E=null==D?0:D.length;return E?ur(D,V)/E:NaN}function tc(D){return function(V){return null==V?b:V[D]}}function ec(D){return function(V){return null==D?b:D[V]}}function ce(D,V,E,$,Ct){return Ct(D,function(Rt,Ce,Qt){E=$?($=!1,Rt):V(E,Rt,Ce,Qt)}),E}function ur(D,V){for(var E,$=-1,Ct=D.length;++$<Ct;){var Rt=V(D[$]);Rt!==b&&(E=E===b?Rt:E+Rt)}return E}function lr(D,V){for(var E=-1,$=Array(D);++E<D;)$[E]=V(E);return $}function Ll(D){return D&&D.slice(0,Ul(D)+1).replace(ir,"")}function xn(D){return function(V){return D(V)}}function nc(D,V){return ie(V,function(E){return D[E]})}function hr(D,V){return D.has(V)}function Bl(D,V){for(var E=-1,$=D.length;++E<$&&Wt(V,D[E],0)>-1;);return E}function sc(D,V){for(var E=D.length;E--&&Wt(V,D[E],0)>-1;);return E}var Rf=ec({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Vf=ec({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function If(D){return"\\"+Cf[D]}function Ai(D){return mf.test(D)}function ic(D){var V=-1,E=Array(D.size);return D.forEach(function($,Ct){E[++V]=[Ct,$]}),E}function Js(D,V){return function(E){return D(V(E))}}function Ds(D,V){for(var E=-1,$=D.length,Ct=0,Rt=[];++E<$;){var Ce=D[E];(Ce===V||Ce===pn)&&(D[E]=pn,Rt[Ct++]=E)}return Rt}function fo(D){var V=-1,E=Array(D.size);return D.forEach(function($){E[++V]=$}),E}function Si(D){return Ai(D)?function Lf(D){for(var V=Ya.lastIndex=0;Ya.test(D);)++V;return V}(D):Mf(D)}function Hn(D){return Ai(D)?function Bf(D){return D.match(Ya)||[]}(D):function Xs(D){return D.split("")}(D)}function Ul(D){for(var V=D.length;V--&&ro.test(D.charAt(V)););return V}var jl=ec({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),po=function D(V){var n,E=(V=null==V?Ve:po.defaults(Ve.Object(),V,po.pick(Ve,yf))).Array,$=V.Date,Ct=V.Error,Rt=V.Function,Ce=V.Math,Qt=V.Object,rc=V.RegExp,Uf=V.String,$t=V.TypeError,go=E.prototype,Ti=Qt.prototype,mo=V["__core-js_shared__"],_o=Rt.prototype.toString,Ut=Ti.hasOwnProperty,zf=0,zl=(n=/[^.]+$/.exec(mo&&mo.keys&&mo.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",yo=Ti.toString,Hf=_o.call(Qt),Zf=Ve._,Yf=rc("^"+_o.call(Ut).replace(wi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vo=Ml?V.Buffer:b,Ms=V.Symbol,xo=V.Uint8Array,Hl=vo?vo.allocUnsafe:b,bo=Js(Qt.getPrototypeOf,Qt),Zl=Qt.create,Yl=Ti.propertyIsEnumerable,wo=go.splice,Ql=Ms?Ms.isConcatSpreadable:b,fr=Ms?Ms.iterator:b,Ks=Ms?Ms.toStringTag:b,pr=function(){try{var n=us(Qt,"defineProperty");return n({},"",{}),n}catch{}}(),Qf=V.clearTimeout!==Ve.clearTimeout&&V.clearTimeout,$f=$&&$.now!==Ve.Date.now&&$.now,Xf=V.setTimeout!==Ve.setTimeout&&V.setTimeout,Co=Ce.ceil,Ao=Ce.floor,oc=Qt.getOwnPropertySymbols,Jf=vo?vo.isBuffer:b,$l=V.isFinite,Xl=go.join,Jl=Js(Qt.keys,Qt),ue=Ce.max,Ue=Ce.min,Kf=$.now,tp=V.parseInt,ac=Ce.random,ep=go.reverse,cc=us(V,"DataView"),gr=us(V,"Map"),mr=us(V,"Promise"),ti=us(V,"Set"),ei=us(V,"WeakMap"),_r=us(Qt,"create"),So=ei&&new ei,ni={},Oi=li(cc),np=li(gr),sp=li(mr),ip=li(ti),Kl=li(ei),To=Ms?Ms.prototype:b,Ie=To?To.valueOf:b,Nn=To?To.toString:b;function _(n){if(pe(n)&&!vt(n)&&!(n instanceof nt)){if(n instanceof Fn)return n;if(Ut.call(n,"__wrapped__"))return Ps(n)}return new Fn(n)}var ks=function(){function n(){}return function(r){if(!de(r))return{};if(Zl)return Zl(r);n.prototype=r;var a=new n;return n.prototype=b,a}}();function ve(){}function Fn(n,r){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=b}function nt(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=At,this.__views__=[]}function Ns(n){var r=-1,a=null==n?0:n.length;for(this.clear();++r<a;){var h=n[r];this.set(h[0],h[1])}}function jt(n){var r=-1,a=null==n?0:n.length;for(this.clear();++r<a;){var h=n[r];this.set(h[0],h[1])}}function Zn(n){var r=-1,a=null==n?0:n.length;for(this.clear();++r<a;){var h=n[r];this.set(h[0],h[1])}}function je(n){var r=-1,a=null==n?0:n.length;for(this.__data__=new Zn;++r<a;)this.add(n[r])}function Qn(n){var r=this.__data__=new jt(n);this.size=r.size}function rh(n,r){var a=vt(n),h=!a&&Ls(n),m=!a&&!h&&ds(n),v=!a&&!h&&!m&&Ui(n),C=a||h||m||v,T=C?lr(n.length,Uf):[],k=T.length;for(var q in n)(r||Ut.call(n,q))&&(!C||!("length"==q||m&&("offset"==q||"parent"==q)||v&&("buffer"==q||"byteLength"==q||"byteOffset"==q)||tn(q,k)))&&T.push(q);return T}function ys(n){var r=n.length;return r?n[wc(0,r-1)]:b}function hp(n,r){return te(fe(n),ii(r,0,n.length))}function dp(n){return te(fe(n))}function fc(n,r,a){(a!==b&&!Gt(n[r],a)||a===b&&!(r in n))&&os(n,r,a)}function yr(n,r,a){var h=n[r];(!Ut.call(n,r)||!Gt(h,a)||a===b&&!(r in n))&&os(n,r,a)}function Do(n,r){for(var a=n.length;a--;)if(Gt(n[a][0],r))return a;return-1}function ki(n,r,a,h){return Es(n,function(m,v,C){r(h,m,a(m),C)}),h}function oh(n,r){return n&&wn(r,Te(r),n)}function os(n,r,a){"__proto__"==r&&pr?pr(n,r,{configurable:!0,enumerable:!0,value:a,writable:!0}):n[r]=a}function pc(n,r){for(var a=-1,h=r.length,m=E(h),v=null==n;++a<h;)m[a]=v?b:Ca(n,r[a]);return m}function ii(n,r,a){return n==n&&(a!==b&&(n=n<=a?n:a),r!==b&&(n=n>=r?n:r)),n}function En(n,r,a,h,m,v){var C,T=1&r,k=2&r,q=4&r;if(a&&(C=m?a(n,h,m,v):a(n)),C!==b)return C;if(!de(n))return n;var L=vt(n);if(L){if(C=function wg(n){var r=n.length,a=new n.constructor(r);return r&&"string"==typeof n[0]&&Ut.call(n,"index")&&(a.index=n.index,a.input=n.input),a}(n),!T)return fe(n,C)}else{var W=qe(n),Y=W==_n||W==$i;if(ds(n))return $n(n,T);if(W==se||W==Un||Y&&!m){if(C=k||Y?{}:cn(n),!T)return k?function Nh(n,r){return wn(n,Yo(n),r)}(n,function fp(n,r){return n&&wn(r,ln(r),n)}(C,n)):function Ei(n,r){return wn(n,Ec(n),r)}(n,oh(C,n))}else{if(!Jt[W])return m?n:{};C=function Vp(n,r,a){var h=n.constructor;switch(r){case be:return Fi(n);case Xt:case jn:return new h(+n);case is:return function kp(n,r){var a=r?Fi(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.byteLength)}(n,a);case tr:case xi:case io:case Pa:case qa:case La:case Ba:case bi:case Zs:return Dh(n,a);case Re:return new h;case ae:case Ji:return new h(n);case Xi:return function Np(n){var r=new n.constructor(n.source,ll.exec(n));return r.lastIndex=n.lastIndex,r}(n);case zn:return new h;case so:return function ai(n){return Ie?Qt(Ie.call(n)):{}}(n)}}(n,W,T)}}v||(v=new Qn);var st=v.get(n);if(st)return st;v.set(n,C),Pu(n)?n.forEach(function(ft){C.add(En(ft,r,a,ft,n,v))}):Zp(n)&&n.forEach(function(ft,Ft){C.set(Ft,En(ft,r,a,Ft,n,v))});var Ot=L?b:(q?k?An:Is:k?ln:Te)(n);return kn(Ot||n,function(ft,Ft){Ot&&(ft=n[Ft=ft]),yr(C,Ft,En(ft,r,a,Ft,n,v))}),C}function gc(n,r,a){var h=a.length;if(null==n)return!h;for(n=Qt(n);h--;){var m=a[h],C=n[m];if(C===b&&!(m in n)||!(0,r[m])(C))return!1}return!0}function ah(n,r,a){if("function"!=typeof n)throw new $t(Nt);return Jo(function(){n.apply(b,a)},r)}function vr(n,r,a,h){var m=-1,v=lo,C=!0,T=n.length,k=[],q=r.length;if(!T)return k;a&&(r=ie(r,xn(a))),h?(v=$a,C=!1):r.length>=200&&(v=hr,C=!1,r=new je(r));t:for(;++m<T;){var L=n[m],W=null==a?L:a(L);if(L=h||0!==L?L:0,C&&W==W){for(var Y=q;Y--;)if(r[Y]===W)continue t;k.push(L)}else v(r,W,h)||k.push(L)}return k}_.templateSettings={escape:al,evaluate:cl,interpolate:nr,variable:"",imports:{_}},(_.prototype=ve.prototype).constructor=_,(Fn.prototype=ks(ve.prototype)).constructor=Fn,(nt.prototype=ks(ve.prototype)).constructor=nt,Ns.prototype.clear=function _s(){this.__data__=_r?_r(null):{},this.size=0},Ns.prototype.delete=function uc(n){var r=this.has(n)&&delete this.__data__[n];return this.size-=r?1:0,r},Ns.prototype.get=function lc(n){var r=this.__data__;if(_r){var a=r[n];return a===Oe?b:a}return Ut.call(r,n)?r[n]:b},Ns.prototype.has=function eh(n){var r=this.__data__;return _r?r[n]!==b:Ut.call(r,n)},Ns.prototype.set=function Di(n,r){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=_r&&r===b?Oe:r,this},jt.prototype.clear=function rp(){this.__data__=[],this.size=0},jt.prototype.delete=function hc(n){var r=this.__data__,a=Do(r,n);return!(a<0||(a==r.length-1?r.pop():wo.call(r,a,1),--this.size,0))},jt.prototype.get=function nh(n){var r=this.__data__,a=Do(r,n);return a<0?b:r[a][1]},jt.prototype.has=function sh(n){return Do(this.__data__,n)>-1},jt.prototype.set=function dc(n,r){var a=this.__data__,h=Do(a,n);return h<0?(++this.size,a.push([n,r])):a[h][1]=r,this},Zn.prototype.clear=function op(){this.size=0,this.__data__={hash:new Ns,map:new(gr||jt),string:new Ns}},Zn.prototype.delete=function Oo(n){var r=Ho(this,n).delete(n);return this.size-=r?1:0,r},Zn.prototype.get=function ih(n){return Ho(this,n).get(n)},Zn.prototype.has=function rs(n){return Ho(this,n).has(n)},Zn.prototype.set=function Mi(n,r){var a=Ho(this,n),h=a.size;return a.set(n,r),this.size+=a.size==h?0:1,this},je.prototype.add=je.prototype.push=function ap(n){return this.__data__.set(n,Oe),this},je.prototype.has=function Yn(n){return this.__data__.has(n)},Qn.prototype.clear=function cp(){this.__data__=new jt,this.size=0},Qn.prototype.delete=function up(n){var r=this.__data__,a=r.delete(n);return this.size=r.size,a},Qn.prototype.get=function si(n){return this.__data__.get(n)},Qn.prototype.has=function lp(n){return this.__data__.has(n)},Qn.prototype.set=function Fs(n,r){var a=this.__data__;if(a instanceof jt){var h=a.__data__;if(!gr||h.length<199)return h.push([n,r]),this.size=++a.size,this;a=this.__data__=new Zn(h)}return a.set(n,r),this.size=a.size,this};var Es=Fh(Rn),ch=Fh(Mo,!0);function gp(n,r){var a=!0;return Es(n,function(h,m,v){return a=!!r(h,m,v)}),a}function ri(n,r,a){for(var h=-1,m=n.length;++h<m;){var v=n[h],C=r(v);if(null!=C&&(T===b?C==C&&!On(C):a(C,T)))var T=C,k=v}return k}function uh(n,r){var a=[];return Es(n,function(h,m,v){r(h,m,v)&&a.push(h)}),a}function Pe(n,r,a,h,m){var v=-1,C=n.length;for(a||(a=Cg),m||(m=[]);++v<C;){var T=n[v];r>0&&a(T)?r>1?Pe(T,r-1,a,h,m):Os(m,T):h||(m[m.length]=T)}return m}var mc=Z(),_c=Z(!0);function Rn(n,r){return n&&mc(n,r,Te)}function Mo(n,r){return n&&_c(n,r,Te)}function ko(n,r){return Ts(r,function(a){return Kn(n[a])})}function oi(n,r){for(var a=0,h=(r=ze(r,n)).length;null!=n&&a<h;)n=n[hs(r[a++])];return a&&a==h?n:b}function yc(n,r,a){var h=r(n);return vt(n)?h:Os(h,a(n))}function Je(n){return null==n?n===b?"[object Undefined]":"[object Null]":Ks&&Ks in Qt(n)?function Ep(n){var r=Ut.call(n,Ks),a=n[Ks];try{n[Ks]=b;var h=!0}catch{}var m=yo.call(n);return h&&(r?n[Ks]=a:delete n[Ks]),m}(n):function Ic(n){return yo.call(n)}(n)}function Ni(n,r){return n>r}function _p(n,r){return null!=n&&Ut.call(n,r)}function lh(n,r){return null!=n&&r in Qt(n)}function vc(n,r,a){for(var h=a?$a:lo,m=n[0].length,v=n.length,C=v,T=E(v),k=1/0,q=[];C--;){var L=n[C];C&&r&&(L=ie(L,xn(r))),k=Ue(L.length,k),T[C]=!a&&(r||m>=120&&L.length>=120)?new je(C&&L):b}L=n[0];var W=-1,Y=T[0];t:for(;++W<m&&q.length<k;){var st=L[W],dt=r?r(st):st;if(st=a||0!==st?st:0,!(Y?hr(Y,dt):h(q,dt,a))){for(C=v;--C;){var Ot=T[C];if(!(Ot?hr(Ot,dt):h(n[C],dt,a)))continue t}Y&&Y.push(dt),q.push(st)}}return q}function xr(n,r,a){var h=null==(n=Nr(n,r=ze(r,n)))?n:n[hs(Ze(r))];return null==h?b:vn(h,n,a)}function hh(n){return pe(n)&&Je(n)==Un}function br(n,r,a,h,m){return n===r||(null==n||null==r||!pe(n)&&!pe(r)?n!=n&&r!=r:function bp(n,r,a,h,m,v){var C=vt(n),T=vt(r),k=C?Ss:qe(n),q=T?Ss:qe(r),L=(k=k==Un?se:k)==se,W=(q=q==Un?se:q)==se,Y=k==q;if(Y&&ds(n)){if(!ds(r))return!1;C=!0,L=!1}if(Y&&!L)return v||(v=new Qn),C||Ui(n)?zt(n,r,a,h,m,v):function as(n,r,a,h,m,v,C){switch(a){case is:if(n.byteLength!=r.byteLength||n.byteOffset!=r.byteOffset)return!1;n=n.buffer,r=r.buffer;case be:return!(n.byteLength!=r.byteLength||!v(new xo(n),new xo(r)));case Xt:case jn:case ae:return Gt(+n,+r);case De:return n.name==r.name&&n.message==r.message;case Xi:case Ji:return n==r+"";case Re:var T=ic;case zn:if(T||(T=fo),n.size!=r.size&&!(1&h))return!1;var q=C.get(n);if(q)return q==r;h|=2,C.set(n,r);var L=zt(T(n),T(r),h,m,v,C);return C.delete(n),L;case so:if(Ie)return Ie.call(n)==Ie.call(r)}return!1}(n,r,k,a,h,m,v);if(!(1&a)){var st=L&&Ut.call(n,"__wrapped__"),dt=W&&Ut.call(r,"__wrapped__");if(st||dt){var Ot=st?n.value():n,ft=dt?r.value():r;return v||(v=new Qn),m(Ot,ft,a,h,v)}}return!!Y&&(v||(v=new Qn),function Nc(n,r,a,h,m,v){var C=1&a,T=Is(n),k=T.length;if(k!=Is(r).length&&!C)return!1;for(var W=k;W--;){var Y=T[W];if(!(C?Y in r:Ut.call(r,Y)))return!1}var st=v.get(n),dt=v.get(r);if(st&&dt)return st==r&&dt==n;var Ot=!0;v.set(n,r),v.set(r,n);for(var ft=C;++W<k;){var Ft=n[Y=T[W]],Vt=r[Y];if(h)var nn=C?h(Vt,Ft,Y,r,n,v):h(Ft,Vt,Y,n,r,v);if(!(nn===b?Ft===Vt||m(Ft,Vt,a,h,v):nn)){Ot=!1;break}ft||(ft="constructor"==Y)}if(Ot&&!ft){var sn=n.constructor,dn=r.constructor;sn!=dn&&"constructor"in n&&"constructor"in r&&!("function"==typeof sn&&sn instanceof sn&&"function"==typeof dn&&dn instanceof dn)&&(Ot=!1)}return v.delete(n),v.delete(r),Ot}(n,r,a,h,m,v))}(n,r,a,h,br,m))}function No(n,r,a,h){var m=a.length,v=m,C=!h;if(null==n)return!v;for(n=Qt(n);m--;){var T=a[m];if(C&&T[2]?T[1]!==n[T[0]]:!(T[0]in n))return!1}for(;++m<v;){var k=(T=a[m])[0],q=n[k],L=T[1];if(C&&T[2]){if(q===b&&!(k in n))return!1}else{var W=new Qn;if(h)var Y=h(q,L,k,n,r,W);if(!(Y===b?br(L,q,3,h,W):Y))return!1}}return!0}function Fo(n){return!(!de(n)||function Et(n){return!!zl&&zl in n}(n))&&(Kn(n)?Yf:Yd).test(li(n))}function ph(n){return"function"==typeof n?n:null==n?hn:"object"==typeof n?vt(n)?yh(n[0],n[1]):_h(n):hg(n)}function xc(n){if(!ls(n))return Jl(n);var r=[];for(var a in Qt(n))Ut.call(n,a)&&"constructor"!=a&&r.push(a);return r}function bc(n,r){return n<r}function mh(n,r){var a=-1,h=Ye(n)?E(n.length):[];return Es(n,function(m,v,C){h[++a]=r(m,v,C)}),h}function _h(n){var r=Zo(n);return 1==r.length&&r[0][2]?He(r[0][0],r[0][1]):function(a){return a===n||No(a,n,r)}}function yh(n,r){return Ne(n)&&Ih(r)?He(hs(n),r):function(a){var h=Ca(a,n);return h===b&&h===r?ji(a,n):br(r,h,3)}}function Eo(n,r,a,h,m){n!==r&&mc(r,function(v,C){if(m||(m=new Qn),de(v))!function Sp(n,r,a,h,m,v,C){var T=ui(n,a),k=ui(r,a),q=C.get(k);if(q)fc(n,a,q);else{var L=v?v(T,k,a+"",n,r,C):b,W=L===b;if(W){var Y=vt(k),st=!Y&&ds(k),dt=!Y&&!st&&Ui(k);L=k,Y||st||dt?vt(T)?L=T:re(T)?L=fe(T):st?(W=!1,L=$n(k,!0)):dt?(W=!1,L=Dh(k,!0)):L=[]:ya(k)||Ls(k)?(L=T,Ls(T)?L=ts(T):(!de(T)||Kn(T))&&(L=cn(k))):W=!1}W&&(C.set(k,L),m(L,k,h,v,C),C.delete(k)),fc(n,a,L)}}(n,r,C,a,Eo,h,m);else{var T=h?h(ui(n,C),v,C+"",n,r,m):b;T===b&&(T=v),fc(n,C,T)}},ln)}function Ro(n,r){var a=n.length;if(a)return tn(r+=r<0?a:0,a)?n[r]:b}function vh(n,r,a){r=r.length?ie(r,function(v){return vt(v)?function(C){return oi(C,1===v.length?v[0]:v)}:v}):[hn];var h=-1;return r=ie(r,xn(_t())),function Nf(D,V){var E=D.length;for(D.sort(V);E--;)D[E]=D[E].value;return D}(mh(n,function(v,C,T){return{criteria:ie(r,function(q){return q(v)}),index:++h,value:v}}),function(v,C){return function Bt(n,r,a){for(var h=-1,m=n.criteria,v=r.criteria,C=m.length,T=a.length;++h<C;){var k=Mh(m[h],v[h]);if(k)return h>=T?k:k*("desc"==a[h]?-1:1)}return n.index-r.index}(v,C,a)})}function bh(n,r,a){for(var h=-1,m=r.length,v={};++h<m;){var C=r[h],T=oi(n,C);a(T,C)&&Io(v,ze(C,n),T)}return v}function Vo(n,r,a,h){var m=h?we:Wt,v=-1,C=r.length,T=n;for(n===r&&(r=fe(r)),a&&(T=ie(n,xn(a)));++v<C;)for(var k=0,q=r[v],L=a?a(q):q;(k=m(T,L,k,h))>-1;)T!==n&&wo.call(T,k,1),wo.call(n,k,1);return n}function Ch(n,r){for(var a=n?r.length:0,h=a-1;a--;){var m=r[a];if(a==h||m!==v){var v=m;tn(m)?wo.call(n,m,1):qo(n,m)}}return n}function wc(n,r){return n+Ao(ac()*(r-n+1))}function Cc(n,r){var a="";if(!n||r<1||r>H)return a;do{r%2&&(a+=n),(r=Ao(r/2))&&(n+=n)}while(r);return a}function Mt(n,r){return Fr(kr(n,r,hn),n+"")}function Op(n){return ys(jr(n))}function Ah(n,r){var a=jr(n);return te(a,ii(r,0,a.length))}function Io(n,r,a,h){if(!de(n))return n;for(var m=-1,v=(r=ze(r,n)).length,C=v-1,T=n;null!=T&&++m<v;){var k=hs(r[m]),q=a;if("__proto__"===k||"constructor"===k||"prototype"===k)return n;if(m!=C){var L=T[k];(q=h?h(L,k,T):b)===b&&(q=de(L)?L:tn(r[m+1])?[]:{})}yr(T,k,q),T=T[k]}return n}var Ac=So?function(n,r){return So.set(n,r),n}:hn,Sh=pr?function(n,r){return pr(n,"toString",{configurable:!0,enumerable:!1,value:Zi(r),writable:!0})}:hn;function bg(n){return te(jr(n))}function Vn(n,r,a){var h=-1,m=n.length;r<0&&(r=-r>m?0:m+r),(a=a>m?m:a)<0&&(a+=m),m=r>a?0:a-r>>>0,r>>>=0;for(var v=E(m);++h<m;)v[h]=n[h+r];return v}function Dp(n,r){var a;return Es(n,function(h,m,v){return!(a=r(h,m,v))}),!!a}function Po(n,r,a){var h=0,m=null==n?h:n.length;if("number"==typeof r&&r==r&&m<=2147483647){for(;h<m;){var v=h+m>>>1,C=n[v];null!==C&&!On(C)&&(a?C<=r:C<r)?h=v+1:m=v}return m}return Sc(n,r,hn,a)}function Sc(n,r,a,h){var m=0,v=null==n?0:n.length;if(0===v)return 0;for(var C=(r=a(r))!=r,T=null===r,k=On(r),q=r===b;m<v;){var L=Ao((m+v)/2),W=a(n[L]),Y=W!==b,st=null===W,dt=W==W,Ot=On(W);if(C)var ft=h||dt;else ft=q?dt&&(h||Y):T?dt&&Y&&(h||!st):k?dt&&Y&&!st&&(h||!Ot):!st&&!Ot&&(h?W<=r:W<r);ft?m=L+1:v=L}return Ue(v,4294967294)}function Th(n,r){for(var a=-1,h=n.length,m=0,v=[];++a<h;){var C=n[a],T=r?r(C):C;if(!a||!Gt(T,k)){var k=T;v[m++]=0===C?0:C}}return v}function Mp(n){return"number"==typeof n?n:On(n)?NaN:+n}function gt(n){if("string"==typeof n)return n;if(vt(n))return ie(n,gt)+"";if(On(n))return Nn?Nn.call(n):"";var r=n+"";return"0"==r&&1/n==-ht?"-0":r}function Ke(n,r,a){var h=-1,m=lo,v=n.length,C=!0,T=[],k=T;if(a)C=!1,m=$a;else if(v>=200){var q=r?null:Or(n);if(q)return fo(q);C=!1,m=hr,k=new je}else k=r?[]:T;t:for(;++h<v;){var L=n[h],W=r?r(L):L;if(L=a||0!==L?L:0,C&&W==W){for(var Y=k.length;Y--;)if(k[Y]===W)continue t;r&&k.push(W),T.push(L)}else m(k,W,a)||(k!==T&&k.push(W),T.push(L))}return T}function qo(n,r){return null==(n=Nr(n,r=ze(r,n)))||delete n[hs(Ze(r))]}function Lo(n,r,a,h){return Io(n,r,a(oi(n,r)),h)}function Tc(n,r,a,h){for(var m=n.length,v=h?m:-1;(h?v--:++v<m)&&r(n[v],v,n););return a?Vn(n,h?0:v,h?v+1:m):Vn(n,h?v+1:0,h?m:v)}function Oh(n,r){var a=n;return a instanceof nt&&(a=a.value()),Xa(r,function(h,m){return m.func.apply(m.thisArg,Os([h],m.args))},a)}function Bo(n,r,a){var h=n.length;if(h<2)return h?Ke(n[0]):[];for(var m=-1,v=E(h);++m<h;)for(var C=n[m],T=-1;++T<h;)T!=m&&(v[m]=vr(v[m]||C,n[T],r,a));return Ke(Pe(v,1),r,a)}function an(n,r,a){for(var h=-1,m=n.length,v=r.length,C={};++h<m;)a(C,n[h],h<v?r[h]:b);return C}function St(n){return re(n)?n:[]}function Oc(n){return"function"==typeof n?n:hn}function ze(n,r){return vt(n)?n:Ne(n,r)?[n]:qp(Lt(n))}var Rs=Mt;function vs(n,r,a){var h=n.length;return a=a===b?h:a,!r&&a>=h?n:Vn(n,r,a)}var bn=Qf||function(n){return Ve.clearTimeout(n)};function $n(n,r){if(r)return n.slice();var a=n.length,h=Hl?Hl(a):new n.constructor(a);return n.copy(h),h}function Fi(n){var r=new n.constructor(n.byteLength);return new xo(r).set(new xo(n)),r}function Dh(n,r){var a=r?Fi(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.length)}function Mh(n,r){if(n!==r){var a=n!==b,h=null===n,m=n==n,v=On(n),C=r!==b,T=null===r,k=r==r,q=On(r);if(!T&&!q&&!v&&n>r||v&&C&&k&&!T&&!q||h&&C&&k||!a&&k||!m)return 1;if(!h&&!v&&!q&&n<r||q&&a&&m&&!h&&!v||T&&a&&m||!C&&m||!k)return-1}return 0}function kh(n,r,a,h){for(var m=-1,v=n.length,C=a.length,T=-1,k=r.length,q=ue(v-C,0),L=E(k+q),W=!h;++T<k;)L[T]=r[T];for(;++m<C;)(W||m<v)&&(L[a[m]]=n[m]);for(;q--;)L[T++]=n[m++];return L}function Vs(n,r,a,h){for(var m=-1,v=n.length,C=-1,T=a.length,k=-1,q=r.length,L=ue(v-T,0),W=E(L+q),Y=!h;++m<L;)W[m]=n[m];for(var st=m;++k<q;)W[st+k]=r[k];for(;++C<T;)(Y||m<v)&&(W[st+a[C]]=n[m++]);return W}function fe(n,r){var a=-1,h=n.length;for(r||(r=E(h));++a<h;)r[a]=n[a];return r}function wn(n,r,a,h){var m=!a;a||(a={});for(var v=-1,C=r.length;++v<C;){var T=r[v],k=h?h(a[T],n[T],T,a,n):b;k===b&&(k=n[T]),m?os(a,T,k):yr(a,T,k)}return a}function Go(n,r){return function(a,h){var m=vt(a)?Tf:ki,v=r?r():{};return m(a,n,_t(h,2),v)}}function Xn(n){return Mt(function(r,a){var h=-1,m=a.length,v=m>1?a[m-1]:b,C=m>2?a[2]:b;for(v=n.length>3&&"function"==typeof v?(m--,v):b,C&&un(a[0],a[1],C)&&(v=m<3?b:v,m=1),r=Qt(r);++h<m;){var T=a[h];T&&n(r,T,h,v)}return r})}function Fh(n,r){return function(a,h){if(null==a)return a;if(!Ye(a))return n(a,h);for(var m=a.length,v=r?m:-1,C=Qt(a);(r?v--:++v<m)&&!1!==h(C[v],v,C););return a}}function Z(n){return function(r,a,h){for(var m=-1,v=Qt(r),C=h(r),T=C.length;T--;){var k=C[n?T:++m];if(!1===a(v[k],k,v))break}return r}}function Jn(n){return function(r){var a=Ai(r=Lt(r))?Hn(r):b,h=a?a[0]:r.charAt(0),m=a?vs(a,1).join(""):r.slice(1);return h[n]()+m}}function ci(n){return function(r){return Xa(ag(bd(r).replace(ff,"")),n,"")}}function In(n){return function(){var r=arguments;switch(r.length){case 0:return new n;case 1:return new n(r[0]);case 2:return new n(r[0],r[1]);case 3:return new n(r[0],r[1],r[2]);case 4:return new n(r[0],r[1],r[2],r[3]);case 5:return new n(r[0],r[1],r[2],r[3],r[4]);case 6:return new n(r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return new n(r[0],r[1],r[2],r[3],r[4],r[5],r[6])}var a=ks(n.prototype),h=n.apply(a,r);return de(h)?h:a}}function wr(n){return function(r,a,h){var m=Qt(r);if(!Ye(r)){var v=_t(a,3);r=Te(r),a=function(T){return v(m[T],T,m)}}var C=n(r,a,h);return C>-1?m[v?r[C]:C]:b}}function Wo(n){return cs(function(r){var a=r.length,h=a,m=Fn.prototype.thru;for(n&&r.reverse();h--;){var v=r[h];if("function"!=typeof v)throw new $t(Nt);if(m&&!C&&"wrapper"==zo(v))var C=new Fn([],!0)}for(h=C?h:a;++h<a;){var T=zo(v=r[h]),k="wrapper"==T?Fc(v):b;C=k&&Kt(k[0])&&424==k[1]&&!k[4].length&&1==k[9]?C[zo(k[0])].apply(C,k[3]):1==v.length&&Kt(v)?C[T]():C.thru(v)}return function(){var q=arguments,L=q[0];if(C&&1==q.length&&vt(L))return C.plant(L).value();for(var W=0,Y=a?r[W].apply(this,q):L;++W<a;)Y=r[W].call(this,Y);return Y}})}function Cr(n,r,a,h,m,v,C,T,k,q){var L=128&r,W=1&r,Y=2&r,st=24&r,dt=512&r,Ot=Y?b:In(n);return function ft(){for(var Ft=arguments.length,Vt=E(Ft),nn=Ft;nn--;)Vt[nn]=arguments[nn];if(st)var sn=Dr(ft),dn=function Ef(D,V){for(var E=D.length,$=0;E--;)D[E]===V&&++$;return $}(Vt,sn);if(h&&(Vt=kh(Vt,h,m,st)),v&&(Vt=Vs(Vt,v,C,st)),Ft-=dn,st&&Ft<q){var ge=Ds(Vt,sn);return Tr(n,r,Cr,ft.placeholder,a,Vt,ge,T,k,q-Ft)}var fn=W?a:this,fs=Y?fn[n]:n;return Ft=Vt.length,T?Vt=function $o(n,r){for(var a=n.length,h=Ue(r.length,a),m=fe(n);h--;){var v=r[h];n[h]=tn(v,a)?m[v]:b}return n}(Vt,T):dt&&Ft>1&&Vt.reverse(),L&&k<Ft&&(Vt.length=k),this&&this!==Ve&&this instanceof ft&&(fs=Ot||In(fs)),fs.apply(fn,Vt)}}function Pn(n,r){return function(a,h){return function vp(n,r,a,h){return Rn(n,function(m,v,C){r(h,a(m),v,C)}),h}(a,n,r(h),{})}}function Uo(n,r){return function(a,h){var m;if(a===b&&h===b)return r;if(a!==b&&(m=a),h!==b){if(m===b)return h;"string"==typeof a||"string"==typeof h?(a=gt(a),h=gt(h)):(a=Mp(a),h=Mp(h)),m=n(a,h)}return m}}function qn(n){return cs(function(r){return r=ie(r,xn(_t())),Mt(function(a){var h=this;return n(r,function(m){return vn(m,h,a)})})})}function Ar(n,r){var a=(r=r===b?" ":gt(r)).length;if(a<2)return a?Cc(r,n):r;var h=Cc(r,Co(n/Si(r)));return Ai(r)?vs(Hn(h),0,n).join(""):h.slice(0,n)}function Eh(n){return function(r,a,h){return h&&"number"!=typeof h&&un(r,a,h)&&(a=h=b),r=Cs(r),a===b?(a=r,r=0):a=Cs(a),function Tp(n,r,a,h){for(var m=-1,v=ue(Co((r-n)/(a||1)),0),C=E(v);v--;)C[h?v:++m]=n,n+=a;return C}(r,a,h=h===b?r<a?1:-1:Cs(h),n)}}function Sr(n){return function(r,a){return"string"==typeof r&&"string"==typeof a||(r=Fe(r),a=Fe(a)),n(r,a)}}function Tr(n,r,a,h,m,v,C,T,k,q){var L=8&r;r|=L?32:64,4&(r&=~(L?64:32))||(r&=-4);var Ot=[n,r,m,L?v:b,L?C:b,L?b:v,L?b:C,T,k,q],ft=a.apply(b,Ot);return Kt(n)&&Xo(ft,Ot),ft.placeholder=h,Ko(ft,n,r)}function Mc(n){var r=Ce[n];return function(a,h){if(a=Fe(a),(h=null==h?0:Ue(Tt(h),292))&&$l(a)){var m=(Lt(a)+"e").split("e");return+((m=(Lt(r(m[0]+"e"+(+m[1]+h)))+"e").split("e"))[0]+"e"+(+m[1]-h))}return r(a)}}var Or=ti&&1/fo(new ti([,-0]))[1]==ht?function(n){return new ti(n)}:Xu;function kc(n){return function(r){var a=qe(r);return a==Re?ic(r):a==zn?function Wl(D){var V=-1,E=Array(D.size);return D.forEach(function($){E[++V]=[$,$]}),E}(r):function Ff(D,V){return ie(V,function(E){return[E,D[E]]})}(r,n(r))}}function Cn(n,r,a,h,m,v,C,T){var k=2&r;if(!k&&"function"!=typeof n)throw new $t(Nt);var q=h?h.length:0;if(q||(r&=-97,h=m=b),C=C===b?C:ue(Tt(C),0),T=T===b?T:Tt(T),q-=m?m.length:0,64&r){var L=h,W=m;h=m=b}var Y=k?b:Fc(n),st=[n,r,a,h,m,L,W,v,C,T];if(Y&&function Qo(n,r){var a=n[1],h=r[1],m=a|h;if(!(m<131)&&!(128==h&&8==a||128==h&&256==a&&n[7].length<=r[8]||384==h&&r[7].length<=r[8]&&8==a))return n;1&h&&(n[2]=r[2],m|=1&a?0:4);var T=r[3];if(T){var k=n[3];n[3]=k?kh(k,T,r[4]):T,n[4]=k?Ds(n[3],pn):r[4]}(T=r[5])&&(n[5]=(k=n[5])?Vs(k,T,r[6]):T,n[6]=k?Ds(n[5],pn):r[6]),(T=r[7])&&(n[7]=T),128&h&&(n[8]=null==n[8]?r[8]:Ue(n[8],r[8])),null==n[9]&&(n[9]=r[9]),n[0]=r[0],n[1]=m}(st,Y),n=st[0],r=st[1],a=st[2],h=st[3],m=st[4],!(T=st[9]=st[9]===b?k?0:n.length:ue(st[9]-q,0))&&24&r&&(r&=-25),r&&1!=r)dt=8==r||16==r?function Dc(n,r,a){var h=In(n);return function m(){for(var v=arguments.length,C=E(v),T=v,k=Dr(m);T--;)C[T]=arguments[T];var q=v<3&&C[0]!==k&&C[v-1]!==k?[]:Ds(C,k);return(v-=q.length)<a?Tr(n,r,Cr,m.placeholder,b,C,q,b,b,a-v):vn(this&&this!==Ve&&this instanceof m?h:n,this,C)}}(n,r,T):32!=r&&33!=r||m.length?Cr.apply(b,st):function jo(n,r,a,h){var m=1&r,v=In(n);return function C(){for(var T=-1,k=arguments.length,q=-1,L=h.length,W=E(L+k),Y=this&&this!==Ve&&this instanceof C?v:n;++q<L;)W[q]=h[q];for(;k--;)W[q++]=arguments[++T];return vn(Y,m?a:this,W)}}(n,r,a,h);else var dt=function Fp(n,r,a){var h=1&r,m=In(n);return function v(){return(this&&this!==Ve&&this instanceof v?m:n).apply(h?a:this,arguments)}}(n,r,a);return Ko((Y?Ac:Xo)(dt,st),n,r)}function Rh(n,r,a,h){return n===b||Gt(n,Ti[a])&&!Ut.call(h,a)?r:n}function le(n,r,a,h,m,v){return de(n)&&de(r)&&(v.set(r,n),Eo(n,r,b,le,v),v.delete(r)),n}function Vh(n){return ya(n)?b:n}function zt(n,r,a,h,m,v){var C=1&a,T=n.length,k=r.length;if(T!=k&&!(C&&k>T))return!1;var q=v.get(n),L=v.get(r);if(q&&L)return q==r&&L==n;var W=-1,Y=!0,st=2&a?new je:b;for(v.set(n,r),v.set(r,n);++W<T;){var dt=n[W],Ot=r[W];if(h)var ft=C?h(Ot,dt,W,r,n,v):h(dt,Ot,W,n,r,v);if(ft!==b){if(ft)continue;Y=!1;break}if(st){if(!Ja(r,function(Ft,Vt){if(!hr(st,Vt)&&(dt===Ft||m(dt,Ft,a,h,v)))return st.push(Vt)})){Y=!1;break}}else if(dt!==Ot&&!m(dt,Ot,a,h,v)){Y=!1;break}}return v.delete(n),v.delete(r),Y}function cs(n){return Fr(kr(n,b,qs),n+"")}function Is(n){return yc(n,Te,Ec)}function An(n){return yc(n,ln,Yo)}var Fc=So?function(n){return So.get(n)}:Xu;function zo(n){for(var r=n.name+"",a=ni[r],h=Ut.call(ni,r)?a.length:0;h--;){var m=a[h],v=m.func;if(null==v||v==n)return m.name}return r}function Dr(n){return(Ut.call(_,"placeholder")?_:n).placeholder}function _t(){var n=_.iteratee||Qr;return n=n===Qr?ph:n,arguments.length?n(arguments[0],arguments[1]):n}function Ho(n,r){var a=n.__data__;return function Mr(n){var r=typeof n;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n}(r)?a["string"==typeof r?"string":"hash"]:a.map}function Zo(n){for(var r=Te(n),a=r.length;a--;){var h=r[a],m=n[h];r[a]=[h,m,Ih(m)]}return r}function us(n,r){var a=function Gl(D,V){return null==D?b:D[V]}(n,r);return Fo(a)?a:b}var Ec=oc?function(n){return null==n?[]:(n=Qt(n),Ts(oc(n),function(r){return Yl.call(n,r)}))}:$r,Yo=oc?function(n){for(var r=[];n;)Os(r,Ec(n)),n=bo(n);return r}:$r,qe=Je;function Sn(n,r,a){for(var h=-1,m=(r=ze(r,n)).length,v=!1;++h<m;){var C=hs(r[h]);if(!(v=null!=n&&a(n,C)))break;n=n[C]}return v||++h!=m?v:!!(m=null==n?0:n.length)&&Iu(m)&&tn(C,m)&&(vt(n)||Ls(n))}function cn(n){return"function"!=typeof n.constructor||ls(n)?{}:ks(bo(n))}function Cg(n){return vt(n)||Ls(n)||!!(Ql&&n&&n[Ql])}function tn(n,r){var a=typeof n;return!!(r=r??H)&&("number"==a||"symbol"!=a&&hl.test(n))&&n>-1&&n%1==0&&n<r}function un(n,r,a){if(!de(a))return!1;var h=typeof r;return!!("number"==h?Ye(a)&&tn(r,a.length):"string"==h&&r in a)&&Gt(a[r],n)}function Ne(n,r){if(vt(n))return!1;var a=typeof n;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=n&&!On(n))||sr.test(n)||!ee.test(n)||null!=r&&n in Qt(r)}function Kt(n){var r=zo(n),a=_[r];if("function"!=typeof a||!(r in nt.prototype))return!1;if(n===a)return!0;var h=Fc(a);return!!h&&n===h[0]}(cc&&qe(new cc(new ArrayBuffer(1)))!=is||gr&&qe(new gr)!=Re||mr&&qe(mr.resolve())!=sl||ti&&qe(new ti)!=zn||ei&&qe(new ei)!=Ki)&&(qe=function(n){var r=Je(n),a=r==se?n.constructor:b,h=a?li(a):"";if(h)switch(h){case Oi:return is;case np:return Re;case sp:return sl;case ip:return zn;case Kl:return Ki}return r});var Vc=mo?Kn:tl;function ls(n){var r=n&&n.constructor;return n===("function"==typeof r&&r.prototype||Ti)}function Ih(n){return n==n&&!de(n)}function He(n,r){return function(a){return null!=a&&a[n]===r&&(r!==b||n in Qt(a))}}function kr(n,r,a){return r=ue(r===b?n.length-1:r,0),function(){for(var h=arguments,m=-1,v=ue(h.length-r,0),C=E(v);++m<v;)C[m]=h[r+m];m=-1;for(var T=E(r+1);++m<r;)T[m]=h[m];return T[r]=a(C),vn(n,this,T)}}function Nr(n,r){return r.length<2?n:oi(n,Vn(r,0,-1))}function ui(n,r){if(("constructor"!==r||"function"!=typeof n[r])&&"__proto__"!=r)return n[r]}var Xo=Pp(Ac),Jo=Xf||function(n,r){return Ve.setTimeout(n,r)},Fr=Pp(Sh);function Ko(n,r,a){var h=r+"";return Fr(n,function Ip(n,r){var a=r.length;if(!a)return n;var h=a-1;return r[h]=(a>1?"& ":"")+r[h],r=r.join(a>2?", ":" "),n.replace(Gd,"{\n/* [wrapped with "+r+"] */\n")}(h,function Lp(n,r){return kn(zs,function(a){var h="_."+a[0];r&a[1]&&!lo(n,h)&&n.push(h)}),n.sort()}(function Rc(n){var r=n.match(Wd);return r?r[1].split(Ud):[]}(h),a)))}function Pp(n){var r=0,a=0;return function(){var h=Kf(),m=16-(h-a);if(a=h,m>0){if(++r>=800)return arguments[0]}else r=0;return n.apply(b,arguments)}}function te(n,r){var a=-1,h=n.length,m=h-1;for(r=r===b?h:r;++a<r;){var v=wc(a,m),C=n[v];n[v]=n[a],n[a]=C}return n.length=r,n}var qp=function Ri(n){var r=Wi(n,function(h){return 500===a.size&&a.clear(),h}),a=r.cache;return r}(function(n){var r=[];return 46===n.charCodeAt(0)&&r.push(""),n.replace($s,function(a,h,m,v){r.push(m?v.replace(Wa,"$1"):h||a)}),r});function hs(n){if("string"==typeof n||On(n))return n;var r=n+"";return"0"==r&&1/n==-ht?"-0":r}function li(n){if(null!=n){try{return _o.call(n)}catch{}try{return n+""}catch{}}return""}function Ps(n){if(n instanceof nt)return n.clone();var r=new Fn(n.__wrapped__,n.__chain__);return r.__actions__=fe(n.__actions__),r.__index__=n.__index__,r.__values__=n.__values__,r}var Pc=Mt(function(n,r){return re(n)?vr(n,Pe(r,1,re,!0)):[]}),Er=Mt(function(n,r){var a=Ze(r);return re(a)&&(a=b),re(n)?vr(n,Pe(r,1,re,!0),_t(a,2)):[]}),Tn=Mt(function(n,r){var a=Ze(r);return re(a)&&(a=b),re(n)?vr(n,Pe(r,1,re,!0),b,a):[]});function Bc(n,r,a){var h=null==n?0:n.length;if(!h)return-1;var m=null==a?0:Tt(a);return m<0&&(m=ue(h+m,0)),ho(n,_t(r,3),m)}function Ii(n,r,a){var h=null==n?0:n.length;if(!h)return-1;var m=h-1;return a!==b&&(m=Tt(a),m=a<0?ue(h+m,0):Ue(m,h-1)),ho(n,_t(r,3),m,!0)}function qs(n){return null!=n&&n.length?Pe(n,1):[]}function Pi(n){return n&&n.length?n[0]:b}var Vr=Mt(function(n){var r=ie(n,St);return r.length&&r[0]===n[0]?vc(r):[]}),Ir=Mt(function(n){var r=Ze(n),a=ie(n,St);return r===Ze(a)?r=b:a.pop(),a.length&&a[0]===n[0]?vc(a,_t(r,2)):[]}),qi=Mt(function(n){var r=Ze(n),a=ie(n,St);return(r="function"==typeof r?r:b)&&a.pop(),a.length&&a[0]===n[0]?vc(a,b,r):[]});function Ze(n){var r=null==n?0:n.length;return r?n[r-1]:b}var qh=Mt(ia);function ia(n,r){return n&&n.length&&r&&r.length?Vo(n,r):n}var Bh=cs(function(n,r){var a=null==n?0:n.length,h=pc(n,r);return Ch(n,ie(r,function(m){return tn(m,a)?+m:m}).sort(Mh)),h});function di(n){return null==n?n:ep.call(n)}var pi=Mt(function(n){return Ke(Pe(n,1,re,!0))}),Zc=Mt(function(n){var r=Ze(n);return re(r)&&(r=b),Ke(Pe(n,1,re,!0),_t(r,2))}),Lr=Mt(function(n){var r=Ze(n);return r="function"==typeof r?r:b,Ke(Pe(n,1,re,!0),b,r)});function Br(n){if(!n||!n.length)return[];var r=0;return n=Ts(n,function(a){if(re(a))return r=ue(a.length,r),!0}),lr(r,function(a){return ie(n,tc(a))})}function oa(n,r){if(!n||!n.length)return[];var a=Br(n);return null==r?a:ie(a,function(h){return vn(r,b,h)})}var $c=Mt(function(n,r){return re(n)?vr(n,r):[]}),Xc=Mt(function(n){return Bo(Ts(n,re))}),Jc=Mt(function(n){var r=Ze(n);return re(r)&&(r=b),Bo(Ts(n,re),_t(r,2))}),jh=Mt(function(n){var r=Ze(n);return r="function"==typeof r?r:b,Bo(Ts(n,re),b,r)}),Kc=Mt(Br),eu=Mt(function(n){var r=n.length,a=r>1?n[r-1]:b;return a="function"==typeof a?(n.pop(),a):b,oa(n,a)});function aa(n){var r=_(n);return r.__chain__=!0,r}function nu(n,r){return r(n)}var Dg=cs(function(n){var r=n.length,a=r?n[0]:0,h=this.__wrapped__,m=function(v){return pc(v,n)};return!(r>1||this.__actions__.length)&&h instanceof nt&&tn(a)?((h=h.slice(a,+a+(r?1:0))).__actions__.push({func:nu,args:[m],thisArg:b}),new Fn(h,this.__chain__).thru(function(v){return r&&!v.length&&v.push(b),v})):this.thru(m)}),ru=Go(function(n,r,a){Ut.call(n,a)?++n[a]:os(n,a,1)}),Li=wr(Bc),gi=wr(Ii);function ca(n,r){return(vt(n)?kn:Es)(n,_t(r,3))}function ua(n,r){return(vt(n)?Of:ch)(n,_t(r,3))}var Rg=Go(function(n,r,a){Ut.call(n,a)?n[a].push(r):os(n,a,[r])}),lu=Mt(function(n,r,a){var h=-1,m="function"==typeof r,v=Ye(n)?E(n.length):[];return Es(n,function(C){v[++h]=m?vn(r,C,a):xr(C,r,a)}),v}),la=Go(function(n,r,a){os(n,a,r)});function Bi(n,r){return(vt(n)?ie:mh)(n,_t(r,3))}var du=Go(function(n,r,a){n[a?0:1].push(r)},function(){return[[],[]]}),Lg=Mt(function(n,r){if(null==n)return[];var a=r.length;return a>1&&un(n,r[0],r[1])?r=[]:a>2&&un(r[0],r[1],r[2])&&(r=[r[0]]),vh(n,Pe(r,1),[])}),Gi=$f||function(){return Ve.Date.now()};function Wp(n,r,a){return r=a?b:r,Cn(n,128,b,b,b,b,r=n&&null==r?n.length:r)}function da(n,r){var a;if("function"!=typeof r)throw new $t(Nt);return n=Tt(n),function(){return--n>0&&(a=r.apply(this,arguments)),n<=1&&(r=b),a}}var Hh=Mt(function(n,r,a){var h=1;if(a.length){var m=Ds(a,Dr(Hh));h|=32}return Cn(n,h,r,a,m)}),fa=Mt(function(n,r,a){var h=3;if(a.length){var m=Ds(a,Dr(fa));h|=32}return Cn(r,h,n,a,m)});function pa(n,r,a){var h,m,v,C,T,k,q=0,L=!1,W=!1,Y=!0;if("function"!=typeof n)throw new $t(Nt);function st(ge){var fn=h,fs=m;return h=m=b,q=ge,C=n.apply(fs,fn)}function ft(ge){var fn=ge-k;return k===b||fn>=r||fn<0||W&&ge-q>=v}function Ft(){var ge=Gi();if(ft(ge))return Vt(ge);T=Jo(Ft,function Ot(ge){var Id=r-(ge-k);return W?Ue(Id,v-(ge-q)):Id}(ge))}function Vt(ge){return T=b,Y&&h?st(ge):(h=m=b,C)}function dn(){var ge=Gi(),fn=ft(ge);if(h=arguments,m=this,k=ge,fn){if(T===b)return function dt(ge){return q=ge,T=Jo(Ft,r),L?st(ge):C}(k);if(W)return bn(T),T=Jo(Ft,r),st(k)}return T===b&&(T=Jo(Ft,r)),C}return r=Fe(r)||0,de(a)&&(L=!!a.leading,v=(W="maxWait"in a)?ue(Fe(a.maxWait)||0,r):v,Y="trailing"in a?!!a.trailing:Y),dn.cancel=function nn(){T!==b&&bn(T),q=0,h=k=m=T=b},dn.flush=function sn(){return T===b?C:Vt(Gi())},dn}var Zh=Mt(function(n,r){return ah(n,1,r)}),Up=Mt(function(n,r,a){return ah(n,Fe(r)||0,a)});function Wi(n,r){if("function"!=typeof n||null!=r&&"function"!=typeof r)throw new $t(Nt);var a=function(){var h=arguments,m=r?r.apply(this,h):h[0],v=a.cache;if(v.has(m))return v.get(m);var C=n.apply(this,h);return a.cache=v.set(m,C)||v,C};return a.cache=new(Wi.Cache||Zn),a}function xu(n){if("function"!=typeof n)throw new $t(Nt);return function(){var r=arguments;switch(r.length){case 0:return!n.call(this);case 1:return!n.call(this,r[0]);case 2:return!n.call(this,r[0],r[1]);case 3:return!n.call(this,r[0],r[1],r[2])}return!n.apply(this,r)}}Wi.Cache=Zn;var wu=Rs(function(n,r){var a=(r=1==r.length&&vt(r[0])?ie(r[0],xn(_t())):ie(Pe(r,1),xn(_t()))).length;return Mt(function(h){for(var m=-1,v=Ue(h.length,a);++m<v;)h[m]=r[m].call(this,h[m]);return vn(n,this,h)})}),Ur=Mt(function(n,r){var a=Ds(r,Dr(Ur));return Cn(n,32,b,r,a)}),ga=Mt(function(n,r){var a=Ds(r,Dr(ga));return Cn(n,64,b,r,a)}),Yh=cs(function(n,r){return Cn(n,256,b,b,b,r)});function Gt(n,r){return n===r||n!=n&&r!=r}var ma=Sr(Ni),mi=Sr(function(n,r){return n>=r}),Ls=hh(function(){return arguments}())?hh:function(n){return pe(n)&&Ut.call(n,"callee")&&!Yl.call(n,"callee")},vt=E.isArray,zp=kl?xn(kl):function dh(n){return pe(n)&&Je(n)==be};function Ye(n){return null!=n&&Iu(n.length)&&!Kn(n)}function re(n){return pe(n)&&Ye(n)}var ds=Jf||tl,Nu=Nl?xn(Nl):function xp(n){return pe(n)&&Je(n)==jn};function Jh(n){if(!pe(n))return!1;var r=Je(n);return r==De||"[object DOMException]"==r||"string"==typeof n.message&&"string"==typeof n.name&&!ya(n)}function Kn(n){if(!de(n))return!1;var r=Je(n);return r==_n||r==$i||"[object AsyncFunction]"==r||"[object Proxy]"==r}function Hp(n){return"number"==typeof n&&n==Tt(n)}function Iu(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=H}function de(n){var r=typeof n;return null!=n&&("object"==r||"function"==r)}function pe(n){return null!=n&&"object"==typeof n}var Zp=Fl?xn(Fl):function wp(n){return pe(n)&&qe(n)==Re};function Yp(n){return"number"==typeof n||pe(n)&&Je(n)==ae}function ya(n){if(!pe(n)||Je(n)!=se)return!1;var r=bo(n);if(null===r)return!0;var a=Ut.call(r,"constructor")&&r.constructor;return"function"==typeof a&&a instanceof a&&_o.call(a)==Hf}var va=El?xn(El):function fh(n){return pe(n)&&Je(n)==Xi},Pu=Rl?xn(Rl):function Cp(n){return pe(n)&&qe(n)==zn};function Se(n){return"string"==typeof n||!vt(n)&&pe(n)&&Je(n)==Ji}function On(n){return"symbol"==typeof n||pe(n)&&Je(n)==so}var Ui=Vl?xn(Vl):function Ap(n){return pe(n)&&Iu(n.length)&&!!ne[Je(n)]},Jp=Sr(bc),Kp=Sr(function(n,r){return n<=r});function td(n){if(!n)return[];if(Ye(n))return Se(n)?Hn(n):fe(n);if(fr&&n[fr])return function dr(D){for(var V,E=[];!(V=D.next()).done;)E.push(V.value);return E}(n[fr]());var r=qe(n);return(r==Re?ic:r==zn?fo:jr)(n)}function Cs(n){return n?(n=Fe(n))===ht||n===-ht?17976931348623157e292*(n<0?-1:1):n==n?n:0:0===n?n:0}function Tt(n){var r=Cs(n),a=r%1;return r==r?a?r-a:r:0}function qu(n){return n?ii(Tt(n),0,At):0}function Fe(n){if("number"==typeof n)return n;if(On(n))return NaN;if(de(n)){var r="function"==typeof n.valueOf?n.valueOf():n;n=de(r)?r+"":r}if("string"!=typeof n)return 0===n?n:+n;n=Ll(n);var a=Zd.test(n);return a||Qd.test(n)?ye(n.slice(2),a?2:8):Hd.test(n)?NaN:+n}function ts(n){return wn(n,ln(n))}function Lt(n){return null==n?"":gt(n)}var eg=Xn(function(n,r){if(ls(r)||Ye(r))wn(r,Te(r),n);else for(var a in r)Ut.call(r,a)&&yr(n,a,r[a])}),ed=Xn(function(n,r){wn(r,ln(r),n)}),ba=Xn(function(n,r,a,h){wn(r,ln(r),n,h)}),wa=Xn(function(n,r,a,h){wn(r,Te(r),n,h)}),Bs=cs(pc),Qe=Mt(function(n,r){n=Qt(n);var a=-1,h=r.length,m=h>2?r[2]:b;for(m&&un(r[0],r[1],m)&&(h=1);++a<h;)for(var v=r[a],C=ln(v),T=-1,k=C.length;++T<k;){var q=C[T],L=n[q];(L===b||Gt(L,Ti[q])&&!Ut.call(n,q))&&(n[q]=v[q])}return n}),Gs=Mt(function(n){return n.push(b,le),vn(Bu,b,n)});function Ca(n,r,a){var h=null==n?b:oi(n,r);return h===b?a:h}function ji(n,r){return null!=n&&Sn(n,r,lh)}var ld=Pn(function(n,r,a){null!=r&&"function"!=typeof r.toString&&(r=yo.call(r)),n[r]=a},Zi(hn)),hd=Pn(function(n,r,a){null!=r&&"function"!=typeof r.toString&&(r=yo.call(r)),Ut.call(n,r)?n[r].push(a):n[r]=[a]},_t),dd=Mt(xr);function Te(n){return Ye(n)?rh(n):xc(n)}function ln(n){return Ye(n)?rh(n,!0):function gh(n){if(!de(n))return function Ae(n){var r=[];if(null!=n)for(var a in Qt(n))r.push(a);return r}(n);var r=ls(n),a=[];for(var h in n)"constructor"==h&&(r||!Ut.call(n,h))||a.push(h);return a}(n)}var Lu=Xn(function(n,r,a){Eo(n,r,a)}),Bu=Xn(function(n,r,a,h){Eo(n,r,a,h)}),Gu=cs(function(n,r){var a={};if(null==n)return a;var h=!1;r=ie(r,function(v){return v=ze(v,n),h||(h=v.length>1),v}),wn(n,An(n),a),h&&(a=En(a,7,Vh));for(var m=r.length;m--;)qo(a,r[m]);return a}),md=cs(function(n,r){return null==n?{}:function xh(n,r){return bh(n,r,function(a,h){return ji(n,h)})}(n,r)});function Wu(n,r){if(null==n)return{};var a=ie(An(n),function(h){return[h]});return r=_t(r),bh(n,a,function(h,m){return r(h,m[0])})}var ju=kc(Te),zu=kc(ln);function jr(n){return null==n?[]:nc(n,Te(n))}var sg=ci(function(n,r,a){return r=r.toLowerCase(),n+(a?Ta(r):r)});function Ta(n){return Sd(Lt(n).toLowerCase())}function bd(n){return(n=Lt(n))&&n.replace($d,Rf).replace(pf,"")}var Xg=ci(function(n,r,a){return n+(a?"-":"")+r.toLowerCase()}),Jg=ci(function(n,r,a){return n+(a?" ":"")+r.toLowerCase()}),Kg=Jn("toLowerCase"),zr=ci(function(n,r,a){return n+(a?"_":"")+r.toLowerCase()}),zi=ci(function(n,r,a){return n+(a?" ":"")+Sd(r)}),Zr=ci(function(n,r,a){return n+(a?" ":"")+r.toUpperCase()}),Sd=Jn("toUpperCase");function ag(n,r,a){return n=Lt(n),(r=a?b:r)===b?function Pf(D){return _f.test(D)}(n)?function Gf(D){return D.match(gf)||[]}(n):function kf(D){return D.match(jd)||[]}(n):n.match(r)||[]}var Qu=Mt(function(n,r){try{return vn(n,b,r)}catch(a){return Jh(a)?a:new Ct(a)}}),im=cs(function(n,r){return kn(r,function(a){a=hs(a),os(n,a,Hh(n[a],n))}),n});function Zi(n){return function(){return n}}var Na=Wo(),Fa=Wo(!0);function hn(n){return n}function Qr(n){return ph("function"==typeof n?n:En(n,1))}var ug=Mt(function(n,r){return function(a){return xr(a,n,r)}}),Td=Mt(function(n,r){return function(a){return xr(n,a,r)}});function $u(n,r,a){var h=Te(r),m=ko(r,h);null==a&&(!de(r)||!m.length&&h.length)&&(a=r,r=n,n=this,m=ko(r,Te(r)));var v=!(de(a)&&"chain"in a&&!a.chain),C=Kn(n);return kn(m,function(T){var k=r[T];n[T]=k,C&&(n.prototype[T]=function(){var q=this.__chain__;if(v||q){var L=n(this.__wrapped__);return(L.__actions__=fe(this.__actions__)).push({func:k,args:arguments,thisArg:n}),L.__chain__=q,L}return k.apply(n,Os([this.value()],arguments))})}),n}function Xu(){}var lg=qn(ie),Ju=qn(Il),om=qn(Ja);function hg(n){return Ne(n)?tc(hs(n)):function wh(n){return function(r){return oi(r,n)}}(n)}var dg=Eh(),Dd=Eh(!0);function $r(){return[]}function tl(){return!1}var Jr=Uo(function(n,r){return n+r},0),cm=Mc("ceil"),pg=Uo(function(n,r){return n/r},1),Nd=Mc("floor"),mg=Uo(function(n,r){return n*r},1),Ed=Mc("round"),Rd=Uo(function(n,r){return n-r},0);return _.after=function _u(n,r){if("function"!=typeof r)throw new $t(Nt);return n=Tt(n),function(){if(--n<1)return r.apply(this,arguments)}},_.ary=Wp,_.assign=eg,_.assignIn=ed,_.assignInWith=ba,_.assignWith=wa,_.at=Bs,_.before=da,_.bind=Hh,_.bindAll=im,_.bindKey=fa,_.castArray=function Tu(){if(!arguments.length)return[];var n=arguments[0];return vt(n)?n:[n]},_.chain=aa,_.chunk=function ta(n,r,a){r=(a?un(n,r,a):r===b)?1:ue(Tt(r),0);var h=null==n?0:n.length;if(!h||r<1)return[];for(var m=0,v=0,C=E(Co(h/r));m<h;)C[v++]=Vn(n,m,m+=r);return C},_.compact=function Bp(n){for(var r=-1,a=null==n?0:n.length,h=0,m=[];++r<a;){var v=n[r];v&&(m[h++]=v)}return m},_.concat=function ea(){var n=arguments.length;if(!n)return[];for(var r=E(n-1),a=arguments[0],h=n;h--;)r[h-1]=arguments[h];return Os(vt(a)?fe(a):[a],Pe(r,1))},_.cond=function Hi(n){var r=null==n?0:n.length,a=_t();return n=r?ie(n,function(h){if("function"!=typeof h[1])throw new $t(Nt);return[a(h[0]),h[1]]}):[],Mt(function(h){for(var m=-1;++m<r;){var v=n[m];if(vn(v[0],this,h))return vn(v[1],this,h)}})},_.conforms=function ka(n){return function pp(n){var r=Te(n);return function(a){return gc(a,n,r)}}(En(n,1))},_.constant=Zi,_.countBy=ru,_.create=function nd(n,r){var a=ks(n);return null==r?a:oh(a,r)},_.curry=function yu(n,r,a){var h=Cn(n,8,b,b,b,b,b,r=a?b:r);return h.placeholder=yu.placeholder,h},_.curryRight=function vu(n,r,a){var h=Cn(n,16,b,b,b,b,b,r=a?b:r);return h.placeholder=vu.placeholder,h},_.debounce=pa,_.defaults=Qe,_.defaultsDeep=Gs,_.defer=Zh,_.delay=Up,_.difference=Pc,_.differenceBy=Er,_.differenceWith=Tn,_.drop=function Rr(n,r,a){var h=null==n?0:n.length;return h?Vn(n,(r=a||r===b?1:Tt(r))<0?0:r,h):[]},_.dropRight=function qc(n,r,a){var h=null==n?0:n.length;return h?Vn(n,0,(r=h-(r=a||r===b?1:Tt(r)))<0?0:r):[]},_.dropRightWhile=function Vi(n,r){return n&&n.length?Tc(n,_t(r,3),!0,!0):[]},_.dropWhile=function Lc(n,r){return n&&n.length?Tc(n,_t(r,3),!0):[]},_.fill=function xs(n,r,a,h){var m=null==n?0:n.length;return m?(a&&"number"!=typeof a&&un(n,r,a)&&(a=0,h=m),function mp(n,r,a,h){var m=n.length;for((a=Tt(a))<0&&(a=-a>m?0:m+a),(h=h===b||h>m?m:Tt(h))<0&&(h+=m),h=a>h?0:qu(h);a<h;)n[a++]=r;return n}(n,r,a,h)):[]},_.filter=function au(n,r){return(vt(n)?Ts:uh)(n,_t(r,3))},_.flatMap=function cu(n,r){return Pe(Bi(n,r),1)},_.flatMapDeep=function Wr(n,r){return Pe(Bi(n,r),ht)},_.flatMapDepth=function uu(n,r,a){return a=a===b?1:Tt(a),Pe(Bi(n,r),a)},_.flatten=qs,_.flattenDeep=function na(n){return null!=n&&n.length?Pe(n,ht):[]},_.flattenDepth=function Ln(n,r){return null!=n&&n.length?Pe(n,r=r===b?1:Tt(r)):[]},_.flip=function jp(n){return Cn(n,512)},_.flow=Na,_.flowRight=Fa,_.fromPairs=function sa(n){for(var r=-1,a=null==n?0:n.length,h={};++r<a;){var m=n[r];h[m[0]]=m[1]}return h},_.functions=function ad(n){return null==n?[]:ko(n,Te(n))},_.functionsIn=function cd(n){return null==n?[]:ko(n,ln(n))},_.groupBy=Rg,_.initial=function hi(n){return null!=n&&n.length?Vn(n,0,-1):[]},_.intersection=Vr,_.intersectionBy=Ir,_.intersectionWith=qi,_.invert=ld,_.invertBy=hd,_.invokeMap=lu,_.iteratee=Qr,_.keyBy=la,_.keys=Te,_.keysIn=ln,_.map=Bi,_.mapKeys=function fd(n,r){var a={};return r=_t(r,3),Rn(n,function(h,m,v){os(a,r(h,m,v),h)}),a},_.mapValues=function pd(n,r){var a={};return r=_t(r,3),Rn(n,function(h,m,v){os(a,m,r(h,m,v))}),a},_.matches=function Ea(n){return _h(En(n,1))},_.matchesProperty=function cg(n,r){return yh(n,En(r,1))},_.memoize=Wi,_.merge=Lu,_.mergeWith=Bu,_.method=ug,_.methodOf=Td,_.mixin=$u,_.negate=xu,_.nthArg=function rm(n){return n=Tt(n),Mt(function(r){return Ro(r,n)})},_.omit=Gu,_.omitBy=function gd(n,r){return Wu(n,xu(_t(r)))},_.once=function bu(n){return da(2,n)},_.orderBy=function hu(n,r,a,h){return null==n?[]:(vt(r)||(r=null==r?[]:[r]),vt(a=h?b:a)||(a=null==a?[]:[a]),vh(n,r,a))},_.over=lg,_.overArgs=wu,_.overEvery=Ju,_.overSome=om,_.partial=Ur,_.partialRight=ga,_.partition=du,_.pick=md,_.pickBy=Wu,_.property=hg,_.propertyOf=function Ku(n){return function(r){return null==n?b:oi(n,r)}},_.pull=qh,_.pullAll=ia,_.pullAllBy=function Lh(n,r,a){return n&&n.length&&r&&r.length?Vo(n,r,_t(a,2)):n},_.pullAllWith=function Gc(n,r,a){return n&&n.length&&r&&r.length?Vo(n,r,b,a):n},_.pullAt=Bh,_.range=dg,_.rangeRight=Dd,_.rearg=Yh,_.reject=function fu(n,r){return(vt(n)?Ts:uh)(n,xu(_t(r,3)))},_.remove=function bs(n,r){var a=[];if(!n||!n.length)return a;var h=-1,m=[],v=n.length;for(r=_t(r,3);++h<v;){var C=n[h];r(C,h,n)&&(a.push(C),m.push(h))}return Ch(n,m),a},_.rest=function Qh(n,r){if("function"!=typeof n)throw new $t(Nt);return Mt(n,r=r===b?r:Tt(r))},_.reverse=di,_.sampleSize=function pu(n,r,a){return r=(a?un(n,r,a):r===b)?1:Tt(r),(vt(n)?hp:Ah)(n,r)},_.set=function Aa(n,r,a){return null==n?n:Io(n,r,a)},_.setWith=function _d(n,r,a,h){return h="function"==typeof h?h:b,null==n?n:Io(n,r,a,h)},_.shuffle=function gu(n){return(vt(n)?dp:bg)(n)},_.slice=function Wc(n,r,a){var h=null==n?0:n.length;return h?(a&&"number"!=typeof a&&un(n,r,a)?(r=0,a=h):(r=null==r?0:Tt(r),a=a===b?h:Tt(a)),Vn(n,r,a)):[]},_.sortBy=Lg,_.sortedUniq=function jc(n){return n&&n.length?Th(n):[]},_.sortedUniqBy=function zc(n,r){return n&&n.length?Th(n,_t(r,2)):[]},_.split=function Oa(n,r,a){return a&&"number"!=typeof a&&un(n,r,a)&&(r=a=b),(a=a===b?At:a>>>0)?(n=Lt(n))&&("string"==typeof r||null!=r&&!va(r))&&!(r=gt(r))&&Ai(n)?vs(Hn(n),0,a):n.split(r,a):[]},_.spread=function Bg(n,r){if("function"!=typeof n)throw new $t(Nt);return r=null==r?0:ue(Tt(r),0),Mt(function(a){var h=a[r],m=vs(a,0,r);return h&&Os(m,h),vn(n,this,m)})},_.tail=function Hc(n){var r=null==n?0:n.length;return r?Vn(n,1,r):[]},_.take=function Og(n,r,a){return n&&n.length?Vn(n,0,(r=a||r===b?1:Tt(r))<0?0:r):[]},_.takeRight=function ws(n,r,a){var h=null==n?0:n.length;return h?Vn(n,(r=h-(r=a||r===b?1:Tt(r)))<0?0:r,h):[]},_.takeRightWhile=function ra(n,r){return n&&n.length?Tc(n,_t(r,3),!1,!0):[]},_.takeWhile=function fi(n,r){return n&&n.length?Tc(n,_t(r,3)):[]},_.tap=function zh(n,r){return r(n),n},_.throttle=function Cu(n,r,a){var h=!0,m=!0;if("function"!=typeof n)throw new $t(Nt);return de(a)&&(h="leading"in a?!!a.leading:h,m="trailing"in a?!!a.trailing:m),pa(n,r,{leading:h,maxWait:r,trailing:m})},_.thru=nu,_.toArray=td,_.toPairs=ju,_.toPairsIn=zu,_.toPath=function Md(n){return vt(n)?ie(n,hs):On(n)?[n]:fe(qp(Lt(n)))},_.toPlainObject=ts,_.transform=function en(n,r,a){var h=vt(n),m=h||ds(n)||Ui(n);if(r=_t(r,4),null==a){var v=n&&n.constructor;a=m?h?new v:[]:de(n)&&Kn(v)?ks(bo(n)):{}}return(m?kn:Rn)(n,function(C,T,k){return r(a,C,T,k)}),a},_.unary=function Au(n){return Wp(n,1)},_.union=pi,_.unionBy=Zc,_.unionWith=Lr,_.uniq=function Yc(n){return n&&n.length?Ke(n):[]},_.uniqBy=function Uh(n,r){return n&&n.length?Ke(n,_t(r,2)):[]},_.uniqWith=function Qc(n,r){return r="function"==typeof r?r:b,n&&n.length?Ke(n,b,r):[]},_.unset=function Ws(n,r){return null==n||qo(n,r)},_.unzip=Br,_.unzipWith=oa,_.update=function yd(n,r,a){return null==n?n:Lo(n,r,Oc(a))},_.updateWith=function Zg(n,r,a,h){return h="function"==typeof h?h:b,null==n?n:Lo(n,r,Oc(a),h)},_.values=jr,_.valuesIn=function vd(n){return null==n?[]:nc(n,ln(n))},_.without=$c,_.words=ag,_.wrap=function Su(n,r){return Ur(Oc(r),n)},_.xor=Xc,_.xorBy=Jc,_.xorWith=jh,_.zip=Kc,_.zipObject=function Gr(n,r){return an(n||[],r||[],yr)},_.zipObjectDeep=function tu(n,r){return an(n||[],r||[],Io)},_.zipWith=eu,_.entries=ju,_.entriesIn=zu,_.extend=ed,_.extendWith=ba,$u(_,_),_.add=Jr,_.attempt=Qu,_.camelCase=sg,_.capitalize=Ta,_.ceil=cm,_.clamp=function xd(n,r,a){return a===b&&(a=r,r=b),a!==b&&(a=(a=Fe(a))==a?a:0),r!==b&&(r=(r=Fe(r))==r?r:0),ii(Fe(n),r,a)},_.clone=function $h(n){return En(n,4)},_.cloneDeep=function Du(n){return En(n,5)},_.cloneDeepWith=function Xh(n,r){return En(n,5,r="function"==typeof r?r:b)},_.cloneWith=function Ou(n,r){return En(n,4,r="function"==typeof r?r:b)},_.conformsTo=function Mu(n,r){return null==r||gc(n,r,Te(r))},_.deburr=bd,_.defaultTo=function Yr(n,r){return null==n||n!=n?r:n},_.divide=pg,_.endsWith=function Yg(n,r,a){n=Lt(n),r=gt(r);var h=n.length,m=a=a===b?h:ii(Tt(a),0,h);return(a-=r.length)>=0&&n.slice(a,m)==r},_.eq=Gt,_.escape=function Qg(n){return(n=Lt(n))&&Bd.test(n)?n.replace(er,Vf):n},_.escapeRegExp=function $g(n){return(n=Lt(n))&&ul.test(n)?n.replace(wi,"\\$&"):n},_.every=function ou(n,r,a){var h=vt(n)?Il:gp;return a&&un(n,r,a)&&(r=b),h(n,_t(r,3))},_.find=Li,_.findIndex=Bc,_.findKey=function ng(n,r){return Pl(n,_t(r,3),Rn)},_.findLast=gi,_.findLastIndex=Ii,_.findLastKey=function Hg(n,r){return Pl(n,_t(r,3),Mo)},_.floor=Nd,_.forEach=ca,_.forEachRight=ua,_.forIn=function sd(n,r){return null==n?n:mc(n,_t(r,3),ln)},_.forInRight=function id(n,r){return null==n?n:_c(n,_t(r,3),ln)},_.forOwn=function rd(n,r){return n&&Rn(n,_t(r,3))},_.forOwnRight=function od(n,r){return n&&Mo(n,_t(r,3))},_.get=Ca,_.gt=ma,_.gte=mi,_.has=function ud(n,r){return null!=n&&Sn(n,r,_p)},_.hasIn=ji,_.head=Pi,_.identity=hn,_.includes=function Vg(n,r,a,h){n=Ye(n)?n:jr(n),a=a&&!h?Tt(a):0;var m=n.length;return a<0&&(a=ue(m+a,0)),Se(n)?a<=m&&n.indexOf(r,a)>-1:!!m&&Wt(n,r,a)>-1},_.indexOf=function Gp(n,r,a){var h=null==n?0:n.length;if(!h)return-1;var m=null==a?0:Tt(a);return m<0&&(m=ue(h+m,0)),Wt(n,r,m)},_.inRange=function Hu(n,r,a){return r=Cs(r),a===b?(a=r,r=0):a=Cs(a),function yp(n,r,a){return n>=Ue(r,a)&&n<ue(r,a)}(n=Fe(n),r,a)},_.invoke=dd,_.isArguments=Ls,_.isArray=vt,_.isArrayBuffer=zp,_.isArrayLike=Ye,_.isArrayLikeObject=re,_.isBoolean=function ku(n){return!0===n||!1===n||pe(n)&&Je(n)==Xt},_.isBuffer=ds,_.isDate=Nu,_.isElement=function Fu(n){return pe(n)&&1===n.nodeType&&!ya(n)},_.isEmpty=function Eu(n){if(null==n)return!0;if(Ye(n)&&(vt(n)||"string"==typeof n||"function"==typeof n.splice||ds(n)||Ui(n)||Ls(n)))return!n.length;var r=qe(n);if(r==Re||r==zn)return!n.size;if(ls(n))return!xc(n).length;for(var a in n)if(Ut.call(n,a))return!1;return!0},_.isEqual=function Ru(n,r){return br(n,r)},_.isEqualWith=function Vu(n,r,a){var h=(a="function"==typeof a?a:b)?a(n,r):b;return h===b?br(n,r,b,a):!!h},_.isError=Jh,_.isFinite=function Gg(n){return"number"==typeof n&&$l(n)},_.isFunction=Kn,_.isInteger=Hp,_.isLength=Iu,_.isMap=Zp,_.isMatch=function Wg(n,r){return n===r||No(n,r,Zo(r))},_.isMatchWith=function Ug(n,r,a){return a="function"==typeof a?a:b,No(n,r,Zo(r),a)},_.isNaN=function jg(n){return Yp(n)&&n!=+n},_.isNative=function _a(n){if(Vc(n))throw new Ct("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Fo(n)},_.isNil=function zg(n){return null==n},_.isNull=function Kh(n){return null===n},_.isNumber=Yp,_.isObject=de,_.isObjectLike=pe,_.isPlainObject=ya,_.isRegExp=va,_.isSafeInteger=function xa(n){return Hp(n)&&n>=-H&&n<=H},_.isSet=Pu,_.isString=Se,_.isSymbol=On,_.isTypedArray=Ui,_.isUndefined=function Qp(n){return n===b},_.isWeakMap=function $p(n){return pe(n)&&qe(n)==Ki},_.isWeakSet=function Xp(n){return pe(n)&&"[object WeakSet]"==Je(n)},_.join=function Pr(n,r){return null==n?"":Xl.call(n,r)},_.kebabCase=Xg,_.last=Ze,_.lastIndexOf=function Ph(n,r,a){var h=null==n?0:n.length;if(!h)return-1;var m=h;return a!==b&&(m=(m=Tt(a))<0?ue(h+m,0):Ue(m,h-1)),r==r?function on(D,V,E){for(var $=E+1;$--;)if(D[$]===V)return $;return $}(n,r,m):ho(n,Ka,m,!0)},_.lowerCase=Jg,_.lowerFirst=Kg,_.lt=Jp,_.lte=Kp,_.max=function um(n){return n&&n.length?ri(n,hn,Ni):b},_.maxBy=function lm(n,r){return n&&n.length?ri(n,_t(r,2),Ni):b},_.mean=function hm(n){return ql(n,hn)},_.meanBy=function dm(n,r){return ql(n,_t(r,2))},_.min=function gg(n){return n&&n.length?ri(n,hn,bc):b},_.minBy=function Fd(n,r){return n&&n.length?ri(n,_t(r,2),bc):b},_.stubArray=$r,_.stubFalse=tl,_.stubObject=function am(){return{}},_.stubString=function fg(){return""},_.stubTrue=function Xr(){return!0},_.multiply=mg,_.nth=function qr(n,r){return n&&n.length?Ro(n,Tt(r)):b},_.noConflict=function Od(){return Ve._===this&&(Ve._=Zf),this},_.noop=Xu,_.now=Gi,_.pad=function tm(n,r,a){n=Lt(n);var h=(r=Tt(r))?Si(n):0;if(!r||h>=r)return n;var m=(r-h)/2;return Ar(Ao(m),a)+n+Ar(Co(m),a)},_.padEnd=function ig(n,r,a){n=Lt(n);var h=(r=Tt(r))?Si(n):0;return r&&h<r?n+Ar(r-h,a):n},_.padStart=function wd(n,r,a){n=Lt(n);var h=(r=Tt(r))?Si(n):0;return r&&h<r?Ar(r-h,a)+n:n},_.parseInt=function em(n,r,a){return a||null==r?r=0:r&&(r=+r),tp(Lt(n).replace(ir,""),r||0)},_.random=function Sa(n,r,a){if(a&&"boolean"!=typeof a&&un(n,r,a)&&(r=a=b),a===b&&("boolean"==typeof r?(a=r,r=b):"boolean"==typeof n&&(a=n,n=b)),n===b&&r===b?(n=0,r=1):(n=Cs(n),r===b?(r=n,n=0):r=Cs(r)),n>r){var h=n;n=r,r=h}if(a||n%1||r%1){var m=ac();return Ue(n+m*(r-n+Af("1e-"+((m+"").length-1))),r)}return wc(n,r)},_.reduce=function Ig(n,r,a){var h=vt(n)?Xa:ce,m=arguments.length<3;return h(n,_t(r,4),a,m,Es)},_.reduceRight=function Pg(n,r,a){var h=vt(n)?Df:ce,m=arguments.length<3;return h(n,_t(r,4),a,m,ch)},_.repeat=function nm(n,r,a){return r=(a?un(n,r,a):r===b)?1:Tt(r),Cc(Lt(n),r)},_.replace=function sm(){var n=arguments,r=Lt(n[0]);return n.length<3?r:r.replace(n[1],n[2])},_.result=function Uu(n,r,a){var h=-1,m=(r=ze(r,n)).length;for(m||(m=1,n=b);++h<m;){var v=null==n?b:n[hs(r[h])];v===b&&(h=m,v=a),n=Kn(v)?v.call(n):v}return n},_.round=Ed,_.runInContext=D,_.sample=function ha(n){return(vt(n)?ys:Op)(n)},_.size=function mu(n){if(null==n)return 0;if(Ye(n))return Se(n)?Si(n):n.length;var r=qe(n);return r==Re||r==zn?n.size:xc(n).length},_.snakeCase=zr,_.some=function qg(n,r,a){var h=vt(n)?Ja:Dp;return a&&un(n,r,a)&&(r=b),h(n,_t(r,3))},_.sortedIndex=function Uc(n,r){return Po(n,r)},_.sortedIndexBy=function Ag(n,r,a){return Sc(n,r,_t(a,2))},_.sortedIndexOf=function Sg(n,r){var a=null==n?0:n.length;if(a){var h=Po(n,r);if(h<a&&Gt(n[h],r))return h}return-1},_.sortedLastIndex=function Tg(n,r){return Po(n,r,!0)},_.sortedLastIndexBy=function Gh(n,r,a){return Sc(n,r,_t(a,2),!0)},_.sortedLastIndexOf=function Wh(n,r){if(null!=n&&n.length){var h=Po(n,r,!0)-1;if(Gt(n[h],r))return h}return-1},_.startCase=zi,_.startsWith=function Hr(n,r,a){return n=Lt(n),a=null==a?0:ii(Tt(a),0,n.length),r=gt(r),n.slice(a,a+r.length)==r},_.subtract=Rd,_.sum=function Vd(n){return n&&n.length?ur(n,hn):0},_.sumBy=function _g(n,r){return n&&n.length?ur(n,_t(r,2)):0},_.template=function Zu(n,r,a){var h=_.templateSettings;a&&un(n,r,a)&&(r=b),n=Lt(n),r=ba({},r,h,Rh);var T,k,m=ba({},r.imports,h.imports,Rh),v=Te(m),C=nc(m,v),q=0,L=r.interpolate||oo,W="__p += '",Y=rc((r.escape||oo).source+"|"+L.source+"|"+(L===nr?zd:oo).source+"|"+(r.evaluate||oo).source+"|$","g"),st="//# sourceURL="+(Ut.call(r,"sourceURL")?(r.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++vf+"]")+"\n";n.replace(Y,function(ft,Ft,Vt,nn,sn,dn){return Vt||(Vt=nn),W+=n.slice(q,dn).replace(ao,If),Ft&&(T=!0,W+="' +\n__e("+Ft+") +\n'"),sn&&(k=!0,W+="';\n"+sn+";\n__p += '"),Vt&&(W+="' +\n((__t = ("+Vt+")) == null ? '' : __t) +\n'"),q=dn+ft.length,ft}),W+="';\n";var dt=Ut.call(r,"variable")&&r.variable;if(dt){if(Ga.test(dt))throw new Ct("Invalid `variable` option passed into `_.template`")}else W="with (obj) {\n"+W+"\n}\n";W=(k?W.replace(Ys,""):W).replace(il,"$1").replace(rl,"$1;"),W="function("+(dt||"obj")+") {\n"+(dt?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(T?", __e = _.escape":"")+(k?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+W+"return __p\n}";var Ot=Qu(function(){return Rt(v,st+"return "+W).apply(b,C)});if(Ot.source=W,Jh(Ot))throw Ot;return Ot},_.times=function el(n,r){if((n=Tt(n))<1||n>H)return[];var a=At,h=Ue(n,At);r=_t(r),n-=At;for(var m=lr(h,r);++a<n;)r(a);return m},_.toFinite=Cs,_.toInteger=Tt,_.toLength=qu,_.toLower=function rg(n){return Lt(n).toLowerCase()},_.toNumber=Fe,_.toSafeInteger=function tg(n){return n?ii(Tt(n),-H,H):0===n?n:0},_.toString=Lt,_.toUpper=function Yu(n){return Lt(n).toUpperCase()},_.trim=function og(n,r,a){if((n=Lt(n))&&(a||r===b))return Ll(n);if(!n||!(r=gt(r)))return n;var h=Hn(n),m=Hn(r);return vs(h,Bl(h,m),sc(h,m)+1).join("")},_.trimEnd=function Da(n,r,a){if((n=Lt(n))&&(a||r===b))return n.slice(0,Ul(n)+1);if(!n||!(r=gt(r)))return n;var h=Hn(n);return vs(h,0,sc(h,Hn(r))+1).join("")},_.trimStart=function Cd(n,r,a){if((n=Lt(n))&&(a||r===b))return n.replace(ir,"");if(!n||!(r=gt(r)))return n;var h=Hn(n);return vs(h,Bl(h,Hn(r))).join("")},_.truncate=function Ad(n,r){var a=30,h="...";if(de(r)){var m="separator"in r?r.separator:m;a="length"in r?Tt(r.length):a,h="omission"in r?gt(r.omission):h}var v=(n=Lt(n)).length;if(Ai(n)){var C=Hn(n);v=C.length}if(a>=v)return n;var T=a-Si(h);if(T<1)return h;var k=C?vs(C,0,T).join(""):n.slice(0,T);if(m===b)return k+h;if(C&&(T+=k.length-T),va(m)){if(n.slice(T).search(m)){var q,L=k;for(m.global||(m=rc(m.source,Lt(ll.exec(m))+"g")),m.lastIndex=0;q=m.exec(L);)var W=q.index;k=k.slice(0,W===b?T:W)}}else if(n.indexOf(gt(m),T)!=T){var Y=k.lastIndexOf(m);Y>-1&&(k=k.slice(0,Y))}return k+h},_.unescape=function Ma(n){return(n=Lt(n))&&ol.test(n)?n.replace(Qs,jl):n},_.uniqueId=function kd(n){var r=++zf;return Lt(n)+r},_.upperCase=Zr,_.upperFirst=Sd,_.each=ca,_.eachRight=ua,_.first=Pi,$u(_,function(){var n={};return Rn(_,function(r,a){Ut.call(_.prototype,a)||(n[a]=r)}),n}(),{chain:!1}),_.VERSION="4.17.21",kn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){_[n].placeholder=_}),kn(["drop","take"],function(n,r){nt.prototype[n]=function(a){a=a===b?1:ue(Tt(a),0);var h=this.__filtered__&&!r?new nt(this):this.clone();return h.__filtered__?h.__takeCount__=Ue(a,h.__takeCount__):h.__views__.push({size:Ue(a,At),type:n+(h.__dir__<0?"Right":"")}),h},nt.prototype[n+"Right"]=function(a){return this.reverse()[n](a).reverse()}}),kn(["filter","map","takeWhile"],function(n,r){var a=r+1,h=1==a||3==a;nt.prototype[n]=function(m){var v=this.clone();return v.__iteratees__.push({iteratee:_t(m,3),type:a}),v.__filtered__=v.__filtered__||h,v}}),kn(["head","last"],function(n,r){var a="take"+(r?"Right":"");nt.prototype[n]=function(){return this[a](1).value()[0]}}),kn(["initial","tail"],function(n,r){var a="drop"+(r?"":"Right");nt.prototype[n]=function(){return this.__filtered__?new nt(this):this[a](1)}}),nt.prototype.compact=function(){return this.filter(hn)},nt.prototype.find=function(n){return this.filter(n).head()},nt.prototype.findLast=function(n){return this.reverse().find(n)},nt.prototype.invokeMap=Mt(function(n,r){return"function"==typeof n?new nt(this):this.map(function(a){return xr(a,n,r)})}),nt.prototype.reject=function(n){return this.filter(xu(_t(n)))},nt.prototype.slice=function(n,r){n=Tt(n);var a=this;return a.__filtered__&&(n>0||r<0)?new nt(a):(n<0?a=a.takeRight(-n):n&&(a=a.drop(n)),r!==b&&(a=(r=Tt(r))<0?a.dropRight(-r):a.take(r-n)),a)},nt.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},nt.prototype.toArray=function(){return this.take(At)},Rn(nt.prototype,function(n,r){var a=/^(?:filter|find|map|reject)|While$/.test(r),h=/^(?:head|last)$/.test(r),m=_[h?"take"+("last"==r?"Right":""):r],v=h||/^find/.test(r);m&&(_.prototype[r]=function(){var C=this.__wrapped__,T=h?[1]:arguments,k=C instanceof nt,q=T[0],L=k||vt(C),W=function(Ft){var Vt=m.apply(_,Os([Ft],T));return h&&Y?Vt[0]:Vt};L&&a&&"function"==typeof q&&1!=q.length&&(k=L=!1);var Y=this.__chain__,dt=v&&!Y,Ot=k&&!this.__actions__.length;if(!v&&L){C=Ot?C:new nt(this);var ft=n.apply(C,T);return ft.__actions__.push({func:nu,args:[W],thisArg:b}),new Fn(ft,Y)}return dt&&Ot?n.apply(this,T):(ft=this.thru(W),dt?h?ft.value()[0]:ft.value():ft)})}),kn(["pop","push","shift","sort","splice","unshift"],function(n){var r=go[n],a=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",h=/^(?:pop|shift)$/.test(n);_.prototype[n]=function(){var m=arguments;if(h&&!this.__chain__){var v=this.value();return r.apply(vt(v)?v:[],m)}return this[a](function(C){return r.apply(vt(C)?C:[],m)})}}),Rn(nt.prototype,function(n,r){var a=_[r];if(a){var h=a.name+"";Ut.call(ni,h)||(ni[h]=[]),ni[h].push({name:r,func:a})}}),ni[Cr(b,2).name]=[{name:"wrapper",func:b}],nt.prototype.clone=function ke(){var n=new nt(this.__wrapped__);return n.__actions__=fe(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=fe(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=fe(this.__views__),n},nt.prototype.reverse=function Zt(){if(this.__filtered__){var n=new nt(this);n.__dir__=-1,n.__filtered__=!0}else(n=this.clone()).__dir__*=-1;return n},nt.prototype.value=function th(){var n=this.__wrapped__.value(),r=this.__dir__,a=vt(n),h=r<0,m=a?n.length:0,v=function Rp(n,r,a){for(var h=-1,m=a.length;++h<m;){var v=a[h],C=v.size;switch(v.type){case"drop":n+=C;break;case"dropRight":r-=C;break;case"take":r=Ue(r,n+C);break;case"takeRight":n=ue(n,r-C)}}return{start:n,end:r}}(0,m,this.__views__),C=v.start,T=v.end,k=T-C,q=h?T:C-1,L=this.__iteratees__,W=L.length,Y=0,st=Ue(k,this.__takeCount__);if(!a||!h&&m==k&&st==k)return Oh(n,this.__actions__);var dt=[];t:for(;k--&&Y<st;){for(var Ot=-1,ft=n[q+=r];++Ot<W;){var Ft=L[Ot],nn=Ft.type,sn=(0,Ft.iteratee)(ft);if(2==nn)ft=sn;else if(!sn){if(1==nn)continue t;break t}}dt[Y++]=ft}return dt},_.prototype.at=Dg,_.prototype.chain=function Mg(){return aa(this)},_.prototype.commit=function kg(){return new Fn(this.value(),this.__chain__)},_.prototype.next=function Ng(){this.__values__===b&&(this.__values__=td(this.value()));var n=this.__index__>=this.__values__.length;return{done:n,value:n?b:this.__values__[this.__index__++]}},_.prototype.plant=function Eg(n){for(var r,a=this;a instanceof ve;){var h=Ps(a);h.__index__=0,h.__values__=b,r?m.__wrapped__=h:r=h;var m=h;a=a.__wrapped__}return m.__wrapped__=n,r},_.prototype.reverse=function su(){var n=this.__wrapped__;if(n instanceof nt){var r=n;return this.__actions__.length&&(r=new nt(this)),(r=r.reverse()).__actions__.push({func:nu,args:[di],thisArg:b}),new Fn(r,this.__chain__)}return this.thru(di)},_.prototype.toJSON=_.prototype.valueOf=_.prototype.value=function iu(){return Oh(this.__wrapped__,this.__actions__)},_.prototype.first=_.prototype.head,fr&&(_.prototype[fr]=function Fg(){return this}),_}();Ve._=po,(pt=function(){return po}.call(Yt,ut,Yt,J))!==b&&(J.exports=pt)}.call(this)},3897:J=>{J.exports=function Yt(ut,pt){(null==pt||pt>ut.length)&&(pt=ut.length);for(var b=0,Pt=new Array(pt);b<pt;b++)Pt[b]=ut[b];return Pt},J.exports.__esModule=!0,J.exports.default=J.exports},5372:J=>{J.exports=function Yt(ut){if(Array.isArray(ut))return ut},J.exports.__esModule=!0,J.exports.default=J.exports},6690:J=>{J.exports=function Yt(ut,pt){if(!(ut instanceof pt))throw new TypeError("Cannot call a class as a function")},J.exports.__esModule=!0,J.exports.default=J.exports},9728:(J,Yt,ut)=>{var pt=ut(4062);function b(at,u){for(var Nt=0;Nt<u.length;Nt++){var he=u[Nt];he.enumerable=he.enumerable||!1,he.configurable=!0,"value"in he&&(he.writable=!0),Object.defineProperty(at,pt(he.key),he)}}J.exports=function Pt(at,u,Nt){return u&&b(at.prototype,u),Nt&&b(at,Nt),Object.defineProperty(at,"prototype",{writable:!1}),at},J.exports.__esModule=!0,J.exports.default=J.exports},8872:J=>{J.exports=function Yt(ut,pt){var b=null==ut?null:typeof Symbol<"u"&&ut[Symbol.iterator]||ut["@@iterator"];if(null!=b){var Pt,at,u,Nt,he=[],Oe=!0,js=!1;try{if(u=(b=b.call(ut)).next,0===pt){if(Object(b)!==b)return;Oe=!1}else for(;!(Oe=(Pt=u.call(b)).done)&&(he.push(Pt.value),he.length!==pt);Oe=!0);}catch(pn){js=!0,at=pn}finally{try{if(!Oe&&null!=b.return&&(Nt=b.return(),Object(Nt)!==Nt))return}finally{if(js)throw at}}return he}},J.exports.__esModule=!0,J.exports.default=J.exports},2218:J=>{J.exports=function Yt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},J.exports.__esModule=!0,J.exports.default=J.exports},7424:(J,Yt,ut)=>{var pt=ut(5372),b=ut(8872),Pt=ut(6116),at=ut(2218);J.exports=function u(Nt,he){return pt(Nt)||b(Nt,he)||Pt(Nt,he)||at()},J.exports.__esModule=!0,J.exports.default=J.exports},5036:(J,Yt,ut)=>{var pt=ut(8698).default;J.exports=function b(Pt,at){if("object"!==pt(Pt)||null===Pt)return Pt;var u=Pt[Symbol.toPrimitive];if(void 0!==u){var Nt=u.call(Pt,at||"default");if("object"!==pt(Nt))return Nt;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===at?String:Number)(Pt)},J.exports.__esModule=!0,J.exports.default=J.exports},4062:(J,Yt,ut)=>{var pt=ut(8698).default,b=ut(5036);J.exports=function Pt(at){var u=b(at,"string");return"symbol"===pt(u)?u:String(u)},J.exports.__esModule=!0,J.exports.default=J.exports},8698:J=>{function Yt(ut){return J.exports=Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(pt){return typeof pt}:function(pt){return pt&&"function"==typeof Symbol&&pt.constructor===Symbol&&pt!==Symbol.prototype?"symbol":typeof pt},J.exports.__esModule=!0,J.exports.default=J.exports,Yt(ut)}J.exports=Yt,J.exports.__esModule=!0,J.exports.default=J.exports},6116:(J,Yt,ut)=>{var pt=ut(3897);J.exports=function b(Pt,at){if(Pt){if("string"==typeof Pt)return pt(Pt,at);var u=Object.prototype.toString.call(Pt).slice(8,-1);if("Object"===u&&Pt.constructor&&(u=Pt.constructor.name),"Map"===u||"Set"===u)return Array.from(Pt);if("Arguments"===u||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return pt(Pt,at)}},J.exports.__esModule=!0,J.exports.default=J.exports}}]);