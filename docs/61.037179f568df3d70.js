(self.webpackChunkcomms=self.webpackChunkcomms||[]).push([[61],{3061:(J,Yt,bt)=>{"use strict";bt.r(Yt),bt.d(Yt,{FunctionalTrainerModule:()=>ea});var _t=bt(6814),x=bt(4225);function Lt(r,t,e,i,o,c,u){try{var d=r[c](u),h=d.value}catch(f){return void e(f)}d.done?t(h):Promise.resolve(h).then(i,o)}function ut(r){return function(){var t=this,e=arguments;return new Promise(function(i,o){var c=r.apply(t,e);function u(h){Lt(c,i,o,u,d,"next",h)}function d(h){Lt(c,i,o,u,d,"throw",h)}u(void 0)})}}var A=bt(4946),Ft=bt(6990);const de="14.7.77";var Oe=bt(9884);const Qe=new WeakSet,Re=new WeakMap,Xn=new WeakMap,We=new WeakMap,an=new WeakMap,us=new WeakMap,_e=new WeakMap,In=new WeakMap,He=new WeakMap,$n=new WeakMap,xn={construct:()=>xn},hi=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Rr=(r,t)=>{const e=[];let i=r.replace(/^[\s]+/,""),o=i.match(hi);for(;null!==o;){const c=o[1].slice(1,-1),u=o[0].replace(/([\s]+)?;?$/,"").replace(c,new URL(c,t).toString());e.push(u),i=i.slice(o[0].length).replace(/^[\s]+/,""),o=i.match(hi)}return[e.join(";"),i]},Ir=r=>{if(void 0!==r&&!Array.isArray(r))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},qr=r=>{if(!(r=>{try{new new Proxy(r,xn)}catch{return!1}return!0})(r))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===r.prototype||"object"!=typeof r.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},Je=(r,t)=>{const e=r.get(t);if(void 0===e)throw new Error("A value with the given key could not be found.");return e},Vt=(r,t)=>{const e=Array.from(r).filter(t);if(e.length>1)throw Error("More than one element was found.");if(0===e.length)throw Error("No element was found.");const[i]=e;return r.delete(i),i},tt=(r,t,e,i)=>{const o=Je(r,t),c=Vt(o,u=>u[0]===e&&u[1]===i);return 0===o.size&&r.delete(t),c},lt=r=>Je(_e,r),Z=r=>{if(Qe.has(r))throw new Error("The AudioNode is already stored.");Qe.add(r),lt(r).forEach(t=>t(!0))},wt=r=>"port"in r,at=r=>{if(!Qe.has(r))throw new Error("The AudioNode is not stored.");Qe.delete(r),lt(r).forEach(t=>t(!1))},Ct=(r,t)=>{!wt(r)&&t.every(e=>0===e.size)&&at(r)},xs={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},Kt=(r,t)=>r.context===t,ls=r=>{try{r.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},De=()=>new DOMException("","IndexSizeError"),cn=r=>{var t;r.getChannelData=(t=r.getChannelData,e=>{try{return t.call(r,e)}catch(i){throw 12===i.code?De():i}})},Vi={numberOfChannels:1},ae=-34028234663852886e22,Ne=-ae,ie=r=>Qe.has(r),iu={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},we=r=>Je(Re,r),Jn=r=>Je(We,r),Ui=(r,t)=>{const{activeInputs:e}=we(r);e.forEach(o=>o.forEach(([c])=>{t.includes(r)||Ui(c,[...t,r])}));const i=(r=>"playbackRate"in r)(r)?[r.playbackRate]:wt(r)?Array.from(r.parameters.values()):(r=>"frequency"in r&&"gain"in r)(r)?[r.Q,r.detune,r.frequency,r.gain]:(r=>"offset"in r)(r)?[r.offset]:(r=>!("frequency"in r)&&"gain"in r)(r)?[r.gain]:(r=>"detune"in r&&"frequency"in r)(r)?[r.detune,r.frequency]:(r=>"pan"in r)(r)?[r.pan]:[];for(const o of i){const c=Jn(o);void 0!==c&&c.activeInputs.forEach(([u])=>Ui(u,t))}ie(r)&&at(r)},fi=r=>{Ui(r.destination,[])},pi=r=>"context"in r,Ws=r=>pi(r[0]),Bs=(r,t,e,i)=>{for(const o of r)if(e(o)){if(i)return!1;throw Error("The set contains at least one similar element.")}return r.add(t),!0},ru=(r,t,[e,i],o)=>{Bs(r,[t,e,i],c=>c[0]===t&&c[1]===e,o)},ou=(r,[t,e,i],o)=>{const c=r.get(t);void 0===c?r.set(t,new Set([[e,i]])):Bs(c,[e,i],u=>u[0]===e,o)},Gs=r=>"inputs"in r,zi=(r,t,e,i)=>{if(Gs(t)){const o=t.inputs[i];return r.connect(o,e,0),[o,e,0]}return r.connect(t,e,i),[t,e,i]},au=(r,t,e)=>{for(const i of r)if(i[0]===t&&i[1]===e)return r.delete(i),i;return null},cu=(r,t)=>{if(!lt(r).delete(t))throw new Error("Missing the expected event listener.")},uu=(r,t,e)=>{const i=Je(r,t),o=Vt(i,c=>c[0]===e);return 0===i.size&&r.delete(t),o},ji=(r,t,e,i)=>{Gs(t)?r.disconnect(t.inputs[i],e,0):r.disconnect(t,e,i)},ne=r=>Je(Xn,r),Zi=r=>Je(an,r),Us=r=>In.has(r),mi=r=>!Qe.has(r),lu=(r,t)=>new Promise(e=>{if(null!==t)e(!0);else{const i=r.createScriptProcessor(256,1,1),o=r.createGain(),c=r.createBuffer(1,2,44100),u=c.getChannelData(0);u[0]=1,u[1]=1;const d=r.createBufferSource();d.buffer=c,d.loop=!0,d.connect(i).connect(r.destination),d.connect(o),d.disconnect(o),i.onaudioprocess=h=>{const f=h.inputBuffer.getChannelData(0);Array.prototype.some.call(f,m=>1===m)?e(!0):e(!1),d.stop(),i.onaudioprocess=null,d.disconnect(i),i.disconnect(r.destination)},d.start()}}),Qi=(r,t)=>{const e=new Map;for(const i of r)for(const o of i){const c=e.get(o);e.set(o,void 0===c?1:c+1)}e.forEach((i,o)=>t(o,i))},Vr=r=>"context"in r,aa=(r,t,e,i,o)=>{const[c,u]=((r,t,e,i)=>{const{activeInputs:o,passiveInputs:c}=we(t),u=au(o[i],r,e);return null===u?[tt(c,r,e,i)[2],!1]:[u[2],!0]})(r,e,i,o);if(null!==c&&(cu(r,c),u&&!t&&!Us(r)&&ji(ne(r),ne(e),i,o)),ie(e)){const{activeInputs:d}=we(e);Ct(e,d)}},ca=(r,t,e,i)=>{const[o,c]=((r,t,e)=>{const{activeInputs:i,passiveInputs:o}=Jn(t),c=au(i,r,e);return null===c?[uu(o,r,e)[1],!1]:[c[2],!0]})(r,e,i);null!==o&&(cu(r,o),c&&!t&&!Us(r)&&ne(r).disconnect(Zi(e),i))};class du{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach((i,o)=>t.call(e,i,o,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const yh={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function Br(r,t,e,i,o){if("function"==typeof r.copyFromChannel)0===t[e].byteLength&&(t[e]=new Float32Array(128)),r.copyFromChannel(t[e],i,o);else{const c=r.getChannelData(i);if(0===t[e].byteLength)t[e]=c.slice(o,o+128);else{const u=new Float32Array(c.buffer,o*Float32Array.BYTES_PER_ELEMENT,128);t[e].set(u)}}}const Hi=(r,t,e,i,o)=>{"function"==typeof r.copyToChannel?0!==t[e].byteLength&&r.copyToChannel(t[e],i,o):0!==t[e].byteLength&&r.getChannelData(i).set(t[e],o)},Gr=(r,t)=>{const e=[];for(let i=0;i<r;i+=1){const o=[],c="number"==typeof t?t:t[i];for(let u=0;u<c;u+=1)o.push(new Float32Array(128));e.push(o)}return e},wh=function(){var r=ut(function*(t,e,i,o,c,u,d){const h=null===e?128*Math.ceil(t.context.length/128):e.length,f=o.channelCount*o.numberOfInputs,m=c.reduce((k,q)=>k+q,0),_=0===m?null:i.createBuffer(m,h,i.sampleRate);if(void 0===u)throw new Error("Missing the processor constructor.");const y=we(t),b=yield((r,t)=>{const e=Je($n,r),i=ne(t);return Je(e,i)})(i,t),w=Gr(o.numberOfInputs,o.channelCount),S=Gr(o.numberOfOutputs,c),F=Array.from(t.parameters.keys()).reduce((k,q)=>({...k,[q]:new Float32Array(128)}),{});for(let k=0;k<h;k+=128){if(o.numberOfInputs>0&&null!==e)for(let q=0;q<o.numberOfInputs;q+=1)for(let I=0;I<o.channelCount;I+=1)Br(e,w[q],I,I,k);void 0!==u.parameterDescriptors&&null!==e&&u.parameterDescriptors.forEach(({name:q},I)=>{Br(e,F,q,f+I,k)});for(let q=0;q<o.numberOfInputs;q+=1)for(let I=0;I<c[q];I+=1)0===S[q][I].byteLength&&(S[q][I]=new Float32Array(128));try{const q=w.map((G,D)=>0===y.activeInputs[D].size?[]:G),I=d(k/i.sampleRate,i.sampleRate,()=>b.process(q,S,F));if(null!==_)for(let G=0,D=0;G<o.numberOfOutputs;G+=1){for(let L=0;L<c[G];L+=1)Hi(_,S[G],L,D+L,k);D+=c[G]}if(!I)break}catch(q){t.dispatchEvent(new ErrorEvent("processorerror",{colno:q.colno,filename:q.filename,lineno:q.lineno,message:q.message}));break}}return _});return function(e,i,o,c,u,d,h){return r.apply(this,arguments)}}(),mu={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Ah={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},vu={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},kh={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Oh={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},fa=r=>{const{port1:t,port2:e}=new MessageChannel;return new Promise(i=>{const o=()=>{e.onmessage=null,t.close(),e.close(),i()};e.onmessage=()=>o();try{t.postMessage(r,[r])}catch{}finally{o()}})},Au={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Yi=(r,t,e)=>{const i=t[e];if(void 0===i)throw r();return i},Rh={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Bh={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},ve=()=>new DOMException("","InvalidStateError"),Xi=()=>new DOMException("","InvalidAccessError"),Nu={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},un=(r,t,e,i,o,c,u,d,h,f,m)=>{const _=f.length;let y=d;for(let b=0;b<_;b+=1){let w=e[0]*f[b];for(let S=1;S<o;S+=1){const F=y-S&h-1;w+=e[S]*c[F],w-=r[S]*u[F]}for(let S=o;S<i;S+=1)w+=e[S]*c[y-S&h-1];for(let S=o;S<t;S+=1)w-=r[S]*u[y-S&h-1];c[y]=f[b],u[y]=w,y=y+1&h-1,m[b]=w}return y},re={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},zs=r=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const e=r.decodeAudioData(t.buffer,()=>{});return void 0!==e&&(e.catch(()=>{}),!0)}catch{}return!1},zt=(r,t,e)=>{const i=t[e];void 0!==i&&i!==r[e]&&(r[e]=i)},Te=(r,t)=>{zt(r,t,"channelCount"),zt(r,t,"channelCountMode"),zt(r,t,"channelInterpretation")},ya=r=>"function"==typeof r.getFloatTimeDomainData,ce=(r,t,e)=>{const i=t[e];void 0!==i&&i!==r[e].value&&(r[e].value=i)},Ki=r=>{var t;r.start=(t=r.start,(e=0,i=0,o)=>{if("number"==typeof o&&o<0||i<0||e<0)throw new RangeError("The parameters can't be negative.");t.call(r,e,i,o)})},Ji=r=>{var t;r.stop=(t=r.stop,(e=0)=>{if(e<0)throw new RangeError("The parameter can't be negative.");t.call(r,e)})},ba=(r,t)=>null===r?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(r*t))))),nd=function(){var r=ut(function*(t,e){const i=yield(r=>new Promise((t,e)=>{const{port1:i,port2:o}=new MessageChannel;i.onmessage=({data:c})=>{i.close(),o.close(),t(c)},i.onmessageerror=({data:c})=>{i.close(),o.close(),e(c)},o.postMessage(r)}))(e);return new t(i)});return function(e,i){return r.apply(this,arguments)}}(),Gu=(r,t)=>{const e=r.createBiquadFilter();return Te(e,t),ce(e,t,"Q"),ce(e,t,"detune"),ce(e,t,"frequency"),ce(e,t,"gain"),zt(e,t,"type"),e},er=(r,t)=>{const e=r.createChannelSplitter(t.numberOfOutputs);return Te(e,t),(r=>{const t=r.numberOfOutputs;Object.defineProperty(r,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw ve()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:e=>{if("explicit"!==e)throw ve()}}),Object.defineProperty(r,"channelInterpretation",{get:()=>"discrete",set:e=>{if("discrete"!==e)throw ve()}})})(e),e},js=(r,t)=>(r.connect=t.connect.bind(t),r.disconnect=t.disconnect.bind(t),r),Uu=(r,t)=>{const e=r.createDelay(t.maxDelayTime);return Te(e,t),ce(e,t,"delayTime"),e},tn=(r,t)=>{const e=r.createGain();return Te(e,t),ce(e,t,"gain"),e};function Vn(r,t){const e=t[0]*t[0]+t[1]*t[1];return[(r[0]*t[0]+r[1]*t[1])/e,(r[1]*t[0]-r[0]*t[1])/e]}function zu(r,t){return[r[0]*t[0]-r[1]*t[1],r[0]*t[1]+r[1]*t[0]]}function ju(r,t){let e=[0,0];for(let i=r.length-1;i>=0;i-=1)e=zu(e,t),e[0]+=r[i];return e}const It=(r,t,e,i)=>r.createScriptProcessor(t,e,i),$t=()=>new DOMException("","NotSupportedError"),Hr={numberOfChannels:1},yi={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},jt={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},$r={disableNormalization:!1},Hu={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},sr=()=>new DOMException("","UnknownError"),_d={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Ku=(r,t,e)=>void 0===r.copyFromChannel?r.getChannelData(e)[0]:(r.copyFromChannel(t,e),t[0]),Ju=r=>{if(null===r)return!1;const t=r.length;return t%2!=0?0!==r[Math.floor(t/2)]:r[t/2-1]+r[t/2]!==0},ue=(r,t,e,i)=>{let o=r;for(;!o.hasOwnProperty(t);)o=Object.getPrototypeOf(o);const{get:c,set:u}=Object.getOwnPropertyDescriptor(o,t);Object.defineProperty(r,t,{get:e(c),set:i(u)})},ka=(r,t,e)=>{try{r.setValueAtTime(t,e)}catch(i){if(9!==i.code)throw i;ka(r,t,e+1e-7)}},rr=r=>{const t=r.createOscillator();try{t.start(-1)}catch(e){return e instanceof RangeError}return!1},Qs=r=>{const t=r.createBuffer(1,1,44100),e=r.createBufferSource();e.buffer=t,e.start(),e.stop();try{return e.stop(),!0}catch{return!1}},Hs=r=>{const t=r.createOscillator();try{t.stop(-1)}catch(e){return e instanceof RangeError}return!1},Ys=(r,t)=>{const e=t.createGain();r.connect(e);const i=(o=r.disconnect,()=>{o.call(r,e),r.removeEventListener("ended",i)});var o;r.addEventListener("ended",i),js(r,e),r.stop=(o=>{let c=!1;return(u=0)=>{if(c)try{o.call(r,u)}catch{e.gain.setValueAtTime(0,u)}else o.call(r,u),c=!0}})(r.stop)},xi=(r,t)=>e=>{const i={value:r};return Object.defineProperties(e,{currentTarget:i,target:i}),"function"==typeof t?t.call(r,e):t.handleEvent.call(r,e)},Sd=(r=Bs,(t,e,[i,o,c],u)=>{r(t[o],[e,i,c],d=>d[0]===e&&d[1]===i,u)}),Ad=(r=>(t,e,[i,o,c],u)=>{const d=t.get(i);void 0===d?t.set(i,new Set([[o,e,c]])):r(d,[o,e,c],h=>h[0]===o&&h[1]===e,u)})(Bs),Cd=(r=>(t,e,i,o)=>r(t[o],c=>c[0]===e&&c[1]===i))(Vt),tl=new WeakMap,ro=(r=>t=>{var e;return null!==(e=r.get(t))&&void 0!==e?e:0})(tl),Pe=((r,t)=>(e,i)=>{const o=t.get(e);if(void 0!==o)return o;const c=r.get(e);if(void 0!==c)return c;try{const u=i();return u instanceof Promise?(r.set(e,u),u.catch(()=>!1).then(d=>(r.delete(e),t.set(e,d),d))):(t.set(e,u),u)}catch{return t.set(e,!1),!1}})(new Map,new WeakMap),Tn=typeof window>"u"?null:window,g=((r,t)=>(e,i)=>{const o=e.createAnalyser();if(Te(o,i),!(i.maxDecibels>i.minDecibels))throw t();return zt(o,i,"fftSize"),zt(o,i,"maxDecibels"),zt(o,i,"minDecibels"),zt(o,i,"smoothingTimeConstant"),r(ya,()=>ya(o))||(r=>{r.getFloatTimeDomainData=t=>{const e=new Uint8Array(t.length);r.getByteTimeDomainData(e);const i=Math.max(e.length,r.fftSize);for(let o=0;o<i;o+=1)t[o]=.0078125*(e[o]-128);return t}})(o),o})(Pe,De),As=(r=>t=>{const e=r(t);if(null===e.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return e.renderer})(we),ye=((r,t,e)=>function(){var i=ut(function*(o,c,u){const d=r(o);yield Promise.all(d.activeInputs.map((h,f)=>Array.from(h).map(function(){var m=ut(function*([_,y]){const w=yield t(_).render(_,c),S=o.context.destination;!e(_)&&(o!==S||!e(o))&&w.connect(u,y,f)});return function(_){return m.apply(this,arguments)}}())).reduce((h,f)=>[...h,...f],[]))});return function(o,c,u){return i.apply(this,arguments)}}())(we,As,Us),bn=((r,t,e)=>()=>{const i=new WeakMap,o=function(){var c=ut(function*(u,d){let h=t(u);return Kt(h,d)||(h=r(d,{channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,fftSize:h.fftSize,maxDecibels:h.maxDecibels,minDecibels:h.minDecibels,smoothingTimeConstant:h.smoothingTimeConstant})),i.set(d,h),yield e(u,d,h),h});return function(d,h){return c.apply(this,arguments)}}();return{render(c,u){const d=i.get(u);return void 0!==d?Promise.resolve(d):o(c,u)}}})(g,ne,ye),st=(r=>t=>{const e=r.get(t);if(void 0===e)throw ve();return e})(us),Ee=(r=>null===r?null:r.hasOwnProperty("OfflineAudioContext")?r.OfflineAudioContext:r.hasOwnProperty("webkitOfflineAudioContext")?r.webkitOfflineAudioContext:null)(Tn),Ht=(r=>t=>null!==r&&t instanceof r)(Ee),el=new WeakMap,Cs=(r=>class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(e,i,o){if(null!==i){let c=this._listeners.get(i);void 0===c&&(c=r(this,i),"function"==typeof i&&this._listeners.set(i,c)),this._nativeEventTarget.addEventListener(e,c,o)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,i,o){const c=null===i?void 0:this._listeners.get(i);this._nativeEventTarget.removeEventListener(e,void 0===c?null:c,o)}})(xi),hs=(r=>null===r?null:r.hasOwnProperty("AudioContext")?r.AudioContext:r.hasOwnProperty("webkitAudioContext")?r.webkitAudioContext:null)(Tn),Da=(r=>t=>null!==r&&t instanceof r)(hs),Na=(r=>t=>null!==r&&"function"==typeof r.AudioNode&&t instanceof r.AudioNode)(Tn),nl=(r=>t=>null!==r&&"function"==typeof r.AudioParam&&t instanceof r.AudioParam)(Tn),wi=(r=>null===r?null:r.hasOwnProperty("AudioWorkletNode")?r.AudioWorkletNode:null)(Tn),Zt=((r,t,e,i,o,c,u,d,h,f,m,_,y,b,w,S)=>class extends f{constructor(k,q,I,G){super(I),this._context=k,this._nativeAudioNode=I;const D=m(k);_(D)&&!0!==e(lu,()=>lu(D,S))&&(r=>{const t=new Map;var e;r.connect=(e=r.connect.bind(r),(i,o=0,c=0)=>{const u=Vr(i)?e(i,o,c):e(i,o),d=t.get(i);return void 0===d?t.set(i,[{input:c,output:o}]):d.every(h=>h.input!==c||h.output!==o)&&d.push({input:c,output:o}),u}),r.disconnect=(e=>(i,o,c)=>{if(e.apply(r),void 0===i)t.clear();else if("number"==typeof i)for(const[u,d]of t){const h=d.filter(f=>f.output!==i);0===h.length?t.delete(u):t.set(u,h)}else if(t.has(i))if(void 0===o)t.delete(i);else{const u=t.get(i);if(void 0!==u){const d=u.filter(h=>h.output!==o&&(h.input!==c||void 0===c));0===d.length?t.delete(i):t.set(i,d)}}for(const[u,d]of t)d.forEach(h=>{Vr(u)?r.connect(u,h.output,h.input):r.connect(u,h.output)})})(r.disconnect)})(I),Xn.set(this,I),_e.set(this,new Set),"closed"!==k.state&&q&&Z(this),r(this,G,I)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(k){this._nativeAudioNode.channelCount=k}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(k){this._nativeAudioNode.channelCountMode=k}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(k){this._nativeAudioNode.channelInterpretation=k}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(k,q=0,I=0){if(q<0||q>=this._nativeAudioNode.numberOfOutputs)throw o();const G=m(this._context),D=w(G);if(y(k)||b(k))throw c();if(pi(k)){const E=ne(k);try{const z=zi(this._nativeAudioNode,E,q,I),H=mi(this);(D||H)&&this._nativeAudioNode.disconnect(...z),"closed"!==this.context.state&&!H&&mi(k)&&Z(k)}catch(z){throw 12===z.code?c():z}if(t(this,k,q,I,D)){const z=h([this],k);Qi(z,i(D))}return k}const L=Zi(k);if("playbackRate"===L.name&&1024===L.maxValue)throw u();try{this._nativeAudioNode.connect(L,q),(D||mi(this))&&this._nativeAudioNode.disconnect(L,q)}catch(E){throw 12===E.code?c():E}if(((r,t,e,i)=>{const{activeInputs:o,passiveInputs:c}=Jn(t),{outputs:u}=we(r),d=lt(r),h=f=>{const m=ne(r),_=Zi(t);if(f){const y=uu(c,r,e);ru(o,r,y,!1),!i&&!Us(r)&&m.connect(_,e)}else{const y=((r,t,e)=>Vt(r,i=>i[0]===t&&i[1]===e))(o,r,e);ou(c,y,!1),!i&&!Us(r)&&m.disconnect(_,e)}};return!!Bs(u,[t,e],f=>f[0]===t&&f[1]===e,!0)&&(d.add(h),ie(r)?ru(o,r,[e,h],!0):ou(c,[r,e,h],!0),!0)})(this,k,q,D)){const E=h([this],k);Qi(E,i(D))}}disconnect(k,q,I){let G;const D=m(this._context),L=w(D);if(void 0===k)G=((r,t)=>{const e=we(r),i=[];for(const o of e.outputs)Ws(o)?aa(r,t,...o):ca(r,t,...o),i.push(o[0]);return e.outputs.clear(),i})(this,L);else if("number"==typeof k){if(k<0||k>=this.numberOfOutputs)throw o();G=((r,t,e)=>{const i=we(r),o=[];for(const c of i.outputs)c[1]===e&&(Ws(c)?aa(r,t,...c):ca(r,t,...c),o.push(c[0]),i.outputs.delete(c));return o})(this,L,k)}else{if(void 0!==q&&(q<0||q>=this.numberOfOutputs)||pi(k)&&void 0!==I&&(I<0||I>=k.numberOfInputs))throw o();if(G=((r,t,e,i,o)=>{const c=we(r);return Array.from(c.outputs).filter(u=>!(u[0]!==e||void 0!==i&&u[1]!==i||void 0!==o&&u[2]!==o)).map(u=>(Ws(u)?aa(r,t,...u):ca(r,t,...u),c.outputs.delete(u),u[0]))})(this,L,k,q,I),0===G.length)throw c()}for(const R of G){const E=h([this],R);Qi(E,d)}}})((r=>(t,e,i)=>{const o=[];for(let c=0;c<i.numberOfInputs;c+=1)o.push(new Set);r.set(t,{activeInputs:o,outputs:new Set,passiveInputs:new WeakMap,renderer:e})})(Re),((r,t,e,i,o,c,u,d,h,f,m,_,y)=>{const b=new WeakMap;return(w,S,F,k,q)=>{const{activeInputs:I,passiveInputs:G}=c(S),{outputs:D}=c(w),L=d(w),R=E=>{const j=h(S),z=h(w);if(E){const H=tt(G,w,F,k);r(I,w,H,!1),!q&&!_(w)&&e(z,j,F,k),y(S)&&Z(S)}else{const H=i(I,w,F,k);t(G,k,H,!1),!q&&!_(w)&&o(z,j,F,k);const V=u(S);if(0===V)m(S)&&Ct(S,I);else{const et=b.get(S);void 0!==et&&clearTimeout(et),b.set(S,setTimeout(()=>{m(S)&&Ct(S,I)},1e3*V))}}};return!!f(D,[S,F,k],E=>E[0]===S&&E[1]===F&&E[2]===k,!0)&&(L.add(R),m(w)?r(I,w,[F,k,R],!0):t(G,k,[w,F,R],!0),!0)}})(Sd,Ad,zi,Cd,ji,we,ro,lt,ne,Bs,ie,Us,mi),Pe,((r,t,e,i,o,c)=>u=>(d,h)=>{const f=r.get(d);if(void 0===f){if(!u&&c(d)){const m=i(d),{outputs:_}=e(d);for(const y of _)if(Ws(y)){const b=i(y[0]);t(m,b,y[1],y[2])}else{const b=o(y[0]);m.disconnect(b,y[1])}}r.set(d,h)}else r.set(d,f+h)})(In,ji,we,ne,Zi,ie),De,Xi,$t,((r,t,e,i,o,c,u,d)=>(h,f)=>{const m=t.get(h);if(void 0===m)throw new Error("Missing the expected cycle count.");const _=c(h.context),y=d(_);if(m===f){if(t.delete(h),!y&&u(h)){const b=i(h),{outputs:w}=e(h);for(const S of w)if(Ws(S)){const F=i(S[0]);r(b,F,S[1],S[2])}else{const F=o(S[0]);b.connect(F,S[1])}}}else t.set(h,m-f)})(zi,In,we,ne,Zi,st,ie,Ht),((r,t,e)=>function i(o,c){const u=pi(c)?c:e(r,c);if((r=>"delayTime"in r)(u))return[];if(o[0]===u)return[o];if(o.includes(u))return[];const{outputs:d}=t(u);return Array.from(d).map(h=>i([...o,u],h[0])).reduce((h,f)=>h.concat(f),[])})(el,we,Je),Cs,st,Da,Na,nl,Ht,wi),kd=((r,t,e,i,o,c)=>class extends r{constructor(d,h){const f=o(d),m={...xs,...h},_=i(f,m);super(d,!1,_,c(f)?t():null),this._nativeAnalyserNode=_}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(d){this._nativeAnalyserNode.fftSize=d}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(d){const h=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=d,!(d>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=h,e()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(d){const h=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=d,!(this._nativeAnalyserNode.maxDecibels>d))throw this._nativeAnalyserNode.minDecibels=h,e()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(d){this._nativeAnalyserNode.smoothingTimeConstant=d}getByteFrequencyData(d){this._nativeAnalyserNode.getByteFrequencyData(d)}getByteTimeDomainData(d){this._nativeAnalyserNode.getByteTimeDomainData(d)}getFloatFrequencyData(d){this._nativeAnalyserNode.getFloatFrequencyData(d)}getFloatTimeDomainData(d){this._nativeAnalyserNode.getFloatTimeDomainData(d)}})(Zt,bn,De,g,st,Ht),Ea=new WeakSet,sl=(r=>null===r?null:r.hasOwnProperty("AudioBuffer")?r.AudioBuffer:null)(Tn),il=(r=>t=>(r[0]=t,r[0]))(new Uint32Array(1)),Fa=((r,t)=>e=>{e.copyFromChannel=(i,o,c=0)=>{const u=r(c),d=r(o);if(d>=e.numberOfChannels)throw t();const h=e.length,f=e.getChannelData(d),m=i.length;for(let _=u<0?-u:0;_+u<h&&_<m;_+=1)i[_]=f[_+u]},e.copyToChannel=(i,o,c=0)=>{const u=r(c),d=r(o);if(d>=e.numberOfChannels)throw t();const h=e.length,f=e.getChannelData(d),m=i.length;for(let _=u<0?-u:0;_+u<h&&_<m;_+=1)f[_+u]=i[_]}})(il,De),Wn=(r=>t=>{var e;t.copyFromChannel=(e=t.copyFromChannel,(i,o,c=0)=>{const u=r(c),d=r(o);if(u<t.length)return e.call(t,i,d,u)}),t.copyToChannel=(e=>(i,o,c=0)=>{const u=r(c),d=r(o);if(u<t.length)return e.call(t,i,d,u)})(t.copyToChannel)})(il),Od=((r,t,e,i,o,c,u,d)=>{let h=null;return class lp{constructor(m){if(null===o)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:_,numberOfChannels:y,sampleRate:b}={...Vi,...m};null===h&&(h=new o(1,1,44100));const w=null!==i&&t(c,c)?new i({length:_,numberOfChannels:y,sampleRate:b}):h.createBuffer(y,_,b);if(0===w.numberOfChannels)throw e();return"function"!=typeof w.copyFromChannel?(u(w),cn(w)):t(ls,()=>ls(w))||d(w),r.add(w),w}static[Symbol.hasInstance](m){return null!==m&&"object"==typeof m&&Object.getPrototypeOf(m)===lp.prototype||r.has(m)}}})(Ea,Pe,$t,sl,Ee,(r=>()=>{if(null===r)return!1;try{new r({length:1,sampleRate:44100})}catch{return!1}return!0})(sl),Fa,Wn),oo=(r=>(t,e)=>{const i=r(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(i).connect(t.destination);const o=()=>{e.removeEventListener("ended",o),e.disconnect(i),i.disconnect()};e.addEventListener("ended",o)})(tn),rl=((r,t,e)=>function(){var i=ut(function*(o,c,u){const d=t(o);yield Promise.all(Array.from(d.activeInputs).map(function(){var h=ut(function*([f,m]){const y=yield r(f).render(f,c);e(f)||y.connect(u,m)});return function(f){return h.apply(this,arguments)}}()))});return function(o,c,u){return i.apply(this,arguments)}}())(As,Jn,Us),ts=(r=>(t,e,i)=>r(e,t,i))(rl),Ti=((r,t,e,i,o,c,u,d,h,f,m)=>(_,y)=>{const b=_.createBufferSource();return Te(b,y),ce(b,y,"playbackRate"),zt(b,y,"buffer"),zt(b,y,"loop"),zt(b,y,"loopEnd"),zt(b,y,"loopStart"),t(e,()=>e(_))||(r=>{r.start=(t=>{let e=!1;return(i=0,o=0,c)=>{if(e)throw ve();t.call(r,i,o,c),e=!0}})(r.start)})(b),t(i,()=>i(_))||(r=>{var t;r.start=(t=r.start,(e=0,i=0,o)=>{const c=r.buffer,u=null===c?i:Math.min(c.duration,i);null!==c&&u>c.duration-.5/r.context.sampleRate?t.call(r,e,0,0):t.call(r,e,u,o)})})(b),t(o,()=>o(_))||f(b,_),t(c,()=>c(_))||Ki(b),t(u,()=>u(_))||m(b,_),t(d,()=>d(_))||Ji(b),r(_,b),b})(oo,Pe,r=>{const t=r.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},r=>{const t=r.createBufferSource(),e=r.createBuffer(1,1,44100);t.buffer=e;try{t.start(0,1)}catch{return!1}return!0},r=>{const t=r.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},rr,Qs,Hs,0,(r=>(t,e)=>{const i=e.createBuffer(1,1,44100);null===t.buffer&&(t.buffer=i),r(t,"buffer",o=>()=>{const c=o.call(t);return c===i?null:c},o=>c=>o.call(t,null===c?i:c))})(ue),Ys),Ge=((r,t)=>(e,i,o)=>(r(i).replay(o),t(i,e,o)))((r=>t=>{const e=r(t);if(null===e.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return e.renderer})(Jn),rl),Dd=((r,t,e,i,o)=>()=>{const c=new WeakMap;let u=null,d=null;const h=function(){var f=ut(function*(m,_){let y=e(m);const b=Kt(y,_);return b||(y=t(_,{buffer:y.buffer,channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,loop:y.loop,loopEnd:y.loopEnd,loopStart:y.loopStart,playbackRate:y.playbackRate.value}),null!==u&&y.start(...u),null!==d&&y.stop(d)),c.set(_,y),b?yield r(_,m.playbackRate,y.playbackRate):yield i(_,m.playbackRate,y.playbackRate),yield o(m,_,y),y});return function(_,y){return f.apply(this,arguments)}}();return{set start(f){u=f},set stop(f){d=f},render(f,m){const _=c.get(m);return void 0!==_?Promise.resolve(_):h(f,m)}}})(ts,Ti,ne,Ge,ye),Bn=((r,t,e,i,o,c,u,d,h,f,m,_,y)=>(b,w,S,F=null,k=null)=>{const q=S.value,I=new Oe.AutomationEventList(q),G=w?(r=>({replay(t){for(const e of r)if("exponentialRampToValue"===e.type){const{endTime:i,value:o}=e;t.exponentialRampToValueAtTime(o,i)}else if("linearRampToValue"===e.type){const{endTime:i,value:o}=e;t.linearRampToValueAtTime(o,i)}else if("setTarget"===e.type){const{startTime:i,target:o,timeConstant:c}=e;t.setTargetAtTime(o,i,c)}else if("setValue"===e.type){const{startTime:i,value:o}=e;t.setValueAtTime(o,i)}else{if("setValueCurve"!==e.type)throw new Error("Can't apply an unknown automation.");{const{duration:i,startTime:o,values:c}=e;t.setValueCurveAtTime(c,o,i)}}}}))(I):null,D={get defaultValue(){return q},get maxValue(){return null===F?S.maxValue:F},get minValue(){return null===k?S.minValue:k},get value(){return S.value},set value(L){S.value=L,D.setValueAtTime(L,b.context.currentTime)},cancelAndHoldAtTime(L){if("function"==typeof S.cancelAndHoldAtTime)null===G&&I.flush(b.context.currentTime),I.add(o(L)),S.cancelAndHoldAtTime(L);else{const R=Array.from(I).pop();null===G&&I.flush(b.context.currentTime),I.add(o(L));const E=Array.from(I).pop();S.cancelScheduledValues(L),R!==E&&void 0!==E&&("exponentialRampToValue"===E.type?S.exponentialRampToValueAtTime(E.value,E.endTime):"linearRampToValue"===E.type?S.linearRampToValueAtTime(E.value,E.endTime):"setValue"===E.type?S.setValueAtTime(E.value,E.startTime):"setValueCurve"===E.type&&S.setValueCurveAtTime(E.values,E.startTime,E.duration))}return D},cancelScheduledValues:L=>(null===G&&I.flush(b.context.currentTime),I.add(c(L)),S.cancelScheduledValues(L),D),exponentialRampToValueAtTime(L,R){if(0===L)throw new RangeError;if(!Number.isFinite(R)||R<0)throw new RangeError;const E=b.context.currentTime;return null===G&&I.flush(E),0===Array.from(I).length&&(I.add(f(q,E)),S.setValueAtTime(q,E)),I.add(u(L,R)),S.exponentialRampToValueAtTime(L,R),D},linearRampToValueAtTime(L,R){const E=b.context.currentTime;return null===G&&I.flush(E),0===Array.from(I).length&&(I.add(f(q,E)),S.setValueAtTime(q,E)),I.add(d(L,R)),S.linearRampToValueAtTime(L,R),D},setTargetAtTime:(L,R,E)=>(null===G&&I.flush(b.context.currentTime),I.add(h(L,R,E)),S.setTargetAtTime(L,R,E),D),setValueAtTime:(L,R)=>(null===G&&I.flush(b.context.currentTime),I.add(f(L,R)),S.setValueAtTime(L,R),D),setValueCurveAtTime(L,R,E){const j=L instanceof Float32Array?L:new Float32Array(L);if(null!==_&&"webkitAudioContext"===_.name){const z=R+E,H=b.context.sampleRate,V=Math.ceil(R*H),et=Math.floor(z*H),rt=et-V,it=new Float32Array(rt);for(let ct=0;ct<rt;ct+=1){const vt=(j.length-1)/E*((V+ct)/H-R),pt=Math.floor(vt),At=Math.ceil(vt);it[ct]=pt===At?j[pt]:(1-(vt-pt))*j[pt]+(1-(At-vt))*j[At]}null===G&&I.flush(b.context.currentTime),I.add(m(it,R,E)),S.setValueCurveAtTime(it,R,E);const nt=et/H;nt<z&&y(D,it[it.length-1],nt),y(D,j[j.length-1],z)}else null===G&&I.flush(b.context.currentTime),I.add(m(j,R,E)),S.setValueCurveAtTime(j,R,E);return D}};return e.set(D,S),t.set(D,b),r(D,G),D})((r=>(t,e)=>{r.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})})(We),el,an,0,Oe.createCancelAndHoldAutomationEvent,Oe.createCancelScheduledValuesAutomationEvent,Oe.createExponentialRampToValueAutomationEvent,Oe.createLinearRampToValueAutomationEvent,Oe.createSetTargetAutomationEvent,Oe.createSetValueAutomationEvent,Oe.createSetValueCurveAutomationEvent,hs,ka),Gn=((r,t,e,i,o,c,u,d)=>class extends r{constructor(f,m){const _=c(f),y={...iu,...m},b=o(_,y),w=u(_),S=w?t():null;super(f,!1,b,S),this._audioBufferSourceNodeRenderer=S,this._isBufferNullified=!1,this._isBufferSet=null!==y.buffer,this._nativeAudioBufferSourceNode=b,this._onended=null,this._playbackRate=e(this,w,b.playbackRate,Ne,ae)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(f){if(this._nativeAudioBufferSourceNode.buffer=f,null!==f){if(this._isBufferSet)throw i();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(f){this._nativeAudioBufferSourceNode.loop=f}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(f){this._nativeAudioBufferSourceNode.loopEnd=f}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(f){this._nativeAudioBufferSourceNode.loopStart=f}get onended(){return this._onended}set onended(f){const m="function"==typeof f?d(this,f):null;this._nativeAudioBufferSourceNode.onended=m;const _=this._nativeAudioBufferSourceNode.onended;this._onended=null!==_&&_===m?f:_}get playbackRate(){return this._playbackRate}start(f=0,m=0,_){if(this._nativeAudioBufferSourceNode.start(f,m,_),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===_?[f,m]:[f,m,_]),"closed"!==this.context.state){Z(this);const y=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",y),ie(this)&&at(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",y)}}stop(f=0){this._nativeAudioBufferSourceNode.stop(f),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=f)}})(Zt,Dd,Bn,ve,Ti,st,Ht,xi),Nd=((r,t,e,i,o,c,u,d)=>class extends r{constructor(f,m){const _=c(f),y=u(_),b=o(_,m,y);super(f,!1,b,y?t(d):null),this._isNodeOfNativeOfflineAudioContext=y,this._nativeAudioDestinationNode=b}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(f){if(this._isNodeOfNativeOfflineAudioContext)throw i();if(f>this._nativeAudioDestinationNode.maxChannelCount)throw e();this._nativeAudioDestinationNode.channelCount=f}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(f){if(this._isNodeOfNativeOfflineAudioContext)throw i();this._nativeAudioDestinationNode.channelCountMode=f}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(Zt,r=>{const t=new WeakMap,e=function(){var i=ut(function*(o,c){const u=c.destination;return t.set(c,u),yield r(o,c,u),u});return function(c,u){return i.apply(this,arguments)}}();return{render(i,o){const c=t.get(o);return void 0!==c?Promise.resolve(c):e(i,o)}}},De,ve,((r,t)=>(e,i,o)=>{const c=e.destination;if(c.channelCount!==i)try{c.channelCount=i}catch{}o&&"explicit"!==c.channelCountMode&&(c.channelCountMode="explicit"),0===c.maxChannelCount&&Object.defineProperty(c,"maxChannelCount",{value:i});const u=r(e,{channelCount:i,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:1});return t(u,"channelCount",d=>()=>d.call(u),d=>h=>{d.call(u,h);try{c.channelCount=h}catch(f){if(h>c.maxChannelCount)throw f}}),t(u,"channelCountMode",d=>()=>d.call(u),d=>h=>{d.call(u,h),c.channelCountMode=h}),t(u,"channelInterpretation",d=>()=>d.call(u),d=>h=>{d.call(u,h),c.channelInterpretation=h}),Object.defineProperty(u,"maxChannelCount",{get:()=>c.maxChannelCount}),u.connect(c),u})(tn,ue),st,Ht,ye),Ed=((r,t,e,i,o)=>()=>{const c=new WeakMap,u=function(){var d=ut(function*(h,f){let m=e(h);const _=Kt(m,f);return _||(m=t(f,{Q:m.Q.value,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,detune:m.detune.value,frequency:m.frequency.value,gain:m.gain.value,type:m.type})),c.set(f,m),_?(yield r(f,h.Q,m.Q),yield r(f,h.detune,m.detune),yield r(f,h.frequency,m.frequency),yield r(f,h.gain,m.gain)):(yield i(f,h.Q,m.Q),yield i(f,h.detune,m.detune),yield i(f,h.frequency,m.frequency),yield i(f,h.gain,m.gain)),yield o(h,f,m),m});return function(f,m){return d.apply(this,arguments)}}();return{render(d,h){const f=c.get(h);return void 0!==f?Promise.resolve(f):u(d,h)}}})(ts,Gu,ne,Ge,ye),Xs=(r=>(t,e)=>r.set(t,e))(tl),Fd=((r,t,e,i,o,c,u,d)=>class extends r{constructor(f,m){const _=c(f),y={...mu,...m},b=o(_,y),w=u(_);super(f,!1,b,w?e():null),this._Q=t(this,w,b.Q,Ne,ae),this._detune=t(this,w,b.detune,1200*Math.log2(Ne),-1200*Math.log2(Ne)),this._frequency=t(this,w,b.frequency,f.sampleRate/2,0),this._gain=t(this,w,b.gain,40*Math.log10(Ne),ae),this._nativeBiquadFilterNode=b,d(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(f){this._nativeBiquadFilterNode.type=f}getFrequencyResponse(f,m,_){try{this._nativeBiquadFilterNode.getFrequencyResponse(f,m,_)}catch(y){throw 11===y.code?i():y}if(f.length!==m.length||m.length!==_.length)throw i()}})(Zt,Bn,Ed,Xi,Gu,st,Ht,Xs),ks=((r,t)=>(e,i,o)=>{const c=new Set;return e.connect=(u=e.connect,(d,h=0,f=0)=>{const m=0===c.size;if(t(d))return u.call(e,d,h,f),r(c,[d,h,f],_=>_[0]===d&&_[1]===h&&_[2]===f,!0),m&&i(),d;u.call(e,d,h),r(c,[d,h],_=>_[0]===d&&_[1]===h,!0),m&&i()}),e.disconnect=(u=>(d,h,f)=>{const m=c.size>0;if(void 0===d)u.apply(e),c.clear();else if("number"==typeof d){u.call(e,d);for(const y of c)y[1]===d&&c.delete(y)}else{t(d)?u.call(e,d,h,f):u.call(e,d,h);for(const y of c)y[0]===d&&(void 0===h||y[1]===h)&&(void 0===f||y[2]===f)&&c.delete(y)}m&&0===c.size&&o()})(e.disconnect),e;var u})(Bs,Na),ol=((r,t)=>(e,i)=>{i.channelCount=1,i.channelCountMode="explicit",Object.defineProperty(i,"channelCount",{get:()=>1,set:()=>{throw r()}}),Object.defineProperty(i,"channelCountMode",{get:()=>"explicit",set:()=>{throw r()}});const o=e.createBufferSource();t(i,()=>{const d=i.numberOfInputs;for(let h=0;h<d;h+=1)o.connect(i,0,h)},()=>o.disconnect(i))})(ve,ks),ds=((r,t)=>(e,i)=>{const o=e.createChannelMerger(i.numberOfInputs);return null!==r&&"webkitAudioContext"===r.name&&t(e,o),Te(o,i),o})(hs,ol),Md=((r,t,e)=>()=>{const i=new WeakMap,o=function(){var c=ut(function*(u,d){let h=t(u);return Kt(h,d)||(h=r(d,{channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,numberOfInputs:h.numberOfInputs})),i.set(d,h),yield e(u,d,h),h});return function(d,h){return c.apply(this,arguments)}}();return{render(c,u){const d=i.get(u);return void 0!==d?Promise.resolve(d):o(c,u)}}})(ds,ne,ye),Rd=((r,t,e,i,o)=>class extends r{constructor(u,d){const h=i(u),f={...Ah,...d};super(u,!1,e(h,f),o(h)?t():null)}})(Zt,Md,ds,st,Ht),Ma=((r,t,e)=>()=>{const i=new WeakMap,o=function(){var c=ut(function*(u,d){let h=t(u);return Kt(h,d)||(h=r(d,{channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,numberOfOutputs:h.numberOfOutputs})),i.set(d,h),yield e(u,d,h),h});return function(d,h){return c.apply(this,arguments)}}();return{render(c,u){const d=i.get(u);return void 0!==d?Promise.resolve(d):o(c,u)}}})(er,ne,ye),ar=((r,t,e,i,o,c)=>class extends r{constructor(d,h){const f=i(d),m=(r=>({...r,channelCount:r.numberOfOutputs}))({...vu,...h});super(d,!1,e(f,m),o(f)?t():null)}})(Zt,Ma,er,st,Ht),ao=((r,t,e,i)=>(o,{offset:c,...u})=>{const d=o.createBuffer(1,2,44100),h=t(o,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),f=e(o,{...u,gain:c}),m=d.getChannelData(0);m[0]=1,m[1]=1,h.buffer=d,h.loop=!0;const _={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(w){f.channelCount=w},get channelCountMode(){return f.channelCountMode},set channelCountMode(w){f.channelCountMode=w},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(w){f.channelInterpretation=w},get context(){return f.context},get inputs(){return[]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get offset(){return f.gain},get onended(){return h.onended},set onended(w){h.onended=w},addEventListener:(...w)=>h.addEventListener(w[0],w[1],w[2]),dispatchEvent:(...w)=>h.dispatchEvent(w[0]),removeEventListener:(...w)=>h.removeEventListener(w[0],w[1],w[2]),start(w=0){h.start.call(h,w)},stop(w=0){h.stop.call(h,w)}};return r(o,h),i(js(_,f),()=>h.connect(f),()=>h.disconnect(f))})(oo,Ti,tn,ks),bi=((r,t,e,i,o)=>(c,u)=>{if(void 0===c.createConstantSource)return e(c,u);const d=c.createConstantSource();return Te(d,u),ce(d,u,"offset"),t(i,()=>i(c))||Ki(d),t(o,()=>o(c))||Ji(d),r(c,d),d})(oo,Pe,ao,rr,Hs),al=((r,t,e,i,o)=>()=>{const c=new WeakMap;let u=null,d=null;const h=function(){var f=ut(function*(m,_){let y=e(m);const b=Kt(y,_);return b||(y=t(_,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,offset:y.offset.value}),null!==u&&y.start(u),null!==d&&y.stop(d)),c.set(_,y),b?yield r(_,m.offset,y.offset):yield i(_,m.offset,y.offset),yield o(m,_,y),y});return function(_,y){return f.apply(this,arguments)}}();return{set start(f){u=f},set stop(f){d=f},render(f,m){const _=c.get(m);return void 0!==_?Promise.resolve(_):h(f,m)}}})(ts,bi,ne,Ge,ye),Id=((r,t,e,i,o,c,u)=>class extends r{constructor(h,f){const m=o(h),_={...kh,...f},y=i(m,_),b=c(m),w=b?e():null;super(h,!1,y,w),this._constantSourceNodeRenderer=w,this._nativeConstantSourceNode=y,this._offset=t(this,b,y.offset,Ne,ae),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(h){const f="function"==typeof h?u(this,h):null;this._nativeConstantSourceNode.onended=f;const m=this._nativeConstantSourceNode.onended;this._onended=null!==m&&m===f?h:m}start(h=0){if(this._nativeConstantSourceNode.start(h),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=h),"closed"!==this.context.state){Z(this);const f=()=>{this._nativeConstantSourceNode.removeEventListener("ended",f),ie(this)&&at(this)};this._nativeConstantSourceNode.addEventListener("ended",f)}}stop(h=0){this._nativeConstantSourceNode.stop(h),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=h)}})(Zt,Bn,al,bi,st,Ht,xi),es=((r,t)=>(e,i)=>{const o=e.createConvolver();if(Te(o,i),i.disableNormalization===o.normalize&&(o.normalize=!i.disableNormalization),zt(o,i,"buffer"),i.channelCount>2||(t(o,"channelCount",c=>()=>c.call(o),c=>u=>{if(u>2)throw r();return c.call(o,u)}),"max"===i.channelCountMode))throw r();return t(o,"channelCountMode",c=>()=>c.call(o),c=>u=>{if("max"===u)throw r();return c.call(o,u)}),o})($t,ue),Ra=((r,t,e)=>()=>{const i=new WeakMap,o=function(){var c=ut(function*(u,d){let h=t(u);return Kt(h,d)||(h=r(d,{buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,disableNormalization:!h.normalize})),i.set(d,h),Gs(h)?yield e(u,d,h.inputs[0]):yield e(u,d,h),h});return function(d,h){return c.apply(this,arguments)}}();return{render(c,u){const d=i.get(u);return void 0!==d?Promise.resolve(d):o(c,u)}}})(es,ne,ye),$s=((r,t,e,i,o,c)=>class extends r{constructor(d,h){const f=i(d),m={...Oh,...h},_=e(f,m);super(d,!1,_,o(f)?t():null),this._isBufferNullified=!1,this._nativeConvolverNode=_,null!==m.buffer&&c(this,m.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(d){if(this._nativeConvolverNode.buffer=d,null===d&&null!==this._nativeConvolverNode.buffer){const h=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=h.createBuffer(1,1,h.sampleRate),this._isBufferNullified=!0,c(this,0)}else this._isBufferNullified=!1,c(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(d){this._nativeConvolverNode.normalize=d}})(Zt,Ra,es,st,Ht,Xs),Sn=((r,t,e,i,o)=>c=>{const u=new WeakMap,d=function(){var h=ut(function*(f,m){let _=e(f);const y=Kt(_,m);return y||(_=t(m,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,delayTime:_.delayTime.value,maxDelayTime:c})),u.set(m,_),y?yield r(m,f.delayTime,_.delayTime):yield i(m,f.delayTime,_.delayTime),yield o(f,m,_),_});return function(m,_){return h.apply(this,arguments)}}();return{render(h,f){const m=u.get(f);return void 0!==m?Promise.resolve(m):d(h,f)}}})(ts,Uu,ne,Ge,ye),qd=((r,t,e,i,o,c,u)=>class extends r{constructor(h,f){const m=o(h),_={...Au,...f},y=i(m,_),b=c(m);super(h,!1,y,b?e(_.maxDelayTime):null),this._delayTime=t(this,b,y.delayTime),u(this,_.maxDelayTime)}get delayTime(){return this._delayTime}})(Zt,Bn,Sn,Uu,st,Ht,Xs),Ia=(r=>(t,e)=>{const i=t.createDynamicsCompressor();if(Te(i,e),e.channelCount>2||"max"===e.channelCountMode)throw r();return ce(i,e,"attack"),ce(i,e,"knee"),ce(i,e,"ratio"),ce(i,e,"release"),ce(i,e,"threshold"),i})($t),cl=((r,t,e,i,o)=>()=>{const c=new WeakMap,u=function(){var d=ut(function*(h,f){let m=e(h);const _=Kt(m,f);return _||(m=t(f,{attack:m.attack.value,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,knee:m.knee.value,ratio:m.ratio.value,release:m.release.value,threshold:m.threshold.value})),c.set(f,m),_?(yield r(f,h.attack,m.attack),yield r(f,h.knee,m.knee),yield r(f,h.ratio,m.ratio),yield r(f,h.release,m.release),yield r(f,h.threshold,m.threshold)):(yield i(f,h.attack,m.attack),yield i(f,h.knee,m.knee),yield i(f,h.ratio,m.ratio),yield i(f,h.release,m.release),yield i(f,h.threshold,m.threshold)),yield o(h,f,m),m});return function(f,m){return d.apply(this,arguments)}}();return{render(d,h){const f=c.get(h);return void 0!==f?Promise.resolve(f):u(d,h)}}})(ts,Ia,ne,Ge,ye),cr=((r,t,e,i,o,c,u,d)=>class extends r{constructor(f,m){const _=c(f),y={...Rh,...m},b=i(_,y),w=u(_);super(f,!1,b,w?e():null),this._attack=t(this,w,b.attack),this._knee=t(this,w,b.knee),this._nativeDynamicsCompressorNode=b,this._ratio=t(this,w,b.ratio),this._release=t(this,w,b.release),this._threshold=t(this,w,b.threshold),d(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(f){const m=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=f,f>2)throw this._nativeDynamicsCompressorNode.channelCount=m,o()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(f){const m=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=f,"max"===f)throw this._nativeDynamicsCompressorNode.channelCountMode=m,o()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(Zt,Bn,cl,Ia,$t,st,Ht,Xs),Os=((r,t,e,i,o)=>()=>{const c=new WeakMap,u=function(){var d=ut(function*(h,f){let m=e(h);const _=Kt(m,f);return _||(m=t(f,{channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:m.gain.value})),c.set(f,m),_?yield r(f,h.gain,m.gain):yield i(f,h.gain,m.gain),yield o(h,f,m),m});return function(f,m){return d.apply(this,arguments)}}();return{render(d,h){const f=c.get(h);return void 0!==f?Promise.resolve(f):u(d,h)}}})(ts,tn,ne,Ge,ye),ul=((r,t,e,i,o,c)=>class extends r{constructor(d,h){const f=o(d),m={...Bh,...h},_=i(f,m),y=c(f);super(d,!1,_,y?e():null),this._gain=t(this,y,_.gain,Ne,ae)}get gain(){return this._gain}})(Zt,Bn,Os,tn,st,Ht),Pd=((r,t,e,i)=>(o,c,{channelCount:u,channelCountMode:d,channelInterpretation:h,feedback:f,feedforward:m})=>{const _=ba(c,o.sampleRate),y=f instanceof Float64Array?f:new Float64Array(f),b=m instanceof Float64Array?m:new Float64Array(m),w=y.length,S=b.length,F=Math.min(w,S);if(0===w||w>20)throw i();if(0===y[0])throw t();if(0===S||S>20)throw i();if(0===b[0])throw t();if(1!==y[0]){for(let E=0;E<S;E+=1)b[E]/=y[0];for(let E=1;E<w;E+=1)y[E]/=y[0]}const k=e(o,_,u,u);k.channelCount=u,k.channelCountMode=d,k.channelInterpretation=h;const I=[],G=[],D=[];for(let E=0;E<u;E+=1){I.push(0);const j=new Float32Array(32),z=new Float32Array(32);j.fill(0),z.fill(0),G.push(j),D.push(z)}k.onaudioprocess=E=>{const j=E.inputBuffer,z=E.outputBuffer,H=j.numberOfChannels;for(let V=0;V<H;V+=1){const et=j.getChannelData(V),rt=z.getChannelData(V);I[V]=un(y,w,b,S,F,G[V],D[V],I[V],32,et,rt)}};const L=o.sampleRate/2;return js({get bufferSize(){return _},get channelCount(){return k.channelCount},set channelCount(E){k.channelCount=E},get channelCountMode(){return k.channelCountMode},set channelCountMode(E){k.channelCountMode=E},get channelInterpretation(){return k.channelInterpretation},set channelInterpretation(E){k.channelInterpretation=E},get context(){return k.context},get inputs(){return[k]},get numberOfInputs(){return k.numberOfInputs},get numberOfOutputs(){return k.numberOfOutputs},addEventListener:(...E)=>k.addEventListener(E[0],E[1],E[2]),dispatchEvent:(...E)=>k.dispatchEvent(E[0]),getFrequencyResponse(E,j,z){if(E.length!==j.length||j.length!==z.length)throw r();const H=E.length;for(let V=0;V<H;V+=1){const et=-Math.PI*(E[V]/L),rt=[Math.cos(et),Math.sin(et)],ct=Vn(ju(b,rt),ju(y,rt));j[V]=Math.sqrt(ct[0]*ct[0]+ct[1]*ct[1]),z[V]=Math.atan2(ct[1],ct[0])}},removeEventListener:(...E)=>k.removeEventListener(E[0],E[1],E[2])},k)})(Xi,ve,It,$t),Ks=((r,t,e,i)=>o=>r(zs,()=>zs(o))?Promise.resolve(r(i,i)).then(c=>{if(!c){const u=e(o,512,0,1);o.oncomplete=()=>{u.onaudioprocess=null,u.disconnect()},u.onaudioprocess=()=>o.currentTime,u.connect(o.destination)}return o.startRendering()}):new Promise(c=>{const u=t(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});o.oncomplete=d=>{u.disconnect(),c(d.renderedBuffer)},u.connect(o.destination),o.startRendering()}))(Pe,tn,It,((r,t)=>()=>{if(null===t)return Promise.resolve(!1);const e=new t(1,1,44100),i=r(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(o=>{e.oncomplete=()=>{i.disconnect(),o(0!==e.currentTime)},e.startRendering()})})(tn,Ee)),Ld=((r,t,e,i,o)=>(c,u)=>{const d=new WeakMap;let h=null;const f=function(){var m=ut(function*(_,y){let b=null,w=t(_);const S=Kt(w,y);if(void 0===y.createIIRFilter?b=r(y,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):S||(w=y.createIIRFilter(u,c)),d.set(y,null===b?w:b),null!==b){if(null===h){if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");const k=new e(_.context.destination.channelCount,_.context.length,y.sampleRate);h=ut(function*(){return yield i(_,k,k.destination),((r,t,e,i)=>{const o=e instanceof Float64Array?e:new Float64Array(e),c=i instanceof Float64Array?i:new Float64Array(i),u=o.length,d=c.length,h=Math.min(u,d);if(1!==o[0]){for(let w=0;w<u;w+=1)c[w]/=o[0];for(let w=1;w<d;w+=1)o[w]/=o[0]}const m=new Float32Array(32),_=new Float32Array(32),y=t.createBuffer(r.numberOfChannels,r.length,r.sampleRate),b=r.numberOfChannels;for(let w=0;w<b;w+=1){const S=r.getChannelData(w),F=y.getChannelData(w);m.fill(0),_.fill(0),un(o,u,c,d,h,m,_,0,32,S,F)}return y})(yield o(k),y,c,u)})()}const F=yield h;return b.buffer=F,b.start(0),b}return yield i(_,y,w),w});return function(y,b){return m.apply(this,arguments)}}();return{render(m,_){const y=d.get(_);return void 0!==y?Promise.resolve(y):f(m,_)}}})(Ti,ne,Ee,ye,Ks),ll=(r=>(t,e,i)=>{if(void 0===t.createIIRFilter)return r(t,e,i);const o=t.createIIRFilter(i.feedforward,i.feedback);return Te(o,i),o})(Pd),Le=((r,t,e,i,o,c)=>class extends r{constructor(d,h){const f=i(d),m=o(f),_={...Nu,...h},y=t(f,m?null:d.baseLatency,_);super(d,!1,y,m?e(_.feedback,_.feedforward):null),(r=>{var t;r.getFrequencyResponse=(t=r.getFrequencyResponse,(e,i,o)=>{if(e.length!==i.length||i.length!==o.length)throw Xi();return t.call(r,e,i,o)})})(y),this._nativeIIRFilterNode=y,c(this,1)}getFrequencyResponse(d,h,f){return this._nativeIIRFilterNode.getFrequencyResponse(d,h,f)}})(Zt,ll,Ld,st,Ht,Xs),qa=((r,t,e,i,o,c,u,d)=>(h,f)=>{const m=f.listener,{forwardX:y,forwardY:b,forwardZ:w,positionX:S,positionY:F,positionZ:k,upX:q,upY:I,upZ:G}=void 0===m.forwardX?(()=>{const D=new Float32Array(1),L=t(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),R=u(f);let E=!1,j=[0,0,-1,0,1,0],z=[0,0,0];const H=()=>{if(E)return;E=!0;const it=i(f,256,9,0);it.onaudioprocess=({inputBuffer:nt})=>{const ct=[c(nt,D,0),c(nt,D,1),c(nt,D,2),c(nt,D,3),c(nt,D,4),c(nt,D,5)];ct.some((pt,At)=>pt!==j[At])&&(m.setOrientation(...ct),j=ct);const vt=[c(nt,D,6),c(nt,D,7),c(nt,D,8)];vt.some((pt,At)=>pt!==z[At])&&(m.setPosition(...vt),z=vt)},L.connect(it)},V=it=>nt=>{nt!==j[it]&&(j[it]=nt,m.setOrientation(...j))},et=it=>nt=>{nt!==z[it]&&(z[it]=nt,m.setPosition(...z))},rt=(it,nt,ct)=>{const vt=e(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:nt});vt.connect(L,0,it),vt.start(),Object.defineProperty(vt.offset,"defaultValue",{get:()=>nt});const pt=r({context:h},R,vt.offset,Ne,ae);return d(pt,"value",At=>()=>At.call(pt),At=>Dt=>{try{At.call(pt,Dt)}catch(Gt){if(9!==Gt.code)throw Gt}H(),R&&ct(Dt)}),pt.cancelAndHoldAtTime=(At=pt.cancelAndHoldAtTime,R?()=>{throw o()}:(...Dt)=>{const Gt=At.apply(pt,Dt);return H(),Gt}),pt.cancelScheduledValues=(At=>R?()=>{throw o()}:(...Dt)=>{const Gt=At.apply(pt,Dt);return H(),Gt})(pt.cancelScheduledValues),pt.exponentialRampToValueAtTime=(At=>R?()=>{throw o()}:(...Dt)=>{const Gt=At.apply(pt,Dt);return H(),Gt})(pt.exponentialRampToValueAtTime),pt.linearRampToValueAtTime=(At=>R?()=>{throw o()}:(...Dt)=>{const Gt=At.apply(pt,Dt);return H(),Gt})(pt.linearRampToValueAtTime),pt.setTargetAtTime=(At=>R?()=>{throw o()}:(...Dt)=>{const Gt=At.apply(pt,Dt);return H(),Gt})(pt.setTargetAtTime),pt.setValueAtTime=(At=>R?()=>{throw o()}:(...Dt)=>{const Gt=At.apply(pt,Dt);return H(),Gt})(pt.setValueAtTime),pt.setValueCurveAtTime=(At=>R?()=>{throw o()}:(...Dt)=>{const Gt=At.apply(pt,Dt);return H(),Gt})(pt.setValueCurveAtTime),pt;var At};return{forwardX:rt(0,0,V(0)),forwardY:rt(1,0,V(1)),forwardZ:rt(2,-1,V(2)),positionX:rt(6,0,et(0)),positionY:rt(7,0,et(1)),positionZ:rt(8,0,et(2)),upX:rt(3,0,V(3)),upY:rt(4,1,V(4)),upZ:rt(5,0,V(5))}})():m;return{get forwardX(){return y},get forwardY(){return b},get forwardZ(){return w},get positionX(){return S},get positionY(){return F},get positionZ(){return k},get upX(){return q},get upY(){return I},get upZ(){return G}}})(Bn,ds,bi,It,$t,Ku,Ht,ue),Pa=new WeakMap,An=((r,t,e,i,o,c)=>class extends e{constructor(d,h){super(d),this._nativeContext=d,us.set(this,d),i(d)&&o.set(d,new Set),this._destination=new r(this,h),this._listener=t(this,d),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(d){const h="function"==typeof d?c(this,d):null;this._nativeContext.onstatechange=h;const f=this._nativeContext.onstatechange;this._onstatechange=null!==f&&f===h?d:f}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(Nd,qa,Cs,Ht,Pa,xi),co=((r,t,e,i,o,c)=>(u,d)=>{const h=u.createOscillator();return Te(h,d),ce(h,d,"detune"),ce(h,d,"frequency"),void 0!==d.periodicWave?h.setPeriodicWave(d.periodicWave):zt(h,d,"type"),t(e,()=>e(u))||Ki(h),t(i,()=>i(u))||c(h,u),t(o,()=>o(u))||Ji(h),r(u,h),h})(oo,Pe,rr,Qs,Hs,Ys),uo=((r,t,e,i,o)=>()=>{const c=new WeakMap;let u=null,d=null,h=null;const f=function(){var m=ut(function*(_,y){let b=e(_);const w=Kt(b,y);return w||(b=t(y,{channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,detune:b.detune.value,frequency:b.frequency.value,periodicWave:null===u?void 0:u,type:b.type}),null!==d&&b.start(d),null!==h&&b.stop(h)),c.set(y,b),w?(yield r(y,_.detune,b.detune),yield r(y,_.frequency,b.frequency)):(yield i(y,_.detune,b.detune),yield i(y,_.frequency,b.frequency)),yield o(_,y,b),b});return function(y,b){return m.apply(this,arguments)}}();return{set periodicWave(m){u=m},set start(m){d=m},set stop(m){h=m},render(m,_){const y=c.get(_);return void 0!==y?Promise.resolve(y):f(m,_)}}})(ts,co,ne,Ge,ye),Js=((r,t,e,i,o,c,u)=>class extends r{constructor(h,f){const m=o(h),_={...yi,...f},y=e(m,_),b=c(m),w=b?i():null,S=h.sampleRate/2;super(h,!1,y,w),this._detune=t(this,b,y.detune,153600,-153600),this._frequency=t(this,b,y.frequency,S,-S),this._nativeOscillatorNode=y,this._onended=null,this._oscillatorNodeRenderer=w,null!==this._oscillatorNodeRenderer&&void 0!==_.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=_.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(h){const f="function"==typeof h?u(this,h):null;this._nativeOscillatorNode.onended=f;const m=this._nativeOscillatorNode.onended;this._onended=null!==m&&m===f?h:m}get type(){return this._nativeOscillatorNode.type}set type(h){this._nativeOscillatorNode.type=h,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(h){this._nativeOscillatorNode.setPeriodicWave(h),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=h)}start(h=0){if(this._nativeOscillatorNode.start(h),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=h),"closed"!==this.context.state){Z(this);const f=()=>{this._nativeOscillatorNode.removeEventListener("ended",f),ie(this)&&at(this)};this._nativeOscillatorNode.addEventListener("ended",f)}}stop(h=0){this._nativeOscillatorNode.stop(h),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=h)}})(Zt,Bn,co,uo,st,Ht,xi),La=(r=>(t,e)=>{const i=r(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),o=t.createBuffer(1,2,44100);return i.buffer=o,i.loop=!0,i.connect(e),i.start(),()=>{i.stop(),i.disconnect(e)}})(Ti),Ye=((r,t,e,i,o)=>(c,{curve:u,oversample:d,...h})=>{const f=c.createWaveShaper(),m=c.createWaveShaper();Te(f,h),Te(m,h);const _=e(c,{...h,gain:1}),y=e(c,{...h,gain:-1}),b=e(c,{...h,gain:1}),w=e(c,{...h,gain:-1});let S=null,F=!1,k=null;const q={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(D){_.channelCount=D,y.channelCount=D,f.channelCount=D,b.channelCount=D,m.channelCount=D,w.channelCount=D},get channelCountMode(){return f.channelCountMode},set channelCountMode(D){_.channelCountMode=D,y.channelCountMode=D,f.channelCountMode=D,b.channelCountMode=D,m.channelCountMode=D,w.channelCountMode=D},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(D){_.channelInterpretation=D,y.channelInterpretation=D,f.channelInterpretation=D,b.channelInterpretation=D,m.channelInterpretation=D,w.channelInterpretation=D},get context(){return f.context},get curve(){return k},set curve(D){if(null!==D&&D.length<2)throw t();if(null===D)f.curve=D,m.curve=D;else{const L=D.length,R=new Float32Array(L+2-L%2),E=new Float32Array(L+2-L%2);R[0]=D[0],E[0]=-D[L-1];const j=Math.ceil((L+1)/2),z=(L+1)/2-1;for(let H=1;H<j;H+=1){const V=H/j*z,et=Math.floor(V),rt=Math.ceil(V);R[H]=et===rt?D[et]:(1-(V-et))*D[et]+(1-(rt-V))*D[rt],E[H]=et===rt?-D[L-1-et]:-(1-(V-et))*D[L-1-et]-(1-(rt-V))*D[L-1-rt]}R[j]=L%2==1?D[j-1]:(D[j-2]+D[j-1])/2,f.curve=R,m.curve=E}k=D,F&&(i(k)&&null===S?S=r(c,_):null!==S&&(S(),S=null))},get inputs(){return[_]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get oversample(){return f.oversample},set oversample(D){f.oversample=D,m.oversample=D},addEventListener:(...D)=>_.addEventListener(D[0],D[1],D[2]),dispatchEvent:(...D)=>_.dispatchEvent(D[0]),removeEventListener:(...D)=>_.removeEventListener(D[0],D[1],D[2])};return null!==u&&(q.curve=u instanceof Float32Array?u:new Float32Array(u)),d!==q.oversample&&(q.oversample=d),o(js(q,b),()=>{_.connect(f).connect(b),_.connect(y).connect(m).connect(w).connect(b),F=!0,i(k)&&(S=r(c,_))},()=>{_.disconnect(f),f.disconnect(b),_.disconnect(y),y.disconnect(m),m.disconnect(w),w.disconnect(b),F=!1,null!==S&&(S(),S=null)})})(La,ve,tn,Ju,ks),Si=((r,t,e,i,o,c,u)=>(d,h)=>{const f=d.createWaveShaper();if(null!==c&&"webkitAudioContext"===c.name&&void 0===d.createGain().gain.automationRate)return e(d,h);Te(f,h);const m=null===h.curve||h.curve instanceof Float32Array?h.curve:new Float32Array(h.curve);if(null!==m&&m.length<2)throw t();zt(f,{curve:m},"curve"),zt(f,h,"oversample");let _=null,y=!1;return u(f,"curve",S=>()=>S.call(f),S=>F=>(S.call(f,F),y&&(i(F)&&null===_?_=r(d,f):!i(F)&&null!==_&&(_(),_=null)),F)),o(f,()=>{y=!0,i(f.curve)&&(_=r(d,f))},()=>{y=!1,null!==_&&(_(),_=null)})})(La,ve,Ye,Ju,ks,hs,ue),Vd=((r,t,e,i,o,c,u,d,h,f)=>(m,{coneInnerAngle:_,coneOuterAngle:y,coneOuterGain:b,distanceModel:w,maxDistance:S,orientationX:F,orientationY:k,orientationZ:q,panningModel:I,positionX:G,positionY:D,positionZ:L,refDistance:R,rolloffFactor:E,...j})=>{const z=m.createPanner();if(j.channelCount>2||"max"===j.channelCountMode)throw u();Te(z,j);const H={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},V=e(m,{...H,channelInterpretation:"speakers",numberOfInputs:6}),et=i(m,{...j,gain:1}),rt=i(m,{...H,gain:1}),it=i(m,{...H,gain:0}),nt=i(m,{...H,gain:0}),ct=i(m,{...H,gain:0}),vt=i(m,{...H,gain:0}),pt=i(m,{...H,gain:0}),At=o(m,256,6,1),Dt=c(m,{...H,curve:new Float32Array([1,1]),oversample:"none"});let Gt=[F,k,q],Ae=[G,D,L];const Ke=new Float32Array(1);At.onaudioprocess=({inputBuffer:X})=>{const xe=[h(X,Ke,0),h(X,Ke,1),h(X,Ke,2)];xe.some((Pi,Li)=>Pi!==Gt[Li])&&(z.setOrientation(...xe),Gt=xe);const cs=[h(X,Ke,3),h(X,Ke,4),h(X,Ke,5)];cs.some((Pi,Li)=>Pi!==Ae[Li])&&(z.setPosition(...cs),Ae=cs)},Object.defineProperty(it.gain,"defaultValue",{get:()=>0}),Object.defineProperty(nt.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ct.gain,"defaultValue",{get:()=>0}),Object.defineProperty(vt.gain,"defaultValue",{get:()=>0}),Object.defineProperty(pt.gain,"defaultValue",{get:()=>0});const Rt={get bufferSize(){},get channelCount(){return z.channelCount},set channelCount(X){if(X>2)throw u();et.channelCount=X,z.channelCount=X},get channelCountMode(){return z.channelCountMode},set channelCountMode(X){if("max"===X)throw u();et.channelCountMode=X,z.channelCountMode=X},get channelInterpretation(){return z.channelInterpretation},set channelInterpretation(X){et.channelInterpretation=X,z.channelInterpretation=X},get coneInnerAngle(){return z.coneInnerAngle},set coneInnerAngle(X){z.coneInnerAngle=X},get coneOuterAngle(){return z.coneOuterAngle},set coneOuterAngle(X){z.coneOuterAngle=X},get coneOuterGain(){return z.coneOuterGain},set coneOuterGain(X){if(X<0||X>1)throw t();z.coneOuterGain=X},get context(){return z.context},get distanceModel(){return z.distanceModel},set distanceModel(X){z.distanceModel=X},get inputs(){return[et]},get maxDistance(){return z.maxDistance},set maxDistance(X){if(X<0)throw new RangeError;z.maxDistance=X},get numberOfInputs(){return z.numberOfInputs},get numberOfOutputs(){return z.numberOfOutputs},get orientationX(){return rt.gain},get orientationY(){return it.gain},get orientationZ(){return nt.gain},get panningModel(){return z.panningModel},set panningModel(X){z.panningModel=X},get positionX(){return ct.gain},get positionY(){return vt.gain},get positionZ(){return pt.gain},get refDistance(){return z.refDistance},set refDistance(X){if(X<0)throw new RangeError;z.refDistance=X},get rolloffFactor(){return z.rolloffFactor},set rolloffFactor(X){if(X<0)throw new RangeError;z.rolloffFactor=X},addEventListener:(...X)=>et.addEventListener(X[0],X[1],X[2]),dispatchEvent:(...X)=>et.dispatchEvent(X[0]),removeEventListener:(...X)=>et.removeEventListener(X[0],X[1],X[2])};return _!==Rt.coneInnerAngle&&(Rt.coneInnerAngle=_),y!==Rt.coneOuterAngle&&(Rt.coneOuterAngle=y),b!==Rt.coneOuterGain&&(Rt.coneOuterGain=b),w!==Rt.distanceModel&&(Rt.distanceModel=w),S!==Rt.maxDistance&&(Rt.maxDistance=S),F!==Rt.orientationX.value&&(Rt.orientationX.value=F),k!==Rt.orientationY.value&&(Rt.orientationY.value=k),q!==Rt.orientationZ.value&&(Rt.orientationZ.value=q),I!==Rt.panningModel&&(Rt.panningModel=I),G!==Rt.positionX.value&&(Rt.positionX.value=G),D!==Rt.positionY.value&&(Rt.positionY.value=D),L!==Rt.positionZ.value&&(Rt.positionZ.value=L),R!==Rt.refDistance&&(Rt.refDistance=R),E!==Rt.rolloffFactor&&(Rt.rolloffFactor=E),(1!==Gt[0]||0!==Gt[1]||0!==Gt[2])&&z.setOrientation(...Gt),(0!==Ae[0]||0!==Ae[1]||0!==Ae[2])&&z.setPosition(...Ae),f(js(Rt,z),()=>{et.connect(z),r(et,Dt,0,0),Dt.connect(rt).connect(V,0,0),Dt.connect(it).connect(V,0,1),Dt.connect(nt).connect(V,0,2),Dt.connect(ct).connect(V,0,3),Dt.connect(vt).connect(V,0,4),Dt.connect(pt).connect(V,0,5),V.connect(At).connect(m.destination)},()=>{et.disconnect(z),d(et,Dt,0,0),Dt.disconnect(rt),rt.disconnect(V),Dt.disconnect(it),it.disconnect(V),Dt.disconnect(nt),nt.disconnect(V),Dt.disconnect(ct),ct.disconnect(V),Dt.disconnect(vt),vt.disconnect(V),Dt.disconnect(pt),pt.disconnect(V),V.disconnect(At),At.disconnect(m.destination)})})(zi,ve,ds,tn,It,Si,$t,ji,Ku,ks),hl=(r=>(t,e)=>{const i=t.createPanner();return void 0===i.orientationX?r(t,e):(Te(i,e),ce(i,e,"orientationX"),ce(i,e,"orientationY"),ce(i,e,"orientationZ"),ce(i,e,"positionX"),ce(i,e,"positionY"),ce(i,e,"positionZ"),zt(i,e,"coneInnerAngle"),zt(i,e,"coneOuterAngle"),zt(i,e,"coneOuterGain"),zt(i,e,"distanceModel"),zt(i,e,"maxDistance"),zt(i,e,"panningModel"),zt(i,e,"refDistance"),zt(i,e,"rolloffFactor"),i)})(Vd),Wd=((r,t,e,i,o,c,u,d,h,f)=>()=>{const m=new WeakMap;let _=null;const y=function(){var b=ut(function*(w,S){let F=null,k=c(w);const q={channelCount:k.channelCount,channelCountMode:k.channelCountMode,channelInterpretation:k.channelInterpretation},I={...q,coneInnerAngle:k.coneInnerAngle,coneOuterAngle:k.coneOuterAngle,coneOuterGain:k.coneOuterGain,distanceModel:k.distanceModel,maxDistance:k.maxDistance,panningModel:k.panningModel,refDistance:k.refDistance,rolloffFactor:k.rolloffFactor},G=Kt(k,S);if("bufferSize"in k)F=i(S,{...q,gain:1});else if(!G){const D={...I,orientationX:k.orientationX.value,orientationY:k.orientationY.value,orientationZ:k.orientationZ.value,positionX:k.positionX.value,positionY:k.positionY.value,positionZ:k.positionZ.value};k=o(S,D)}if(m.set(S,null===F?k:F),null!==F){if(null===_){if(null===u)throw new Error("Missing the native OfflineAudioContext constructor.");const V=new u(6,w.context.length,S.sampleRate),et=t(V,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});et.connect(V.destination),_=ut(function*(){const rt=yield Promise.all([w.orientationX,w.orientationY,w.orientationZ,w.positionX,w.positionY,w.positionZ].map(function(){var it=ut(function*(nt,ct){const vt=e(V,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===ct?1:0});return yield d(V,nt,vt.offset),vt});return function(nt,ct){return it.apply(this,arguments)}}()));for(let it=0;it<6;it+=1)rt[it].connect(et,0,it),rt[it].start(0);return f(V)})()}const D=yield _,L=i(S,{...q,gain:1});yield h(w,S,L);const R=[];for(let V=0;V<D.numberOfChannels;V+=1)R.push(D.getChannelData(V));let E=[R[0][0],R[1][0],R[2][0]],j=[R[3][0],R[4][0],R[5][0]],z=i(S,{...q,gain:1}),H=o(S,{...I,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:j[0],positionY:j[1],positionZ:j[2]});L.connect(z).connect(H.inputs[0]),H.connect(F);for(let V=128;V<D.length;V+=128){const et=[R[0][V],R[1][V],R[2][V]],rt=[R[3][V],R[4][V],R[5][V]];if(et.some((it,nt)=>it!==E[nt])||rt.some((it,nt)=>it!==j[nt])){E=et,j=rt;const it=V/S.sampleRate;z.gain.setValueAtTime(0,it),z=i(S,{...q,gain:0}),H=o(S,{...I,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:j[0],positionY:j[1],positionZ:j[2]}),z.gain.setValueAtTime(1,it),L.connect(z).connect(H.inputs[0]),H.connect(F)}}return F}return G?(yield r(S,w.orientationX,k.orientationX),yield r(S,w.orientationY,k.orientationY),yield r(S,w.orientationZ,k.orientationZ),yield r(S,w.positionX,k.positionX),yield r(S,w.positionY,k.positionY),yield r(S,w.positionZ,k.positionZ)):(yield d(S,w.orientationX,k.orientationX),yield d(S,w.orientationY,k.orientationY),yield d(S,w.orientationZ,k.orientationZ),yield d(S,w.positionX,k.positionX),yield d(S,w.positionY,k.positionY),yield d(S,w.positionZ,k.positionZ)),Gs(k)?yield h(w,S,k.inputs[0]):yield h(w,S,k),k});return function(S,F){return b.apply(this,arguments)}}();return{render(b,w){const S=m.get(w);return void 0!==S?Promise.resolve(S):y(b,w)}}})(ts,ds,bi,tn,hl,ne,Ee,Ge,ye,Ks),Va=((r,t,e,i,o,c,u)=>class extends r{constructor(h,f){const m=o(h),_={...jt,...f},y=e(m,_),b=c(m);super(h,!1,y,b?i():null),this._nativePannerNode=y,this._orientationX=t(this,b,y.orientationX,Ne,ae),this._orientationY=t(this,b,y.orientationY,Ne,ae),this._orientationZ=t(this,b,y.orientationZ,Ne,ae),this._positionX=t(this,b,y.positionX,Ne,ae),this._positionY=t(this,b,y.positionY,Ne,ae),this._positionZ=t(this,b,y.positionZ,Ne,ae),u(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(h){this._nativePannerNode.coneInnerAngle=h}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(h){this._nativePannerNode.coneOuterAngle=h}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(h){this._nativePannerNode.coneOuterGain=h}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(h){this._nativePannerNode.distanceModel=h}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(h){this._nativePannerNode.maxDistance=h}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(h){this._nativePannerNode.panningModel=h}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(h){this._nativePannerNode.refDistance=h}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(h){this._nativePannerNode.rolloffFactor=h}})(Zt,Bn,hl,Wd,st,Ht,Xs),Bd=(r=>(t,{disableNormalization:e,imag:i,real:o})=>{const c=i instanceof Float32Array?i:new Float32Array(i),u=o instanceof Float32Array?o:new Float32Array(o),d=t.createPeriodicWave(u,c,{disableNormalization:e});if(Array.from(i).length<2)throw r();return d})(De),ur=((r,t,e,i)=>class hp{constructor(c,u){const d=t(c),h=(r=>{const{imag:t,real:e}=r;return void 0===t?void 0===e?{...r,imag:[0,0],real:[0,0]}:{...r,imag:Array.from(e,()=>0),real:e}:void 0===e?{...r,imag:t,real:Array.from(t,()=>0)}:{...r,imag:t,real:e}})({...$r,...u}),f=r(d,h);return e.add(f),f}static[Symbol.hasInstance](c){return null!==c&&"object"==typeof c&&Object.getPrototypeOf(c)===hp.prototype||e.has(c)}})(Bd,st,new WeakSet),dl=((r,t,e,i,o,c)=>{const d=new Float32Array([1,1]),h=Math.PI/2,f={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},m={...f,oversample:"none"},b=(w,S,F,k,q)=>{if(1===S)return((w,S,F,k)=>{const q=new Float32Array(16385),I=new Float32Array(16385);for(let j=0;j<16385;j+=1){const z=j/16384*h;q[j]=Math.cos(z),I[j]=Math.sin(z)}const G=e(w,{...f,gain:0}),D=i(w,{...m,curve:q}),L=i(w,{...m,curve:d}),R=e(w,{...f,gain:0}),E=i(w,{...m,curve:I});return{connectGraph(){S.connect(G),S.connect(void 0===L.inputs?L:L.inputs[0]),S.connect(R),L.connect(F),F.connect(void 0===D.inputs?D:D.inputs[0]),F.connect(void 0===E.inputs?E:E.inputs[0]),D.connect(G.gain),E.connect(R.gain),G.connect(k,0,0),R.connect(k,0,1)},disconnectGraph(){S.disconnect(G),S.disconnect(void 0===L.inputs?L:L.inputs[0]),S.disconnect(R),L.disconnect(F),F.disconnect(void 0===D.inputs?D:D.inputs[0]),F.disconnect(void 0===E.inputs?E:E.inputs[0]),D.disconnect(G.gain),E.disconnect(R.gain),G.disconnect(k,0,0),R.disconnect(k,0,1)}}})(w,F,k,q);if(2===S)return((w,S,F,k)=>{const q=new Float32Array(16385),I=new Float32Array(16385),G=new Float32Array(16385),D=new Float32Array(16385),L=Math.floor(8192.5);for(let ct=0;ct<16385;ct+=1)if(ct>L){const vt=(ct-L)/(16384-L)*h;q[ct]=Math.cos(vt),I[ct]=Math.sin(vt),G[ct]=0,D[ct]=1}else{const vt=ct/(16384-L)*h;q[ct]=1,I[ct]=0,G[ct]=Math.cos(vt),D[ct]=Math.sin(vt)}const R=t(w,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),E=e(w,{...f,gain:0}),j=i(w,{...m,curve:q}),z=e(w,{...f,gain:0}),H=i(w,{...m,curve:I}),V=i(w,{...m,curve:d}),et=e(w,{...f,gain:0}),rt=i(w,{...m,curve:G}),it=e(w,{...f,gain:0}),nt=i(w,{...m,curve:D});return{connectGraph(){S.connect(R),S.connect(void 0===V.inputs?V:V.inputs[0]),R.connect(E,0),R.connect(z,0),R.connect(et,1),R.connect(it,1),V.connect(F),F.connect(void 0===j.inputs?j:j.inputs[0]),F.connect(void 0===H.inputs?H:H.inputs[0]),F.connect(void 0===rt.inputs?rt:rt.inputs[0]),F.connect(void 0===nt.inputs?nt:nt.inputs[0]),j.connect(E.gain),H.connect(z.gain),rt.connect(et.gain),nt.connect(it.gain),E.connect(k,0,0),et.connect(k,0,0),z.connect(k,0,1),it.connect(k,0,1)},disconnectGraph(){S.disconnect(R),S.disconnect(void 0===V.inputs?V:V.inputs[0]),R.disconnect(E,0),R.disconnect(z,0),R.disconnect(et,1),R.disconnect(it,1),V.disconnect(F),F.disconnect(void 0===j.inputs?j:j.inputs[0]),F.disconnect(void 0===H.inputs?H:H.inputs[0]),F.disconnect(void 0===rt.inputs?rt:rt.inputs[0]),F.disconnect(void 0===nt.inputs?nt:nt.inputs[0]),j.disconnect(E.gain),H.disconnect(z.gain),rt.disconnect(et.gain),nt.disconnect(it.gain),E.disconnect(k,0,0),et.disconnect(k,0,0),z.disconnect(k,0,1),it.disconnect(k,0,1)}}})(w,F,k,q);throw o()};return(w,{channelCount:S,channelCountMode:F,pan:k,...q})=>{if("max"===F)throw o();const I=r(w,{...q,channelCount:1,channelCountMode:F,numberOfInputs:2}),G=e(w,{...q,channelCount:S,channelCountMode:F,gain:1}),D=e(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:k});let{connectGraph:L,disconnectGraph:R}=b(w,S,G,D,I);Object.defineProperty(D.gain,"defaultValue",{get:()=>0}),Object.defineProperty(D.gain,"maxValue",{get:()=>1}),Object.defineProperty(D.gain,"minValue",{get:()=>-1});const E={get bufferSize(){},get channelCount(){return G.channelCount},set channelCount(V){G.channelCount!==V&&(j&&R(),({connectGraph:L,disconnectGraph:R}=b(w,V,G,D,I)),j&&L()),G.channelCount=V},get channelCountMode(){return G.channelCountMode},set channelCountMode(V){if("clamped-max"===V||"max"===V)throw o();G.channelCountMode=V},get channelInterpretation(){return G.channelInterpretation},set channelInterpretation(V){G.channelInterpretation=V},get context(){return G.context},get inputs(){return[G]},get numberOfInputs(){return G.numberOfInputs},get numberOfOutputs(){return G.numberOfOutputs},get pan(){return D.gain},addEventListener:(...V)=>G.addEventListener(V[0],V[1],V[2]),dispatchEvent:(...V)=>G.dispatchEvent(V[0]),removeEventListener:(...V)=>G.removeEventListener(V[0],V[1],V[2])};let j=!1;return c(js(E,I),()=>{L(),j=!0},()=>{R(),j=!1})}})(ds,er,tn,Si,$t,ks),fl=((r,t)=>(e,i)=>{const o=i.channelCountMode;if("clamped-max"===o)throw t();if(void 0===e.createStereoPanner)return r(e,i);const c=e.createStereoPanner();return Te(c,i),ce(c,i,"pan"),Object.defineProperty(c,"channelCountMode",{get:()=>o,set:u=>{if(u!==o)throw t()}}),c})(dl,$t),Gd=((r,t,e,i,o)=>()=>{const c=new WeakMap,u=function(){var d=ut(function*(h,f){let m=e(h);const _=Kt(m,f);return _||(m=t(f,{channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,pan:m.pan.value})),c.set(f,m),_?yield r(f,h.pan,m.pan):yield i(f,h.pan,m.pan),Gs(m)?yield o(h,f,m.inputs[0]):yield o(h,f,m),m});return function(f,m){return d.apply(this,arguments)}}();return{render(d,h){const f=c.get(h);return void 0!==f?Promise.resolve(f):u(d,h)}}})(ts,fl,ne,Ge,ye),lr=((r,t,e,i,o,c)=>class extends r{constructor(d,h){const f=o(d),m={...Hu,...h},_=e(f,m),y=c(f);super(d,!1,_,y?i():null),this._pan=t(this,y,_.pan)}get pan(){return this._pan}})(Zt,Bn,fl,Gd,st,Ht),Ud=((r,t,e)=>()=>{const i=new WeakMap,o=function(){var c=ut(function*(u,d){let h=t(u);return Kt(h,d)||(h=r(d,{channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,curve:h.curve,oversample:h.oversample})),i.set(d,h),Gs(h)?yield e(u,d,h.inputs[0]):yield e(u,d,h),h});return function(d,h){return c.apply(this,arguments)}}();return{render(c,u){const d=i.get(u);return void 0!==d?Promise.resolve(d):o(c,u)}}})(Si,ne,ye),zd=((r,t,e,i,o,c,u)=>class extends r{constructor(h,f){const m=o(h),_={..._d,...f},y=e(m,_);super(h,!0,y,c(m)?i():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=y,u(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(h){if(null===h)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(h.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=h}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(h){this._nativeWaveShaperNode.oversample=h}})(Zt,ve,Si,Ud,st,Ht,Xs),lo=(r=>null!==r&&r.isSecureContext)(Tn),ho=(r=>(t,e,i)=>{Object.defineProperties(r,{currentFrame:{configurable:!0,get:()=>Math.round(t*e)},currentTime:{configurable:!0,get:()=>t}});try{return i()}finally{null!==r&&(delete r.currentFrame,delete r.currentTime)}})(Tn),pl=new WeakMap,jd=((r,t)=>e=>{let i=r.get(e);if(void 0!==i)return i;if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");return i=new t(1,1,44100),r.set(e,i),i})(pl,Ee),Zd=lo?((r,t,e,i,o,c,u,d,h,f,m,_,y)=>{let b=0;return(w,S,F={credentials:"omit"})=>{const k=m.get(w);if(void 0!==k&&k.has(S))return Promise.resolve();const q=f.get(w);if(void 0!==q){const D=q.get(S);if(void 0!==D)return D}const I=c(w),G=void 0===I.audioWorklet?o(S).then(([D,L])=>{const[R,E]=Rr(D,L);return e(`${R};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${E}\n})})(window,'_AWGS')`)}).then(()=>{const D=y._AWGS.pop();if(void 0===D)throw new SyntaxError;i(I.currentTime,I.sampleRate,()=>D(class{},void 0,(L,R)=>{if(""===L.trim())throw t();const E=He.get(I);if(void 0!==E){if(E.has(L))throw t();qr(R),Ir(R.parameterDescriptors),E.set(L,R)}else qr(R),Ir(R.parameterDescriptors),He.set(I,new Map([[L,R]]))},I.sampleRate,void 0,void 0))}):Promise.all([o(S),Promise.resolve(r(_,_))]).then(([[D,L],R])=>{const E=b+1;b=E;const[j,z]=Rr(D,L),it=new Blob([`${j};((AudioWorkletProcessor,registerProcessor)=>{${z}\n})(${R?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${R?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${R?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${E}',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),nt=URL.createObjectURL(it);return I.audioWorklet.addModule(nt,F).then(()=>{if(d(I))return I;const ct=u(I);return ct.audioWorklet.addModule(nt,F).then(()=>ct)}).then(ct=>{if(null===h)throw new SyntaxError;try{new h(ct,`__sac${E}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(nt))});return void 0===q?f.set(w,new Map([[S,G]])):q.set(S,G),G.then(()=>{const D=m.get(w);void 0===D?m.set(w,new Set([S])):D.add(S)}).finally(()=>{const D=f.get(w);void 0!==D&&D.delete(S)}),G}})(Pe,$t,(r=>t=>new Promise((e,i)=>{if(null===r)return void i(new SyntaxError);const o=r.document.head;if(null===o)i(new SyntaxError);else{const c=r.document.createElement("script"),u=new Blob([t],{type:"application/javascript"}),d=URL.createObjectURL(u),h=r.onerror,f=()=>{r.onerror=h,URL.revokeObjectURL(d)};r.onerror=(m,_,y,b,w)=>_===d||_===r.location.href&&1===y&&1===b?(f(),i(w),!1):null!==h?h(m,_,y,b,w):void 0,c.onerror=()=>{f(),i(new SyntaxError)},c.onload=()=>{f(),e()},c.src=d,c.type="module",o.appendChild(c)}}))(Tn),ho,function(){var t=ut(function*(e){try{const i=yield fetch(e);if(i.ok)return[yield i.text(),i.url]}catch{}throw new DOMException("","AbortError")});return function(e){return t.apply(this,arguments)}}(),st,jd,Ht,wi,new WeakMap,new WeakMap,((r,t)=>ut(function*(){if(null===r)return!0;if(null===t)return!1;const e=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),i=new t(1,128,44100),o=URL.createObjectURL(e);let c=!1,u=!1;try{yield i.audioWorklet.addModule(o);const d=new r(i,"a",{numberOfOutputs:0}),h=i.createOscillator();d.port.onmessage=()=>c=!0,d.onprocessorerror=()=>u=!0,h.connect(d),h.start(0),yield i.startRendering()}catch{}finally{URL.revokeObjectURL(o)}return c&&!u}))(wi,Ee),Tn):void 0,ml=((r,t)=>e=>r(e)||t(e))(Da,Ht),Wa=((r,t,e,i,o,c,u,d,h,f,m)=>(_,y)=>{const b=u(_)?_:c(_);if(o.has(y)){const w=new DOMException("","DataCloneError");return Promise.reject(w)}try{o.add(y)}catch{}return t(h,()=>h(b))?b.decodeAudioData(y).then(w=>(fa(y).catch(()=>{}),t(d,()=>d(w))||m(w),r.add(w),w)):new Promise((w,S)=>{const F=function(){var q=ut(function*(){try{yield fa(y)}catch{}});return function(){return q.apply(this,arguments)}}(),k=q=>{S(q),F()};try{b.decodeAudioData(y,q=>{"function"!=typeof q.copyFromChannel&&(f(q),cn(q)),r.add(q),F().then(()=>w(q))},q=>{k(null===q?new DOMException("","EncodingError"):q)})}catch(q){k(q)}})})(Ea,Pe,0,0,new WeakSet,st,ml,ls,zs,Fa,Wn),gl=((r,t,e,i,o,c,u,d,h,f,m,_,y,b,w,S,F,k,q,I)=>class extends w{constructor(D,L){super(D,L),this._nativeContext=D,this._audioWorklet=void 0===r?void 0:{addModule:(R,E)=>r(this,R,E)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new o(this)}createBuffer(D,L,R){return new e({length:L,numberOfChannels:D,sampleRate:R})}createBufferSource(){return new i(this)}createChannelMerger(D=6){return new c(this,{numberOfInputs:D})}createChannelSplitter(D=6){return new u(this,{numberOfOutputs:D})}createConstantSource(){return new d(this)}createConvolver(){return new h(this)}createDelay(D=1){return new m(this,{maxDelayTime:D})}createDynamicsCompressor(){return new _(this)}createGain(){return new y(this)}createIIRFilter(D,L){return new b(this,{feedback:L,feedforward:D})}createOscillator(){return new S(this)}createPanner(){return new F(this)}createPeriodicWave(D,L,R={disableNormalization:!1}){return new k(this,{...R,imag:L,real:D})}createStereoPanner(){return new q(this)}createWaveShaper(){return new I(this)}decodeAudioData(D,L,R){return f(this._nativeContext,D).then(E=>("function"==typeof L&&L(E),E),E=>{throw"function"==typeof R&&R(E),E})}})(Zd,kd,Od,Gn,Fd,Rd,ar,Id,$s,Wa,qd,cr,ul,Le,An,Js,Va,ur,lr,zd),Ba=((r,t,e,i)=>class extends r{constructor(c,u){const d=e(c),h=((r,t)=>r.createMediaElementSource(t.mediaElement))(d,u);if(i(d))throw TypeError();super(c,!0,h,null),this._nativeMediaElementAudioSourceNode=h}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})(Zt,0,st,Ht),_l=((r,t,e,i)=>class extends r{constructor(c,u){const d=e(c);if(i(d))throw new TypeError;const f=((r,t)=>{const e=r.createMediaStreamDestination();return Te(e,t),1===e.numberOfOutputs&&Object.defineProperty(e,"numberOfOutputs",{get:()=>0}),e})(d,{...re,...u});super(c,!1,f,null),this._nativeMediaStreamAudioDestinationNode=f}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(Zt,0,st,Ht),vl=((r,t,e,i)=>class extends r{constructor(c,u){const d=e(c),h=((r,{mediaStream:t})=>{const e=t.getAudioTracks();e.sort((c,u)=>c.id<u.id?-1:c.id>u.id?1:0);const i=e.slice(0,1),o=r.createMediaStreamSource(new MediaStream(i));return Object.defineProperty(o,"mediaStream",{value:t}),o})(d,u);if(i(d))throw new TypeError;super(c,!0,h,null),this._nativeMediaStreamAudioSourceNode=h}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(Zt,0,st,Ht),yl=((r,t)=>(e,{mediaStreamTrack:i})=>{if("function"==typeof e.createMediaStreamTrackSource)return e.createMediaStreamTrackSource(i);const o=new MediaStream([i]),c=e.createMediaStreamSource(o);if("audio"!==i.kind)throw r();if(t(e))throw new TypeError;return c})(ve,Ht),fo=((r,t,e)=>class extends r{constructor(o,c){const u=e(o);super(o,!0,t(u,c),null)}})(Zt,yl,st),Qd=((r,t,e,i,o,c,u,d,h)=>class extends r{constructor(m={}){if(null===h)throw new Error("Missing the native AudioContext constructor.");let _;try{_=new h(m)}catch(w){throw 12===w.code&&"sampleRate is not in range"===w.message?e():w}if(null===_)throw i();if(!(r=>void 0===r||"number"==typeof r||"string"==typeof r&&("balanced"===r||"interactive"===r||"playback"===r))(m.latencyHint))throw new TypeError(`The provided value '${m.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==m.sampleRate&&_.sampleRate!==m.sampleRate)throw e();super(_,2);const{latencyHint:y}=m,{sampleRate:b}=_;if(this._baseLatency="number"==typeof _.baseLatency?_.baseLatency:"balanced"===y?512/b:"interactive"===y||void 0===y?256/b:"playback"===y?1024/b:128*Math.max(2,Math.min(128,Math.round(y*b/128)))/b,this._nativeAudioContext=_,"webkitAudioContext"===h.name?(this._nativeGainNode=_.createGain(),this._nativeOscillatorNode=_.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(_.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===_.state){this._state="suspended";const w=()=>{"suspended"===this._state&&(this._state=null),_.removeEventListener("statechange",w)};_.addEventListener("statechange",w)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then(()=>{throw t()}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then(()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),fi(this)}))}createMediaElementSource(m){return new o(this,{mediaElement:m})}createMediaStreamDestination(){return new c(this)}createMediaStreamSource(m){return new u(this,{mediaStream:m})}createMediaStreamTrackSource(m){return new d(this,{mediaStreamTrack:m})}resume(){return"suspended"===this._state?new Promise((m,_)=>{const y=()=>{this._nativeAudioContext.removeEventListener("statechange",y),"running"===this._nativeAudioContext.state?m():this.resume().then(m,_)};this._nativeAudioContext.addEventListener("statechange",y)}):this._nativeAudioContext.resume().catch(m=>{throw void 0===m||15===m.code?t():m})}suspend(){return this._nativeAudioContext.suspend().catch(m=>{throw void 0===m?t():m})}})(gl,ve,$t,sr,Ba,_l,vl,fo,hs),po=(r=>t=>{const e=r.get(t);if(void 0===e)throw new Error("The context has no set of AudioWorkletNodes.");return e})(Pa),xl=(r=>(t,e)=>{r(t).add(e)})(po),wl=(r=>(t,e,i=0,o=0)=>{const c=t[i];if(void 0===c)throw r();return Vr(e)?c.connect(e,0,o):c.connect(e,0)})(De),Tl=(r=>(t,e)=>{r(t).delete(e)})(po),bl=(r=>(t,e=void 0,i=void 0,o=0)=>void 0===e?t.forEach(c=>c.disconnect()):"number"==typeof e?Yi(r,t,e).disconnect():Vr(e)?void 0===i?t.forEach(c=>c.disconnect(e)):void 0===o?Yi(r,t,i).disconnect(e,0):Yi(r,t,i).disconnect(e,0,o):void 0===i?t.forEach(c=>c.disconnect(e)):Yi(r,t,i).disconnect(e,0))(De),mo=new WeakMap,Sl=((r,t)=>e=>t(r,e))(mo,Je),Ga=((r,t,e,i,o,c,u,d,h,f,m,_,y)=>(b,w,S,F)=>{if(0===F.numberOfInputs&&0===F.numberOfOutputs)throw h();const k=Array.isArray(F.outputChannelCount)?F.outputChannelCount:Array.from(F.outputChannelCount);if(k.some($=>$<1))throw h();if(k.length!==F.numberOfOutputs)throw t();if("explicit"!==F.channelCountMode)throw h();const q=F.channelCount*F.numberOfInputs,I=k.reduce(($,yt)=>$+yt,0),G=void 0===S.parameterDescriptors?0:S.parameterDescriptors.length;if(q+G>6||I>6)throw h();const D=new MessageChannel,L=[],R=[];for(let $=0;$<F.numberOfInputs;$+=1)L.push(u(b,{channelCount:F.channelCount,channelCountMode:F.channelCountMode,channelInterpretation:F.channelInterpretation,gain:1})),R.push(o(b,{channelCount:F.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:F.channelCount}));const E=[];if(void 0!==S.parameterDescriptors)for(const{defaultValue:$,maxValue:yt,minValue:Ce,name:he}of S.parameterDescriptors){const Ut=c(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==F.parameterData[he]?F.parameterData[he]:void 0===$?0:$});Object.defineProperties(Ut.offset,{defaultValue:{get:()=>void 0===$?0:$},maxValue:{get:()=>void 0===yt?Ne:yt},minValue:{get:()=>void 0===Ce?ae:Ce}}),E.push(Ut)}const j=i(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,q+G)}),z=ba(w,b.sampleRate),H=d(b,z,q+G,Math.max(1,I)),V=o(b,{channelCount:Math.max(1,I),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,I)}),et=[];for(let $=0;$<F.numberOfOutputs;$+=1)et.push(i(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:k[$]}));for(let $=0;$<F.numberOfInputs;$+=1){L[$].connect(R[$]);for(let yt=0;yt<F.channelCount;yt+=1)R[$].connect(j,yt,$*F.channelCount+yt)}const rt=new du(void 0===S.parameterDescriptors?[]:S.parameterDescriptors.map(({name:$},yt)=>{const Ce=E[yt];return Ce.connect(j,0,q+yt),Ce.start(0),[$,Ce.offset]}));j.connect(H);let it=F.channelInterpretation,nt=null;const ct=0===F.numberOfOutputs?[H]:et,vt={get bufferSize(){return z},get channelCount(){return F.channelCount},set channelCount($){throw e()},get channelCountMode(){return F.channelCountMode},set channelCountMode($){throw e()},get channelInterpretation(){return it},set channelInterpretation($){for(const yt of L)yt.channelInterpretation=$;it=$},get context(){return H.context},get inputs(){return L},get numberOfInputs(){return F.numberOfInputs},get numberOfOutputs(){return F.numberOfOutputs},get onprocessorerror(){return nt},set onprocessorerror($){"function"==typeof nt&&vt.removeEventListener("processorerror",nt),nt="function"==typeof $?$:null,"function"==typeof nt&&vt.addEventListener("processorerror",nt)},get parameters(){return rt},get port(){return D.port2},addEventListener:(...$)=>H.addEventListener($[0],$[1],$[2]),connect:r.bind(null,ct),disconnect:f.bind(null,ct),dispatchEvent:(...$)=>H.dispatchEvent($[0]),removeEventListener:(...$)=>H.removeEventListener($[0],$[1],$[2])},pt=new Map;var $;D.port1.addEventListener=($=D.port1.addEventListener,(...yt)=>{if("message"===yt[0]){const Ce="function"==typeof yt[1]?yt[1]:"object"==typeof yt[1]&&null!==yt[1]&&"function"==typeof yt[1].handleEvent?yt[1].handleEvent:null;if(null!==Ce){const he=pt.get(yt[1]);void 0!==he?yt[1]=he:(yt[1]=Ut=>{m(b.currentTime,b.sampleRate,()=>Ce(Ut))},pt.set(Ce,yt[1]))}}return $.call(D.port1,yt[0],yt[1],yt[2])}),D.port1.removeEventListener=($=>(...yt)=>{if("message"===yt[0]){const Ce=pt.get(yt[1]);void 0!==Ce&&(pt.delete(yt[1]),yt[1]=Ce)}return $.call(D.port1,yt[0],yt[1],yt[2])})(D.port1.removeEventListener);let At=null;Object.defineProperty(D.port1,"onmessage",{get:()=>At,set:$=>{"function"==typeof At&&D.port1.removeEventListener("message",At),At="function"==typeof $?$:null,"function"==typeof At&&(D.port1.addEventListener("message",At),D.port1.start())}}),S.prototype.port=D.port1;let Dt=null;((r,t,e,i)=>{let o=$n.get(r);void 0===o&&(o=new WeakMap,$n.set(r,o));const c=nd(e,i);return o.set(t,c),c})(b,vt,S,F).then($=>Dt=$);const Ae=Gr(F.numberOfInputs,F.channelCount),Ke=Gr(F.numberOfOutputs,k),Rt=void 0===S.parameterDescriptors?[]:S.parameterDescriptors.reduce(($,{name:yt})=>({...$,[yt]:new Float32Array(128)}),{});let vs=!0;const Is=()=>{F.numberOfOutputs>0&&H.disconnect(V);for(let $=0,yt=0;$<F.numberOfOutputs;$+=1){const Ce=et[$];for(let he=0;he<k[$];he+=1)V.disconnect(Ce,yt+he,he);yt+=k[$]}},X=new Map;H.onaudioprocess=({inputBuffer:$,outputBuffer:yt})=>{if(null!==Dt){const Ce=_(vt);for(let he=0;he<z;he+=128){for(let Ut=0;Ut<F.numberOfInputs;Ut+=1)for(let pe=0;pe<F.channelCount;pe+=1)Br($,Ae[Ut],pe,pe,he);void 0!==S.parameterDescriptors&&S.parameterDescriptors.forEach(({name:Ut},pe)=>{Br($,Rt,Ut,q+pe,he)});for(let Ut=0;Ut<F.numberOfInputs;Ut+=1)for(let pe=0;pe<k[Ut];pe+=1)0===Ke[Ut][pe].byteLength&&(Ke[Ut][pe]=new Float32Array(128));try{const Ut=Ae.map((Fn,qs)=>{if(Ce[qs].size>0)return X.set(qs,z/128),Fn;const su=X.get(qs);return void 0===su?[]:(Fn.every(Cf=>Cf.every(kf=>0===kf))&&(1===su?X.delete(qs):X.set(qs,su-1)),Fn)});vs=m(b.currentTime+he/b.sampleRate,b.sampleRate,()=>Dt.process(Ut,Ke,Rt));for(let Fn=0,qs=0;Fn<F.numberOfOutputs;Fn+=1){for(let Mr=0;Mr<k[Fn];Mr+=1)Hi(yt,Ke[Fn],Mr,qs+Mr,he);qs+=k[Fn]}}catch(Ut){vs=!1,vt.dispatchEvent(new ErrorEvent("processorerror",{colno:Ut.colno,filename:Ut.filename,lineno:Ut.lineno,message:Ut.message}))}if(!vs){for(let Ut=0;Ut<F.numberOfInputs;Ut+=1){L[Ut].disconnect(R[Ut]);for(let pe=0;pe<F.channelCount;pe+=1)R[he].disconnect(j,pe,Ut*F.channelCount+pe)}if(void 0!==S.parameterDescriptors){const Ut=S.parameterDescriptors.length;for(let pe=0;pe<Ut;pe+=1){const Fn=E[pe];Fn.disconnect(j,0,q+pe),Fn.stop()}}j.disconnect(H),H.onaudioprocess=null,xe?Is():Li();break}}}};let xe=!1;const cs=u(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Pi=()=>H.connect(cs).connect(b.destination),Li=()=>{H.disconnect(cs),cs.disconnect()};return Pi(),y(vt,()=>{if(vs){Li(),F.numberOfOutputs>0&&H.connect(V);for(let $=0,yt=0;$<F.numberOfOutputs;$+=1){const Ce=et[$];for(let he=0;he<k[$];he+=1)V.connect(Ce,yt+he,he);yt+=k[$]}}xe=!0},()=>{vs&&(Pi(),Is()),xe=!1})})(wl,De,ve,ds,er,bi,tn,It,$t,bl,ho,Sl,ks),Hd=((r,t,e,i,o)=>(c,u,d,h,f,m)=>{if(null!==d)try{const _=new d(c,h,m),y=new Map;let b=null;if(Object.defineProperties(_,{channelCount:{get:()=>m.channelCount,set:()=>{throw r()}},channelCountMode:{get:()=>"explicit",set:()=>{throw r()}},onprocessorerror:{get:()=>b,set:w=>{"function"==typeof b&&_.removeEventListener("processorerror",b),b="function"==typeof w?w:null,"function"==typeof b&&_.addEventListener("processorerror",b)}}}),_.addEventListener=(w=_.addEventListener,(...S)=>{if("processorerror"===S[0]){const F="function"==typeof S[1]?S[1]:"object"==typeof S[1]&&null!==S[1]&&"function"==typeof S[1].handleEvent?S[1].handleEvent:null;if(null!==F){const k=y.get(S[1]);void 0!==k?S[1]=k:(S[1]=q=>{"error"===q.type?(Object.defineProperties(q,{type:{value:"processorerror"}}),F(q)):F(new ErrorEvent(S[0],{...q}))},y.set(F,S[1]))}}return w.call(_,"error",S[1],S[2]),w.call(_,...S)}),_.removeEventListener=(w=>(...S)=>{if("processorerror"===S[0]){const F=y.get(S[1]);void 0!==F&&(y.delete(S[1]),S[1]=F)}return w.call(_,"error",S[1],S[2]),w.call(_,S[0],S[1],S[2])})(_.removeEventListener),0!==m.numberOfOutputs){const w=e(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return _.connect(w).connect(c.destination),o(_,()=>w.disconnect(),()=>w.connect(c.destination))}return _}catch(_){throw 11===_.code?i():_}var w;if(void 0===f)throw i();return(r=>{const{port1:t}=new MessageChannel;try{t.postMessage(r)}finally{t.close()}})(m),t(c,u,f,m)})(ve,Ga,tn,$t,ks),Ua=((r,t,e,i,o,c,u,d,h,f,m,_,y,b,w,S)=>(F,k,q)=>{const I=new WeakMap;let G=null;const D=function(){var L=ut(function*(R,E){let j=m(R),z=null;const H=Kt(j,E),V=Array.isArray(k.outputChannelCount)?k.outputChannelCount:Array.from(k.outputChannelCount);if(null===_){const et=V.reduce((ct,vt)=>ct+vt,0),rt=o(E,{channelCount:Math.max(1,et),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,et)}),it=[];for(let ct=0;ct<R.numberOfOutputs;ct+=1)it.push(i(E,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:V[ct]}));const nt=u(E,{channelCount:k.channelCount,channelCountMode:k.channelCountMode,channelInterpretation:k.channelInterpretation,gain:1});nt.connect=t.bind(null,it),nt.disconnect=h.bind(null,it),z=[rt,it,nt]}else H||(j=new _(E,F));if(I.set(E,null===z?j:z[2]),null!==z){if(null===G){if(void 0===q)throw new Error("Missing the processor constructor.");if(null===y)throw new Error("Missing the native OfflineAudioContext constructor.");const vt=R.channelCount*R.numberOfInputs,pt=void 0===q.parameterDescriptors?0:q.parameterDescriptors.length,At=vt+pt;G=wh(R,0===At?null:yield function(){var Gt=ut(function*(){const Ae=new y(At,128*Math.ceil(R.context.length/128),E.sampleRate),Ke=[],Rt=[];for(let X=0;X<k.numberOfInputs;X+=1)Ke.push(u(Ae,{channelCount:k.channelCount,channelCountMode:k.channelCountMode,channelInterpretation:k.channelInterpretation,gain:1})),Rt.push(o(Ae,{channelCount:k.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:k.channelCount}));const vs=yield Promise.all(Array.from(R.parameters.values()).map(function(){var X=ut(function*(xe){const cs=c(Ae,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:xe.value});return yield b(Ae,xe,cs.offset),cs});return function(xe){return X.apply(this,arguments)}}())),Is=i(Ae,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,vt+pt)});for(let X=0;X<k.numberOfInputs;X+=1){Ke[X].connect(Rt[X]);for(let xe=0;xe<k.channelCount;xe+=1)Rt[X].connect(Is,xe,X*k.channelCount+xe)}for(const[X,xe]of vs.entries())xe.connect(Is,0,vt+X),xe.start(0);return Is.connect(Ae.destination),yield Promise.all(Ke.map(X=>w(R,Ae,X))),S(Ae)});return function(){return Gt.apply(this,arguments)}}()(),E,k,V,q,f)}const et=yield G,rt=e(E,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[it,nt,ct]=z;null!==et&&(rt.buffer=et,rt.start(0)),rt.connect(it);for(let vt=0,pt=0;vt<R.numberOfOutputs;vt+=1){const At=nt[vt];for(let Dt=0;Dt<V[vt];Dt+=1)it.connect(At,pt+Dt,Dt);pt+=V[vt]}return ct}if(H)for(const[et,rt]of R.parameters.entries())yield r(E,rt,j.parameters.get(et));else for(const[et,rt]of R.parameters.entries())yield b(E,rt,j.parameters.get(et));return yield w(R,E,j),j});return function(E,j){return L.apply(this,arguments)}}();return{render(L,R){d(R,L);const E=I.get(R);return void 0!==E?Promise.resolve(E):D(L,R)}}})(ts,wl,Ti,ds,er,bi,tn,Tl,bl,ho,ne,wi,Ee,Ge,ye,Ks),Nt=(r=>t=>r.get(t))(pl),Yd=(r=>(t,e)=>{r.set(t,e)})(mo),Al=lo?((r,t,e,i,o,c,u,d,h,f,m,_,y,b)=>class extends t{constructor(S,F,k){var q;const I=d(S),G=h(I),D=(r=>({...r,outputChannelCount:void 0!==r.outputChannelCount?r.outputChannelCount:1===r.numberOfInputs&&1===r.numberOfOutputs?[r.channelCount]:Array.from({length:r.numberOfOutputs},()=>1)}))({...yh,...k});(r=>{const{port1:t,port2:e}=new MessageChannel;try{t.postMessage(r)}finally{t.close(),e.close()}})(D);const L=He.get(I),R=L?.get(F),E=G||"closed"!==I.state?I:null!==(q=u(I))&&void 0!==q?q:I,j=o(E,G?null:S.baseLatency,f,F,R,D);super(S,!0,j,G?i(F,D,R):null);const H=[];j.parameters.forEach((et,rt)=>{const it=e(this,G,et);H.push([rt,it])}),this._nativeAudioWorkletNode=j,this._onprocessorerror=null,this._parameters=new du(H),G&&r(I,this);const{activeInputs:V}=c(this);_(j,V)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(S){const F="function"==typeof S?b(this,S):null;this._nativeAudioWorkletNode.onprocessorerror=F;const k=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==k&&k===F?S:k}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(xl,Zt,Bn,Ua,Hd,we,Nt,st,Ht,wi,0,Yd,0,xi):void 0,za=((r,t)=>(e,i,o)=>{if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(e,i,o)}catch(c){throw"SyntaxError"===c.name?r():c}})($t,Ee),Cl=((r,t,e,i,o,c,u,d)=>(h,f)=>e(h).render(h,f).then(()=>Promise.all(Array.from(i(f)).map(m=>e(m).render(m,f)))).then(()=>o(f)).then(m=>("function"!=typeof m.copyFromChannel?(u(m),cn(m)):t(c,()=>c(m))||d(m),r.add(m),m)))(Ea,Pe,As,po,Ks,ls,Fa,Wn),Cn=((r,t,e,i,o)=>class extends r{constructor(u,d,h){let f;if("number"==typeof u&&void 0!==d&&void 0!==h)f={length:d,numberOfChannels:u,sampleRate:h};else{if("object"!=typeof u)throw new Error("The given parameters are not valid.");f=u}const{length:m,numberOfChannels:_,sampleRate:y}={...Hr,...f},b=i(_,m,y);t(zs,()=>zs(b))||b.addEventListener("statechange",(()=>{let w=0;const S=F=>{"running"===this._state&&(w>0?(b.removeEventListener("statechange",S),F.stopImmediatePropagation(),this._waitForThePromiseToSettle(F)):w+=1)};return S})()),super(b,_),this._length=m,this._nativeOfflineAudioContext=b,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(e()):(this._state="running",o(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,fi(this)}))}_waitForThePromiseToSettle(u){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(u):setTimeout(()=>this._waitForThePromiseToSettle(u))}})(gl,Pe,ve,za,Cl),Xd=((r,t)=>e=>{const i=r.get(e);return t(i)||t(e)})(us,Da),_o=((r,t)=>e=>r.has(e)||t(e))(Xn,Na),ja=((r,t)=>e=>r.has(e)||t(e))(an,nl),kl=((r,t)=>e=>{const i=r.get(e);return t(i)||t(e)})(us,Ht);var r;function ht(r,t){if(!r)throw new Error(t)}function Xe(r,t,e=1/0){if(!(t<=r&&r<=e))throw new RangeError(`Value must be within [${t}, ${e}], got: ${r}`)}function vo(r){!r.isOffline&&"running"!==r.state&&xo('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let yo=console;function xo(...r){yo.warn(...r)}function en(r){return typeof r>"u"}function kt(r){return!en(r)}function Ue(r){return"number"==typeof r}function Ds(r){return"[object Object]"===Object.prototype.toString.call(r)&&r.constructor===Object}function fs(r){return"boolean"==typeof r}function dn(r){return Array.isArray(r)}function Un(r){return"string"==typeof r}function Ai(r){return Un(r)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(r)}function Jd(r,t,e){return new Cn(r,t,e)}const ti="object"==typeof self?self:null,Dl=ti&&(ti.hasOwnProperty("AudioContext")||ti.hasOwnProperty("webkitAudioContext"));var Wt=bt(7582);class El{constructor(t,e,i){this._callback=t,this._type=e,this._updateInterval=i,this._createClock()}_createWorker(){const t=new Blob([`\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t`],{type:"text/javascript"}),e=URL.createObjectURL(t),i=new Worker(e);i.onmessage=this._callback.bind(this),this._worker=i}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch{this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){this._updateInterval=Math.max(t,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*t,1))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function Ns(r){return ja(r)}function me(r){return _o(r)}function fn(r){return kl(r)}function Ci(r){return Xd(r)}function Fl(r){return r instanceof AudioBuffer}function wo(r,t){return"value"===r||Ns(t)||me(t)||Fl(t)}function zn(r,...t){if(!t.length)return r;const e=t.shift();if(Ds(r)&&Ds(e))for(const i in e)wo(i,e[i])?r[i]=e[i]:Ds(e[i])?(r[i]||Object.assign(r,{[i]:{}}),zn(r[i],e[i])):Object.assign(r,{[i]:e[i]});return zn(r,...t)}function Q(r,t,e=[],i){const o={},c=Array.from(t);if(Ds(c[0])&&i&&!Reflect.has(c[0],i)&&(Object.keys(c[0]).some(d=>Reflect.has(r,d))||(zn(o,{[i]:c[0]}),e.splice(e.indexOf(i),1),c.shift())),1===c.length&&Ds(c[0]))zn(o,c[0]);else for(let u=0;u<e.length;u++)kt(c[u])&&(o[e[u]]=c[u]);return zn(r,o)}function jn(r,t){return en(r)?t:r}function ei(r,t){return t.forEach(e=>{Reflect.has(r,e)&&delete r[e]}),r}let kn=(()=>{class r{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||ti&&this.toString()===ti.TONE_DEBUG_CLASS)&&function Ol(...r){yo.log(...r)}(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}return r.version=de,r})();const Ha=1e-6;function hr(r,t){return r>t+Ha}function To(r,t){return hr(r,t)||On(r,t)}function dr(r,t){return r+Ha<t}function On(r,t){return Math.abs(r-t)<Ha}class Dn extends kn{constructor(){super(),this.name="Timeline",this._timeline=[];const t=Q(Dn.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(ht(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length)ht(To(t.time,this._timeline[this.length-1].time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t);else{const e=this._search(t.time);this._timeline.splice(e+1,0,t)}return this.length>this.memory&&this._timeline.splice(0,this.length-this.memory),this}remove(t){const e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this}get(t,e="time"){const i=this._search(t,e);return-1!==i?this._timeline[i]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){const i=this._search(t,e);return i+1<this._timeline.length?this._timeline[i+1]:null}getBefore(t){const e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];const i=this._search(t);return i-1>=0?this._timeline[i-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(On(this._timeline[e].time,t)){for(let i=e;i>=0&&On(this._timeline[i].time,t);i--)e=i;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&To(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){const e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(0===this._timeline.length)return-1;let i=0;const o=this._timeline.length;let c=o;if(o>0&&this._timeline[o-1][e]<=t)return o-1;for(;i<c;){let u=Math.floor(i+(c-i)/2);const d=this._timeline[u],h=this._timeline[u+1];if(On(d[e],t)){for(let f=u;f<this._timeline.length&&On(this._timeline[f][e],t);f++)u=f;return u}if(dr(d[e],t)&&hr(h[e],t))return u;hr(d[e],t)?c=u:i=u+1}return-1}_iterate(t,e=0,i=this._timeline.length-1){this._timeline.slice(e,i+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){const i=this._search(t);return-1!==i&&this._iterate(e,0,i),this}forEachAfter(t,e){const i=this._search(t);return this._iterate(e,i+1),this}forEachBetween(t,e,i){let o=this._search(t),c=this._search(e);return-1!==o&&-1!==c?(this._timeline[o].time!==t&&(o+=1),this._timeline[c].time===e&&(c-=1),this._iterate(i,o,c)):-1===o&&this._iterate(i,0,c),this}forEachFrom(t,e){let i=this._search(t);for(;i>=0&&this._timeline[i].time>=t;)i--;return this._iterate(e,i+1),this}forEachAtTime(t,e){const i=this._search(t);if(-1!==i&&On(this._timeline[i].time,t)){let o=i;for(let c=i;c>=0&&On(this._timeline[c].time,t);c--)o=c;this._iterate(c=>{e(c)},o,i)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const fr=[];function So(r){fr.push(r)}const pr=[];function mr(r){pr.push(r)}class gr extends kn{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach(o=>{en(this._events)&&(this._events={}),this._events.hasOwnProperty(o)||(this._events[o]=[]),this._events[o].push(e)}),this}once(t,e){const i=(...o)=>{e(...o),this.off(t,i)};return this.on(t,i),this}off(t,e){return t.split(/\W+/).forEach(o=>{if(en(this._events)&&(this._events={}),this._events.hasOwnProperty(t))if(en(e))this._events[t]=[];else{const c=this._events[t];for(let u=c.length-1;u>=0;u--)c[u]===e&&c.splice(u,1)}}),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){const i=this._events[t].slice(0);for(let o=0,c=i.length;o<c;o++)i[o].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach(e=>{const i=Object.getOwnPropertyDescriptor(gr.prototype,e);Object.defineProperty(t.prototype,e,i)})}dispose(){return super.dispose(),this._events=void 0,this}}class Xa extends gr{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class pn extends Xa{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new Dn,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const t=Q(pn.getDefaults(),arguments,["context"]);this._context=t.context?t.context:function Kd(r){return new Qd(r)}({latencyHint:t.latencyHint}),this._ticker=new El(this.emit.bind(this,"tick"),t.clockSource,t.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(t.latencyHint),this.lookAhead=t.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(function Rl(r){fr.forEach(t=>t(r))}(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,i){return this._context.createBuffer(t,e,i)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,i){return this._context.createPeriodicWave(t,e,i)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return ht(Ci(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return ht(Ci(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return ht(Ci(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){ht(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){ht(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){ht(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){ht(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return function Nl(r,t,e){return ht(kt(Al),"This node only works in a secure context (https or localhost)"),new Al(r,t,e)}(this.rawContext,t,e)}addAudioWorkletModule(t,e){return(0,Wt.mG)(this,void 0,void 0,function*(){ht(kt(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(e)||this._workletModules.set(e,this.rawContext.audioWorklet.addModule(t)),yield this._workletModules.get(e)})}workletsAreReady(){return(0,Wt.mG)(this,void 0,void 0,function*(){const t=[];this._workletModules.forEach(e=>t.push(e)),yield Promise.all(t)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get latencyHint(){return this._latencyHint}_setLatencyHint(t){let e=0;if(this._latencyHint=t,Un(t))switch(t){case"interactive":e=.1;break;case"playback":e=.5;break;case"balanced":e=.25}this.lookAhead=e,this.updateInterval=e/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return Ci(this._context)?this._context.resume():Promise.resolve()}close(){return(0,Wt.mG)(this,void 0,void 0,function*(){Ci(this._context)&&(yield this._context.close()),this._initialized&&function Ya(r){pr.forEach(t=>t(r))}(this)})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const e=this._context.createBuffer(1,128,this._context.sampleRate),i=e.getChannelData(0);for(let c=0;c<i.length;c++)i[c]=t;const o=this._context.createBufferSource();return o.channelCount=1,o.channelCountMode="explicit",o.buffer=e,o.loop=!0,o.start(0),this._constants.set(t,o),o}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this}_timeoutLoop(){const t=this.now();let e=this._timeouts.peek();for(;this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()}setTimeout(t,e){this._timeoutIds++;const i=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:i+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(e=>{e.id===t&&this._timeouts.remove(e)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){const i=++this._timeoutIds,o=()=>{const c=this.now();this._timeouts.add({callback:()=>{t(),o()},id:i,time:c+e})};return o(),i}}function le(r,t){dn(t)?t.forEach(e=>le(r,e)):Object.defineProperty(r,t,{enumerable:!0,writable:!1})}function ql(r,t){dn(t)?t.forEach(e=>ql(r,e)):Object.defineProperty(r,t,{writable:!0})}const Qt=()=>{};let ns=(()=>{class r extends kn{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Qt;const e=Q(r.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,e.url&&Fl(e.url)||e.url instanceof r?this.set(e.url):Un(e.url)&&this.load(e.url).catch(e.onerror)}static getDefaults(){return{onerror:Qt,onload:Qt,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:mn().sampleRate}set(e){return e instanceof r?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return(0,Wt.mG)(this,void 0,void 0,function*(){const i=r.load(e).then(o=>{this.set(o),this.onload(this)});r.downloads.push(i);try{yield i}finally{const o=r.downloads.indexOf(i);r.downloads.splice(o,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const i=dn(e)&&e[0].length>0,o=i?e.length:1,c=i?e[0].length:e.length,u=mn(),d=u.createBuffer(o,c,u.sampleRate),h=i||1!==o?e:[e];for(let f=0;f<o;f++)d.copyToChannel(h[f],f);return this._buffer=d,this}toMono(e){if(Ue(e))this.fromArray(this.toArray(e));else{let i=new Float32Array(this.length);const o=this.numberOfChannels;for(let c=0;c<o;c++){const u=this.toArray(c);for(let d=0;d<u.length;d++)i[d]+=u[d]}i=i.map(c=>c/o),this.fromArray(i)}return this}toArray(e){if(Ue(e))return this.getChannelData(e);if(1===this.numberOfChannels)return this.toArray(0);{const i=[];for(let o=0;o<this.numberOfChannels;o++)i[o]=this.getChannelData(o);return i}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,i=this.duration){const o=Math.floor(e*this.sampleRate),c=Math.floor(i*this.sampleRate);ht(o<c,"The start time must be less than the end time");const u=c-o,d=mn().createBuffer(this.numberOfChannels,u,this.sampleRate);for(let h=0;h<this.numberOfChannels;h++)d.copyToChannel(this.getChannelData(h).subarray(o,c),h);return new r(d)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return(new r).fromArray(e)}static fromUrl(e){return(0,Wt.mG)(this,void 0,void 0,function*(){return yield(new r).load(e)})}static load(e){return(0,Wt.mG)(this,void 0,void 0,function*(){const i=e.match(/\[([^\]\[]+\|.+)\]$/);if(i){const h=i[1].split("|");let f=h[0];for(const m of h)if(r.supportsType(m)){f=m;break}e=e.replace(i[0],f)}const o=""===r.baseUrl||r.baseUrl.endsWith("/")?r.baseUrl:r.baseUrl+"/",c=yield fetch(o+e);if(!c.ok)throw new Error(`could not load url: ${e}`);const u=yield c.arrayBuffer();return yield mn().decodeAudioData(u)})}static supportsType(e){const i=e.split("."),o=i[i.length-1];return""!==document.createElement("audio").canPlayType("audio/"+o)}static loaded(){return(0,Wt.mG)(this,void 0,void 0,function*(){for(yield Promise.resolve();r.downloads.length;)yield r.downloads[0]})}}return r.baseUrl="",r.downloads=[],r})();class $a extends pn{constructor(){super({clockSource:"offline",context:fn(arguments[0])?arguments[0]:Jd(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:fn(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=fn(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return(0,Wt.mG)(this,void 0,void 0,function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;const i=Math.floor(this.sampleRate/128);t&&e%i==0&&(yield new Promise(o=>setTimeout(o,1)))}})}render(t=!0){return(0,Wt.mG)(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(t);const e=yield this._context.startRendering();return new ns(e)})}close(){return Promise.resolve()}}const ss=new class Il extends Xa{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,i){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,i){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t,e){return(0,Wt.mG)(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}};let Es=ss;function mn(){return Es===ss&&Dl&&function Ka(r){Es=Ci(r)?new pn(r):fn(r)?new $a(r):r}(new pn),Es}if(ti&&!ti.TONE_SILENCE_LOGGING){console.log(`%c * Tone.js ${"v"}${de} * `,"background: #000; color: #fff")}function ko(r){return Math.pow(2,r/12)}let is=440;function Oo(r){return Math.round(Ve(r))}function Ve(r){return 69+12*Math.log2(r/is)}class tc extends kn{constructor(t,e,i){super(),this.defaultUnits="s",this._val=e,this._units=i,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{const i=parseInt(t,10),o="."===e?1.5:1;return 1===i?this._beatsToUnits(this._getTimeSignature())*o:this._beatsToUnits(4/i)*o},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const e=parseInt(t,10);return this._beatsToUnits(8/(3*Math.floor(e)))},regexp:/^(\d+)t$/i},tr:{method:(t,e,i)=>{let o=0;return t&&"0"!==t&&(o+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(o+=this._beatsToUnits(parseFloat(e))),i&&"0"!==i&&(o+=this._beatsToUnits(parseFloat(i)/4)),o},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof tc&&this.fromType(this._val),en(this._val))return this._noArg();if(Un(this._val)&&en(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(Ds(this._val)){let t=0;for(const e in this._val)if(kt(this._val[e])){const i=this._val[e];t+=new this.constructor(this.context,e).valueOf()*i}return t}if(kt(this._units)){const t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}return Un(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class gn extends tc{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const e=new gn(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){const i=new this.constructor(this.context,t).valueOf(),o=this.valueOf();return o+(Math.round(o/i)*i-o)*e}toNotation(){const t=this.toSeconds(),e=["1m"];for(let c=1;c<9;c++){const u=Math.pow(2,c);e.push(u+"n."),e.push(u+"n"),e.push(u+"t")}e.push("0");let i=e[0],o=new gn(this.context,e[0]).toSeconds();return e.forEach(c=>{const u=new gn(this.context,c).toSeconds();Math.abs(u-t)<Math.abs(o-t)&&(i=c,o=u)}),i}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let e=this.valueOf()/t;e=parseFloat(e.toFixed(4));const i=Math.floor(e/this._getTimeSignature());let o=e%1*4;e=Math.floor(e)%this._getTimeSignature();const c=o.toString();return c.length>3&&(o=parseFloat(parseFloat(c).toFixed(3))),[i,e,o].join(":")}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return Oo(this.toFrequency())}_now(){return this.context.now()}}class nn extends gn{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return function ef(){return is}()}static set A4(t){!function Ja(r){is=r}(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return"midi"===this.defaultUnits?t:nn.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(t,e){const o=sf[t.toLowerCase()]+12*(parseInt(e,10)+1);return"midi"===this.defaultUnits?o:nn.mtof(o)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,i){let o=1;return t&&"0"!==t&&(o*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(o*=this._beatsToUnits(parseFloat(e))),i&&"0"!==i&&(o*=this._beatsToUnits(parseFloat(i)/4)),o}}})}transpose(t){return new nn(this.context,this.valueOf()*ko(t))}harmonize(t){return t.map(e=>this.transpose(e))}toMidi(){return Oo(this.valueOf())}toNote(){const t=this.toFrequency(),e=Math.log2(t/nn.A4);let i=Math.round(12*e)+57;const o=Math.floor(i/12);return o<0&&(i+=-12*o),rf[i%12]+o.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return function nf(r){return is*Math.pow(2,(r-69)/12)}(t)}static ftom(t){return Oo(t)}}const sf={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},rf=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class $e extends gn{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Fe extends kn{constructor(){super();const t=Q(Fe.getDefaults(),arguments,["context"]);this.context=this.defaultContext?this.defaultContext:t.context}static getDefaults(){return{context:mn()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return new gn(this.context,t).toSeconds()}toFrequency(t){return new nn(this.context,t).toFrequency()}toTicks(t){return new $e(this.context,t).toTicks()}_getPartialProperties(t){const e=this.get();return Object.keys(e).forEach(i=>{en(t[i])&&delete e[i]}),e}get(){const t=function tf(r){return r.constructor.getDefaults()}(this);return Object.keys(t).forEach(e=>{if(Reflect.has(this,e)){const i=this[e];kt(i)&&kt(i.value)&&kt(i.setValueAtTime)?t[e]=i.value:i instanceof Fe?t[e]=i._getPartialProperties(t[e]):dn(i)||Ue(i)||Un(i)||fs(i)?t[e]=i:delete t[e]}}),t}set(t){return Object.keys(t).forEach(e=>{Reflect.has(this,e)&&kt(this[e])&&(this[e]&&kt(this[e].value)&&kt(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof Fe?this[e].set(t[e]):this[e]=t[e])}),this}}class vr extends Dn{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const e=this.get(t);return null!==e?e.state:this._initial}setStateAtTime(t,e,i){return Xe(e,0),this.add(Object.assign({},i,{state:t,time:e})),this}getLastState(t,e){for(let o=this._search(e);o>=0;o--){const c=this._timeline[o];if(c.state===t)return c}}getNextState(t,e){const i=this._search(e);if(-1!==i)for(let o=i;o<this._timeline.length;o++){const c=this._timeline[o];if(c.state===t)return c}}}class te extends Fe{constructor(){super(Q(te.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const t=Q(te.getDefaults(),arguments,["param","units","convert"]);for(ht(kt(t.param)&&(Ns(t.param)||t.param instanceof te),"param must be an AudioParam");!Ns(t.param);)t.param=t.param._param;this._swappable=!!kt(t.swappable)&&t.swappable,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new Dn(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,kt(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Fe.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return kt(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return kt(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return kt(this.maxValue)&&kt(this.minValue)&&Xe(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?function ft(r){return Math.pow(10,r/20)}(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&"decibels"===this.units?function Co(r){return Math.log(r)/Math.LN10*20}(t):t}setValueAtTime(t,e){const i=this.toSeconds(e),o=this._fromType(t);return ht(isFinite(o)&&isFinite(i),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(o),this.log(this.units,"setValueAtTime",t,i),this._events.add({time:i,type:"setValueAtTime",value:o}),this._param.setValueAtTime(o,i),this}getValueAtTime(t){const e=Math.max(this.toSeconds(t),0),i=this._events.getAfter(e),o=this._events.get(e);let c=this._initialValue;if(null===o)c=this._initialValue;else if("setTargetAtTime"!==o.type||null!==i&&"setValueAtTime"!==i.type)if(null===i)c=o.value;else if("linearRampToValueAtTime"===i.type||"exponentialRampToValueAtTime"===i.type){let u=o.value;if("setTargetAtTime"===o.type){const d=this._events.getBefore(o.time);u=null===d?this._initialValue:d.value}c="linearRampToValueAtTime"===i.type?this._linearInterpolate(o.time,u,i.time,i.value,e):this._exponentialInterpolate(o.time,u,i.time,i.value,e)}else c=o.value;else{const u=this._events.getBefore(o.time);let d;d=null===u?this._initialValue:u.value,"setTargetAtTime"===o.type&&(c=this._exponentialApproach(o.time,d,o.value,o.constant,e))}return this._toType(c)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){const i=this._fromType(t),o=this.toSeconds(e);return ht(isFinite(i)&&isFinite(o),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(i),this._events.add({time:o,type:"linearRampToValueAtTime",value:i}),this.log(this.units,"linearRampToValueAtTime",t,o),this._param.linearRampToValueAtTime(i,o),this}exponentialRampToValueAtTime(t,e){let i=this._fromType(t);i=On(i,0)?this._minOutput:i,this._assertRange(i);const o=this.toSeconds(e);return ht(isFinite(i)&&isFinite(o),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:o,type:"exponentialRampToValueAtTime",value:i}),this.log(this.units,"exponentialRampToValueAtTime",t,o),this._param.exponentialRampToValueAtTime(i,o),this}exponentialRampTo(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialRampToValueAtTime(t,i+this.toSeconds(e)),this}linearRampTo(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.linearRampToValueAtTime(t,i+this.toSeconds(e)),this}targetRampTo(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialApproachValueAtTime(t,i,e),this}exponentialApproachValueAtTime(t,e,i){e=this.toSeconds(e),i=this.toSeconds(i);const o=Math.log(i+1)/Math.log(200);return this.setTargetAtTime(t,e,o),this.cancelAndHoldAtTime(e+.9*i),this.linearRampToValueAtTime(t,e+i),this}setTargetAtTime(t,e,i){const o=this._fromType(t);ht(isFinite(i)&&i>0,"timeConstant must be a number greater than 0");const c=this.toSeconds(e);return this._assertRange(o),ht(isFinite(o)&&isFinite(c),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:i,time:c,type:"setTargetAtTime",value:o}),this.log(this.units,"setTargetAtTime",t,c,i),this._param.setTargetAtTime(o,c,i),this}setValueCurveAtTime(t,e,i,o=1){i=this.toSeconds(i),e=this.toSeconds(e);const c=this._fromType(t[0])*o;this.setValueAtTime(this._toType(c),e);const u=i/(t.length-1);for(let d=1;d<t.length;d++){const h=this._fromType(t[d])*o;this.linearRampToValueAtTime(this._toType(h),e+d*u)}return this}cancelScheduledValues(t){const e=this.toSeconds(t);return ht(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){const e=this.toSeconds(t),i=this._fromType(this.getValueAtTime(e));ht(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+i);const o=this._events.get(e),c=this._events.getAfter(e);return o&&On(o.time,e)?c?(this._param.cancelScheduledValues(c.time),this._events.cancel(c.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):c&&(this._param.cancelScheduledValues(c.time),this._events.cancel(c.time),"linearRampToValueAtTime"===c.type?this.linearRampToValueAtTime(this._toType(i),e):"exponentialRampToValueAtTime"===c.type&&this.exponentialRampToValueAtTime(this._toType(i),e)),this._events.add({time:e,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,e),this}rampTo(t,e=.1,i){return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,i):this.linearRampTo(t,e,i),this}apply(t){const e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);const i=this._events.get(e);if(i&&"setTargetAtTime"===i.type){const o=this._events.getAfter(i.time),c=o?o.time:e+2,u=(c-e)/10;for(let d=e;d<c;d+=u)t.linearRampToValueAtTime(this.getValueAtTime(d),d)}return this._events.forEachAfter(this.context.currentTime,o=>{"cancelScheduledValues"===o.type?t.cancelScheduledValues(o.time):"setTargetAtTime"===o.type?t.setTargetAtTime(o.value,o.time,o.constant):t[o.type](o.value,o.time)}),this}setParam(t){ht(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,i,o,c){return i+(e-i)*Math.exp(-(c-t)/o)}_linearInterpolate(t,e,i,o,c){return e+(c-t)/(i-t)*(o-e)}_exponentialInterpolate(t,e,i,o,c){return e*Math.pow(o/e,(c-t)/(i-t))}}class Mt extends Fe{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return kt(this.input)?Ns(this.input)||this.input instanceof te?1:this.input.numberOfInputs:0}get numberOfOutputs(){return kt(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return kt(t)&&(t instanceof Mt||me(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(i=>{i.channelCount=t.channelCount,i.channelCountMode=t.channelCountMode,i.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){const t=this._getInternalNodes();ht(t.length>0,"ToneAudioNode does not have any internal nodes");const e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,i=0){return rs(this,t,e,i),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return xo("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,i=0){return function Pl(r,t,e=0,i=0){if(kt(t))for(;t instanceof Mt;)t=t.input;for(;!me(r);)kt(r.output)&&(r=r.output);Ns(t)?r.disconnect(t,e):me(t)?r.disconnect(t,e,i):r.disconnect()}(this,t,e,i),this}chain(...t){return ec(this,...t),this}fan(...t){return t.forEach(e=>this.connect(e)),this}dispose(){return super.dispose(),kt(this.input)&&(this.input instanceof Mt?this.input.dispose():me(this.input)&&this.input.disconnect()),kt(this.output)&&(this.output instanceof Mt?this.output.dispose():me(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function ec(...r){const t=r.shift();r.reduce((e,i)=>(e instanceof Mt?e.connect(i):me(e)&&rs(e,i),i),t)}function rs(r,t,e=0,i=0){for(ht(kt(r),"Cannot connect from undefined node"),ht(kt(t),"Cannot connect to undefined node"),(t instanceof Mt||me(t))&&ht(t.numberOfInputs>0,"Cannot connect to node with no inputs"),ht(r.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof Mt||t instanceof te;)kt(t.input)&&(t=t.input);for(;r instanceof Mt;)kt(r.output)&&(r=r.output);Ns(t)?r.connect(t,e):r.connect(t,e,i)}class ze extends Mt{constructor(){super(Q(ze.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const t=Q(ze.getDefaults(),arguments,["gain","units"]);this.gain=new te({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),le(this,"gain")}static getDefaults(){return Object.assign(Mt.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class ki extends Mt{constructor(t){super(t),this.onended=Qt,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new ze({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(e){const i=this.toSeconds(e);return-1!==this._startTime&&i>=this._startTime&&(-1===this._stopTime||i<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(Mt.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Qt})}_startGain(t,e=1){ht(-1===this._startTime,"Source cannot be started more than once");const i=this.toSeconds(this._fadeIn);return this._startTime=t+i,this._startTime=Math.max(this._startTime,this.context.currentTime),i>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+i):this._gainNode.gain.exponentialApproachValueAtTime(e,t,i)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){ht(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();const e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.context.currentTime),e>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const i="exponential"===this._curve?2*e:0;this._stopSource(this.now()+i),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Qt&&(this.onended(this),this.onended=Qt,!this.context.isOffline)){const t=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(t):setTimeout(t,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),ht(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class Do extends ki{constructor(){super(Q(Do.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const t=Q(Do.getDefaults(),arguments,["offset"]);rs(this._source,this._gainNode),this.offset=new te({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(ki.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Se extends Mt{constructor(){super(Q(Se.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const t=Q(Se.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Do({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(Mt.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,i=0){return nc(this,t,e,i),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,i){return this._param.exponentialRampTo(t,e,i),this}linearRampTo(t,e,i){return this._param.linearRampTo(t,e,i),this}targetRampTo(t,e,i){return this._param.targetRampTo(t,e,i),this}exponentialApproachValueAtTime(t,e,i){return this._param.exponentialApproachValueAtTime(t,e,i),this}setTargetAtTime(t,e,i){return this._param.setTargetAtTime(t,e,i),this}setValueCurveAtTime(t,e,i,o){return this._param.setValueCurveAtTime(t,e,i,o),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,i){return this._param.rampTo(t,e,i),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function nc(r,t,e,i){(t instanceof te||Ns(t)||t instanceof Se&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof Se&&(t.overridden=!0)),rs(r,t,e,i)}class yr extends te{constructor(){super(Q(yr.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Dn(1/0),this._multiplier=1;const t=Q(yr.getDefaults(),arguments,["value"]);this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(te.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,i){e=this.toSeconds(e),this.setRampPoint(e);const o=this._fromType(t),c=this._events.get(e),u=Math.round(Math.max(1/i,1));for(let d=0;d<=u;d++){const h=i*d+e,f=this._exponentialApproach(c.time,c.value,o,i,h);this.linearRampToValueAtTime(this._toType(f),h)}return this}setValueAtTime(t,e){const i=this.toSeconds(e);super.setValueAtTime(t,e);const o=this._events.get(i),c=this._events.previousEvent(o),u=this._getTicksUntilEvent(c,i);return o.ticks=Math.max(u,0),this}linearRampToValueAtTime(t,e){const i=this.toSeconds(e);super.linearRampToValueAtTime(t,e);const o=this._events.get(i),c=this._events.previousEvent(o),u=this._getTicksUntilEvent(c,i);return o.ticks=Math.max(u,0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);const i=this._fromType(t),o=this._events.get(e),c=Math.round(Math.max(10*(e-o.time),1)),u=(e-o.time)/c;for(let d=0;d<=c;d++){const h=u*d+o.time,f=this._exponentialInterpolate(o.time,o.value,e,i,h);this.linearRampToValueAtTime(this._toType(f),h)}return this}_getTicksUntilEvent(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(en(t.ticks)){const u=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(u,t.time)}const i=this._fromType(this.getValueAtTime(t.time));let o=this._fromType(this.getValueAtTime(e));const c=this._events.get(e);return c&&c.time===e&&"setValueAtTime"===c.type&&(o=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(i+o)+t.ticks}getTicksAtTime(t){const e=this.toSeconds(t),i=this._events.get(e);return Math.max(this._getTicksUntilEvent(i,e),0)}getDurationOfTicks(t,e){const i=this.toSeconds(e),o=this.getTicksAtTime(e);return this.getTimeOfTick(o+t)-i}getTimeOfTick(t){const e=this._events.get(t,"ticks"),i=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&i&&"linearRampToValueAtTime"===i.type&&e.value!==i.value){const o=this._fromType(this.getValueAtTime(e.time)),u=(this._fromType(this.getValueAtTime(i.time))-o)/(i.time-e.time),d=Math.sqrt(Math.pow(o,2)-2*u*(e.ticks-t)),h=(-o+d)/u;return(h>0?h:(-o-d)/u)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){const i=this.toSeconds(e),o=this.toSeconds(t),c=this.getTicksAtTime(i);return this.getTicksAtTime(i+o)-c}_fromType(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class xr extends Se{constructor(){super(Q(xr.getDefaults(),arguments,["value"])),this.name="TickSignal";const t=Q(xr.getDefaults(),arguments,["value"]);this.input=this._param=new yr({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(Se.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class No extends Fe{constructor(){super(Q(No.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new vr,this._tickOffset=new Dn;const t=Q(No.getDefaults(),arguments,["frequency"]);this.frequency=new xr({context:this.context,units:t.units,value:t.frequency}),le(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Fe.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){const i=this.toSeconds(t);return"started"!==this._state.getValueAtTime(i)&&(this._state.setStateAtTime("started",i),kt(e)&&this.setTicksAtTime(e,i)),this}stop(t){const e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){const i=this._state.get(e);i&&i.time>0&&(this._tickOffset.cancel(i.time),this._state.cancel(i.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&this._state.setStateAtTime("paused",e),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this}getTicksAtTime(t){const e=this.toSeconds(t),i=this._state.getLastState("stopped",e),o={state:"paused",time:e};this._state.add(o);let c=i,u=0;return this._state.forEachBetween(i.time,e+this.sampleTime,d=>{let h=c.time;const f=this._tickOffset.get(d.time);f&&f.time>=c.time&&(u=f.ticks,h=f.time),"started"===c.state&&"started"!==d.state&&(u+=this.frequency.getTicksAtTime(d.time)-this.frequency.getTicksAtTime(h)),c=d}),this._state.remove(o),u}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const e=this.now(),i=this.frequency.timeToTicks(t,e);this.setTicksAtTime(i,e)}getSecondsAtTime(t){t=this.toSeconds(t);const e=this._state.getLastState("stopped",t),i={state:"paused",time:t};this._state.add(i);let o=e,c=0;return this._state.forEachBetween(e.time,t+this.sampleTime,u=>{let d=o.time;const h=this._tickOffset.get(u.time);h&&h.time>=o.time&&(c=h.seconds,d=h.time),"started"===o.state&&"started"!==u.state&&(c+=u.time-d),o=u}),this._state.remove(i),c}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){const i=this._tickOffset.get(e),o=this._state.get(e),c=Math.max(i.time,o.time),u=this.frequency.getTicksAtTime(c)+t-i.ticks;return this.frequency.getTimeOfTick(u)}forEachTickBetween(t,e,i){let o=this._state.get(t);this._state.forEachBetween(t,e,u=>{o&&"started"===o.state&&"started"!==u.state&&this.forEachTickBetween(Math.max(o.time,t),u.time-this.sampleTime,i),o=u});let c=null;if(o&&"started"===o.state){const u=Math.max(o.time,t),d=this.frequency.getTicksAtTime(u),f=d-this.frequency.getTicksAtTime(o.time);let m=Math.ceil(f)-f;m=On(m,1)?0:m;let _=this.frequency.getTimeOfTick(d+m);for(;_<e;){try{i(_,Math.round(this.getTicksAtTime(_)))}catch(y){c=y;break}_+=this.frequency.getDurationOfTicks(1,_)}}if(c)throw c;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class ni extends Fe{constructor(){super(Q(ni.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=Qt,this._lastUpdate=0,this._state=new vr("stopped"),this._boundLoop=this._loop.bind(this);const t=Q(ni.getDefaults(),arguments,["callback","frequency"]);this.callback=t.callback,this._tickSource=new No({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,le(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Fe.getDefaults(),{callback:Qt,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){vo(this.context);const i=this.toSeconds(t);return this.log("start",i),"started"!==this._state.getValueAtTime(i)&&(this._state.setStateAtTime("started",i),this._tickSource.start(i,e),i<this._lastUpdate&&this.emit("start",i,e)),this}stop(t){const e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){const i=this.toSeconds(e),o=this.getTicksAtTime(i);return this._tickSource.getTimeOfTick(o+t,i)}_loop(){const t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,i=>{switch(i.state){case"started":const o=this._tickSource.getTicksAtTime(i.time);this.emit("start",i.time,o);break;case"stopped":0!==i.time&&this.emit("stop",i.time);break;case"paused":this.emit("pause",i.time)}}),this._tickSource.forEachTickBetween(t,e,(i,o)=>{this.callback(i,o)}))}getStateAtTime(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}gr.mixin(ni);class wr extends kn{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=Q(wr.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(e=>{this._loadingCount++,this.add(e,t.urls[e],this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Qt,onload:Qt,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return ht(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,0===this._loadingCount&&t&&t()}get loaded(){return Array.from(this._buffers).every(([t,e])=>e.loaded)}add(t,e,i=Qt,o=Qt){return Un(e)?this._buffers.set(t.toString(),new ns(this.baseUrl+e,i,o)):this._buffers.set(t.toString(),new ns(e,i,o)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}}class ee extends $e{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class os extends Fe{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Dn,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=t;){const e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}So(r=>{r.draw=new os({context:r})}),mr(r=>{r.draw.dispose()});class si extends kn{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){ht(kt(t.time),"Events must have a time property"),ht(kt(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new cf(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(null!==this._root){const e=[];this._root.search(t.time,e);for(const i of e)if(i.event===t){this._removeNode(i),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,e=>this.remove(e)),this}_setRoot(t){this._root=t,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{let i,o=null;if(t.getBalance()>0)if(null===t.left.right)i=t.left,i.right=t.right,o=i;else{for(i=t.left.right;null!==i.right;)i=i.right;i.parent&&(i.parent.right=i.left,o=i.parent,i.left=t.left,i.right=t.right)}else if(null===t.right.left)i=t.right,i.left=t.left,o=i;else{for(i=t.right.left;null!==i.left;)i=i.left;i.parent&&(i.parent.left=i.right,o=i.parent,i.left=t.left,i.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=i:t.parent.right=i:this._setRoot(i),o&&this._rebalance(o)}t.dispose()}_rotateLeft(t){const e=t.parent,i=t.isLeftChild(),o=t.right;o&&(t.right=o.left,o.left=t),null!==e?i?e.left=o:e.right=o:this._setRoot(o)}_rotateRight(t){const e=t.parent,i=t.isLeftChild(),o=t.left;o&&(t.left=o.right,o.right=t),null!==e?i?e.left=o:e.right=o:this._setRoot(o)}_rebalance(t){const e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(null!==this._root){const e=[];if(this._root.search(t,e),e.length>0){let i=e[0];for(let o=1;o<e.length;o++)e[o].low>i.low&&(i=e[o]);return i.event}}return null}forEach(t){if(null!==this._root){const e=[];this._root.traverse(i=>e.push(i)),e.forEach(i=>{i.event&&t(i.event)})}return this}forEachAtTime(t,e){if(null!==this._root){const i=[];this._root.search(t,i),i.forEach(o=>{o.event&&e(o.event)})}return this}forEachFrom(t,e){if(null!==this._root){const i=[];this._root.searchAfter(t,i),i.forEach(o=>{o.event&&e(o.event)})}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse(t=>t.dispose()),this._root=null,this}}class cf{constructor(t,e,i){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=i,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),!(this.low>t)&&null!==this.right&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)}traverse(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)}updateHeight(){this.height=null!==this.left&&null!==this.right?Math.max(this.left.height,this.right.height)+1:null!==this.right?this.right.height+1:null!==this.left?this.left.height+1:0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Fs extends Mt{constructor(){super(Q(Fs.getDefaults(),arguments,["volume"])),this.name="Volume";const t=Q(Fs.getDefaults(),arguments,["volume"]);this.input=this.output=new ze({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,le(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(Mt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Ro extends Mt{constructor(){super(Q(Ro.getDefaults(),arguments)),this.name="Destination",this.input=new Fs({context:this.context}),this.output=new ze({context:this.context}),this.volume=this.input.volume;const t=Q(Ro.getDefaults(),arguments);ec(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(Mt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),ec(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}So(r=>{r.destination=new Ro({context:r})}),mr(r=>{r.destination.dispose()});class uf extends kn{constructor(t){super(),this.name="TimelineValue",this._timeline=new Dn({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){const e=this._timeline.get(t);return e?e.value:this._initialValue}}let Io=(()=>{class r{constructor(e,i){this.id=r._eventId++;const o=Object.assign(r.getDefaults(),i);this.transport=e,this.callback=o.callback,this._once=o.once,this.time=o.time}static getDefaults(){return{callback:Qt,once:!1,time:0}}invoke(e){this.callback&&(this.callback(e),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}return r._eventId=0,r})();class sc extends Io{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const i=Object.assign(sc.getDefaults(),e);this.duration=new ee(t.context,i.duration).valueOf(),this._interval=new ee(t.context,i.interval).valueOf(),this._nextTick=i.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Io.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvents(t){const e=this.transport.getTicksAtTime(t);e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new ee(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const e=this.transport.getTicksAtTime(t);e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new ee(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new ee(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class Tr extends Fe{constructor(){super(Q(Tr.getDefaults(),arguments)),this.name="Transport",this._loop=new uf(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Dn,this._repeatedEvents=new si,this._syncedSignals=[],this._swingAmount=0;const t=Q(Tr.getDefaults(),arguments);this._ppq=t.ppq,this._clock=new ni({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),le(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(Fe.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!=0&&e%(2*this._swingTicks)!=0){const o=Math.sin(e%(2*this._swingTicks)/(2*this._swingTicks)*Math.PI)*this._swingAmount;t+=new ee(this.context,2*this._swingTicks/3).toSeconds()*o}this._timeline.forEachAtTime(e,i=>i.invoke(t))}schedule(t,e){const i=new Io(this,{callback:t,time:new $e(this.context,e).toTicks()});return this._addEvent(i,this._timeline)}scheduleRepeat(t,e,i,o=1/0){const c=new sc(this,{callback:t,duration:new gn(this.context,o).toTicks(),interval:new gn(this.context,e).toTicks(),time:new $e(this.context,i).toTicks()});return this._addEvent(c,this._repeatedEvents)}scheduleOnce(t,e){const i=new Io(this,{callback:t,once:!0,time:new $e(this.context,e).toTicks()});return this._addEvent(i,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){const e=this.toTicks(t);return this._timeline.forEachFrom(e,i=>this.clear(i.id)),this._repeatedEvents.forEachFrom(e,i=>this.clear(i.id)),this}_bindClockEvents(){this._clock.on("start",(t,e)=>{e=new ee(this.context,e).toSeconds(),this.emit("start",t,e)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){let i;return kt(e)&&(i=this.toTicks(e)),this._clock.start(t,i),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){dn(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new gn(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new gn(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new ee(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),e=this._clock.getTicksAtTime(t);return new ee(this.context,e).toBarsBeatsSixteenths()}set position(t){const e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){const e=this.now(),i=this._clock.frequency.timeToTicks(t,e);this.ticks=i}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const e=this.now();if("started"===this.state){const i=this._clock.getTicksAtTime(e),c=e+this._clock.frequency.getDurationOfTicks(Math.ceil(i)-i,e);this.emit("stop",c),this._clock.setTicksAtTime(t,c),this.emit("start",c,this._clock.getSecondsAtTime(c))}else this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return Math.round(this._clock.getTicksAtTime(t))}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),"started"!==this.state)return 0;{const e=this.now(),i=this.getTicksAtTime(e);return this._clock.nextTickTime(t-i%t,e)}}syncSignal(t,e){if(!e){const o=this.now();if(0!==t.getValueAtTime(o)){const u=1/(60/this.bpm.getValueAtTime(o)/this.PPQ);e=t.getValueAtTime(o)/u}else e=0}const i=new ze(e);return this.bpm.connect(i),i.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:i,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){const i=this._syncedSignals[e];i.signal===t&&(i.ratio.dispose(),i.signal.value=i.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),ql(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}gr.mixin(Tr),So(r=>{r.transport=new Tr({context:r})}),mr(r=>{r.transport.dispose()});class _n extends Mt{constructor(t){super(t),this.input=void 0,this._state=new vr("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Qt,this._syncedStop=Qt,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Fs({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,le(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(Mt.getDefaults(),{mute:!1,onstop:Qt,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,i){let o=en(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(o=this._clampToCurrentTime(o),this._synced||"started"!==this._state.getValueAtTime(o))if(this.log("start",o),this._state.setStateAtTime("started",o),this._synced){const c=this._state.get(o);c&&(c.offset=this.toSeconds(jn(e,0)),c.duration=i?this.toSeconds(i):void 0);const u=this.context.transport.schedule(d=>{this._start(d,e,i)},o);this._scheduled.push(u),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>o&&this._syncedStart(this.now(),this.context.transport.seconds)}else vo(this.context),this._start(o,e,i);else ht(hr(o,this._state.get(o).time),"Start time must be strictly greater than previous start time"),this._state.cancel(o),this._state.setStateAtTime("started",o),this.log("restart",o),this.restart(o,e,i);return this}stop(t){let e=en(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),"started"===this._state.getValueAtTime(e)||kt(this._state.getNextState("started",e))){if(this.log("stop",e),this._synced){const i=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(i)}else this._stop(e);this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,i){return t=this.toSeconds(t),"started"===this._state.getValueAtTime(t)&&(this._state.cancel(t),this._restart(t,e,i)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(e>0){const i=this._state.get(e);if(i&&"started"===i.state&&i.time!==e){const o=e-this.toSeconds(i.time);let c;i.duration&&(c=this.toSeconds(i.duration)-o),this._start(t,this.toSeconds(i.offset)+o,c)}}},this._syncedStop=t=>{const e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));"started"===this._state.getValueAtTime(e)&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Qt,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class br extends ki{constructor(){super(Q(br.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const t=Q(br.getDefaults(),arguments,["url","onload"]);rs(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new te({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new ns(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(ki.getDefaults(),{url:new ns,loop:!1,loopEnd:0,loopStart:0,onload:Qt,onerror:Qt,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,i,o=1){ht(this.buffer.loaded,"buffer is either not set or not loaded");const c=this.toSeconds(t);this._startGain(c,o),e=jn(e,this.loop?this.loopStart:0);let u=Math.max(this.toSeconds(e),0);if(this.loop){const d=this.toSeconds(this.loopEnd)||this.buffer.duration,h=this.toSeconds(this.loopStart),f=d-h;To(u,d)&&(u=(u-h)%f+h),On(u,this.buffer.duration)&&(u=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,dr(u,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(c,u)),kt(i)){let d=this.toSeconds(i);d=Math.max(d,0),this.stop(c+d)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function Ms(r,t){return(0,Wt.mG)(this,void 0,void 0,function*(){const e=t/r.context.sampleRate,i=new $a(1,e,r.context.sampleRate);return new r.constructor(Object.assign(r.get(),{frequency:2/e,detune:0,context:i})).toDestination().start(0),(yield i.render()).getChannelData(0)})}class qo extends ki{constructor(){super(Q(qo.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const t=Q(qo.getDefaults(),arguments,["frequency","type"]);rs(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new te({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new te({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),le(this,["frequency","detune"])}static getDefaults(){return Object.assign(ki.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}let Nn=(()=>{class r extends _n{constructor(){super(Q(r.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=Q(r.getDefaults(),arguments,["frequency","type"]);this.frequency=new Se({context:this.context,units:"frequency",value:e.frequency}),le(this,"frequency"),this.detune=new Se({context:this.context,units:"cents",value:e.detune}),le(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&"custom"!==e.type&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(_n.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const i=this.toSeconds(e),o=new qo({context:this.context,onended:()=>this.onstop(this)});this._oscillator=o,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(i)}_stop(e){const i=this.toSeconds(e);this._oscillator&&this._oscillator.stop(i)}_restart(e){const i=this.toSeconds(e);return this.log("restart",i),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(i),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type)return r._periodicWaveCache.find(i=>i.phase===this._phase&&function Ml(r,t){return r.length===t.length&&r.every((e,i)=>t[i]===e)}(i.partials,this._partials));{const e=r._periodicWaveCache.find(i=>i.type===this._type&&i.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const i=-1!==["sine","square","sawtooth","triangle"].indexOf(e);if(0===this._phase&&i)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=e);else{const o=this._getCachedPeriodicWave();if(kt(o)){const{partials:c,wave:u}=o;this._wave=u,this._partials=c,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{const[c,u]=this._getRealImaginary(e,this._phase),d=this.context.createPeriodicWave(c,u);this._wave=d,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),r._periodicWaveCache.push({imag:u,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:c,type:this._type,wave:this._wave}),r._periodicWaveCache.length>100&&r._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.type=this.partialCount&&"custom"!==this._type&&"custom"!==e?e+this.partialCount:e}get partialCount(){return this._partialCount}set partialCount(e){Xe(e,0);let i=this._type;const o=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(o&&(i=o[1]),"custom"!==this._type)this.type=0===e?i:i+e.toString();else{const c=new Float32Array(e);this._partials.forEach((u,d)=>c[d]=u),this._partials=Array.from(c),this.type=this._type}}_getRealImaginary(e,i){let c=2048;const u=new Float32Array(c),d=new Float32Array(c);let h=1;if("custom"===e){if(h=this._partials.length+1,this._partialCount=this._partials.length,c=h,0===this._partials.length)return[u,d]}else{const f=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);f?(h=parseInt(f[2],10)+1,this._partialCount=parseInt(f[2],10),e=f[1],h=Math.max(h,2),c=h):this._partialCount=0,this._partials=[]}for(let f=1;f<c;++f){const m=2/(f*Math.PI);let _;switch(e){case"sine":_=f<=h?1:0,this._partials[f-1]=_;break;case"square":_=1&f?2*m:0,this._partials[f-1]=_;break;case"sawtooth":_=m*(1&f?1:-1),this._partials[f-1]=_;break;case"triangle":_=1&f?m*m*2*(f-1>>1&1?-1:1):0,this._partials[f-1]=_;break;case"custom":_=this._partials[f-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}0!==_?(u[f]=-_*Math.sin(i*f),d[f]=_*Math.cos(i*f)):(u[f]=0,d[f]=0)}return[u,d]}_inverseFFT(e,i,o){let c=0;const u=e.length;for(let d=0;d<u;d++)c+=e[d]*Math.cos(d*o)+i[d]*Math.sin(d*o);return c}getInitialValue(){const[e,i]=this._getRealImaginary(this._type,0);let o=0;const c=2*Math.PI;for(let d=0;d<32;d++)o=Math.max(this._inverseFFT(e,i,d/32*c),o);return function bo(r,t,e){return Math.max(Math.min(r,e),t)}(-this._inverseFFT(e,i,this._phase)/o,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return(0,Wt.mG)(this,void 0,void 0,function*(){return Ms(this,e)})}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}return r._periodicWaveCache=[],r})();class Po extends Mt{constructor(){super(Object.assign(Q(Po.getDefaults(),arguments,["context"])))}connect(t,e=0,i=0){return nc(this,t,e,i),this}}class Ni extends Po{constructor(){super(Object.assign(Q(Ni.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const t=Q(Ni.getDefaults(),arguments,["mapping","length"]);dn(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):function Qa(r){return"function"==typeof r}(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(Se.getDefaults(),{length:1024})}setMap(t,e=1024){const i=new Float32Array(e);for(let o=0,c=e;o<c;o++)i[o]=t(o/(c-1)*2-1,o);return this.curve=i,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){ht(["none","2x","4x"].some(i=>i.includes(t)),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class lf extends Po{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Ni({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class ii extends Se{constructor(){super(Object.assign(Q(ii.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const t=Q(ii.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new ze({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Se.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Sr extends _n{constructor(){super(Q(Sr.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new lf({context:this.context}),this._modulationNode=new ze({context:this.context});const t=Q(Sr.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Nn({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Nn({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new ii({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),le(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Nn.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return(0,Wt.mG)(this,void 0,void 0,function*(){return Ms(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Ar extends _n{constructor(){super(Q(Ar.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new ze({context:this.context,gain:0});const t=Q(Ar.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Nn({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new Se({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new Nn({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new ii({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new ii({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),le(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Nn.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return(0,Wt.mG)(this,void 0,void 0,function*(){return Ms(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Ei extends _n{constructor(){super(Q(Ei.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new ze({context:this.context,gain:0}),this._thresh=new Ni({context:this.context,mapping:e=>e<=0?-1:1});const t=Q(Ei.getDefaults(),arguments,["frequency","width"]);this.width=new Se({context:this.context,units:"audioRange",value:t.width}),this._triangle=new Nn({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),le(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(_n.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(t=1024){return(0,Wt.mG)(this,void 0,void 0,function*(){return Ms(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Cr extends _n{constructor(){super(Q(Cr.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const t=Q(Cr.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new Se({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Se({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,le(this,["frequency","detune"])}static getDefaults(){return Object.assign(Nn.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(e=>e.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(e=>e.stop(t))}_restart(t){this._forEach(e=>e.restart(t))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach(e=>e.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const e=-t/2,i=t/(this._oscillators.length-1);this._forEach((o,c)=>o.detune.value=e+i*c)}}get count(){return this._oscillators.length}set count(t){if(Xe(t,1),this._oscillators.length!==t){this._forEach(e=>e.dispose()),this._oscillators=[];for(let e=0;e<t;e++){const i=new Nn({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:0===e?()=>this.onstop(this):Qt});"custom"===this.type&&(i.partials=this._partials),this.frequency.connect(i.frequency),this.detune.connect(i.detune),i.detune.overridden=!1,i.connect(this.output),this._oscillators[e]=i}this.spread=this._spread,"started"===this.state&&this._forEach(e=>e.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((e,i)=>e.phase=this._phase+i/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(e=>e.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(e=>e.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(e=>e.partialCount=t),this._type=this._oscillators[0].type}asArray(t=1024){return(0,Wt.mG)(this,void 0,void 0,function*(){return Ms(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}class je extends _n{constructor(){super(Q(je.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new ii({context:this.context,value:2});const t=Q(je.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new Ei({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Nn({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),le(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(_n.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(t=1024){return(0,Wt.mG)(this,void 0,void 0,function*(){return Ms(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Ll={am:Sr,fat:Cr,fm:Ar,oscillator:Nn,pulse:Ei,pwm:je};class kr extends _n{constructor(){super(Q(kr.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const t=Q(kr.getDefaults(),arguments,["frequency","type"]);this.frequency=new Se({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Se({context:this.context,units:"cents",value:t.detune}),le(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(Nn.getDefaults(),Ar.getDefaults(),Sr.getDefaults(),Cr.getDefaults(),Ei.getDefaults(),je.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(e=>this._sourceType===e)&&(t=this._sourceType),t+this._oscillator.type}set type(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const e=Ll[t],i=this.now();if(this._oscillator){const o=this._oscillator;o.stop(i),this.context.setTimeout(()=>o.dispose(),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(i)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")}_getOscType(t,e){return t instanceof Ll[e]}get baseType(){return this._oscillator.baseType}set baseType(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&"pulse"!==t&&"pwm"!==t&&(this._oscillator.baseType=t)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(t){this._getOscType(this._oscillator,"fat")&&Ue(t)&&(this._oscillator.count=t)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(t){this._getOscType(this._oscillator,"fat")&&Ue(t)&&(this._oscillator.spread=t)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Un(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(t=1024){return(0,Wt.mG)(this,void 0,void 0,function*(){return Ms(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function Bl(r,t=1/0){const e=new WeakMap;return function(i,o){Reflect.defineProperty(i,o,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(c){Xe(c,r,t),e.set(this,c)}})}}function ms(r,t=1/0){const e=new WeakMap;return function(i,o){Reflect.defineProperty(i,o,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(c){Xe(this.toSeconds(c),r,t),e.set(this,c)}})}}class ri extends _n{constructor(){super(Q(ri.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const t=Q(ri.getDefaults(),arguments,["url","onload"]);this._buffer=new ns({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(_n.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Qt,onerror:Qt,playbackRate:1,reverse:!1})}load(t){return(0,Wt.mG)(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}_onload(t=Qt){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),0===this._activeSources.size&&!this._synced&&"started"===this._state.getValueAtTime(this.now())&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,i){return super.start(t,e,i),this}_start(t,e,i){e=jn(e,this._loop?this._loopStart:0);const o=this.toSeconds(e),c=i;i=jn(i,Math.max(this._buffer.duration-o,0));let u=this.toSeconds(i);u/=this._playbackRate,t=this.toSeconds(t);const d=new br({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(t+u),this._state.setStateAtTime("stopped",t+u,{implicitEnd:!0})),this._activeSources.add(d),this._loop&&en(c)?d.start(t,o):d.start(t,o,u-this.toSeconds(this.fadeOut))}_stop(t){const e=this.toSeconds(t);this._activeSources.forEach(i=>i.stop(e))}restart(t,e,i){return super.restart(t,e,i),this}_restart(t,e,i){this._stop(t),this._start(t,e,i)}seek(t,e){const i=this.toSeconds(e);if("started"===this._state.getValueAtTime(i)){const o=this.toSeconds(t);this._stop(i),this._start(i,o)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&Xe(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&Xe(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(e=>{e.loop=t}),t)){const e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const e=this.now(),i=this._state.getNextState("stopped",e);i&&i.implicitEnd&&(this._state.cancel(i.time),this._activeSources.forEach(o=>o.cancelStop())),this._activeSources.forEach(o=>{o.playbackRate.setValueAtTime(t,e)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}(0,Wt.gn)([ms(0)],ri.prototype,"fadeIn",void 0),(0,Wt.gn)([ms(0)],ri.prototype,"fadeOut",void 0);class gs extends Mt{constructor(){super(Q(gs.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new Se({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const t=Q(gs.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(Mt.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(Un(t))return t;{let i;for(i in Vo)if(Vo[i][e]===t)return i;return t}}_setCurve(t,e,i){if(Un(i)&&Reflect.has(Vo,i)){const o=Vo[i];Ds(o)?"_decayCurve"!==t&&(this[t]=o[e]):this[t]=o}else{if(!dn(i)||"_decayCurve"===t)throw new Error("Envelope: invalid curve: "+i);this[t]=i}}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._decayCurve}set decayCurve(t){ht(["linear","exponential"].some(e=>e===t),`Invalid envelope curve: ${t}`),this._decayCurve=t}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);let o=this.toSeconds(this.attack);const c=this.toSeconds(this.decay),u=this.getValueAtTime(t);if(u>0&&(o=(1-u)/(1/o)),o<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,o,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,o,t);else{this._sig.cancelAndHoldAtTime(t);let d=this._attackCurve;for(let h=1;h<d.length;h++)if(d[h-1]<=u&&u<=d[h]){d=this._attackCurve.slice(h),d[0]=u;break}this._sig.setValueCurveAtTime(d,t,o,e)}if(c&&this.sustain<1){const d=e*this.sustain,h=t+o;this.log("decay",h),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(d,c+h):this._sig.exponentialApproachValueAtTime(d,h,c)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const e=this.getValueAtTime(t);if(e>0){const i=this.toSeconds(this.release);i<this.sampleTime?this._sig.setValueAtTime(0,t):"linear"===this._releaseCurve?this._sig.linearRampTo(0,i,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,i,t):(ht(dn(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,i,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,i=1){return e=this.toSeconds(e),this.triggerAttack(e,i),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,i=0){return nc(this,t,e,i),this}asArray(t=1024){return(0,Wt.mG)(this,void 0,void 0,function*(){const e=t/this.context.sampleRate,i=new $a(1,e,this.context.sampleRate),o=this.toSeconds(this.attack)+this.toSeconds(this.decay),c=o+this.toSeconds(this.release),u=.1*c,d=c+u,h=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/d,decay:e*this.toSeconds(this.decay)/d,release:e*this.toSeconds(this.release)/d,context:i}));return h._sig.toDestination(),h.triggerAttackRelease(e*(o+u)/d,0),(yield i.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}(0,Wt.gn)([ms(0)],gs.prototype,"attack",void 0),(0,Wt.gn)([ms(0)],gs.prototype,"decay",void 0),(0,Wt.gn)([Bl(0,1)],gs.prototype,"sustain",void 0),(0,Wt.gn)([ms(0)],gs.prototype,"release",void 0);const Vo=(()=>{let t,e;const i=[];for(t=0;t<128;t++)i[t]=Math.sin(t/127*(Math.PI/2));const o=[];for(t=0;t<127;t++){e=t/127;const y=Math.sin(e*(2*Math.PI)*6.4-Math.PI/2)+1;o[t]=y/10+.83*e}o[127]=1;const u=[];for(t=0;t<128;t++)u[t]=Math.ceil(t/127*5)/5;const h=[];for(t=0;t<128;t++)e=t/127,h[t]=.5*(1-Math.cos(Math.PI*e));const f=[];for(t=0;t<128;t++){e=t/127;const y=4*Math.pow(e,3)+.2,b=Math.cos(y*Math.PI*2*e);f[t]=Math.abs(b*(1-e))}function m(y){const b=new Array(y.length);for(let w=0;w<y.length;w++)b[w]=1-y[w];return b}return{bounce:{In:m(f),Out:f},cosine:{In:i,Out:function _(y){return y.slice(0).reverse()}(i)},exponential:"exponential",linear:"linear",ripple:{In:o,Out:m(o)},sine:{In:h,Out:m(h)},step:{In:u,Out:m(u)}}})();class oi extends Mt{constructor(){super(Q(oi.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const t=Q(oi.getDefaults(),arguments);this._volume=this.output=new Fs({context:this.context,volume:t.volume}),this.volume=this._volume.volume,le(this,"volume")}static getDefaults(){return Object.assign(Mt.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){const i=this["_original_"+t]=this[t];this[t]=(...o)=>{const u=this.context.transport.schedule(d=>{o[e]=d,i.apply(this,o)},o[e]);this._scheduledEvents.push(u)}}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(t,e,i,o){const c=this.toSeconds(i),u=this.toSeconds(e);return this.triggerAttack(t,c,o),this.triggerRelease(c+u),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class ai extends oi{constructor(){super(Q(ai.getDefaults(),arguments));const t=Q(ai.getDefaults(),arguments);this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(oi.getDefaults(),{detune:0,onsilence:Qt,portamento:0})}triggerAttack(t,e,i=1){this.log("triggerAttack",t,e,i);const o=this.toSeconds(e);return this._triggerEnvelopeAttack(o,i),this.setNote(t,o),this}triggerRelease(t){this.log("triggerRelease",t);const e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){const i=this.toSeconds(e),o=t instanceof nn?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(i)>.05){const c=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(o,c,i)}else this.frequency.setValueAtTime(o,i);return this}}(0,Wt.gn)([ms(0)],ai.prototype,"portamento",void 0);class fc extends gs{constructor(){super(Q(fc.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new ze({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Or extends ai{constructor(){super(Q(Or.getDefaults(),arguments)),this.name="Synth";const t=Q(Or.getDefaults(),arguments);this.oscillator=new kr(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new fc(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),le(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(ai.getDefaults(),{envelope:Object.assign(ei(gs.getDefaults(),Object.keys(Mt.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(ei(kr.getDefaults(),[...Object.keys(_n.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain){const i=this.toSeconds(this.envelope.attack),o=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+i+o)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Nr extends Or{constructor(){super(Q(Nr.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const t=Q(Nr.getDefaults(),arguments);this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,le(this,["oscillator","envelope"])}static getDefaults(){return zn(ai.getDefaults(),Or.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){const i=this.toSeconds(e),o=this.toFrequency(t instanceof nn?t.toFrequency():t);return this.oscillator.frequency.setValueAtTime(o*this.octaves,i),this.oscillator.frequency.exponentialRampToValueAtTime(o,i+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}(0,Wt.gn)([Bl(0)],Nr.prototype,"octaves",void 0),(0,Wt.gn)([ms(0)],Nr.prototype,"pitchDecay",void 0);const wc=new Set;function Bo(r){wc.add(r)}function Zl(r,t){wc.add(`registerProcessor("${r}", ${t})`)}Bo('\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n'),Bo("\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n"),Bo("\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n"),Zl("feedback-comb-filter",'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');class Fi extends oi{constructor(){super(Q(Fi.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const t=Q(Fi.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),e={};Object.keys(t.urls).forEach(i=>{const o=parseInt(i,10);if(ht(Ai(i)||Ue(o)&&isFinite(o),`url key is neither a note or midi pitch: ${i}`),Ai(i)){const c=new nn(this.context,i).toMidi();e[c]=t.urls[i]}else Ue(o)&&isFinite(o)&&(e[o]=t.urls[o])}),this._buffers=new wr({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(oi.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Qt,onerror:Qt,release:.1,urls:{}})}_findClosest(t){let i=0;for(;i<96;){if(this._buffers.has(t+i))return-i;if(this._buffers.has(t-i))return i;i++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,i=1){return this.log("triggerAttack",t,e,i),Array.isArray(t)||(t=[t]),t.forEach(o=>{const c=Ve(new nn(this.context,o).toFrequency()),u=Math.round(c),d=c-u,h=this._findClosest(u),m=this._buffers.get(u-h),_=ko(h+d),y=new br({url:m,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:_}).connect(this.output);y.start(e,0,m.duration/_,i),dn(this._activeSources.get(u))||this._activeSources.set(u,[]),this._activeSources.get(u).push(y),y.onended=()=>{if(this._activeSources&&this._activeSources.has(u)){const b=this._activeSources.get(u),w=b.indexOf(y);-1!==w&&b.splice(w,1)}}}),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach(i=>{const o=new nn(this.context,i).toMidi();if(this._activeSources.has(o)&&this._activeSources.get(o).length){const c=this._activeSources.get(o);e=this.toSeconds(e),c.forEach(u=>{u.stop(e)}),this._activeSources.set(o,[])}}),this}releaseAll(t){const e=this.toSeconds(t);return this._activeSources.forEach(i=>{for(;i.length;)i.shift().stop(e)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,i,o=1){const c=this.toSeconds(i);return this.triggerAttack(t,c,o),dn(e)?(ht(dn(t),"notes must be an array when duration is array"),t.forEach((u,d)=>{const h=e[Math.min(d,e.length-1)];this.triggerRelease(u,c+this.toSeconds(h))})):this.triggerRelease(t,c+this.toSeconds(e)),this}add(t,e,i){if(ht(Ai(t)||isFinite(t),`note must be a pitch or midi: ${t}`),Ai(t)){const o=new nn(this.context,t).toMidi();this._buffers.add(o,e,i)}else this._buffers.add(t,e,i);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(e=>e.dispose())}),this._activeSources.clear(),this}}(0,Wt.gn)([ms(0)],Fi.prototype,"attack",void 0),(0,Wt.gn)([ms(0)],Fi.prototype,"release",void 0);class ci extends Fe{constructor(){super(Q(ci.getDefaults(),arguments,["callback","value"])),this.name="ToneEvent",this._state=new vr("stopped"),this._startOffset=0;const t=Q(ci.getDefaults(),arguments,["callback","value"]);this._loop=t.loop,this.callback=t.callback,this.value=t.value,this._loopStart=this.toTicks(t.loopStart),this._loopEnd=this.toTicks(t.loopEnd),this._playbackRate=t.playbackRate,this._probability=t.probability,this._humanize=t.humanize,this.mute=t.mute,this._playbackRate=t.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(Fe.getDefaults(),{callback:Qt,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(t=-1){this._state.forEachFrom(t,e=>{let i;if("started"===e.state){-1!==e.id&&this.context.transport.clear(e.id);const o=e.time+Math.round(this.startOffset/this._playbackRate);if(!0===this._loop||Ue(this._loop)&&this._loop>1){i=1/0,Ue(this._loop)&&(i=this._loop*this._getLoopDuration());const c=this._state.getAfter(o);null!==c&&(i=Math.min(i,c.time-o)),i!==1/0&&(this._state.setStateAtTime("stopped",o+i+1,{id:-1}),i=new ee(this.context,i));const u=new ee(this.context,this._getLoopDuration());e.id=this.context.transport.scheduleRepeat(this._tick.bind(this),u,new ee(this.context,o),i)}else e.id=this.context.transport.schedule(this._tick.bind(this),new ee(this.context,o))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t}get probability(){return this._probability}set probability(t){this._probability=t}get humanize(){return this._humanize}set humanize(t){this._humanize=t}start(t){const e=this.toTicks(t);return"stopped"===this._state.getValueAtTime(e)&&(this._state.add({id:-1,state:"started",time:e}),this._rescheduleEvents(e)),this}stop(t){this.cancel(t);const e=this.toTicks(t);if("started"===this._state.getValueAtTime(e)){this._state.setStateAtTime("stopped",e,{id:-1});const i=this._state.getBefore(e);let o=e;null!==i&&(o=i.time),this._rescheduleEvents(o)}return this}cancel(t){t=jn(t,-1/0);const e=this.toTicks(t);return this._state.forEachFrom(e,i=>{this.context.transport.clear(i.id)}),this._state.cancel(e),this}_tick(t){const e=this.context.transport.getTicksAtTime(t);if(!this.mute&&"started"===this._state.getValueAtTime(e)){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let i=.02;fs(this.humanize)||(i=this.toSeconds(this.humanize)),t+=(2*Math.random()-1)*i}this.callback(t,this.value)}}_getLoopDuration(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)}get loop(){return this._loop}set loop(t){this._loop=t,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._rescheduleEvents()}get loopEnd(){return new ee(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}get loopStart(){return new ee(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const t=this.context.transport.ticks,e=this._state.get(t);if(null!==e&&"started"===e.state){const i=this._getLoopDuration();return(t-e.time)%i/i}return 0}return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class Er extends ci{constructor(){super(Q(Er.getDefaults(),arguments,["callback","events"])),this.name="Part",this._state=new vr("stopped"),this._events=new Set;const t=Q(Er.getDefaults(),arguments,["callback","events"]);this._state.increasing=!0,t.events.forEach(e=>{dn(e)?this.add(e[0],e[1]):this.add(e)})}static getDefaults(){return Object.assign(ci.getDefaults(),{events:[]})}start(t,e){const i=this.toTicks(t);if("started"!==this._state.getValueAtTime(i)){e=jn(e,this._loop?this._loopStart:0),e=jn(e,this._loop?this._loopStart:0);const o=this.toTicks(e);this._state.add({id:-1,offset:o,state:"started",time:i}),this._forEach(c=>{this._startNote(c,i,o)})}return this}_startNote(t,e,i){e-=i,this._loop?t.startOffset>=this._loopStart&&t.startOffset<this._loopEnd?(t.startOffset<i&&(e+=this._getLoopDuration()),t.start(new ee(this.context,e))):t.startOffset<this._loopStart&&t.startOffset>=i&&(t.loop=!1,t.start(new ee(this.context,e))):t.startOffset>=i&&t.start(new ee(this.context,e))}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t,this._forEach(e=>{e.startOffset+=this._startOffset})}stop(t){const e=this.toTicks(t);return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._forEach(i=>{i.stop(t)}),this}at(t,e){const i=new $e(this.context,t).toTicks(),o=new ee(this.context,1).toSeconds(),c=this._events.values();let u=c.next();for(;!u.done;){const d=u.value;if(Math.abs(i-d.startOffset)<o)return kt(e)&&(d.value=e),d;u=c.next()}return kt(e)?(this.add(t,e),this.at(t)):null}add(t,e){t instanceof Object&&Reflect.has(t,"time")&&(t=(e=t).time);const i=this.toTicks(t);let o;return e instanceof ci?(o=e,o.callback=this._tick.bind(this)):o=new ci({callback:this._tick.bind(this),context:this.context,value:e}),o.startOffset=i,o.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(o),this._restartEvent(o),this}_restartEvent(t){this._state.forEach(e=>{"started"===e.state?this._startNote(t,e.time,e.offset):t.stop(new ee(this.context,e.time))})}remove(t,e){return Ds(t)&&t.hasOwnProperty("time")&&(t=(e=t).time),t=this.toTicks(t),this._events.forEach(i=>{i.startOffset===t&&(en(e)||kt(e)&&i.value===e)&&(this._events.delete(i),i.dispose())}),this}clear(){return this._forEach(t=>t.dispose()),this._events.clear(),this}cancel(t){return this._forEach(e=>e.cancel(t)),this._state.cancel(this.toTicks(t)),this}_forEach(t){return this._events&&this._events.forEach(e=>{e instanceof Er?e._forEach(t):t(e)}),this}_setAll(t,e){this._forEach(i=>{i[t]=e})}_tick(t,e){this.mute||this.callback(t,e)}_testLoopBoundries(t){this._loop&&(t.startOffset<this._loopStart||t.startOffset>=this._loopEnd)?t.cancel(0):"stopped"===t.state&&this._restartEvent(t)}get probability(){return this._probability}set probability(t){this._probability=t,this._setAll("probability",t)}get humanize(){return this._humanize}set humanize(t){this._humanize=t,this._setAll("humanize",t)}get loop(){return this._loop}set loop(t){this._loop=t,this._forEach(e=>{e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.loop=t,this._testLoopBoundries(e)})}get loopEnd(){return new ee(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach(e=>{e.loopEnd=t,this._testLoopBoundries(e)})}get loopStart(){return new ee(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach(e=>{e.loopStart=this.loopStart,this._testLoopBoundries(e)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._setAll("playbackRate",t)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}class zo extends Mt{constructor(){super(Object.assign(Q(zo.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const t=Q(zo.getDefaults(),arguments,["pan"]);this.pan=new te({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",le(this,"pan")}static getDefaults(){return Object.assign(Mt.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}Zl("bit-crusher","\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n");class Bt extends Mt{constructor(){super(Q(Bt.getDefaults(),arguments,["solo"])),this.name="Solo";const t=Q(Bt.getDefaults(),arguments,["solo"]);this.input=this.output=new ze({context:this.context}),Bt._allSolos.has(this.context)||Bt._allSolos.set(this.context,new Set),Bt._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(Mt.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),Bt._allSolos.get(this.context).forEach(e=>e._updateSolo())}get muted(){return 0===this.input.gain.value}_addSolo(){Bt._soloed.has(this.context)||Bt._soloed.set(this.context,new Set),Bt._soloed.get(this.context).add(this)}_removeSolo(){Bt._soloed.has(this.context)&&Bt._soloed.get(this.context).delete(this)}_isSoloed(){return Bt._soloed.has(this.context)&&Bt._soloed.get(this.context).has(this)}_noSolos(){return!Bt._soloed.has(this.context)||Bt._soloed.has(this.context)&&0===Bt._soloed.get(this.context).size}_updateSolo(){this.input.gain.value=this._isSoloed()||this._noSolos()?1:0}dispose(){return super.dispose(),Bt._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Bt._allSolos=new Map,Bt._soloed=new Map;class Xo extends Mt{constructor(){super(Q(Xo.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const t=Q(Xo.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new zo({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Fs({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,le(this,["pan","volume"])}static getDefaults(){return Object.assign(Mt.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class ui extends Mt{constructor(){super(Q(ui.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const t=Q(ui.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Bt({solo:t.solo,context:this.context}),this._panVol=this.output=new Xo({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),le(this,["pan","volume"])}static getDefaults(){return Object.assign(Mt.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return ui.buses.has(t)||ui.buses.set(t,new ze({context:this.context})),ui.buses.get(t)}send(t,e=0){const i=this._getBus(t),o=new ze({context:this.context,units:"decibels",gain:e});return this.connect(o),o.connect(i),o}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}ui.buses=new Map;class pf extends Mt{constructor(){super(...arguments),this.name="Listener",this.positionX=new te({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new te({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new te({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new te({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new te({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new te({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new te({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new te({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new te({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(Mt.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}So(r=>{r.listener=new pf({context:r})}),mr(r=>{r.listener.dispose()});const Zn=mn().transport,$o=mn().destination;mn(),mn(),mn();const Ko=mn();function th(){return ns.loaded()}let ta=(()=>{class r{constructor(){this.chordProgressionActive=(0,A.tdS)(!1),this.melodyActive=(0,A.tdS)(!1),this.samplerReady=(0,A.tdS)(!1)}start(){"started"!==Zn.state&&function Ao(){Es.resume()}(),$o.volume.value=-5,this.sampler=new Fi({urls:{C6:"C6.mp3","D#6":"Ds6.mp3","F#6":"Fs6.mp3",A6:"A6.mp3",C5:"C5.mp3","D#5":"Ds5.mp3","F#5":"Fs5.mp3",A5:"A5.mp3",C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3",C3:"C3.mp3","D#3":"Ds3.mp3","F#3":"Fs3.mp3",A3:"A3.mp3",C2:"C2.mp3","D#2":"Ds2.mp3","F#2":"Fs2.mp3",A2:"A2.mp3",C1:"C1.mp3","D#1":"Ds1.mp3","F#1":"Fs1.mp3",A1:"A1.mp3",A0:"A0.mp3"},release:.5,baseUrl:"https://tonejs.github.io/audio/salamander/",onload:()=>{this.samplerReady.set(!0)}}).toDestination()}setProgressionActive(){this.chordProgressionActive.set(!0)}setProgressionPassive(){this.chordProgressionActive.set(!1)}setMelodyActive(){this.melodyActive.set(!0)}setMelodyPassive(){this.melodyActive.set(!1)}playNote(e,i=0,o=.3){("suspended"!==Ko.state||!this.samplerReady)&&th().then(()=>{this.sampler.triggerAttackRelease(e,o,Ko.currentTime+i)})}playMelody(e,i=.3,o=.3){this.melodyActive()||!this.samplerReady||(this.setMelodyActive(),e.forEach((c,u)=>{this.playNote(c,u*i,o)}),setTimeout(()=>{this.setMelodyPassive()},1e3*i*(e.length-1)+1e3*o))}playChord(e,i=0,o=.5){("suspended"!==Ko.state||!this.samplerReady)&&th().then(()=>{this.sampler.triggerAttackRelease(e,o,Ko.currentTime+i)})}playProgression(e,i=.3,o=.3){if(this.chordProgressionActive()||!this.samplerReady)return;this.setProgressionActive();const c=new Er((u,d)=>{this.sampler.triggerAttackRelease(d.chord,o,u)},e.map((u,d)=>({chord:u,time:d*i}))).start(0);Zn.start(),setTimeout(()=>{c.stop(),Zn.stop(),this.setProgressionPassive()},1e3*i*(e.length-1)+1e3*o)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=A.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),eh=(()=>{class r{constructor(e){this.audioSrv=e,this.notes=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],this.solfegeList=["Do","Ra","Re","Me","Mi","Fa","Se","So","Le","La","Te","Ti"],this.octaves=["0","1","2","3","4","5","6"],this.selectedNoteList=(0,A.tdS)(["C4","D4","E4","F4","G4","A4","B4"]),this.selectedSolfegeList=(0,A.tdS)(["Do","Re","Mi","Fa","So","La","Ti"]),this.selectedRandomNote=(0,A.tdS)("C"),this.selectedRootNote=(0,A.tdS)("C"),this.possibleRandomNoteIndices=(0,A.tdS)(Ft.range(this.selectedNoteList().length)),this.randomizerWorkingOctave=3,this.randomizeWorkingKey()}randomizeWorkingKey(e=Ft.range(this.selectedNoteList().length)){const i=this.notes[Math.floor(Math.random()*this.notes.length)];this.selectedRootNote.set(i),this.selectedNoteList.set(this.getKeyNotesForOctave(i,this.randomizerWorkingOctave)),this.setRandomNote(i,{low:2,high:this.octaves.length-1},e)}setRandomNote(e,i,o=Ft.range(this.selectedNoteList().length)){if(i.low>i.high||i.low<0||i.low>this.octaves.length-1||i.high<0||i.high>this.octaves.length-1)throw new Error("Invalid octave range!");this.possibleRandomNoteIndices.set(o);const c=this.getKey(e),u=c[o[Math.floor(Math.random()*c.length)%o.length]];this.selectedRandomNote.set(u+this.octaves[i.low+Math.floor(Math.random()*Math.min(this.octaves.length,i.high-i.low))])}getKeyNotesForOctave(e,i){const o=this.getKey(e).map(c=>{const u=this.getKey(e);var d=this.notes.length;return u.forEach(h=>{this.notes.indexOf(h)<d&&(d=this.notes.indexOf(h))}),u.indexOf(c)<u.indexOf(this.notes[d])?c+this.octaves[i]:c+this.octaves[i+1]});return o.push(o[0].slice(0,-1)+this.octaves[this.octaves.indexOf(o[0].slice(-1))+1]),o}getKey(e,i=[0,2,4,5,7,9,11]){this.notes.indexOf(e);var o=[],c=[];return i.forEach(u=>{o.push(this.notes[(this.notes.indexOf(e)+u)%this.notes.length]),c.push(this.solfegeList[u]),this.selectedSolfegeList.set(c)}),o}}return r.\u0275fac=function(e){return new(e||r)(A.LFG(ta))},r.\u0275prov=A.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),nu=(()=>{class r{constructor(e){this.keySrv=e,this.questions=(0,A.tdS)([]),this.state=(0,A.tdS)(Me.FirstInit),this.questionCount=20,this.activeQuestion=0,this.SessionState=Me,this.selectedKey=(0,A.Flj)(()=>this.keySrv.selectedNoteList().map(i=>i.slice(0,-1))),this.activeQuestionState={},this.canProceedToTheNextQuestion=!1,this.results={},this.correctGuess=!1}startSession(e=20){if(this.state()===Me.Active)throw new Error("Session already active");this.state.set(Me.Active),this.questionCount=e}resetSession(){this.state.set(Me.FirstInit),this.activeQuestionState={},this.canProceedToTheNextQuestion=!1,this.activeQuestion=0,this.questions.set([])}goToNextQuestion(){this.activeQuestionState.isCorrect=!this.activeQuestionState.wrongNoteIndexList,this.questions.mutate(e=>e.push(this.activeQuestionState)),this.questionCount-1>this.activeQuestion?(console.log("Active Question: ",this.activeQuestion,"\nQuestions Array: ",this.questions()),this.activeQuestionState={},this.activeQuestion=this.activeQuestion+1,this.canProceedToTheNextQuestion=!1,this.correctGuess=!1):(console.log("Active Question: ",this.activeQuestion,"\nQuestions Array: ",this.questions()),this.endSession())}endSession(){if(this.state()!==Me.Active)throw new Error("No active session to end");this.state.set(Me.AfterSession);let e=0;this.correctGuess=!1,this.questions().forEach(i=>{i.isCorrect&&e++}),this.results={correctCount:e,questionCount:this.questionCount}}guess(e,i){const o=this.selectedKey().indexOf(i),c=this.selectedKey().indexOf(e);this.activeQuestionState.correctNoteIndex||(this.activeQuestionState.correctNoteIndex=c),o===c&&(this.activeQuestionState.wrongNoteIndexList||(this.correctGuess=!0),this.canProceedToTheNextQuestion=!0),!this.canProceedToTheNextQuestion&&(this.activeQuestionState.wrongNoteIndexList?this.activeQuestionState.wrongNoteIndexList.includes(o)||this.activeQuestionState.wrongNoteIndexList.push(o):this.activeQuestionState.wrongNoteIndexList=[o])}}return r.\u0275fac=function(e){return new(e||r)(A.LFG(eh))},r.\u0275prov=A.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var Me=(()=>((Me=Me||{}).FirstInit="firstInit",Me.Active="active",Me.AfterSession="afterSession",Me))();let vn=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=A.Xpm({type:r,selectors:[["app-loading"]],standalone:!0,features:[A.jDz],decls:2,vars:0,consts:[[1,"cet-loading"]],template:function(e,i){1&e&&(A.TgZ(0,"p",0),A._uU(1,"Loading"),A.qZA())},styles:['.cet-loading[_ngcontent-%COMP%]{text-align:left;width:80px}.cet-loading[_ngcontent-%COMP%]:after{display:inline-block;animation:_ngcontent-%COMP%_load steps(1,end) 1s infinite;content:""}@keyframes _ngcontent-%COMP%_load{0%{content:""}25%{content:"."}50%{content:".."}75%{content:"..."}to{content:""}}']}),r})();function qi(r,t){if(1&r&&A._UZ(0,"div",7),2&r){const e=t.$implicit;A.ekj("correct",e.isCorrect)("incorrect",!e.isCorrect)("default",void 0===e.isCorrect)}}function vf(r,t){1&r&&A._UZ(0,"div",8)}function yf(r,t){1&r&&(A.TgZ(0,"p",9),A._uU(1,"Incorrect"),A.qZA())}function xf(r,t){1&r&&(A.TgZ(0,"p",10),A._uU(1,"Correct"),A.qZA())}let wf=(()=>{class r{constructor(e){this.sessionSrv=e,this.remainingBoxes=(0,A.tdS)([]),this.remainingBoxes=(0,A.Flj)(()=>Array(this.sessionSrv.questionCount-this.sessionSrv.questions().length))}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)(A.Y36(nu))},r.\u0275cmp=A.Xpm({type:r,selectors:[["app-progress-info"]],decls:7,vars:4,consts:[[1,"cet-progress-info"],[1,"container"],["class","box",3,"correct","incorrect","default",4,"ngFor","ngForOf"],["class","box default",4,"ngFor","ngForOf"],[1,"cet-current-info"],["class","cet-incorrect-text",4,"ngIf"],["class","cet-correct-text",4,"ngIf"],[1,"box"],[1,"box","default"],[1,"cet-incorrect-text"],[1,"cet-correct-text"]],template:function(e,i){1&e&&(A.TgZ(0,"div",0)(1,"div",1),A.YNc(2,qi,1,6,"div",2),A.YNc(3,vf,1,0,"div",3),A.qZA(),A.TgZ(4,"div",4),A.YNc(5,yf,2,0,"p",5),A.YNc(6,xf,2,0,"p",6),A.qZA()()),2&e&&(A.xp6(2),A.Q6J("ngForOf",i.sessionSrv.questions()),A.xp6(1),A.Q6J("ngForOf",i.remainingBoxes()),A.xp6(2),A.Q6J("ngIf",i.sessionSrv.activeQuestionState.wrongNoteIndexList),A.xp6(1),A.Q6J("ngIf",i.sessionSrv.correctGuess))},dependencies:[_t.sg,_t.O5],styles:[".cet-progress-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px}.box[_ngcontent-%COMP%]{width:30px;height:15px;background-color:#fff;border-radius:5px}.box.correct[_ngcontent-%COMP%]{background-color:green}.box.incorrect[_ngcontent-%COMP%]{background-color:red}.box.default[_ngcontent-%COMP%]{background-color:#fff}.cet-current-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:30px}.cet-current-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:30px}.cet-current-info[_ngcontent-%COMP%]   .cet-incorrect-text[_ngcontent-%COMP%]{color:red}.cet-current-info[_ngcontent-%COMP%]   .cet-correct-text[_ngcontent-%COMP%]{color:green}"]}),r})();function Tf(r,t){if(1&r){const e=A.EpF();A.TgZ(0,"button",3),A.NdJ("click",function(){A.CHM(e);const o=A.oxw();return A.KtG(o.initialize())}),A._uU(1,"Start"),A.qZA()}}function nh(r,t){1&r&&(A.ynx(0),A._UZ(1,"app-loading"),A.BQk())}function _s(r,t){if(1&r){const e=A.EpF();A.TgZ(0,"button",9),A.NdJ("click",function(){const c=A.CHM(e).$implicit,u=A.oxw(3);return A.KtG(u.userGuess(c))}),A._uU(1),A.qZA()}if(2&r){const e=t.index,i=A.oxw(3);A.s9C("id","note-"+e),A.Q6J("disabled",!i.keySrv.possibleRandomNoteIndices().includes(e)),A.xp6(1),A.hij(" ",i.keySrv.selectedSolfegeList()[e%i.keySrv.selectedSolfegeList().length]," ")}}function Ot(r,t){if(1&r){const e=A.EpF();A.ynx(0),A._UZ(1,"app-progress-info"),A.TgZ(2,"p"),A._uU(3),A.qZA(),A.TgZ(4,"div",4)(5,"div",5),A.YNc(6,_s,2,3,"button",6),A.qZA(),A.TgZ(7,"div",7)(8,"button",3),A.NdJ("click",function(){A.CHM(e);const o=A.oxw(2);return A.KtG(o.audioSrv.playNote(o.keySrv.selectedRandomNote()))}),A._uU(9," Note "),A.qZA(),A.TgZ(10,"button",3),A.NdJ("click",function(){A.CHM(e);const o=A.oxw(2);return A.KtG(o.audioSrv.playProgression([[o.keySrv.selectedNoteList()[0],o.keySrv.selectedNoteList()[2],o.keySrv.selectedNoteList()[4]],[o.keySrv.selectedNoteList()[3],o.keySrv.selectedNoteList()[5],o.keySrv.selectedNoteList()[0]],[o.keySrv.selectedNoteList()[4],o.keySrv.selectedNoteList()[6],o.keySrv.selectedNoteList()[1]],[o.keySrv.selectedNoteList()[0],o.keySrv.selectedNoteList()[2],o.keySrv.selectedNoteList()[4]]]))}),A._uU(11," Play Progression "),A.qZA(),A.TgZ(12,"button",8),A.NdJ("click",function(){A.CHM(e);const o=A.oxw(2);return A.KtG(o.setNewKey())}),A._uU(13,"Next"),A.qZA()(),A.TgZ(14,"button",3),A.NdJ("click",function(){A.CHM(e);const o=A.oxw(2);return A.KtG(o.sessionSrv.endSession())}),A._uU(15,"End Session"),A.qZA()(),A.BQk()}if(2&r){const e=A.oxw(2);A.xp6(3),A.AsE("Question ",e.sessionSrv.activeQuestion+1," of ",e.sessionSrv.questionCount,""),A.xp6(3),A.Q6J("ngForOf",e.keySrv.selectedNoteList()),A.xp6(6),A.Q6J("disabled",!e.sessionSrv.canProceedToTheNextQuestion||e.audioSrv.melodyActive()||e.audioSrv.chordProgressionActive())}}function sh(r,t){if(1&r&&(A.ynx(0),A.YNc(1,nh,2,0,"ng-container",2),A.YNc(2,Ot,16,4,"ng-container",2),A.BQk()),2&r){const e=A.oxw();A.xp6(1),A.Q6J("ngIf",!e.audioSrv.samplerReady()),A.xp6(1),A.Q6J("ngIf",e.audioSrv.samplerReady())}}function En(r,t){if(1&r){const e=A.EpF();A.ynx(0),A.TgZ(1,"p"),A._uU(2,"Fin"),A.qZA(),A._UZ(3,"app-progress-info"),A.TgZ(4,"p"),A._uU(5),A.qZA(),A.TgZ(6,"button",3),A.NdJ("click",function(){A.CHM(e);const o=A.oxw();return A.KtG(o.resetSession())}),A._uU(7,"Restart"),A.qZA(),A.TgZ(8,"button",10),A.NdJ("click",function(){A.CHM(e);const o=A.oxw();return A.KtG(o.resetSession())}),A._uU(9,"To Main Menu"),A.qZA(),A.BQk()}if(2&r){const e=A.oxw();A.xp6(5),A.AsE(" ",e.sessionSrv.results.correctCount," / ",e.sessionSrv.results.questionCount,"")}}let ih=(()=>{class r{constructor(e,i,o){var c=this;this.audioSrv=e,this.keySrv=i,this.sessionSrv=o,this.trainerStarted=(0,A.tdS)(!1),this.coloringActive=(0,A.tdS)(!1),this.guessFeedback=(0,A.tdS)(Qn.default),this.GuessState=Qn,this.msMelodySpeed=400,this.msAfterUserIsAllowedToClick=this.msMelodySpeed,this.SessionState=Me,(0,A.cEC)(ut(function*(){c.audioSrv.samplerReady()&&(0,A.rg0)(()=>{c.audioSrv.playProgression([[c.keySrv.selectedNoteList()[0],c.keySrv.selectedNoteList()[2],c.keySrv.selectedNoteList()[4]],[c.keySrv.selectedNoteList()[3],c.keySrv.selectedNoteList()[5],c.keySrv.selectedNoteList()[0]],[c.keySrv.selectedNoteList()[4],c.keySrv.selectedNoteList()[6],c.keySrv.selectedNoteList()[1]],[c.keySrv.selectedNoteList()[0],c.keySrv.selectedNoteList()[2],c.keySrv.selectedNoteList()[4]]]),c.audioSrv.playNote(c.keySrv.selectedRandomNote(),1.5)})}))}ngOnInit(){this.sessionSrv.resetSession()}setNewKey(){this.keySrv.randomizeWorkingKey(),this.guessFeedback.set(Qn.default),this.sessionSrv.goToNextQuestion(),this.sessionSrv.state()===Me.Active&&(this.audioSrv.playProgression([[this.keySrv.selectedNoteList()[0],this.keySrv.selectedNoteList()[2],this.keySrv.selectedNoteList()[4]],[this.keySrv.selectedNoteList()[3],this.keySrv.selectedNoteList()[5],this.keySrv.selectedNoteList()[0]],[this.keySrv.selectedNoteList()[4],this.keySrv.selectedNoteList()[6],this.keySrv.selectedNoteList()[1]],[this.keySrv.selectedNoteList()[0],this.keySrv.selectedNoteList()[2],this.keySrv.selectedNoteList()[4]]]),this.audioSrv.playNote(this.keySrv.selectedRandomNote(),1.5))}userGuess(e){if(this.coloringActive())return;const i=e.slice(0,-1),o=this.keySrv.selectedRandomNote().slice(0,-1);if(this.sessionSrv.guess(o,i),i===o){this.guessFeedback.set(Qn.success);const c=this.changeOctave(Number(e.slice(-1))-Number(this.keySrv.selectedRandomNote().slice(-1))),u=this.getNotesIndicesToWalkOn(c,St.ToRoot),d=this.getNotesToWalkOn(c,St.ToRoot);this.audioSrv.playMelody(d,.001*this.msMelodySpeed,.001*this.msMelodySpeed),this.colorPlaying(u,this.msMelodySpeed)}else{this.guessFeedback.set(Qn.failure);let c=document.getElementById("note-"+this.keySrv.selectedNoteList().indexOf(e));c&&(c.classList.add("cet-failure"),setTimeout(()=>{c?.classList.remove("cet-failure")},this.msMelodySpeed))}}getNotesToWalkOn(e,i){let o;return o=e.indexOf(this.keySrv.selectedRandomNote())<e.length/2?e.slice(0,e.indexOf(this.keySrv.selectedRandomNote())+1).reverse():e.slice(e.indexOf(this.keySrv.selectedRandomNote()),e.length),this.transformResultForSelectedWalkMode(o,i)}getNotesIndicesToWalkOn(e,i){let o;return o=e.indexOf(this.keySrv.selectedRandomNote())<e.length/2?Ft.range(e.indexOf(this.keySrv.selectedRandomNote()),-1):Ft.range(e.indexOf(this.keySrv.selectedRandomNote()),e.length),this.transformResultForSelectedWalkMode(o,i)}transformResultForSelectedWalkMode(e,i){switch(i){case St.ToRoot:return e;case St.FromRoot:return e.reverse();case St.JumpToRoot:let o=[];return o.push(e[0]),e[0]!==e[e.length-1]&&o.push(e[e.length-1]),o;case St.NoWalk:return[e[0]];default:return e}}colorPlaying(e,i){this.coloringActive()||(this.coloringActive.set(!0),e.forEach((o,c)=>{let u=document.getElementById("note-"+o);u&&setTimeout(()=>{u?.classList.add("cet-playing"),setTimeout(()=>{u?.classList.remove("cet-playing")},i)},i*c)}),setTimeout(()=>{this.coloringActive.set(!1)},e.length*i+this.msAfterUserIsAllowedToClick))}changeOctave(e){return this.keySrv.selectedNoteList().map(c=>{const d=Number(c.slice(-1))-e;return c.slice(0,-1)+d})}initialize(){this.audioSrv.start(),this.keySrv.randomizeWorkingKey(),this.sessionSrv.startSession(5),this.trainerStarted.set(!0)}resetSession(){this.sessionSrv.resetSession(),this.audioSrv.samplerReady.set(!1)}ngOnDestroy(){this.audioSrv.samplerReady.set(!1)}}return r.\u0275fac=function(e){return new(e||r)(A.Y36(ta),A.Y36(eh),A.Y36(nu))},r.\u0275cmp=A.Xpm({type:r,selectors:[["app-functional-trainer"]],decls:7,vars:3,consts:[[1,"cet-functional-wrapper"],[3,"click",4,"ngIf"],[4,"ngIf"],[3,"click"],[1,"cet-controls-wrapper"],[1,"cet-scale"],["class","cet-note",3,"disabled","id","click",4,"ngFor","ngForOf"],[1,"cet-controls"],[3,"disabled","click"],[1,"cet-note",3,"disabled","id","click"],["routerLink","/home",3,"click"]],template:function(e,i){1&e&&(A.TgZ(0,"div",0)(1,"h2"),A._uU(2,"Functional Trainer"),A.qZA(),A.ynx(3),A.YNc(4,Tf,2,0,"button",1),A.BQk(),A.YNc(5,sh,3,2,"ng-container",2),A.YNc(6,En,10,2,"ng-container",2),A.qZA()),2&e&&(A.xp6(4),A.Q6J("ngIf",i.sessionSrv.state()===i.SessionState.FirstInit),A.xp6(1),A.Q6J("ngIf",i.sessionSrv.state()===i.SessionState.Active),A.xp6(1),A.Q6J("ngIf",i.sessionSrv.state()===i.SessionState.AfterSession))},dependencies:[_t.sg,_t.O5,x.rH,vn,wf],styles:[".cet-playing[_ngcontent-%COMP%], .cet-playing[_ngcontent-%COMP%]:hover{background-color:green}.cet-failure[_ngcontent-%COMP%], .cet-failure[_ngcontent-%COMP%]:hover{background-color:red}.cet-functional-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:calc(100vh - 16px);gap:30px;position:relative}.cet-functional-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{position:absolute;top:120px}.cet-functional-wrapper[_ngcontent-%COMP%]   .cet-controls-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:20px}.cet-scale[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:3px}.cet-scale[_ngcontent-%COMP%]   .cet-note[_ngcontent-%COMP%]{width:40px;height:40px;min-width:unset}.cet-controls[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:3px}"]}),r})();var Qn=(()=>((Qn=Qn||{}).default="def",Qn.success="success",Qn.failure="fail",Qn))(),St=(()=>((St=St||{}).ToRoot="toRoot",St.FromRoot="fromRoot",St.JumpToRoot="jumpToRoot",St.NoWalk="noWalk",St))();const bf=[{path:"",component:ih}];let rh=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=A.oAB({type:r}),r.\u0275inj=A.cJS({imports:[x.Bz.forChild(bf),x.Bz]}),r})(),ea=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=A.oAB({type:r}),r.\u0275inj=A.cJS({imports:[_t.ez,rh]}),r})()},9884:function(J,Yt,bt){!function(_t,x,Lt,ut){"use strict";var A=function(tt,lt,Z){return{endTime:lt,insertTime:Z,type:"exponentialRampToValue",value:tt}},Ft=function(tt,lt,Z){return{endTime:lt,insertTime:Z,type:"linearRampToValue",value:tt}},de=function(tt,lt){return{startTime:lt,type:"setValue",value:tt}},Oe=function(tt,lt,Z){return{duration:Z,startTime:lt,type:"setValueCurve",values:tt}},Ps=function(tt,lt,Z){var at=Z.target;return at+(lt-at)*Math.exp((Z.startTime-tt)/Z.timeConstant)},rn=function(tt){return"exponentialRampToValue"===tt.type},on=function(tt){return"linearRampToValue"===tt.type},Rn=function(tt){return rn(tt)||on(tt)},Qe=function(tt){return"setValue"===tt.type},Re=function(tt){return"setValueCurve"===tt.type},Xn=function Vt(tt,lt,Z,wt){var at=tt[lt];return void 0===at?wt:Rn(at)||Qe(at)?at.value:Re(at)?at.values[at.values.length-1]:Ps(Z,Vt(tt,lt-1,at.startTime,wt),at)},We=function(tt,lt,Z,wt,at){return void 0===Z?[wt.insertTime,at]:Rn(Z)?[Z.endTime,Z.value]:Qe(Z)?[Z.startTime,Z.value]:Re(Z)?[Z.startTime+Z.duration,Z.values[Z.values.length-1]]:[Z.startTime,Xn(tt,lt-1,Z.startTime,at)]},an=function(tt){return"cancelAndHold"===tt.type},us=function(tt){return"cancelScheduledValues"===tt.type},_e=function(tt){return an(tt)||us(tt)?tt.cancelTime:rn(tt)||on(tt)?tt.endTime:tt.startTime},In=function(tt,lt,Z,wt){var Ct=wt.value;return Z===Ct?Ct:0<Z&&0<Ct||Z<0&&Ct<0?Z*Math.pow(Ct/Z,(tt-lt)/(wt.endTime-lt)):0},He=function(tt,lt,Z,wt){return Z+(tt-lt)/(wt.endTime-lt)*(wt.value-Z)},xn=function(tt,lt){var at=lt.values;return function(tt,lt){var Z=Math.floor(lt),wt=Math.ceil(lt);return Z===wt?tt[Z]:(1-(lt-Z))*tt[Z]+(1-(wt-lt))*tt[wt]}(at,(tt-lt.startTime)/lt.duration*(at.length-1))},Kn=function(tt){return"setTarget"===tt.type},hi=function(Vt){function tt(lt){Lt(this,tt),this._automationEvents=[],this._currenTime=0,this._defaultValue=lt}return ut(tt,[{key:Vt,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(Z){var wt=_e(Z);if(an(Z)||us(Z)){var at=this._automationEvents.findIndex(function(ie){return us(Z)&&Re(ie)?ie.startTime+ie.duration>=wt:_e(ie)>=wt}),Ct=this._automationEvents[at];if(-1!==at&&(this._automationEvents=this._automationEvents.slice(0,at)),an(Z)){var dt=this._automationEvents[this._automationEvents.length-1];if(void 0!==Ct&&Rn(Ct)){if(void 0!==dt&&Kn(dt))throw new Error("The internal list is malformed.");var di=void 0===dt?Ct.insertTime:Re(dt)?dt.startTime+dt.duration:_e(dt),Ls=void 0===dt?this._defaultValue:Re(dt)?dt.values[dt.values.length-1]:dt.value,qn=rn(Ct)?In(wt,di,Ls,Ct):He(wt,di,Ls,Ct),xs=rn(Ct)?A(qn,wt,this._currenTime):Ft(qn,wt,this._currenTime);this._automationEvents.push(xs)}if(void 0!==dt&&Kn(dt)&&this._automationEvents.push(de(this.getValue(wt),wt)),void 0!==dt&&Re(dt)&&dt.startTime+dt.duration>wt){var Vs=wt-dt.startTime,Kt=(dt.values.length-1)/dt.duration,Pn=Math.max(2,1+Math.ceil(Vs*Kt)),ls=Vs/(Pn-1)*Kt,De=dt.values.slice(0,Pn);if(ls<1)for(var cn=1;cn<Pn;cn+=1){var Vi=ls*cn%1;De[cn]=dt.values[cn-1]*(1-Vi)+dt.values[cn]*Vi}this._automationEvents[this._automationEvents.length-1]=Oe(De,dt.startTime,Vs)}}}else{var Ie=this._automationEvents.findIndex(function(ie){return _e(ie)>wt}),ae=-1===Ie?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[Ie-1];if(void 0!==ae&&Re(ae)&&_e(ae)+ae.duration>wt)return!1;var Ne=rn(Z)?A(Z.value,Z.endTime,this._currenTime):on(Z)?Ft(Z.value,wt,this._currenTime):Z;if(-1===Ie)this._automationEvents.push(Ne);else{if(Re(Z)&&wt+Z.duration>_e(this._automationEvents[Ie]))return!1;this._automationEvents.splice(Ie,0,Ne)}}return!0}},{key:"flush",value:function(Z){var wt=this._automationEvents.findIndex(function(dt){return _e(dt)>Z});if(wt>1){var at=this._automationEvents.slice(wt-1),Ct=at[0];Kn(Ct)&&at.unshift(de(Xn(this._automationEvents,wt-2,Ct.startTime,this._defaultValue),Ct.startTime)),this._automationEvents=at}}},{key:"getValue",value:function(Z){if(0===this._automationEvents.length)return this._defaultValue;var wt=this._automationEvents.findIndex(function(De){return _e(De)>Z}),at=this._automationEvents[wt],Ct=(-1===wt?this._automationEvents.length:wt)-1,dt=this._automationEvents[Ct];if(void 0!==dt&&Kn(dt)&&(void 0===at||!Rn(at)||at.insertTime>Z))return Ps(Z,Xn(this._automationEvents,Ct-1,dt.startTime,this._defaultValue),dt);if(void 0!==dt&&Qe(dt)&&(void 0===at||!Rn(at)))return dt.value;if(void 0!==dt&&Re(dt)&&(void 0===at||!Rn(at)||dt.startTime+dt.duration>Z))return Z<dt.startTime+dt.duration?xn(Z,dt):dt.values[dt.values.length-1];if(void 0!==dt&&Rn(dt)&&(void 0===at||!Rn(at)))return dt.value;if(void 0!==at&&rn(at)){var di=We(this._automationEvents,Ct,dt,at,this._defaultValue),Ls=x(di,2);return In(Z,Ls[0],Ls[1],at)}if(void 0!==at&&on(at)){var Vs=We(this._automationEvents,Ct,dt,at,this._defaultValue),Kt=x(Vs,2);return He(Z,Kt[0],Kt[1],at)}return this._defaultValue}}]),tt}(Symbol.iterator);_t.AutomationEventList=hi,_t.createCancelAndHoldAutomationEvent=function(tt){return{cancelTime:tt,type:"cancelAndHold"}},_t.createCancelScheduledValuesAutomationEvent=function(tt){return{cancelTime:tt,type:"cancelScheduledValues"}},_t.createExponentialRampToValueAutomationEvent=function(tt,lt){return{endTime:lt,type:"exponentialRampToValue",value:tt}},_t.createLinearRampToValueAutomationEvent=function(tt,lt){return{endTime:lt,type:"linearRampToValue",value:tt}},_t.createSetTargetAutomationEvent=function(tt,lt,Z){return{startTime:lt,target:tt,timeConstant:Z,type:"setTarget"}},_t.createSetValueAutomationEvent=de,_t.createSetValueCurveAutomationEvent=Oe}(Yt,bt(7424),bt(6690),bt(9728))},6990:function(J,Yt,bt){var _t;J=bt.nmd(J),function(){var x,Ft="Expected a function",Oe="__lodash_hash_undefined__",rn="__lodash_placeholder__",lt=1/0,Z=9007199254740991,Ct=4294967295,Ls=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],qn="[object Arguments]",xs="[object Array]",Kt="[object Boolean]",Pn="[object Date]",De="[object Error]",cn="[object Function]",Vi="[object GeneratorFunction]",Ie="[object Map]",ae="[object Number]",ie="[object Object]",iu="[object Promise]",Wi="[object RegExp]",Ln="[object Set]",Bi="[object String]",Pr="[object Symbol]",Gi="[object WeakMap]",we="[object ArrayBuffer]",Jn="[object DataView]",Ui="[object Float32Array]",fi="[object Float64Array]",Lr="[object Int8Array]",sa="[object Int16Array]",ia="[object Int32Array]",ra="[object Uint8Array]",oa="[object Uint8ClampedArray]",pi="[object Uint16Array]",Ws="[object Uint32Array]",Bs=/\b__p \+= '';/g,ru=/\b(__p \+=) '' \+/g,ou=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Gs=/&(?:amp|lt|gt|quot|#39);/g,zi=/[&<>"']/g,au=RegExp(Gs.source),uh=RegExp(zi.source),cu=/<%-([\s\S]+?)%>/g,uu=/<%([\s\S]+?)%>/g,ji=/<%=([\s\S]+?)%>/g,ne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zi=/^\w*$/,Us=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,mi=/[\\^$.*+?()[\]{}|]/g,lu=RegExp(mi.source),Qi=/^\s+/,Vr=/\s/,lh=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,hh=/\{\n\/\* \[wrapped with (.+)\] \*/,dh=/,? & /,fh=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,aa=/[()=,{}\[\]\/\s]/,ca=/\\(\\)?/g,ph=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,hu=/\w*$/,mh=/^[-+]0x[0-9a-f]+$/i,gh=/^0b[01]+$/i,_h=/^\[object .+?Constructor\]$/,vh=/^0o[0-7]+$/i,du=/^(?:0|[1-9]\d*)$/,yh=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Wr=/($^)/,Br=/['\n\r\u2028\u2029\\]/g,Hi="\\ud800-\\udfff",fu="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",pu="\\u2700-\\u27bf",mu="a-z\\xdf-\\xf6\\xf8-\\xff",gu="A-Z\\xc0-\\xd6\\xd8-\\xde",_u="\\ufe0e\\ufe0f",vu="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ch="["+Hi+"]",yu="["+vu+"]",Ur="["+fu+"]",xu="\\d+",kh="["+pu+"]",wu="["+mu+"]",Tu="[^"+Hi+vu+xu+pu+mu+gu+"]",la="\\ud83c[\\udffb-\\udfff]",bu="[^"+Hi+"]",ha="(?:\\ud83c[\\udde6-\\uddff]){2}",da="[\\ud800-\\udbff][\\udc00-\\udfff]",gi="["+gu+"]",Su="(?:"+wu+"|"+Tu+")",Dh="(?:"+gi+"|"+Tu+")",Au="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Cu="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",ku="(?:"+Ur+"|"+la+")?",Ou="["+_u+"]?",Yi=Ou+ku+"(?:\\u200d(?:"+[bu,ha,da].join("|")+")"+Ou+ku+")*",Mh="(?:"+[kh,ha,da].join("|")+")"+Yi,Rh="(?:"+[bu+Ur+"?",Ur,ha,da,Ch].join("|")+")",Ih=RegExp("['\u2019]","g"),qh=RegExp(Ur,"g"),pa=RegExp(la+"(?="+la+")|"+Rh+Yi,"g"),Ph=RegExp([gi+"?"+wu+"+"+Au+"(?="+[yu,gi,"$"].join("|")+")",Dh+"+"+Cu+"(?="+[yu,gi+Su,"$"].join("|")+")",gi+"?"+Su+"+"+Au,gi+"+"+Cu,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",xu,Mh].join("|"),"g"),Lh=RegExp("[\\u200d"+Hi+fu+_u+"]"),Vh=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Wh=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Bh=-1,se={};se[Ui]=se[fi]=se[Lr]=se[sa]=se[ia]=se[ra]=se[oa]=se[pi]=se[Ws]=!0,se[qn]=se[xs]=se[we]=se[Kt]=se[Jn]=se[Pn]=se[De]=se[cn]=se[Ie]=se[ae]=se[ie]=se[Wi]=se[Ln]=se[Bi]=se[Gi]=!1;var Jt={};Jt[qn]=Jt[xs]=Jt[we]=Jt[Jn]=Jt[Kt]=Jt[Pn]=Jt[Ui]=Jt[fi]=Jt[Lr]=Jt[sa]=Jt[ia]=Jt[Ie]=Jt[ae]=Jt[ie]=Jt[Wi]=Jt[Ln]=Jt[Bi]=Jt[Pr]=Jt[ra]=Jt[oa]=Jt[pi]=Jt[Ws]=!0,Jt[De]=Jt[cn]=Jt[Gi]=!1;var jh={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Zh=parseFloat,ve=parseInt,Du="object"==typeof global&&global&&global.Object===Object&&global,Qh="object"==typeof self&&self&&self.Object===Object&&self,qe=Du||Qh||Function("return this")(),Xi=Yt&&!Yt.nodeType&&Yt,$i=Xi&&J&&!J.nodeType&&J,Nu=$i&&$i.exports===Xi,ma=Nu&&Du.process,un=function(){try{return $i&&$i.require&&$i.require("util").types||ma&&ma.binding&&ma.binding("util")}catch{}}(),Eu=un&&un.isArrayBuffer,Fu=un&&un.isDate,Mu=un&&un.isMap,Ru=un&&un.isRegExp,Iu=un&&un.isSet,qu=un&&un.isTypedArray;function ln(O,P,M){switch(M.length){case 0:return O.call(P);case 1:return O.call(P,M[0]);case 2:return O.call(P,M[0],M[1]);case 3:return O.call(P,M[0],M[1],M[2])}return O.apply(P,M)}function Hh(O,P,M,K){for(var Tt=-1,It=null==O?0:O.length;++Tt<It;){var be=O[Tt];P(K,be,M(be),O)}return K}function wn(O,P){for(var M=-1,K=null==O?0:O.length;++M<K&&!1!==P(O[M],M,O););return O}function Yh(O,P){for(var M=null==O?0:O.length;M--&&!1!==P(O[M],M,O););return O}function Pu(O,P){for(var M=-1,K=null==O?0:O.length;++M<K;)if(!P(O[M],M,O))return!1;return!0}function ws(O,P){for(var M=-1,K=null==O?0:O.length,Tt=0,It=[];++M<K;){var be=O[M];P(be,M,O)&&(It[Tt++]=be)}return It}function zr(O,P){return!(null==O||!O.length)&&zt(O,P,0)>-1}function ga(O,P,M){for(var K=-1,Tt=null==O?0:O.length;++K<Tt;)if(M(P,O[K]))return!0;return!1}function re(O,P){for(var M=-1,K=null==O?0:O.length,Tt=Array(K);++M<K;)Tt[M]=P(O[M],M,O);return Tt}function Ts(O,P){for(var M=-1,K=P.length,Tt=O.length;++M<K;)O[Tt+M]=P[M];return O}function _a(O,P,M,K){var Tt=-1,It=null==O?0:O.length;for(K&&It&&(M=O[++Tt]);++Tt<It;)M=P(M,O[Tt],Tt,O);return M}function Xh(O,P,M,K){var Tt=null==O?0:O.length;for(K&&Tt&&(M=O[--Tt]);Tt--;)M=P(M,O[Tt],Tt,O);return M}function va(O,P){for(var M=-1,K=null==O?0:O.length;++M<K;)if(P(O[M],M,O))return!0;return!1}var $h=xa("length");function Lu(O,P,M){var K;return M(O,function(Tt,It,be){if(P(Tt,It,be))return K=It,!1}),K}function jr(O,P,M,K){for(var Tt=O.length,It=M+(K?1:-1);K?It--:++It<Tt;)if(P(O[It],It,O))return It;return-1}function zt(O,P,M){return P==P?function od(O,P,M){for(var K=M-1,Tt=O.length;++K<Tt;)if(O[K]===P)return K;return-1}(O,P,M):jr(O,ya,M)}function Te(O,P,M,K){for(var Tt=M-1,It=O.length;++Tt<It;)if(K(O[Tt],P))return Tt;return-1}function ya(O){return O!=O}function Vu(O,P){var M=null==O?0:O.length;return M?Ki(O,P)/M:NaN}function xa(O){return function(P){return null==P?x:P[O]}}function wa(O){return function(P){return null==O?x:O[P]}}function ce(O,P,M,K,Tt){return Tt(O,function(It,be,Xt){M=K?(K=!1,It):P(M,It,be,Xt)}),M}function Ki(O,P){for(var M,K=-1,Tt=O.length;++K<Tt;){var It=P(O[K]);It!==x&&(M=M===x?It:M+It)}return M}function Ji(O,P){for(var M=-1,K=Array(O);++M<O;)K[M]=P(M);return K}function Wu(O){return O&&O.slice(0,zu(O)+1).replace(Qi,"")}function hn(O){return function(P){return O(P)}}function Ta(O,P){return re(P,function(M){return O[M]})}function tr(O,P){return O.has(P)}function Bu(O,P){for(var M=-1,K=O.length;++M<K&&zt(P,O[M],0)>-1;);return M}function ba(O,P){for(var M=O.length;M--&&zt(P,O[M],0)>-1;);return M}var nd=wa({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),sd=wa({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function id(O){return"\\"+jh[O]}function _i(O){return Lh.test(O)}function Sa(O){var P=-1,M=Array(O.size);return O.forEach(function(K,Tt){M[++P]=[Tt,K]}),M}function js(O,P){return function(M){return O(P(M))}}function bs(O,P){for(var M=-1,K=O.length,Tt=0,It=[];++M<K;){var be=O[M];(be===P||be===rn)&&(O[M]=rn,It[Tt++]=M)}return It}function Zr(O){var P=-1,M=Array(O.size);return O.forEach(function(K){M[++P]=K}),M}function vi(O){return _i(O)?function ad(O){for(var P=pa.lastIndex=0;pa.test(O);)++P;return P}(O):$h(O)}function Vn(O){return _i(O)?function cd(O){return O.match(pa)||[]}(O):function zs(O){return O.split("")}(O)}function zu(O){for(var P=O.length;P--&&Vr.test(O.charAt(P)););return P}var ju=wa({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Qr=function O(P){var n,M=(P=null==P?qe:Qr.defaults(qe.Object(),P,Qr.pick(qe,Wh))).Array,K=P.Date,Tt=P.Error,It=P.Function,be=P.Math,Xt=P.Object,Aa=P.RegExp,hd=P.String,$t=P.TypeError,Hr=M.prototype,yi=Xt.prototype,Yr=P["__core-js_shared__"],Xr=It.prototype.toString,jt=yi.hasOwnProperty,fd=0,Zu=(n=/[^.]+$/.exec(Yr&&Yr.keys&&Yr.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",$r=yi.toString,pd=Xr.call(Xt),md=qe._,gd=Aa("^"+Xr.call(jt).replace(mi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kr=Nu?P.Buffer:x,Ss=P.Symbol,Jr=P.Uint8Array,Qu=Kr?Kr.allocUnsafe:x,to=js(Xt.getPrototypeOf,Xt),Hu=Xt.create,Yu=yi.propertyIsEnumerable,eo=Hr.splice,Xu=Ss?Ss.isConcatSpreadable:x,nr=Ss?Ss.iterator:x,Zs=Ss?Ss.toStringTag:x,sr=function(){try{var n=is(Xt,"defineProperty");return n({},"",{}),n}catch{}}(),_d=P.clearTimeout!==qe.clearTimeout&&P.clearTimeout,vd=K&&K.now!==qe.Date.now&&K.now,yd=P.setTimeout!==qe.setTimeout&&P.setTimeout,no=be.ceil,so=be.floor,Ca=Xt.getOwnPropertySymbols,xd=Kr?Kr.isBuffer:x,$u=P.isFinite,Ku=Hr.join,Ju=js(Xt.keys,Xt),ue=be.max,Be=be.min,wd=K.now,Td=P.parseInt,ka=be.random,bd=Hr.reverse,Oa=is(P,"DataView"),ir=is(P,"Map"),rr=is(P,"Promise"),Qs=is(P,"Set"),Hs=is(P,"WeakMap"),or=is(Xt,"create"),io=Hs&&new Hs,Ys={},xi=si(Oa),Sd=si(ir),Ad=si(rr),Cd=si(Qs),tl=si(Hs),ro=Ss?Ss.prototype:x,Pe=ro?ro.valueOf:x,Tn=ro?ro.toString:x;function g(n){if(ge(n)&&!xt(n)&&!(n instanceof st)){if(n instanceof bn)return n;if(jt.call(n,"__wrapped__"))return Fs(n)}return new bn(n)}var As=function(){function n(){}return function(s){if(!fe(s))return{};if(Hu)return Hu(s);n.prototype=s;var a=new n;return n.prototype=x,a}}();function ye(){}function bn(n,s){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=x}function st(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ct,this.__views__=[]}function Cs(n){var s=-1,a=null==n?0:n.length;for(this.clear();++s<a;){var l=n[s];this.set(l[0],l[1])}}function Zt(n){var s=-1,a=null==n?0:n.length;for(this.clear();++s<a;){var l=n[s];this.set(l[0],l[1])}}function Wn(n){var s=-1,a=null==n?0:n.length;for(this.clear();++s<a;){var l=n[s];this.set(l[0],l[1])}}function Ge(n){var s=-1,a=null==n?0:n.length;for(this.__data__=new Wn;++s<a;)this.add(n[s])}function Gn(n){var s=this.__data__=new Zt(n);this.size=s.size}function ol(n,s){var a=xt(n),l=!a&&Rs(n),p=!a&&!l&&as(n),v=!a&&!l&&!p&&qi(n),T=a||l||p||v,C=T?Ji(n.length,hd):[],N=C.length;for(var W in n)(s||jt.call(n,W))&&(!T||!("length"==W||p&&("offset"==W||"parent"==W)||v&&("buffer"==W||"byteLength"==W||"byteOffset"==W)||$e(W,N)))&&C.push(W);return C}function ds(n){var s=n.length;return s?n[Ga(0,s-1)]:x}function Md(n,s){return ee(me(n),$s(s,0,n.length))}function Rd(n){return ee(me(n))}function Ma(n,s,a){(a!==x&&!Bt(n[s],a)||a===x&&!(s in n))&&es(n,s,a)}function ar(n,s,a){var l=n[s];(!jt.call(n,s)||!Bt(l,a)||a===x&&!(s in n))&&es(n,s,a)}function ao(n,s){for(var a=n.length;a--;)if(Bt(n[a][0],s))return a;return-1}function bi(n,s,a,l){return Os(n,function(p,v,T){s(l,p,a(p),T)}),l}function al(n,s){return n&&fn(s,I(s),n)}function es(n,s,a){"__proto__"==s&&sr?sr(n,s,{configurable:!0,enumerable:!0,value:a,writable:!0}):n[s]=a}function Ra(n,s){for(var a=-1,l=s.length,p=M(l),v=null==n;++a<l;)p[a]=v?x:b(n,s[a]);return p}function $s(n,s,a){return n==n&&(a!==x&&(n=n<=a?n:a),s!==x&&(n=n>=s?n:s)),n}function Sn(n,s,a,l,p,v){var T,C=1&s,N=2&s,W=4&s;if(a&&(T=p?a(n,l,p,v):a(n)),T!==x)return T;if(!fe(n))return n;var B=xt(n);if(B){if(T=function qf(n){var s=n.length,a=new n.constructor(s);return s&&"string"==typeof n[0]&&jt.call(n,"index")&&(a.index=n.index,a.input=n.input),a}(n),!C)return me(n,T)}else{var U=Ve(n),Y=U==cn||U==Vi;if(as(n))return Un(n,C);if(U==ie||U==qn||Y&&!p){if(T=N||Y?{}:nn(n),!C)return N?function Fl(n,s){return fn(n,Oo(n),s)}(n,function Id(n,s){return n&&fn(s,G(s),n)}(T,n)):function Ci(n,s){return fn(n,Ja(n),s)}(n,al(T,n))}else{if(!Jt[U])return p?n:{};T=function sf(n,s,a){var l=n.constructor;switch(s){case we:return Ai(n);case Kt:case Pn:return new l(+n);case Jn:return function Kd(n,s){var a=s?Ai(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.byteLength)}(n,a);case Ui:case fi:case Lr:case sa:case ia:case ra:case oa:case pi:case Ws:return Dl(n,a);case Ie:return new l;case ae:case Bi:return new l(n);case Wi:return function Jd(n){var s=new n.constructor(n.source,hu.exec(n));return s.lastIndex=n.lastIndex,s}(n);case Ln:return new l;case Pr:return function ti(n){return Pe?Xt(Pe.call(n)):{}}(n)}}(n,U,C)}}v||(v=new Gn);var ot=v.get(n);if(ot)return ot;v.set(n,T),nu(n)?n.forEach(function(gt){T.add(Sn(gt,s,a,gt,n,v))}):gf(n)&&n.forEach(function(gt,qt){T.set(qt,Sn(gt,s,a,qt,n,v))});var Et=B?x:(W?N?mn:Es:N?G:I)(n);return wn(Et||n,function(gt,qt){Et&&(gt=n[qt=gt]),ar(T,qt,Sn(gt,s,a,qt,n,v))}),T}function Ia(n,s,a){var l=a.length;if(null==n)return!l;for(n=Xt(n);l--;){var p=a[l],T=n[p];if(T===x&&!(p in n)||!(0,s[p])(T))return!1}return!0}function cl(n,s,a){if("function"!=typeof n)throw new $t(Ft);return Fo(function(){n.apply(x,a)},s)}function cr(n,s,a,l){var p=-1,v=zr,T=!0,C=n.length,N=[],W=s.length;if(!C)return N;a&&(s=re(s,hn(a))),l?(v=ga,T=!1):s.length>=200&&(v=tr,T=!1,s=new Ge(s));t:for(;++p<C;){var B=n[p],U=null==a?B:a(B);if(B=l||0!==B?B:0,T&&U==U){for(var Y=W;Y--;)if(s[Y]===U)continue t;N.push(B)}else v(s,U,l)||N.push(B)}return N}g.templateSettings={escape:cu,evaluate:uu,interpolate:ji,variable:"",imports:{_:g}},(g.prototype=ye.prototype).constructor=g,(bn.prototype=As(ye.prototype)).constructor=bn,(st.prototype=As(ye.prototype)).constructor=st,Cs.prototype.clear=function hs(){this.__data__=or?or(null):{},this.size=0},Cs.prototype.delete=function Da(n){var s=this.has(n)&&delete this.__data__[n];return this.size-=s?1:0,s},Cs.prototype.get=function Na(n){var s=this.__data__;if(or){var a=s[n];return a===Oe?x:a}return jt.call(s,n)?s[n]:x},Cs.prototype.has=function nl(n){var s=this.__data__;return or?s[n]!==x:jt.call(s,n)},Cs.prototype.set=function wi(n,s){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=or&&s===x?Oe:s,this},Zt.prototype.clear=function kd(){this.__data__=[],this.size=0},Zt.prototype.delete=function Ea(n){var s=this.__data__,a=ao(s,n);return!(a<0||(a==s.length-1?s.pop():eo.call(s,a,1),--this.size,0))},Zt.prototype.get=function sl(n){var s=this.__data__,a=ao(s,n);return a<0?x:s[a][1]},Zt.prototype.has=function il(n){return ao(this.__data__,n)>-1},Zt.prototype.set=function Fa(n,s){var a=this.__data__,l=ao(a,n);return l<0?(++this.size,a.push([n,s])):a[l][1]=s,this},Wn.prototype.clear=function Od(){this.size=0,this.__data__={hash:new Cs,map:new(ir||Zt),string:new Cs}},Wn.prototype.delete=function oo(n){var s=Co(this,n).delete(n);return this.size-=s?1:0,s},Wn.prototype.get=function rl(n){return Co(this,n).get(n)},Wn.prototype.has=function ts(n){return Co(this,n).has(n)},Wn.prototype.set=function Ti(n,s){var a=Co(this,n),l=a.size;return a.set(n,s),this.size+=a.size==l?0:1,this},Ge.prototype.add=Ge.prototype.push=function Dd(n){return this.__data__.set(n,Oe),this},Ge.prototype.has=function Bn(n){return this.__data__.has(n)},Gn.prototype.clear=function Nd(){this.__data__=new Zt,this.size=0},Gn.prototype.delete=function Ed(n){var s=this.__data__,a=s.delete(n);return this.size=s.size,a},Gn.prototype.get=function Xs(n){return this.__data__.get(n)},Gn.prototype.has=function Fd(n){return this.__data__.has(n)},Gn.prototype.set=function ks(n,s){var a=this.__data__;if(a instanceof Zt){var l=a.__data__;if(!ir||l.length<199)return l.push([n,s]),this.size=++a.size,this;a=this.__data__=new Wn(l)}return a.set(n,s),this.size=a.size,this};var Os=Ml(An),ul=Ml(co,!0);function Pd(n,s){var a=!0;return Os(n,function(l,p,v){return a=!!s(l,p,v)}),a}function Ks(n,s,a){for(var l=-1,p=n.length;++l<p;){var v=n[l],T=s(v);if(null!=T&&(C===x?T==T&&!vn(T):a(T,C)))var C=T,N=v}return N}function ll(n,s){var a=[];return Os(n,function(l,p,v){s(l,p,v)&&a.push(l)}),a}function Le(n,s,a,l,p){var v=-1,T=n.length;for(a||(a=Pf),p||(p=[]);++v<T;){var C=n[v];s>0&&a(C)?s>1?Le(C,s-1,a,l,p):Ts(p,C):l||(p[p.length]=C)}return p}var qa=Q(),Pa=Q(!0);function An(n,s){return n&&qa(n,s,I)}function co(n,s){return n&&Pa(n,s,I)}function uo(n,s){return ws(s,function(a){return Zn(n[a])})}function Js(n,s){for(var a=0,l=(s=Ue(s,n)).length;null!=n&&a<l;)n=n[os(s[a++])];return a&&a==l?n:x}function La(n,s,a){var l=s(n);return xt(n)?l:Ts(l,a(n))}function Ye(n){return null==n?n===x?"[object Undefined]":"[object Null]":Zs&&Zs in Xt(n)?function ef(n){var s=jt.call(n,Zs),a=n[Zs];try{n[Zs]=x;var l=!0}catch{}var p=$r.call(n);return l&&(s?n[Zs]=a:delete n[Zs]),p}(n):function nc(n){return $r.call(n)}(n)}function Si(n,s){return n>s}function Vd(n,s){return null!=n&&jt.call(n,s)}function hl(n,s){return null!=n&&s in Xt(n)}function Va(n,s,a){for(var l=a?ga:zr,p=n[0].length,v=n.length,T=v,C=M(v),N=1/0,W=[];T--;){var B=n[T];T&&s&&(B=re(B,hn(s))),N=Be(B.length,N),C[T]=!a&&(s||p>=120&&B.length>=120)?new Ge(T&&B):x}B=n[0];var U=-1,Y=C[0];t:for(;++U<p&&W.length<N;){var ot=B[U],mt=s?s(ot):ot;if(ot=a||0!==ot?ot:0,!(Y?tr(Y,mt):l(W,mt,a))){for(T=v;--T;){var Et=C[T];if(!(Et?tr(Et,mt):l(n[T],mt,a)))continue t}Y&&Y.push(mt),W.push(ot)}}return W}function ur(n,s,a){var l=null==(n=xr(n,s=Ue(s,n)))?n:n[os(je(s))];return null==l?x:ln(l,n,a)}function dl(n){return ge(n)&&Ye(n)==qn}function lr(n,s,a,l,p){return n===s||(null==n||null==s||!ge(n)&&!ge(s)?n!=n&&s!=s:function Ud(n,s,a,l,p,v){var T=xt(n),C=xt(s),N=T?xs:Ve(n),W=C?xs:Ve(s),B=(N=N==qn?ie:N)==ie,U=(W=W==qn?ie:W)==ie,Y=N==W;if(Y&&as(n)){if(!as(s))return!1;T=!0,B=!1}if(Y&&!B)return v||(v=new Gn),T||qi(n)?Qt(n,s,a,l,p,v):function ns(n,s,a,l,p,v,T){switch(a){case Jn:if(n.byteLength!=s.byteLength||n.byteOffset!=s.byteOffset)return!1;n=n.buffer,s=s.buffer;case we:return!(n.byteLength!=s.byteLength||!v(new Jr(n),new Jr(s)));case Kt:case Pn:case ae:return Bt(+n,+s);case De:return n.name==s.name&&n.message==s.message;case Wi:case Bi:return n==s+"";case Ie:var C=Sa;case Ln:if(C||(C=Zr),n.size!=s.size&&!(1&l))return!1;var W=T.get(n);if(W)return W==s;l|=2,T.set(n,s);var B=Qt(C(n),C(s),l,p,v,T);return T.delete(n),B;case Pr:if(Pe)return Pe.call(n)==Pe.call(s)}return!1}(n,s,N,a,l,p,v);if(!(1&a)){var ot=B&&jt.call(n,"__wrapped__"),mt=U&&jt.call(s,"__wrapped__");if(ot||mt){var Et=ot?n.value():n,gt=mt?s.value():s;return v||(v=new Gn),p(Et,gt,a,l,v)}}return!!Y&&(v||(v=new Gn),function $a(n,s,a,l,p,v){var T=1&a,C=Es(n),N=C.length;if(N!=Es(s).length&&!T)return!1;for(var U=N;U--;){var Y=C[U];if(!(T?Y in s:jt.call(s,Y)))return!1}var ot=v.get(n),mt=v.get(s);if(ot&&mt)return ot==s&&mt==n;var Et=!0;v.set(n,s),v.set(s,n);for(var gt=T;++U<N;){var qt=n[Y=C[U]],Pt=s[Y];if(l)var Hn=T?l(Pt,qt,Y,s,n,v):l(qt,Pt,Y,n,s,v);if(!(Hn===x?qt===Pt||p(qt,Pt,a,l,v):Hn)){Et=!1;break}gt||(gt="constructor"==Y)}if(Et&&!gt){var yn=n.constructor,Yn=s.constructor;yn!=Yn&&"constructor"in n&&"constructor"in s&&!("function"==typeof yn&&yn instanceof yn&&"function"==typeof Yn&&Yn instanceof Yn)&&(Et=!1)}return v.delete(n),v.delete(s),Et}(n,s,a,l,p,v))}(n,s,a,l,lr,p))}function lo(n,s,a,l){var p=a.length,v=p,T=!l;if(null==n)return!v;for(n=Xt(n);p--;){var C=a[p];if(T&&C[2]?C[1]!==n[C[0]]:!(C[0]in n))return!1}for(;++p<v;){var N=(C=a[p])[0],W=n[N],B=C[1];if(T&&C[2]){if(W===x&&!(N in n))return!1}else{var U=new Gn;if(l)var Y=l(W,B,N,n,s,U);if(!(Y===x?lr(B,W,3,l,U):Y))return!1}}return!0}function ho(n){return!(!fe(n)||function Mt(n){return!!Zu&&Zu in n}(n))&&(Zn(n)?gd:_h).test(si(n))}function ml(n){return"function"==typeof n?n:null==n?Mn:"object"==typeof n?xt(n)?yl(n[0],n[1]):vl(n):cp(n)}function Wa(n){if(!rs(n))return Ju(n);var s=[];for(var a in Xt(n))jt.call(n,a)&&"constructor"!=a&&s.push(a);return s}function Ba(n,s){return n<s}function _l(n,s){var a=-1,l=Ze(n)?M(n.length):[];return Os(n,function(p,v,T){l[++a]=s(p,v,T)}),l}function vl(n){var s=ko(n);return 1==s.length&&s[0][2]?ze(s[0][0],s[0][1]):function(a){return a===n||lo(a,n,s)}}function yl(n,s){return Fe(n)&&Pl(s)?ze(os(n),s):function(a){var l=b(a,n);return l===x&&l===s?S(a,n):lr(s,l,3)}}function fo(n,s,a,l,p){n!==s&&qa(s,function(v,T){if(p||(p=new Gn),fe(v))!function Qd(n,s,a,l,p,v,T){var C=ni(n,a),N=ni(s,a),W=T.get(N);if(W)Ma(n,a,W);else{var B=v?v(C,N,a+"",n,s,T):x,U=B===x;if(U){var Y=xt(N),ot=!Y&&as(N),mt=!Y&&!ot&&qi(N);B=N,Y||ot||mt?xt(C)?B=C:oe(C)?B=me(C):ot?(U=!1,B=Un(N,!0)):mt?(U=!1,B=Dl(N,!0)):B=[]:Jo(N)||Rs(N)?(B=C,Rs(C)?B=ih(C):(!fe(C)||Zn(C))&&(B=nn(N))):U=!1}U&&(T.set(N,B),p(B,N,l,v,T),T.delete(N)),Ma(n,a,B)}}(n,s,T,a,fo,l,p);else{var C=l?l(ni(n,T),v,T+"",n,s,p):x;C===x&&(C=v),Ma(n,T,C)}},G)}function po(n,s){var a=n.length;if(a)return $e(s+=s<0?a:0,a)?n[s]:x}function xl(n,s,a){s=s.length?re(s,function(v){return xt(v)?function(T){return Js(T,1===v.length?v[0]:v)}:v}):[Mn];var l=-1;return s=re(s,hn(ft())),function Jh(O,P){var M=O.length;for(O.sort(P);M--;)O[M]=O[M].value;return O}(_l(n,function(v,T,C){return{criteria:re(s,function(W){return W(v)}),index:++l,value:v}}),function(v,T){return function Wt(n,s,a){for(var l=-1,p=n.criteria,v=s.criteria,T=p.length,C=a.length;++l<T;){var N=Nl(p[l],v[l]);if(N)return l>=C?N:N*("desc"==a[l]?-1:1)}return n.index-s.index}(v,T,a)})}function Tl(n,s,a){for(var l=-1,p=s.length,v={};++l<p;){var T=s[l],C=Js(n,T);a(C,T)&&go(v,Ue(T,n),C)}return v}function mo(n,s,a,l){var p=l?Te:zt,v=-1,T=s.length,C=n;for(n===s&&(s=me(s)),a&&(C=re(n,hn(a)));++v<T;)for(var N=0,W=s[v],B=a?a(W):W;(N=p(C,B,N,l))>-1;)C!==n&&eo.call(C,N,1),eo.call(n,N,1);return n}function Sl(n,s){for(var a=n?s.length:0,l=a-1;a--;){var p=s[a];if(a==l||p!==v){var v=p;$e(p)?eo.call(n,p,1):vo(n,p)}}return n}function Ga(n,s){return n+so(ka()*(s-n+1))}function Ua(n,s){var a="";if(!n||s<1||s>Z)return a;do{s%2&&(a+=n),(s=so(s/2))&&(n+=n)}while(s);return a}function Nt(n,s){return wr(yr(n,s,Mn),n+"")}function Yd(n){return ds(Gt(n))}function Al(n,s){var a=Gt(n);return ee(a,$s(s,0,a.length))}function go(n,s,a,l){if(!fe(n))return n;for(var p=-1,v=(s=Ue(s,n)).length,T=v-1,C=n;null!=C&&++p<v;){var N=os(s[p]),W=a;if("__proto__"===N||"constructor"===N||"prototype"===N)return n;if(p!=T){var B=C[N];(W=l?l(B,N,C):x)===x&&(W=fe(B)?B:$e(s[p+1])?[]:{})}ar(C,N,W),C=C[N]}return n}var za=io?function(n,s){return io.set(n,s),n}:Mn,Cl=sr?function(n,s){return sr(n,"toString",{configurable:!0,enumerable:!1,value:Df(s),writable:!0})}:Mn;function If(n){return ee(Gt(n))}function Cn(n,s,a){var l=-1,p=n.length;s<0&&(s=-s>p?0:p+s),(a=a>p?p:a)<0&&(a+=p),p=s>a?0:a-s>>>0,s>>>=0;for(var v=M(p);++l<p;)v[l]=n[l+s];return v}function Xd(n,s){var a;return Os(n,function(l,p,v){return!(a=s(l,p,v))}),!!a}function _o(n,s,a){var l=0,p=null==n?l:n.length;if("number"==typeof s&&s==s&&p<=2147483647){for(;l<p;){var v=l+p>>>1,T=n[v];null!==T&&!vn(T)&&(a?T<=s:T<s)?l=v+1:p=v}return p}return ja(n,s,Mn,a)}function ja(n,s,a,l){var p=0,v=null==n?0:n.length;if(0===v)return 0;for(var T=(s=a(s))!=s,C=null===s,N=vn(s),W=s===x;p<v;){var B=so((p+v)/2),U=a(n[B]),Y=U!==x,ot=null===U,mt=U==U,Et=vn(U);if(T)var gt=l||mt;else gt=W?mt&&(l||Y):C?mt&&Y&&(l||!ot):N?mt&&Y&&!ot&&(l||!Et):!ot&&!Et&&(l?U<=s:U<s);gt?p=B+1:v=B}return Be(v,4294967294)}function kl(n,s){for(var a=-1,l=n.length,p=0,v=[];++a<l;){var T=n[a],C=s?s(T):T;if(!a||!Bt(C,N)){var N=C;v[p++]=0===T?0:T}}return v}function $d(n){return"number"==typeof n?n:vn(n)?NaN:+n}function ht(n){if("string"==typeof n)return n;if(xt(n))return re(n,ht)+"";if(vn(n))return Tn?Tn.call(n):"";var s=n+"";return"0"==s&&1/n==-lt?"-0":s}function Xe(n,s,a){var l=-1,p=zr,v=n.length,T=!0,C=[],N=C;if(a)T=!1,p=ga;else if(v>=200){var W=s?null:gr(n);if(W)return Zr(W);T=!1,p=tr,N=new Ge}else N=s?[]:C;t:for(;++l<v;){var B=n[l],U=s?s(B):B;if(B=a||0!==B?B:0,T&&U==U){for(var Y=N.length;Y--;)if(N[Y]===U)continue t;s&&N.push(U),C.push(B)}else p(N,U,a)||(N!==C&&N.push(U),C.push(B))}return C}function vo(n,s){return null==(n=xr(n,s=Ue(s,n)))||delete n[os(je(s))]}function yo(n,s,a,l){return go(n,s,a(Js(n,s)),l)}function Za(n,s,a,l){for(var p=n.length,v=l?p:-1;(l?v--:++v<p)&&s(n[v],v,n););return a?Cn(n,l?0:v,l?v+1:p):Cn(n,l?v+1:0,l?p:v)}function Ol(n,s){var a=n;return a instanceof st&&(a=a.value()),_a(s,function(l,p){return p.func.apply(p.thisArg,Ts([l],p.args))},a)}function xo(n,s,a){var l=n.length;if(l<2)return l?Xe(n[0]):[];for(var p=-1,v=M(l);++p<l;)for(var T=n[p],C=-1;++C<l;)C!=p&&(v[p]=cr(v[p]||T,n[C],s,a));return Xe(Le(v,1),s,a)}function en(n,s,a){for(var l=-1,p=n.length,v=s.length,T={};++l<p;)a(T,n[l],l<v?s[l]:x);return T}function kt(n){return oe(n)?n:[]}function Qa(n){return"function"==typeof n?n:Mn}function Ue(n,s){return xt(n)?n:Fe(n,s)?[n]:af(St(n))}var Ds=Nt;function fs(n,s,a){var l=n.length;return a=a===x?l:a,!s&&a>=l?n:Cn(n,s,a)}var dn=_d||function(n){return qe.clearTimeout(n)};function Un(n,s){if(s)return n.slice();var a=n.length,l=Qu?Qu(a):new n.constructor(a);return n.copy(l),l}function Ai(n){var s=new n.constructor(n.byteLength);return new Jr(s).set(new Jr(n)),s}function Dl(n,s){var a=s?Ai(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.length)}function Nl(n,s){if(n!==s){var a=n!==x,l=null===n,p=n==n,v=vn(n),T=s!==x,C=null===s,N=s==s,W=vn(s);if(!C&&!W&&!v&&n>s||v&&T&&N&&!C&&!W||l&&T&&N||!a&&N||!p)return 1;if(!l&&!v&&!W&&n<s||W&&a&&p&&!l&&!v||C&&a&&p||!T&&p||!N)return-1}return 0}function El(n,s,a,l){for(var p=-1,v=n.length,T=a.length,C=-1,N=s.length,W=ue(v-T,0),B=M(N+W),U=!l;++C<N;)B[C]=s[C];for(;++p<T;)(U||p<v)&&(B[a[p]]=n[p]);for(;W--;)B[C++]=n[p++];return B}function Ns(n,s,a,l){for(var p=-1,v=n.length,T=-1,C=a.length,N=-1,W=s.length,B=ue(v-C,0),U=M(B+W),Y=!l;++p<B;)U[p]=n[p];for(var ot=p;++N<W;)U[ot+N]=s[N];for(;++T<C;)(Y||p<v)&&(U[ot+a[T]]=n[p++]);return U}function me(n,s){var a=-1,l=n.length;for(s||(s=M(l));++a<l;)s[a]=n[a];return s}function fn(n,s,a,l){var p=!a;a||(a={});for(var v=-1,T=s.length;++v<T;){var C=s[v],N=l?l(a[C],n[C],C,a,n):x;N===x&&(N=n[C]),p?es(a,C,N):ar(a,C,N)}return a}function wo(n,s){return function(a,l){var p=xt(a)?Hh:bi,v=s?s():{};return p(a,n,ft(l,2),v)}}function zn(n){return Nt(function(s,a){var l=-1,p=a.length,v=p>1?a[p-1]:x,T=p>2?a[2]:x;for(v=n.length>3&&"function"==typeof v?(p--,v):x,T&&sn(a[0],a[1],T)&&(v=p<3?x:v,p=1),s=Xt(s);++l<p;){var C=a[l];C&&n(s,C,l,v)}return s})}function Ml(n,s){return function(a,l){if(null==a)return a;if(!Ze(a))return n(a,l);for(var p=a.length,v=s?p:-1,T=Xt(a);(s?v--:++v<p)&&!1!==l(T[v],v,T););return a}}function Q(n){return function(s,a,l){for(var p=-1,v=Xt(s),T=l(s),C=T.length;C--;){var N=T[n?C:++p];if(!1===a(v[N],N,v))break}return s}}function jn(n){return function(s){var a=_i(s=St(s))?Vn(s):x,l=a?a[0]:s.charAt(0),p=a?fs(a,1).join(""):s.slice(1);return l[n]()+p}}function ei(n){return function(s){return _a(op(xe(s).replace(Ih,"")),n,"")}}function kn(n){return function(){var s=arguments;switch(s.length){case 0:return new n;case 1:return new n(s[0]);case 2:return new n(s[0],s[1]);case 3:return new n(s[0],s[1],s[2]);case 4:return new n(s[0],s[1],s[2],s[3]);case 5:return new n(s[0],s[1],s[2],s[3],s[4]);case 6:return new n(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new n(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var a=As(n.prototype),l=n.apply(a,s);return fe(l)?l:a}}function hr(n){return function(s,a,l){var p=Xt(s);if(!Ze(s)){var v=ft(a,3);s=I(s),a=function(C){return v(p[C],C,p)}}var T=n(s,a,l);return T>-1?p[v?s[T]:T]:x}}function To(n){return ss(function(s){var a=s.length,l=a,p=bn.prototype.thru;for(n&&s.reverse();l--;){var v=s[l];if("function"!=typeof v)throw new $t(Ft);if(p&&!T&&"wrapper"==Ao(v))var T=new bn([],!0)}for(l=T?l:a;++l<a;){var C=Ao(v=s[l]),N="wrapper"==C?Ka(v):x;T=N&&te(N[0])&&424==N[1]&&!N[4].length&&1==N[9]?T[Ao(N[0])].apply(T,N[3]):1==v.length&&te(v)?T[C]():T.thru(v)}return function(){var W=arguments,B=W[0];if(T&&1==W.length&&xt(B))return T.plant(B).value();for(var U=0,Y=a?s[U].apply(this,W):B;++U<a;)Y=s[U].call(this,Y);return Y}})}function dr(n,s,a,l,p,v,T,C,N,W){var B=128&s,U=1&s,Y=2&s,ot=24&s,mt=512&s,Et=Y?x:kn(n);return function gt(){for(var qt=arguments.length,Pt=M(qt),Hn=qt;Hn--;)Pt[Hn]=arguments[Hn];if(ot)var yn=_r(gt),Yn=function ed(O,P){for(var M=O.length,K=0;M--;)O[M]===P&&++K;return K}(Pt,yn);if(l&&(Pt=El(Pt,l,p,ot)),v&&(Pt=Ns(Pt,v,T,ot)),qt-=Yn,ot&&qt<W){var ke=bs(Pt,yn);return mr(n,s,dr,gt.placeholder,a,Pt,ke,C,N,W-qt)}var ys=U?a:this,li=Y?ys[n]:n;return qt=Pt.length,C?Pt=function No(n,s){for(var a=n.length,l=Be(s.length,a),p=me(n);l--;){var v=s[l];n[l]=$e(v,a)?p[v]:x}return n}(Pt,C):mt&&qt>1&&Pt.reverse(),B&&N<qt&&(Pt.length=N),this&&this!==qe&&this instanceof gt&&(li=Et||kn(li)),li.apply(ys,Pt)}}function On(n,s){return function(a,l){return function Bd(n,s,a,l){return An(n,function(p,v,T){s(l,a(p),v,T)}),l}(a,n,s(l),{})}}function bo(n,s){return function(a,l){var p;if(a===x&&l===x)return s;if(a!==x&&(p=a),l!==x){if(p===x)return l;"string"==typeof a||"string"==typeof l?(a=ht(a),l=ht(l)):(a=$d(a),l=$d(l)),p=n(a,l)}return p}}function Dn(n){return ss(function(s){return s=re(s,hn(ft())),Nt(function(a){var l=this;return n(s,function(p){return ln(p,l,a)})})})}function fr(n,s){var a=(s=s===x?" ":ht(s)).length;if(a<2)return a?Ua(s,n):s;var l=Ua(s,no(n/vi(s)));return _i(s)?fs(Vn(l),0,n).join(""):l.slice(0,n)}function Rl(n){return function(s,a,l){return l&&"number"!=typeof l&&sn(s,a,l)&&(a=l=x),s=_s(s),a===x?(a=s,s=0):a=_s(a),function Hd(n,s,a,l){for(var p=-1,v=ue(no((s-n)/(a||1)),0),T=M(v);v--;)T[l?v:++p]=n,n+=a;return T}(s,a,l=l===x?s<a?1:-1:_s(l),n)}}function pr(n){return function(s,a){return"string"==typeof s&&"string"==typeof a||(s=En(s),a=En(a)),n(s,a)}}function mr(n,s,a,l,p,v,T,C,N,W){var B=8&s;s|=B?32:64,4&(s&=~(B?64:32))||(s&=-4);var Et=[n,s,p,B?v:x,B?T:x,B?x:v,B?x:T,C,N,W],gt=a.apply(x,Et);return te(n)&&Eo(gt,Et),gt.placeholder=l,Mo(gt,n,s)}function Ya(n){var s=be[n];return function(a,l){if(a=En(a),(l=null==l?0:Be(Ot(l),292))&&$u(a)){var p=(St(a)+"e").split("e");return+((p=(St(s(p[0]+"e"+(+p[1]+l)))+"e").split("e"))[0]+"e"+(+p[1]-l))}return s(a)}}var gr=Qs&&1/Zr(new Qs([,-0]))[1]==lt?function(n){return new Qs(n)}:Ff;function Xa(n){return function(s){var a=Ve(s);return a==Ie?Sa(s):a==Ln?function Uu(O){var P=-1,M=Array(O.size);return O.forEach(function(K){M[++P]=[K,K]}),M}(s):function td(O,P){return re(P,function(M){return[M,O[M]]})}(s,n(s))}}function pn(n,s,a,l,p,v,T,C){var N=2&s;if(!N&&"function"!=typeof n)throw new $t(Ft);var W=l?l.length:0;if(W||(s&=-97,l=p=x),T=T===x?T:ue(Ot(T),0),C=C===x?C:Ot(C),W-=p?p.length:0,64&s){var B=l,U=p;l=p=x}var Y=N?x:Ka(n),ot=[n,s,a,l,p,B,U,v,T,C];if(Y&&function Do(n,s){var a=n[1],l=s[1],p=a|l;if(!(p<131)&&!(128==l&&8==a||128==l&&256==a&&n[7].length<=s[8]||384==l&&s[7].length<=s[8]&&8==a))return n;1&l&&(n[2]=s[2],p|=1&a?0:4);var C=s[3];if(C){var N=n[3];n[3]=N?El(N,C,s[4]):C,n[4]=N?bs(n[3],rn):s[4]}(C=s[5])&&(n[5]=(N=n[5])?Ns(N,C,s[6]):C,n[6]=N?bs(n[5],rn):s[6]),(C=s[7])&&(n[7]=C),128&l&&(n[8]=null==n[8]?s[8]:Be(n[8],s[8])),null==n[9]&&(n[9]=s[9]),n[0]=s[0],n[1]=p}(ot,Y),n=ot[0],s=ot[1],a=ot[2],l=ot[3],p=ot[4],!(C=ot[9]=ot[9]===x?N?0:n.length:ue(ot[9]-W,0))&&24&s&&(s&=-25),s&&1!=s)mt=8==s||16==s?function Ha(n,s,a){var l=kn(n);return function p(){for(var v=arguments.length,T=M(v),C=v,N=_r(p);C--;)T[C]=arguments[C];var W=v<3&&T[0]!==N&&T[v-1]!==N?[]:bs(T,N);return(v-=W.length)<a?mr(n,s,dr,p.placeholder,x,T,W,x,x,a-v):ln(this&&this!==qe&&this instanceof p?l:n,this,T)}}(n,s,C):32!=s&&33!=s||p.length?dr.apply(x,ot):function So(n,s,a,l){var p=1&s,v=kn(n);return function T(){for(var C=-1,N=arguments.length,W=-1,B=l.length,U=M(B+N),Y=this&&this!==qe&&this instanceof T?v:n;++W<B;)U[W]=l[W];for(;N--;)U[W++]=arguments[++C];return ln(Y,p?a:this,U)}}(n,s,a,l);else var mt=function tf(n,s,a){var l=1&s,p=kn(n);return function v(){return(this&&this!==qe&&this instanceof v?p:n).apply(l?a:this,arguments)}}(n,s,a);return Mo((Y?za:Eo)(mt,ot),n,s)}function Il(n,s,a,l){return n===x||Bt(n,yi[a])&&!jt.call(l,a)?s:n}function le(n,s,a,l,p,v){return fe(n)&&fe(s)&&(v.set(s,n),fo(n,s,x,le,v),v.delete(s)),n}function ql(n){return Jo(n)?x:n}function Qt(n,s,a,l,p,v){var T=1&a,C=n.length,N=s.length;if(C!=N&&!(T&&N>C))return!1;var W=v.get(n),B=v.get(s);if(W&&B)return W==s&&B==n;var U=-1,Y=!0,ot=2&a?new Ge:x;for(v.set(n,s),v.set(s,n);++U<C;){var mt=n[U],Et=s[U];if(l)var gt=T?l(Et,mt,U,s,n,v):l(mt,Et,U,n,s,v);if(gt!==x){if(gt)continue;Y=!1;break}if(ot){if(!va(s,function(qt,Pt){if(!tr(ot,Pt)&&(mt===qt||p(mt,qt,a,l,v)))return ot.push(Pt)})){Y=!1;break}}else if(mt!==Et&&!p(mt,Et,a,l,v)){Y=!1;break}}return v.delete(n),v.delete(s),Y}function ss(n){return wr(yr(n,x,Ms),n+"")}function Es(n){return La(n,I,Ja)}function mn(n){return La(n,G,Oo)}var Ka=io?function(n){return io.get(n)}:Ff;function Ao(n){for(var s=n.name+"",a=Ys[s],l=jt.call(Ys,s)?a.length:0;l--;){var p=a[l],v=p.func;if(null==v||v==n)return p.name}return s}function _r(n){return(jt.call(g,"placeholder")?g:n).placeholder}function ft(){var n=g.iteratee||Nf;return n=n===Nf?ml:n,arguments.length?n(arguments[0],arguments[1]):n}function Co(n,s){var a=n.__data__;return function vr(n){var s=typeof n;return"string"==s||"number"==s||"symbol"==s||"boolean"==s?"__proto__"!==n:null===n}(s)?a["string"==typeof s?"string":"hash"]:a.map}function ko(n){for(var s=I(n),a=s.length;a--;){var l=s[a],p=n[l];s[a]=[l,p,Pl(p)]}return s}function is(n,s){var a=function Gu(O,P){return null==O?x:O[P]}(n,s);return ho(a)?a:x}var Ja=Ca?function(n){return null==n?[]:(n=Xt(n),ws(Ca(n),function(s){return Yu.call(n,s)}))}:Mf,Oo=Ca?function(n){for(var s=[];n;)Ts(s,Ja(n)),n=to(n);return s}:Mf,Ve=Ye;function gn(n,s,a){for(var l=-1,p=(s=Ue(s,n)).length,v=!1;++l<p;){var T=os(s[l]);if(!(v=null!=n&&a(n,T)))break;n=n[T]}return v||++l!=p?v:!!(p=null==n?0:n.length)&&$o(p)&&$e(T,p)&&(xt(n)||Rs(n))}function nn(n){return"function"!=typeof n.constructor||rs(n)?{}:As(to(n))}function Pf(n){return xt(n)||Rs(n)||!!(Xu&&n&&n[Xu])}function $e(n,s){var a=typeof n;return!!(s=s??Z)&&("number"==a||"symbol"!=a&&du.test(n))&&n>-1&&n%1==0&&n<s}function sn(n,s,a){if(!fe(a))return!1;var l=typeof s;return!!("number"==l?Ze(a)&&$e(s,a.length):"string"==l&&s in a)&&Bt(a[s],n)}function Fe(n,s){if(xt(n))return!1;var a=typeof n;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=n&&!vn(n))||Zi.test(n)||!ne.test(n)||null!=s&&n in Xt(s)}function te(n){var s=Ao(n),a=g[s];if("function"!=typeof a||!(s in st.prototype))return!1;if(n===a)return!0;var l=Ka(a);return!!l&&n===l[0]}(Oa&&Ve(new Oa(new ArrayBuffer(1)))!=Jn||ir&&Ve(new ir)!=Ie||rr&&Ve(rr.resolve())!=iu||Qs&&Ve(new Qs)!=Ln||Hs&&Ve(new Hs)!=Gi)&&(Ve=function(n){var s=Ye(n),a=s==ie?n.constructor:x,l=a?si(a):"";if(l)switch(l){case xi:return Jn;case Sd:return Ie;case Ad:return iu;case Cd:return Ln;case tl:return Gi}return s});var ec=Yr?Zn:Rf;function rs(n){var s=n&&n.constructor;return n===("function"==typeof s&&s.prototype||yi)}function Pl(n){return n==n&&!fe(n)}function ze(n,s){return function(a){return null!=a&&a[n]===s&&(s!==x||n in Xt(a))}}function yr(n,s,a){return s=ue(s===x?n.length-1:s,0),function(){for(var l=arguments,p=-1,v=ue(l.length-s,0),T=M(v);++p<v;)T[p]=l[s+p];p=-1;for(var C=M(s+1);++p<s;)C[p]=l[p];return C[s]=a(T),ln(n,this,C)}}function xr(n,s){return s.length<2?n:Js(n,Cn(s,0,-1))}function ni(n,s){if(("constructor"!==s||"function"!=typeof n[s])&&"__proto__"!=s)return n[s]}var Eo=of(za),Fo=yd||function(n,s){return qe.setTimeout(n,s)},wr=of(Cl);function Mo(n,s,a){var l=s+"";return wr(n,function rf(n,s){var a=s.length;if(!a)return n;var l=a-1;return s[l]=(a>1?"& ":"")+s[l],s=s.join(a>2?", ":" "),n.replace(lh,"{\n/* [wrapped with "+s+"] */\n")}(l,function cf(n,s){return wn(Ls,function(a){var l="_."+a[0];s&a[1]&&!zr(n,l)&&n.push(l)}),n.sort()}(function tc(n){var s=n.match(hh);return s?s[1].split(dh):[]}(l),a)))}function of(n){var s=0,a=0;return function(){var l=wd(),p=16-(l-a);if(a=l,p>0){if(++s>=800)return arguments[0]}else s=0;return n.apply(x,arguments)}}function ee(n,s){var a=-1,l=n.length,p=l-1;for(s=s===x?l:s;++a<s;){var v=Ga(a,p),T=n[v];n[v]=n[a],n[a]=T}return n.length=s,n}var af=function ki(n){var s=Ii(n,function(l){return 500===a.size&&a.clear(),l}),a=s.cache;return s}(function(n){var s=[];return 46===n.charCodeAt(0)&&s.push(""),n.replace(Us,function(a,l,p,v){s.push(p?v.replace(ca,"$1"):l||a)}),s});function os(n){if("string"==typeof n||vn(n))return n;var s=n+"";return"0"==s&&1/n==-lt?"-0":s}function si(n){if(null!=n){try{return Xr.call(n)}catch{}try{return n+""}catch{}}return""}function Fs(n){if(n instanceof st)return n.clone();var s=new bn(n.__wrapped__,n.__chain__);return s.__actions__=me(n.__actions__),s.__index__=n.__index__,s.__values__=n.__values__,s}var sc=Nt(function(n,s){return oe(n)?cr(n,Le(s,1,oe,!0)):[]}),Tr=Nt(function(n,s){var a=je(s);return oe(a)&&(a=x),oe(n)?cr(n,Le(s,1,oe,!0),ft(a,2)):[]}),_n=Nt(function(n,s){var a=je(s);return oe(a)&&(a=x),oe(n)?cr(n,Le(s,1,oe,!0),x,a):[]});function oc(n,s,a){var l=null==n?0:n.length;if(!l)return-1;var p=null==a?0:Ot(a);return p<0&&(p=ue(l+p,0)),jr(n,ft(s,3),p)}function Di(n,s,a){var l=null==n?0:n.length;if(!l)return-1;var p=l-1;return a!==x&&(p=Ot(a),p=a<0?ue(l+p,0):Be(p,l-1)),jr(n,ft(s,3),p,!0)}function Ms(n){return null!=n&&n.length?Le(n,1):[]}function Ni(n){return n&&n.length?n[0]:x}var Sr=Nt(function(n){var s=re(n,kt);return s.length&&s[0]===n[0]?Va(s):[]}),Ar=Nt(function(n){var s=je(n),a=re(n,kt);return s===je(a)?s=x:a.pop(),a.length&&a[0]===n[0]?Va(a,ft(s,2)):[]}),Ei=Nt(function(n){var s=je(n),a=re(n,kt);return(s="function"==typeof s?s:x)&&a.pop(),a.length&&a[0]===n[0]?Va(a,x,s):[]});function je(n){var s=null==n?0:n.length;return s?n[s-1]:x}var Vl=Nt(Lo);function Lo(n,s){return n&&n.length&&s&&s.length?mo(n,s):n}var Bl=ss(function(n,s){var a=null==n?0:n.length,l=Ra(n,s);return Sl(n,re(s,function(p){return $e(p,a)?+p:p}).sort(Nl)),l});function ri(n){return null==n?n:bd.call(n)}var ai=Nt(function(n){return Xe(Le(n,1,oe,!0))}),fc=Nt(function(n){var s=je(n);return oe(s)&&(s=x),Xe(Le(n,1,oe,!0),ft(s,2))}),Or=Nt(function(n){var s=je(n);return s="function"==typeof s?s:x,Xe(Le(n,1,oe,!0),x,s)});function Dr(n){if(!n||!n.length)return[];var s=0;return n=ws(n,function(a){if(oe(a))return s=ue(a.length,s),!0}),Ji(s,function(a){return re(n,xa(a))})}function Wo(n,s){if(!n||!n.length)return[];var a=Dr(n);return null==s?a:re(a,function(l){return ln(s,x,l)})}var gc=Nt(function(n,s){return oe(n)?cr(n,s):[]}),_c=Nt(function(n){return xo(ws(n,oe))}),vc=Nt(function(n){var s=je(n);return oe(s)&&(s=x),xo(ws(n,oe),ft(s,2))}),jl=Nt(function(n){var s=je(n);return s="function"==typeof s?s:x,xo(ws(n,oe),x,s)}),yc=Nt(Dr),wc=Nt(function(n){var s=n.length,a=s>1?n[s-1]:x;return a="function"==typeof a?(n.pop(),a):x,Wo(n,a)});function Bo(n){var s=g(n);return s.__chain__=!0,s}function Tc(n,s){return s(n)}var Gf=ss(function(n){var s=n.length,a=s?n[0]:0,l=this.__wrapped__,p=function(v){return Ra(v,n)};return!(s>1||this.__actions__.length)&&l instanceof st&&$e(a)?((l=l.slice(a,+a+(s?1:0))).__actions__.push({func:Tc,args:[p],thisArg:x}),new bn(l,this.__chain__).thru(function(v){return s&&!v.length&&v.push(x),v})):this.thru(p)}),Ac=wo(function(n,s,a){jt.call(n,a)?++n[a]:es(n,a,1)}),Fi=hr(oc),ci=hr(Di);function Go(n,s){return(xt(n)?wn:Os)(n,ft(s,3))}function Uo(n,s){return(xt(n)?Yh:ul)(n,ft(s,3))}var Hf=wo(function(n,s,a){jt.call(n,a)?n[a].push(s):es(n,a,[s])}),Nc=Nt(function(n,s,a){var l=-1,p="function"==typeof s,v=Ze(n)?M(n.length):[];return Os(n,function(T){v[++l]=p?ln(s,T,a):ur(T,s,a)}),v}),zo=wo(function(n,s,a){es(n,a,s)});function Mi(n,s){return(xt(n)?re:_l)(n,ft(s,3))}var Fc=wo(function(n,s,a){n[a?0:1].push(s)},function(){return[[],[]]}),Jf=Nt(function(n,s){if(null==n)return[];var a=s.length;return a>1&&sn(n,s[0],s[1])?s=[]:a>2&&sn(s[0],s[1],s[2])&&(s=[s[0]]),xl(n,Le(s,1),[])}),Ri=vd||function(){return qe.Date.now()};function hf(n,s,a){return s=a?x:s,pn(n,128,x,x,x,x,s=n&&null==s?n.length:s)}function Zo(n,s){var a;if("function"!=typeof s)throw new $t(Ft);return n=Ot(n),function(){return--n>0&&(a=s.apply(this,arguments)),n<=1&&(s=x),a}}var Ql=Nt(function(n,s,a){var l=1;if(a.length){var p=bs(a,_r(Ql));l|=32}return pn(n,l,s,a,p)}),Qo=Nt(function(n,s,a){var l=3;if(a.length){var p=bs(a,_r(Qo));l|=32}return pn(s,l,n,a,p)});function Ho(n,s,a){var l,p,v,T,C,N,W=0,B=!1,U=!1,Y=!0;if("function"!=typeof n)throw new $t(Ft);function ot(ke){var ys=l,li=p;return l=p=x,W=ke,T=n.apply(li,ys)}function gt(ke){var ys=ke-N;return N===x||ys>=s||ys<0||U&&ke-W>=v}function qt(){var ke=Ri();if(gt(ke))return Pt(ke);C=Fo(qt,function Et(ke){var up=s-(ke-N);return U?Be(up,v-(ke-W)):up}(ke))}function Pt(ke){return C=x,Y&&l?ot(ke):(l=p=x,T)}function Yn(){var ke=Ri(),ys=gt(ke);if(l=arguments,p=this,N=ke,ys){if(C===x)return function mt(ke){return W=ke,C=Fo(qt,s),B?ot(ke):T}(N);if(U)return dn(C),C=Fo(qt,s),ot(N)}return C===x&&(C=Fo(qt,s)),T}return s=En(s)||0,fe(a)&&(B=!!a.leading,v=(U="maxWait"in a)?ue(En(a.maxWait)||0,s):v,Y="trailing"in a?!!a.trailing:Y),Yn.cancel=function Hn(){C!==x&&dn(C),W=0,l=N=p=C=x},Yn.flush=function yn(){return C===x?T:Pt(Ri())},Yn}var Hl=Nt(function(n,s){return cl(n,1,s)}),df=Nt(function(n,s,a){return cl(n,En(s)||0,a)});function Ii(n,s){if("function"!=typeof n||null!=s&&"function"!=typeof s)throw new $t(Ft);var a=function(){var l=arguments,p=s?s.apply(this,l):l[0],v=a.cache;if(v.has(p))return v.get(p);var T=n.apply(this,l);return a.cache=v.set(p,T)||v,T};return a.cache=new(Ii.Cache||Wn),a}function Wc(n){if("function"!=typeof n)throw new $t(Ft);return function(){var s=arguments;switch(s.length){case 0:return!n.call(this);case 1:return!n.call(this,s[0]);case 2:return!n.call(this,s[0],s[1]);case 3:return!n.call(this,s[0],s[1],s[2])}return!n.apply(this,s)}}Ii.Cache=Wn;var Gc=Ds(function(n,s){var a=(s=1==s.length&&xt(s[0])?re(s[0],hn(ft())):re(Le(s,1),hn(ft()))).length;return Nt(function(l){for(var p=-1,v=Be(l.length,a);++p<v;)l[p]=s[p].call(this,l[p]);return ln(n,this,l)})}),Fr=Nt(function(n,s){var a=bs(s,_r(Fr));return pn(n,32,x,s,a)}),Yo=Nt(function(n,s){var a=bs(s,_r(Yo));return pn(n,64,x,s,a)}),Yl=ss(function(n,s){return pn(n,256,x,x,x,s)});function Bt(n,s){return n===s||n!=n&&s!=s}var Xo=pr(Si),ui=pr(function(n,s){return n>=s}),Rs=dl(function(){return arguments}())?dl:function(n){return ge(n)&&jt.call(n,"callee")&&!Yu.call(n,"callee")},xt=M.isArray,pf=Eu?hn(Eu):function fl(n){return ge(n)&&Ye(n)==we};function Ze(n){return null!=n&&$o(n.length)&&!Zn(n)}function oe(n){return ge(n)&&Ze(n)}var as=xd||Rf,$c=Fu?hn(Fu):function Gd(n){return ge(n)&&Ye(n)==Pn};function Jl(n){if(!ge(n))return!1;var s=Ye(n);return s==De||"[object DOMException]"==s||"string"==typeof n.message&&"string"==typeof n.name&&!Jo(n)}function Zn(n){if(!fe(n))return!1;var s=Ye(n);return s==cn||s==Vi||"[object AsyncFunction]"==s||"[object Proxy]"==s}function mf(n){return"number"==typeof n&&n==Ot(n)}function $o(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=Z}function fe(n){var s=typeof n;return null!=n&&("object"==s||"function"==s)}function ge(n){return null!=n&&"object"==typeof n}var gf=Mu?hn(Mu):function zd(n){return ge(n)&&Ve(n)==Ie};function _f(n){return"number"==typeof n||ge(n)&&Ye(n)==ae}function Jo(n){if(!ge(n)||Ye(n)!=ie)return!1;var s=to(n);if(null===s)return!0;var a=jt.call(s,"constructor")&&s.constructor;return"function"==typeof a&&a instanceof a&&Xr.call(a)==pd}var ta=Ru?hn(Ru):function pl(n){return ge(n)&&Ye(n)==Wi},nu=Iu?hn(Iu):function jd(n){return ge(n)&&Ve(n)==Ln};function Me(n){return"string"==typeof n||!xt(n)&&ge(n)&&Ye(n)==Bi}function vn(n){return"symbol"==typeof n||ge(n)&&Ye(n)==Pr}var qi=qu?hn(qu):function Zd(n){return ge(n)&&$o(n.length)&&!!se[Ye(n)]},wf=pr(Ba),Tf=pr(function(n,s){return n<=s});function nh(n){if(!n)return[];if(Ze(n))return Me(n)?Vn(n):me(n);if(nr&&n[nr])return function er(O){for(var P,M=[];!(P=O.next()).done;)M.push(P.value);return M}(n[nr]());var s=Ve(n);return(s==Ie?Sa:s==Ln?Zr:Gt)(n)}function _s(n){return n?(n=En(n))===lt||n===-lt?17976931348623157e292*(n<0?-1:1):n==n?n:0:0===n?n:0}function Ot(n){var s=_s(n),a=s%1;return s==s?a?s-a:s:0}function sh(n){return n?$s(Ot(n),0,Ct):0}function En(n){if("number"==typeof n)return n;if(vn(n))return NaN;if(fe(n)){var s="function"==typeof n.valueOf?n.valueOf():n;n=fe(s)?s+"":s}if("string"!=typeof n)return 0===n?n:+n;n=Wu(n);var a=gh.test(n);return a||vh.test(n)?ve(n.slice(2),a?2:8):mh.test(n)?NaN:+n}function ih(n){return fn(n,G(n))}function St(n){return null==n?"":ht(n)}var bf=zn(function(n,s){if(rs(s)||Ze(s))fn(s,I(s),n);else for(var a in s)jt.call(s,a)&&ar(n,a,s[a])}),rh=zn(function(n,s){fn(s,G(s),n)}),ea=zn(function(n,s,a,l){fn(s,G(s),n,l)}),r=zn(function(n,s,a,l){fn(s,I(s),n,l)}),t=ss(Ra),i=Nt(function(n,s){n=Xt(n);var a=-1,l=s.length,p=l>2?s[2]:x;for(p&&sn(s[0],s[1],p)&&(l=1);++a<l;)for(var v=s[a],T=G(v),C=-1,N=T.length;++C<N;){var W=T[C],B=n[W];(B===x||Bt(B,yi[W])&&!jt.call(n,W))&&(n[W]=v[W])}return n}),o=Nt(function(n){return n.push(x,le),ln(E,x,n)});function b(n,s,a){var l=null==n?x:Js(n,s);return l===x?a:l}function S(n,s){return null!=n&&gn(n,s,hl)}var F=On(function(n,s,a){null!=s&&"function"!=typeof s.toString&&(s=$r.call(s)),n[s]=a},Df(Mn)),k=On(function(n,s,a){null!=s&&"function"!=typeof s.toString&&(s=$r.call(s)),jt.call(n,s)?n[s].push(a):n[s]=[a]},ft),q=Nt(ur);function I(n){return Ze(n)?ol(n):Wa(n)}function G(n){return Ze(n)?ol(n,!0):function gl(n){if(!fe(n))return function Se(n){var s=[];if(null!=n)for(var a in Xt(n))s.push(a);return s}(n);var s=rs(n),a=[];for(var l in n)"constructor"==l&&(s||!jt.call(n,l))||a.push(l);return a}(n)}var R=zn(function(n,s,a){fo(n,s,a)}),E=zn(function(n,s,a,l){fo(n,s,a,l)}),j=ss(function(n,s){var a={};if(null==n)return a;var l=!1;s=re(s,function(v){return v=Ue(v,n),l||(l=v.length>1),v}),fn(n,mn(n),a),l&&(a=Sn(a,7,ql));for(var p=s.length;p--;)vo(a,s[p]);return a}),H=ss(function(n,s){return null==n?{}:function wl(n,s){return Tl(n,s,function(a,l){return S(n,l)})}(n,s)});function V(n,s){if(null==n)return{};var a=re(mn(n),function(l){return[l]});return s=ft(s),Tl(n,a,function(l,p){return s(l,p[0])})}var nt=Xa(I),ct=Xa(G);function Gt(n){return null==n?[]:Ta(n,I(n))}var Is=ei(function(n,s,a){return s=s.toLowerCase(),n+(a?X(s):s)});function X(n){return Of(St(n).toLowerCase())}function xe(n){return(n=St(n))&&n.replace(yh,nd).replace(qh,"")}var Sf=ei(function(n,s,a){return n+(a?"-":"")+s.toLowerCase()}),Af=ei(function(n,s,a){return n+(a?" ":"")+s.toLowerCase()}),$=jn("toLowerCase"),qs=ei(function(n,s,a){return n+(a?"_":"")+s.toLowerCase()}),su=ei(function(n,s,a){return n+(a?" ":"")+Of(s)}),yp=ei(function(n,s,a){return n+(a?" ":"")+s.toUpperCase()}),Of=jn("toUpperCase");function op(n,s,a){return n=St(n),(s=a?x:s)===x?function rd(O){return Vh.test(O)}(n)?function ud(O){return O.match(Ph)||[]}(n):function Kh(O){return O.match(fh)||[]}(n):n.match(s)||[]}var ap=Nt(function(n,s){try{return ln(n,x,s)}catch(a){return Jl(a)?a:new Tt(a)}}),xp=ss(function(n,s){return wn(s,function(a){a=os(a),es(n,a,Ql(n[a],n))}),n});function Df(n){return function(){return n}}var Sp=To(),Ap=To(!0);function Mn(n){return n}function Nf(n){return ml("function"==typeof n?n:Sn(n,1))}var Op=Nt(function(n,s){return function(a){return ur(a,n,s)}}),Dp=Nt(function(n,s){return function(a){return ur(n,a,s)}});function Ef(n,s,a){var l=I(s),p=uo(s,l);null==a&&(!fe(s)||!p.length&&l.length)&&(a=s,s=n,n=this,p=uo(s,I(s)));var v=!(fe(a)&&"chain"in a&&!a.chain),T=Zn(n);return wn(p,function(C){var N=s[C];n[C]=N,T&&(n.prototype[C]=function(){var W=this.__chain__;if(v||W){var B=n(this.__wrapped__);return(B.__actions__=me(this.__actions__)).push({func:N,args:arguments,thisArg:n}),B.__chain__=W,B}return N.apply(n,Ts([this.value()],arguments))})}),n}function Ff(){}var Fp=Dn(re),Mp=Dn(Pu),Rp=Dn(va);function cp(n){return Fe(n)?xa(os(n)):function bl(n){return function(s){return Js(s,n)}}(n)}var qp=Rl(),Pp=Rl(!0);function Mf(){return[]}function Rf(){return!1}var zp=bo(function(n,s){return n+s},0),jp=Ya("ceil"),Zp=bo(function(n,s){return n/s},1),Qp=Ya("floor"),tm=bo(function(n,s){return n*s},1),em=Ya("round"),nm=bo(function(n,s){return n-s},0);return g.after=function Pc(n,s){if("function"!=typeof s)throw new $t(Ft);return n=Ot(n),function(){if(--n<1)return s.apply(this,arguments)}},g.ary=hf,g.assign=bf,g.assignIn=rh,g.assignInWith=ea,g.assignWith=r,g.at=t,g.before=Zo,g.bind=Ql,g.bindAll=xp,g.bindKey=Qo,g.castArray=function Zc(){if(!arguments.length)return[];var n=arguments[0];return xt(n)?n:[n]},g.chain=Bo,g.chunk=function Ro(n,s,a){s=(a?sn(n,s,a):s===x)?1:ue(Ot(s),0);var l=null==n?0:n.length;if(!l||s<1)return[];for(var p=0,v=0,T=M(no(l/s));p<l;)T[v++]=Cn(n,p,p+=s);return T},g.compact=function uf(n){for(var s=-1,a=null==n?0:n.length,l=0,p=[];++s<a;){var v=n[s];v&&(p[l++]=v)}return p},g.concat=function Io(){var n=arguments.length;if(!n)return[];for(var s=M(n-1),a=arguments[0],l=n;l--;)s[l-1]=arguments[l];return Ts(xt(a)?me(a):[a],Le(s,1))},g.cond=function wp(n){var s=null==n?0:n.length,a=ft();return n=s?re(n,function(l){if("function"!=typeof l[1])throw new $t(Ft);return[a(l[0]),l[1]]}):[],Nt(function(l){for(var p=-1;++p<s;){var v=n[p];if(ln(v[0],this,l))return ln(v[1],this,l)}})},g.conforms=function Tp(n){return function qd(n){var s=I(n);return function(a){return Ia(a,n,s)}}(Sn(n,1))},g.constant=Df,g.countBy=Ac,g.create=function e(n,s){var a=As(n);return null==s?a:al(a,s)},g.curry=function Lc(n,s,a){var l=pn(n,8,x,x,x,x,x,s=a?x:s);return l.placeholder=Lc.placeholder,l},g.curryRight=function Vc(n,s,a){var l=pn(n,16,x,x,x,x,x,s=a?x:s);return l.placeholder=Vc.placeholder,l},g.debounce=Ho,g.defaults=i,g.defaultsDeep=o,g.defer=Hl,g.delay=df,g.difference=sc,g.differenceBy=Tr,g.differenceWith=_n,g.drop=function br(n,s,a){var l=null==n?0:n.length;return l?Cn(n,(s=a||s===x?1:Ot(s))<0?0:s,l):[]},g.dropRight=function ic(n,s,a){var l=null==n?0:n.length;return l?Cn(n,0,(s=l-(s=a||s===x?1:Ot(s)))<0?0:s):[]},g.dropRightWhile=function Oi(n,s){return n&&n.length?Za(n,ft(s,3),!0,!0):[]},g.dropWhile=function rc(n,s){return n&&n.length?Za(n,ft(s,3),!0):[]},g.fill=function ps(n,s,a,l){var p=null==n?0:n.length;return p?(a&&"number"!=typeof a&&sn(n,s,a)&&(a=0,l=p),function Ld(n,s,a,l){var p=n.length;for((a=Ot(a))<0&&(a=-a>p?0:p+a),(l=l===x||l>p?p:Ot(l))<0&&(l+=p),l=a>l?0:sh(l);a<l;)n[a++]=s;return n}(n,s,a,l)):[]},g.filter=function kc(n,s){return(xt(n)?ws:ll)(n,ft(s,3))},g.flatMap=function Oc(n,s){return Le(Mi(n,s),1)},g.flatMapDeep=function Er(n,s){return Le(Mi(n,s),lt)},g.flatMapDepth=function Dc(n,s,a){return a=a===x?1:Ot(a),Le(Mi(n,s),a)},g.flatten=Ms,g.flattenDeep=function qo(n){return null!=n&&n.length?Le(n,lt):[]},g.flattenDepth=function Nn(n,s){return null!=n&&n.length?Le(n,s=s===x?1:Ot(s)):[]},g.flip=function ff(n){return pn(n,512)},g.flow=Sp,g.flowRight=Ap,g.fromPairs=function Po(n){for(var s=-1,a=null==n?0:n.length,l={};++s<a;){var p=n[s];l[p[0]]=p[1]}return l},g.functions=function _(n){return null==n?[]:uo(n,I(n))},g.functionsIn=function y(n){return null==n?[]:uo(n,G(n))},g.groupBy=Hf,g.initial=function ii(n){return null!=n&&n.length?Cn(n,0,-1):[]},g.intersection=Sr,g.intersectionBy=Ar,g.intersectionWith=Ei,g.invert=F,g.invertBy=k,g.invokeMap=Nc,g.iteratee=Nf,g.keyBy=zo,g.keys=I,g.keysIn=G,g.map=Mi,g.mapKeys=function D(n,s){var a={};return s=ft(s,3),An(n,function(l,p,v){es(a,s(l,p,v),l)}),a},g.mapValues=function L(n,s){var a={};return s=ft(s,3),An(n,function(l,p,v){es(a,p,s(l,p,v))}),a},g.matches=function Cp(n){return vl(Sn(n,1))},g.matchesProperty=function kp(n,s){return yl(n,Sn(s,1))},g.memoize=Ii,g.merge=R,g.mergeWith=E,g.method=Op,g.methodOf=Dp,g.mixin=Ef,g.negate=Wc,g.nthArg=function Ep(n){return n=Ot(n),Nt(function(s){return po(s,n)})},g.omit=j,g.omitBy=function z(n,s){return V(n,Wc(ft(s)))},g.once=function Bc(n){return Zo(2,n)},g.orderBy=function Ec(n,s,a,l){return null==n?[]:(xt(s)||(s=null==s?[]:[s]),xt(a=l?x:a)||(a=null==a?[]:[a]),xl(n,s,a))},g.over=Fp,g.overArgs=Gc,g.overEvery=Mp,g.overSome=Rp,g.partial=Fr,g.partialRight=Yo,g.partition=Fc,g.pick=H,g.pickBy=V,g.property=cp,g.propertyOf=function Ip(n){return function(s){return null==n?x:Js(n,s)}},g.pull=Vl,g.pullAll=Lo,g.pullAllBy=function Wl(n,s,a){return n&&n.length&&s&&s.length?mo(n,s,ft(a,2)):n},g.pullAllWith=function ac(n,s,a){return n&&n.length&&s&&s.length?mo(n,s,x,a):n},g.pullAt=Bl,g.range=qp,g.rangeRight=Pp,g.rearg=Yl,g.reject=function Mc(n,s){return(xt(n)?ws:ll)(n,Wc(ft(s,3)))},g.remove=function ms(n,s){var a=[];if(!n||!n.length)return a;var l=-1,p=[],v=n.length;for(s=ft(s,3);++l<v;){var T=n[l];s(T,l,n)&&(a.push(T),p.push(l))}return Sl(n,p),a},g.rest=function Xl(n,s){if("function"!=typeof n)throw new $t(Ft);return Nt(n,s=s===x?s:Ot(s))},g.reverse=ri,g.sampleSize=function Rc(n,s,a){return s=(a?sn(n,s,a):s===x)?1:Ot(s),(xt(n)?Md:Al)(n,s)},g.set=function rt(n,s,a){return null==n?n:go(n,s,a)},g.setWith=function it(n,s,a,l){return l="function"==typeof l?l:x,null==n?n:go(n,s,a,l)},g.shuffle=function Ic(n){return(xt(n)?Rd:If)(n)},g.slice=function cc(n,s,a){var l=null==n?0:n.length;return l?(a&&"number"!=typeof a&&sn(n,s,a)?(s=0,a=l):(s=null==s?0:Ot(s),a=a===x?l:Ot(a)),Cn(n,s,a)):[]},g.sortBy=Jf,g.sortedUniq=function lc(n){return n&&n.length?kl(n):[]},g.sortedUniqBy=function hc(n,s){return n&&n.length?kl(n,ft(s,2)):[]},g.split=function Mr(n,s,a){return a&&"number"!=typeof a&&sn(n,s,a)&&(s=a=x),(a=a===x?Ct:a>>>0)?(n=St(n))&&("string"==typeof s||null!=s&&!ta(s))&&!(s=ht(s))&&_i(n)?fs(Vn(n),0,a):n.split(s,a):[]},g.spread=function tp(n,s){if("function"!=typeof n)throw new $t(Ft);return s=null==s?0:ue(Ot(s),0),Nt(function(a){var l=a[s],p=fs(a,0,s);return l&&Ts(p,l),ln(n,this,p)})},g.tail=function dc(n){var s=null==n?0:n.length;return s?Cn(n,1,s):[]},g.take=function Bf(n,s,a){return n&&n.length?Cn(n,0,(s=a||s===x?1:Ot(s))<0?0:s):[]},g.takeRight=function gs(n,s,a){var l=null==n?0:n.length;return l?Cn(n,(s=l-(s=a||s===x?1:Ot(s)))<0?0:s,l):[]},g.takeRightWhile=function Vo(n,s){return n&&n.length?Za(n,ft(s,3),!1,!0):[]},g.takeWhile=function oi(n,s){return n&&n.length?Za(n,ft(s,3)):[]},g.tap=function Zl(n,s){return s(n),n},g.throttle=function Uc(n,s,a){var l=!0,p=!0;if("function"!=typeof n)throw new $t(Ft);return fe(a)&&(l="leading"in a?!!a.leading:l,p="trailing"in a?!!a.trailing:p),Ho(n,s,{leading:l,maxWait:s,trailing:p})},g.thru=Tc,g.toArray=nh,g.toPairs=nt,g.toPairsIn=ct,g.toPath=function Gp(n){return xt(n)?re(n,os):vn(n)?[n]:me(af(St(n)))},g.toPlainObject=ih,g.transform=function vt(n,s,a){var l=xt(n),p=l||as(n)||qi(n);if(s=ft(s,4),null==a){var v=n&&n.constructor;a=p?l?new v:[]:fe(n)&&Zn(v)?As(to(n)):{}}return(p?wn:An)(n,function(T,C,N){return s(a,T,C,N)}),a},g.unary=function zc(n){return hf(n,1)},g.union=ai,g.unionBy=fc,g.unionWith=Or,g.uniq=function pc(n){return n&&n.length?Xe(n):[]},g.uniqBy=function zl(n,s){return n&&n.length?Xe(n,ft(s,2)):[]},g.uniqWith=function mc(n,s){return s="function"==typeof s?s:x,n&&n.length?Xe(n,x,s):[]},g.unset=function pt(n,s){return null==n||vo(n,s)},g.unzip=Dr,g.unzipWith=Wo,g.update=function At(n,s,a){return null==n?n:yo(n,s,Qa(a))},g.updateWith=function Dt(n,s,a,l){return l="function"==typeof l?l:x,null==n?n:yo(n,s,Qa(a),l)},g.values=Gt,g.valuesIn=function Ae(n){return null==n?[]:Ta(n,G(n))},g.without=gc,g.words=op,g.wrap=function jc(n,s){return Fr(Qa(s),n)},g.xor=_c,g.xorBy=vc,g.xorWith=jl,g.zip=yc,g.zipObject=function Nr(n,s){return en(n||[],s||[],ar)},g.zipObjectDeep=function xc(n,s){return en(n||[],s||[],go)},g.zipWith=wc,g.entries=nt,g.entriesIn=ct,g.extend=rh,g.extendWith=ea,Ef(g,g),g.add=zp,g.attempt=ap,g.camelCase=Is,g.capitalize=X,g.ceil=jp,g.clamp=function Ke(n,s,a){return a===x&&(a=s,s=x),a!==x&&(a=(a=En(a))==a?a:0),s!==x&&(s=(s=En(s))==s?s:0),$s(En(n),s,a)},g.clone=function $l(n){return Sn(n,4)},g.cloneDeep=function Hc(n){return Sn(n,5)},g.cloneDeepWith=function Kl(n,s){return Sn(n,5,s="function"==typeof s?s:x)},g.cloneWith=function Qc(n,s){return Sn(n,4,s="function"==typeof s?s:x)},g.conformsTo=function Yc(n,s){return null==s||Ia(n,s,I(s))},g.deburr=xe,g.defaultTo=function bp(n,s){return null==n||n!=n?s:n},g.divide=Zp,g.endsWith=function cs(n,s,a){n=St(n),s=ht(s);var l=n.length,p=a=a===x?l:$s(Ot(a),0,l);return(a-=s.length)>=0&&n.slice(a,p)==s},g.eq=Bt,g.escape=function Pi(n){return(n=St(n))&&uh.test(n)?n.replace(zi,sd):n},g.escapeRegExp=function Li(n){return(n=St(n))&&lu.test(n)?n.replace(mi,"\\$&"):n},g.every=function Cc(n,s,a){var l=xt(n)?Pu:Pd;return a&&sn(n,s,a)&&(s=x),l(n,ft(s,3))},g.find=Fi,g.findIndex=oc,g.findKey=function c(n,s){return Lu(n,ft(s,3),An)},g.findLast=ci,g.findLastIndex=Di,g.findLastKey=function u(n,s){return Lu(n,ft(s,3),co)},g.floor=Qp,g.forEach=Go,g.forEachRight=Uo,g.forIn=function d(n,s){return null==n?n:qa(n,ft(s,3),G)},g.forInRight=function h(n,s){return null==n?n:Pa(n,ft(s,3),G)},g.forOwn=function f(n,s){return n&&An(n,ft(s,3))},g.forOwnRight=function m(n,s){return n&&co(n,ft(s,3))},g.get=b,g.gt=Xo,g.gte=ui,g.has=function w(n,s){return null!=n&&gn(n,s,Vd)},g.hasIn=S,g.head=Ni,g.identity=Mn,g.includes=function Yf(n,s,a,l){n=Ze(n)?n:Gt(n),a=a&&!l?Ot(a):0;var p=n.length;return a<0&&(a=ue(p+a,0)),Me(n)?a<=p&&n.indexOf(s,a)>-1:!!p&&zt(n,s,a)>-1},g.indexOf=function lf(n,s,a){var l=null==n?0:n.length;if(!l)return-1;var p=null==a?0:Ot(a);return p<0&&(p=ue(l+p,0)),zt(n,s,p)},g.inRange=function Rt(n,s,a){return s=_s(s),a===x?(a=s,s=0):a=_s(a),function Wd(n,s,a){return n>=Be(s,a)&&n<ue(s,a)}(n=En(n),s,a)},g.invoke=q,g.isArguments=Rs,g.isArray=xt,g.isArrayBuffer=pf,g.isArrayLike=Ze,g.isArrayLikeObject=oe,g.isBoolean=function Xc(n){return!0===n||!1===n||ge(n)&&Ye(n)==Kt},g.isBuffer=as,g.isDate=$c,g.isElement=function Kc(n){return ge(n)&&1===n.nodeType&&!Jo(n)},g.isEmpty=function Jc(n){if(null==n)return!0;if(Ze(n)&&(xt(n)||"string"==typeof n||"function"==typeof n.splice||as(n)||qi(n)||Rs(n)))return!n.length;var s=Ve(n);if(s==Ie||s==Ln)return!n.size;if(rs(n))return!Wa(n).length;for(var a in n)if(jt.call(n,a))return!1;return!0},g.isEqual=function tu(n,s){return lr(n,s)},g.isEqualWith=function eu(n,s,a){var l=(a="function"==typeof a?a:x)?a(n,s):x;return l===x?lr(n,s,x,a):!!l},g.isError=Jl,g.isFinite=function ep(n){return"number"==typeof n&&$u(n)},g.isFunction=Zn,g.isInteger=mf,g.isLength=$o,g.isMap=gf,g.isMatch=function np(n,s){return n===s||lo(n,s,ko(s))},g.isMatchWith=function sp(n,s,a){return a="function"==typeof a?a:x,lo(n,s,ko(s),a)},g.isNaN=function ip(n){return _f(n)&&n!=+n},g.isNative=function Ko(n){if(ec(n))throw new Tt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ho(n)},g.isNil=function rp(n){return null==n},g.isNull=function th(n){return null===n},g.isNumber=_f,g.isObject=fe,g.isObjectLike=ge,g.isPlainObject=Jo,g.isRegExp=ta,g.isSafeInteger=function eh(n){return mf(n)&&n>=-Z&&n<=Z},g.isSet=nu,g.isString=Me,g.isSymbol=vn,g.isTypedArray=qi,g.isUndefined=function vf(n){return n===x},g.isWeakMap=function yf(n){return ge(n)&&Ve(n)==Gi},g.isWeakSet=function xf(n){return ge(n)&&"[object WeakSet]"==Ye(n)},g.join=function Cr(n,s){return null==n?"":Ku.call(n,s)},g.kebabCase=Sf,g.last=je,g.lastIndexOf=function Ll(n,s,a){var l=null==n?0:n.length;if(!l)return-1;var p=l;return a!==x&&(p=(p=Ot(a))<0?ue(l+p,0):Be(p,l-1)),s==s?function tn(O,P,M){for(var K=M+1;K--;)if(O[K]===P)return K;return K}(n,s,p):jr(n,ya,p,!0)},g.lowerCase=Af,g.lowerFirst=$,g.lt=wf,g.lte=Tf,g.max=function Hp(n){return n&&n.length?Ks(n,Mn,Si):x},g.maxBy=function Yp(n,s){return n&&n.length?Ks(n,ft(s,2),Si):x},g.mean=function Xp(n){return Vu(n,Mn)},g.meanBy=function $p(n,s){return Vu(n,ft(s,2))},g.min=function Kp(n){return n&&n.length?Ks(n,Mn,Ba):x},g.minBy=function Jp(n,s){return n&&n.length?Ks(n,ft(s,2),Ba):x},g.stubArray=Mf,g.stubFalse=Rf,g.stubObject=function Lp(){return{}},g.stubString=function Vp(){return""},g.stubTrue=function Wp(){return!0},g.multiply=tm,g.nth=function kr(n,s){return n&&n.length?po(n,Ot(s)):x},g.noConflict=function Np(){return qe._===this&&(qe._=md),this},g.noop=Ff,g.now=Ri,g.pad=function yt(n,s,a){n=St(n);var l=(s=Ot(s))?vi(n):0;if(!s||l>=s)return n;var p=(s-l)/2;return fr(so(p),a)+n+fr(no(p),a)},g.padEnd=function Ce(n,s,a){n=St(n);var l=(s=Ot(s))?vi(n):0;return s&&l<s?n+fr(s-l,a):n},g.padStart=function he(n,s,a){n=St(n);var l=(s=Ot(s))?vi(n):0;return s&&l<s?fr(s-l,a)+n:n},g.parseInt=function Ut(n,s,a){return a||null==s?s=0:s&&(s=+s),Td(St(n).replace(Qi,""),s||0)},g.random=function vs(n,s,a){if(a&&"boolean"!=typeof a&&sn(n,s,a)&&(s=a=x),a===x&&("boolean"==typeof s?(a=s,s=x):"boolean"==typeof n&&(a=n,n=x)),n===x&&s===x?(n=0,s=1):(n=_s(n),s===x?(s=n,n=0):s=_s(s)),n>s){var l=n;n=s,s=l}if(a||n%1||s%1){var p=ka();return Be(n+p*(s-n+Zh("1e-"+((p+"").length-1))),s)}return Ga(n,s)},g.reduce=function Xf(n,s,a){var l=xt(n)?_a:ce,p=arguments.length<3;return l(n,ft(s,4),a,p,Os)},g.reduceRight=function $f(n,s,a){var l=xt(n)?Xh:ce,p=arguments.length<3;return l(n,ft(s,4),a,p,ul)},g.repeat=function pe(n,s,a){return s=(a?sn(n,s,a):s===x)?1:Ot(s),Ua(St(n),s)},g.replace=function Fn(){var n=arguments,s=St(n[0]);return n.length<3?s:s.replace(n[1],n[2])},g.result=function et(n,s,a){var l=-1,p=(s=Ue(s,n)).length;for(p||(p=1,n=x);++l<p;){var v=null==n?x:n[os(s[l])];v===x&&(l=p,v=a),n=Zn(v)?v.call(n):v}return n},g.round=em,g.runInContext=O,g.sample=function jo(n){return(xt(n)?ds:Yd)(n)},g.size=function qc(n){if(null==n)return 0;if(Ze(n))return Me(n)?vi(n):n.length;var s=Ve(n);return s==Ie||s==Ln?n.size:Wa(n).length},g.snakeCase=qs,g.some=function Kf(n,s,a){var l=xt(n)?va:Xd;return a&&sn(n,s,a)&&(s=x),l(n,ft(s,3))},g.sortedIndex=function uc(n,s){return _o(n,s)},g.sortedIndexBy=function Lf(n,s,a){return ja(n,s,ft(a,2))},g.sortedIndexOf=function Vf(n,s){var a=null==n?0:n.length;if(a){var l=_o(n,s);if(l<a&&Bt(n[l],s))return l}return-1},g.sortedLastIndex=function Wf(n,s){return _o(n,s,!0)},g.sortedLastIndexBy=function Gl(n,s,a){return ja(n,s,ft(a,2),!0)},g.sortedLastIndexOf=function Ul(n,s){if(null!=n&&n.length){var l=_o(n,s,!0)-1;if(Bt(n[l],s))return l}return-1},g.startCase=su,g.startsWith=function Cf(n,s,a){return n=St(n),a=null==a?0:$s(Ot(a),0,n.length),s=ht(s),n.slice(a,a+s.length)==s},g.subtract=nm,g.sum=function sm(n){return n&&n.length?Ki(n,Mn):0},g.sumBy=function im(n,s){return n&&n.length?Ki(n,ft(s,2)):0},g.template=function kf(n,s,a){var l=g.templateSettings;a&&sn(n,s,a)&&(s=x),n=St(n),s=ea({},s,l,Il);var C,N,p=ea({},s.imports,l.imports,Il),v=I(p),T=Ta(p,v),W=0,B=s.interpolate||Wr,U="__p += '",Y=Aa((s.escape||Wr).source+"|"+B.source+"|"+(B===ji?ph:Wr).source+"|"+(s.evaluate||Wr).source+"|$","g"),ot="//# sourceURL="+(jt.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Bh+"]")+"\n";n.replace(Y,function(gt,qt,Pt,Hn,yn,Yn){return Pt||(Pt=Hn),U+=n.slice(W,Yn).replace(Br,id),qt&&(C=!0,U+="' +\n__e("+qt+") +\n'"),yn&&(N=!0,U+="';\n"+yn+";\n__p += '"),Pt&&(U+="' +\n((__t = ("+Pt+")) == null ? '' : __t) +\n'"),W=Yn+gt.length,gt}),U+="';\n";var mt=jt.call(s,"variable")&&s.variable;if(mt){if(aa.test(mt))throw new Tt("Invalid `variable` option passed into `_.template`")}else U="with (obj) {\n"+U+"\n}\n";U=(N?U.replace(Bs,""):U).replace(ru,"$1").replace(ou,"$1;"),U="function("+(mt||"obj")+") {\n"+(mt?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(C?", __e = _.escape":"")+(N?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+U+"return __p\n}";var Et=ap(function(){return It(v,ot+"return "+U).apply(x,T)});if(Et.source=U,Jl(Et))throw Et;return Et},g.times=function Bp(n,s){if((n=Ot(n))<1||n>Z)return[];var a=Ct,l=Be(n,Ct);s=ft(s),n-=Ct;for(var p=Ji(l,s);++a<n;)s(a);return p},g.toFinite=_s,g.toInteger=Ot,g.toLength=sh,g.toLower=function dp(n){return St(n).toLowerCase()},g.toNumber=En,g.toSafeInteger=function Qn(n){return n?$s(Ot(n),-Z,Z):0===n?n:0},g.toString=St,g.toUpper=function fp(n){return St(n).toUpperCase()},g.trim=function pp(n,s,a){if((n=St(n))&&(a||s===x))return Wu(n);if(!n||!(s=ht(s)))return n;var l=Vn(n),p=Vn(s);return fs(l,Bu(l,p),ba(l,p)+1).join("")},g.trimEnd=function mp(n,s,a){if((n=St(n))&&(a||s===x))return n.slice(0,zu(n)+1);if(!n||!(s=ht(s)))return n;var l=Vn(n);return fs(l,0,ba(l,Vn(s))+1).join("")},g.trimStart=function gp(n,s,a){if((n=St(n))&&(a||s===x))return n.replace(Qi,"");if(!n||!(s=ht(s)))return n;var l=Vn(n);return fs(l,Bu(l,Vn(s))).join("")},g.truncate=function _p(n,s){var a=30,l="...";if(fe(s)){var p="separator"in s?s.separator:p;a="length"in s?Ot(s.length):a,l="omission"in s?ht(s.omission):l}var v=(n=St(n)).length;if(_i(n)){var T=Vn(n);v=T.length}if(a>=v)return n;var C=a-vi(l);if(C<1)return l;var N=T?fs(T,0,C).join(""):n.slice(0,C);if(p===x)return N+l;if(T&&(C+=N.length-C),ta(p)){if(n.slice(C).search(p)){var W,B=N;for(p.global||(p=Aa(p.source,St(hu.exec(p))+"g")),p.lastIndex=0;W=p.exec(B);)var U=W.index;N=N.slice(0,U===x?C:U)}}else if(n.indexOf(ht(p),C)!=C){var Y=N.lastIndexOf(p);Y>-1&&(N=N.slice(0,Y))}return N+l},g.unescape=function vp(n){return(n=St(n))&&au.test(n)?n.replace(Gs,ju):n},g.uniqueId=function Up(n){var s=++fd;return St(n)+s},g.upperCase=yp,g.upperFirst=Of,g.each=Go,g.eachRight=Uo,g.first=Ni,Ef(g,function(){var n={};return An(g,function(s,a){jt.call(g.prototype,a)||(n[a]=s)}),n}(),{chain:!1}),g.VERSION="4.17.21",wn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){g[n].placeholder=g}),wn(["drop","take"],function(n,s){st.prototype[n]=function(a){a=a===x?1:ue(Ot(a),0);var l=this.__filtered__&&!s?new st(this):this.clone();return l.__filtered__?l.__takeCount__=Be(a,l.__takeCount__):l.__views__.push({size:Be(a,Ct),type:n+(l.__dir__<0?"Right":"")}),l},st.prototype[n+"Right"]=function(a){return this.reverse()[n](a).reverse()}}),wn(["filter","map","takeWhile"],function(n,s){var a=s+1,l=1==a||3==a;st.prototype[n]=function(p){var v=this.clone();return v.__iteratees__.push({iteratee:ft(p,3),type:a}),v.__filtered__=v.__filtered__||l,v}}),wn(["head","last"],function(n,s){var a="take"+(s?"Right":"");st.prototype[n]=function(){return this[a](1).value()[0]}}),wn(["initial","tail"],function(n,s){var a="drop"+(s?"":"Right");st.prototype[n]=function(){return this.__filtered__?new st(this):this[a](1)}}),st.prototype.compact=function(){return this.filter(Mn)},st.prototype.find=function(n){return this.filter(n).head()},st.prototype.findLast=function(n){return this.reverse().find(n)},st.prototype.invokeMap=Nt(function(n,s){return"function"==typeof n?new st(this):this.map(function(a){return ur(a,n,s)})}),st.prototype.reject=function(n){return this.filter(Wc(ft(n)))},st.prototype.slice=function(n,s){n=Ot(n);var a=this;return a.__filtered__&&(n>0||s<0)?new st(a):(n<0?a=a.takeRight(-n):n&&(a=a.drop(n)),s!==x&&(a=(s=Ot(s))<0?a.dropRight(-s):a.take(s-n)),a)},st.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},st.prototype.toArray=function(){return this.take(Ct)},An(st.prototype,function(n,s){var a=/^(?:filter|find|map|reject)|While$/.test(s),l=/^(?:head|last)$/.test(s),p=g[l?"take"+("last"==s?"Right":""):s],v=l||/^find/.test(s);p&&(g.prototype[s]=function(){var T=this.__wrapped__,C=l?[1]:arguments,N=T instanceof st,W=C[0],B=N||xt(T),U=function(qt){var Pt=p.apply(g,Ts([qt],C));return l&&Y?Pt[0]:Pt};B&&a&&"function"==typeof W&&1!=W.length&&(N=B=!1);var Y=this.__chain__,mt=v&&!Y,Et=N&&!this.__actions__.length;if(!v&&B){T=Et?T:new st(this);var gt=n.apply(T,C);return gt.__actions__.push({func:Tc,args:[U],thisArg:x}),new bn(gt,Y)}return mt&&Et?n.apply(this,C):(gt=this.thru(U),mt?l?gt.value()[0]:gt.value():gt)})}),wn(["pop","push","shift","sort","splice","unshift"],function(n){var s=Hr[n],a=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",l=/^(?:pop|shift)$/.test(n);g.prototype[n]=function(){var p=arguments;if(l&&!this.__chain__){var v=this.value();return s.apply(xt(v)?v:[],p)}return this[a](function(T){return s.apply(xt(T)?T:[],p)})}}),An(st.prototype,function(n,s){var a=g[s];if(a){var l=a.name+"";jt.call(Ys,l)||(Ys[l]=[]),Ys[l].push({name:s,func:a})}}),Ys[dr(x,2).name]=[{name:"wrapper",func:x}],st.prototype.clone=function Ee(){var n=new st(this.__wrapped__);return n.__actions__=me(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=me(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=me(this.__views__),n},st.prototype.reverse=function Ht(){if(this.__filtered__){var n=new st(this);n.__dir__=-1,n.__filtered__=!0}else(n=this.clone()).__dir__*=-1;return n},st.prototype.value=function el(){var n=this.__wrapped__.value(),s=this.__dir__,a=xt(n),l=s<0,p=a?n.length:0,v=function nf(n,s,a){for(var l=-1,p=a.length;++l<p;){var v=a[l],T=v.size;switch(v.type){case"drop":n+=T;break;case"dropRight":s-=T;break;case"take":s=Be(s,n+T);break;case"takeRight":n=ue(n,s-T)}}return{start:n,end:s}}(0,p,this.__views__),T=v.start,C=v.end,N=C-T,W=l?C:T-1,B=this.__iteratees__,U=B.length,Y=0,ot=Be(N,this.__takeCount__);if(!a||!l&&p==N&&ot==N)return Ol(n,this.__actions__);var mt=[];t:for(;N--&&Y<ot;){for(var Et=-1,gt=n[W+=s];++Et<U;){var qt=B[Et],Hn=qt.type,yn=(0,qt.iteratee)(gt);if(2==Hn)gt=yn;else if(!yn){if(1==Hn)continue t;break t}}mt[Y++]=gt}return mt},g.prototype.at=Gf,g.prototype.chain=function Uf(){return Bo(this)},g.prototype.commit=function zf(){return new bn(this.value(),this.__chain__)},g.prototype.next=function jf(){this.__values__===x&&(this.__values__=nh(this.value()));var n=this.__index__>=this.__values__.length;return{done:n,value:n?x:this.__values__[this.__index__++]}},g.prototype.plant=function Qf(n){for(var s,a=this;a instanceof ye;){var l=Fs(a);l.__index__=0,l.__values__=x,s?p.__wrapped__=l:s=l;var p=l;a=a.__wrapped__}return p.__wrapped__=n,s},g.prototype.reverse=function bc(){var n=this.__wrapped__;if(n instanceof st){var s=n;return this.__actions__.length&&(s=new st(this)),(s=s.reverse()).__actions__.push({func:Tc,args:[ri],thisArg:x}),new bn(s,this.__chain__)}return this.thru(ri)},g.prototype.toJSON=g.prototype.valueOf=g.prototype.value=function Sc(){return Ol(this.__wrapped__,this.__actions__)},g.prototype.first=g.prototype.head,nr&&(g.prototype[nr]=function Zf(){return this}),g}();qe._=Qr,(_t=function(){return Qr}.call(Yt,bt,Yt,J))!==x&&(J.exports=_t)}.call(this)},3897:J=>{J.exports=function Yt(bt,_t){(null==_t||_t>bt.length)&&(_t=bt.length);for(var x=0,Lt=new Array(_t);x<_t;x++)Lt[x]=bt[x];return Lt},J.exports.__esModule=!0,J.exports.default=J.exports},5372:J=>{J.exports=function Yt(bt){if(Array.isArray(bt))return bt},J.exports.__esModule=!0,J.exports.default=J.exports},6690:J=>{J.exports=function Yt(bt,_t){if(!(bt instanceof _t))throw new TypeError("Cannot call a class as a function")},J.exports.__esModule=!0,J.exports.default=J.exports},9728:(J,Yt,bt)=>{var _t=bt(4062);function x(ut,A){for(var Ft=0;Ft<A.length;Ft++){var de=A[Ft];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty(ut,_t(de.key),de)}}J.exports=function Lt(ut,A,Ft){return A&&x(ut.prototype,A),Ft&&x(ut,Ft),Object.defineProperty(ut,"prototype",{writable:!1}),ut},J.exports.__esModule=!0,J.exports.default=J.exports},8872:J=>{J.exports=function Yt(bt,_t){var x=null==bt?null:typeof Symbol<"u"&&bt[Symbol.iterator]||bt["@@iterator"];if(null!=x){var Lt,ut,A,Ft,de=[],Oe=!0,Ps=!1;try{if(A=(x=x.call(bt)).next,0===_t){if(Object(x)!==x)return;Oe=!1}else for(;!(Oe=(Lt=A.call(x)).done)&&(de.push(Lt.value),de.length!==_t);Oe=!0);}catch(rn){Ps=!0,ut=rn}finally{try{if(!Oe&&null!=x.return&&(Ft=x.return(),Object(Ft)!==Ft))return}finally{if(Ps)throw ut}}return de}},J.exports.__esModule=!0,J.exports.default=J.exports},2218:J=>{J.exports=function Yt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},J.exports.__esModule=!0,J.exports.default=J.exports},7424:(J,Yt,bt)=>{var _t=bt(5372),x=bt(8872),Lt=bt(6116),ut=bt(2218);J.exports=function A(Ft,de){return _t(Ft)||x(Ft,de)||Lt(Ft,de)||ut()},J.exports.__esModule=!0,J.exports.default=J.exports},5036:(J,Yt,bt)=>{var _t=bt(8698).default;J.exports=function x(Lt,ut){if("object"!==_t(Lt)||null===Lt)return Lt;var A=Lt[Symbol.toPrimitive];if(void 0!==A){var Ft=A.call(Lt,ut||"default");if("object"!==_t(Ft))return Ft;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===ut?String:Number)(Lt)},J.exports.__esModule=!0,J.exports.default=J.exports},4062:(J,Yt,bt)=>{var _t=bt(8698).default,x=bt(5036);J.exports=function Lt(ut){var A=x(ut,"string");return"symbol"===_t(A)?A:String(A)},J.exports.__esModule=!0,J.exports.default=J.exports},8698:J=>{function Yt(bt){return J.exports=Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_t){return typeof _t}:function(_t){return _t&&"function"==typeof Symbol&&_t.constructor===Symbol&&_t!==Symbol.prototype?"symbol":typeof _t},J.exports.__esModule=!0,J.exports.default=J.exports,Yt(bt)}J.exports=Yt,J.exports.__esModule=!0,J.exports.default=J.exports},6116:(J,Yt,bt)=>{var _t=bt(3897);J.exports=function x(Lt,ut){if(Lt){if("string"==typeof Lt)return _t(Lt,ut);var A=Object.prototype.toString.call(Lt).slice(8,-1);if("Object"===A&&Lt.constructor&&(A=Lt.constructor.name),"Map"===A||"Set"===A)return Array.from(Lt);if("Arguments"===A||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return _t(Lt,ut)}},J.exports.__esModule=!0,J.exports.default=J.exports}}]);