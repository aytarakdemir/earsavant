(self.webpackChunkcomms=self.webpackChunkcomms||[]).push([[487],{3487:(tt,Yt,Tt)=>{"use strict";Tt.r(Yt),Tt.d(Yt,{FunctionalTrainerModule:()=>Gt});var gt=Tt(6814),x=Tt(4225),k=Tt(4946),Ut=Tt(6990);const Lt="14.7.77";var Ot=Tt(9884);const Ne=new WeakSet,yn=new WeakMap,xn=new WeakMap,Pe=new WeakMap,Kn=new WeakMap,Ee=new WeakMap,wn=new WeakMap,xs=new WeakMap,ge=new WeakMap,Pn=new WeakMap,Je={construct:()=>Je},Tn=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Ln=(r,t)=>{const e=[];let i=r.replace(/^[\s]+/,""),o=i.match(Tn);for(;null!==o;){const c=o[1].slice(1,-1),u=o[0].replace(/([\s]+)?;?$/,"").replace(c,new URL(c,t).toString());e.push(u),i=i.slice(o[0].length).replace(/^[\s]+/,""),o=i.match(Tn)}return[e.join(";"),i]},fi=r=>{if(void 0!==r&&!Array.isArray(r))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},qr=r=>{if(!(r=>{try{new new Proxy(r,Je)}catch{return!1}return!0})(r))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===r.prototype||"object"!=typeof r.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},on=(r,t)=>{const e=r.get(t);if(void 0===e)throw new Error("A value with the given key could not be found.");return e},pi=(r,t)=>{const e=Array.from(r).filter(t);if(e.length>1)throw Error("More than one element was found.");if(0===e.length)throw Error("No element was found.");const[i]=e;return r.delete(i),i},Wi=(r,t,e,i)=>{const o=on(r,t),c=pi(o,u=>u[0]===e&&u[1]===i);return 0===o.size&&r.delete(t),c},qt=r=>on(wn,r),X=r=>{if(Ne.has(r))throw new Error("The AudioNode is already stored.");Ne.add(r),qt(r).forEach(t=>t(!0))},ft=r=>"port"in r,Z=r=>{if(!Ne.has(r))throw new Error("The AudioNode is not stored.");Ne.delete(r),qt(r).forEach(t=>t(!1))},yt=(r,t)=>{!ft(r)&&t.every(e=>0===e.size)&&Z(r)},Vs={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8};function us(r,t,e,i,o,c,u){try{var d=r[c](u),h=d.value}catch(f){return void e(f)}d.done?t(h):Promise.resolve(h).then(i,o)}function Ft(r){return function(){var t=this,e=arguments;return new Promise(function(i,o){var c=r.apply(t,e);function u(h){us(c,i,o,u,d,"next",h)}function d(h){us(c,i,o,u,d,"throw",h)}u(void 0)})}}const Kt=(r,t)=>r.context===t,ls=r=>{try{r.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Fe=()=>new DOMException("","IndexSizeError"),an=r=>{var t;r.getChannelData=(t=r.getChannelData,e=>{try{return t.call(r,e)}catch(i){throw 12===i.code?Fe():i}})},Bi={numberOfChannels:1},ue=-34028234663852886e22,Me=-ue,re=r=>Ne.has(r),su={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},Te=r=>on(yn,r),Jn=r=>on(Pe,r),ji=(r,t)=>{const{activeInputs:e}=Te(r);e.forEach(o=>o.forEach(([c])=>{t.includes(r)||ji(c,[...t,r])}));const i=(r=>"playbackRate"in r)(r)?[r.playbackRate]:ft(r)?Array.from(r.parameters.values()):(r=>"frequency"in r&&"gain"in r)(r)?[r.Q,r.detune,r.frequency,r.gain]:(r=>"offset"in r)(r)?[r.offset]:(r=>!("frequency"in r)&&"gain"in r)(r)?[r.gain]:(r=>"detune"in r&&"frequency"in r)(r)?[r.detune,r.frequency]:(r=>"pan"in r)(r)?[r.pan]:[];for(const o of i){const c=Jn(o);void 0!==c&&c.activeInputs.forEach(([u])=>ji(u,t))}re(r)&&Z(r)},gi=r=>{ji(r.destination,[])},_i=r=>"context"in r,Ws=r=>_i(r[0]),Bs=(r,t,e,i)=>{for(const o of r)if(e(o)){if(i)return!1;throw Error("The set contains at least one similar element.")}return r.add(t),!0},iu=(r,t,[e,i],o)=>{Bs(r,[t,e,i],c=>c[0]===t&&c[1]===e,o)},ru=(r,[t,e,i],o)=>{const c=r.get(t);void 0===c?r.set(t,new Set([[e,i]])):Bs(c,[e,i],u=>u[0]===e,o)},Gs=r=>"inputs"in r,Zi=(r,t,e,i)=>{if(Gs(t)){const o=t.inputs[i];return r.connect(o,e,0),[o,e,0]}return r.connect(t,e,i),[t,e,i]},ou=(r,t,e)=>{for(const i of r)if(i[0]===t&&i[1]===e)return r.delete(i),i;return null},au=(r,t)=>{if(!qt(r).delete(t))throw new Error("Missing the expected event listener.")},cu=(r,t,e)=>{const i=on(r,t),o=pi(i,c=>c[0]===e);return 0===i.size&&r.delete(t),o},Qi=(r,t,e,i)=>{Gs(t)?r.disconnect(t.inputs[i],e,0):r.disconnect(t,e,i)},se=r=>on(xn,r),Hi=r=>on(Kn,r),Us=r=>xs.has(r),vi=r=>!Ne.has(r),uu=(r,t)=>new Promise(e=>{if(null!==t)e(!0);else{const i=r.createScriptProcessor(256,1,1),o=r.createGain(),c=r.createBuffer(1,2,44100),u=c.getChannelData(0);u[0]=1,u[1]=1;const d=r.createBufferSource();d.buffer=c,d.loop=!0,d.connect(i).connect(r.destination),d.connect(o),d.disconnect(o),i.onaudioprocess=h=>{const f=h.inputBuffer.getChannelData(0);Array.prototype.some.call(f,m=>1===m)?e(!0):e(!1),d.stop(),i.onaudioprocess=null,d.disconnect(i),i.disconnect(r.destination)},d.start()}}),Yi=(r,t)=>{const e=new Map;for(const i of r)for(const o of i){const c=e.get(o);e.set(o,void 0===c?1:c+1)}e.forEach((i,o)=>t(o,i))},Vr=r=>"context"in r,oa=(r,t,e,i,o)=>{const[c,u]=((r,t,e,i)=>{const{activeInputs:o,passiveInputs:c}=Te(t),u=ou(o[i],r,e);return null===u?[Wi(c,r,e,i)[2],!1]:[u[2],!0]})(r,e,i,o);if(null!==c&&(au(r,c),u&&!t&&!Us(r)&&Qi(se(r),se(e),i,o)),re(e)){const{activeInputs:d}=Te(e);yt(e,d)}},aa=(r,t,e,i)=>{const[o,c]=((r,t,e)=>{const{activeInputs:i,passiveInputs:o}=Jn(t),c=ou(i,r,e);return null===c?[cu(o,r,e)[1],!1]:[c[2],!0]})(r,e,i);null!==o&&(au(r,o),c&&!t&&!Us(r)&&se(r).disconnect(Hi(e),i))};class hu{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach((i,o)=>t.call(e,i,o,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const gh={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function Br(r,t,e,i,o){if("function"==typeof r.copyFromChannel)0===t[e].byteLength&&(t[e]=new Float32Array(128)),r.copyFromChannel(t[e],i,o);else{const c=r.getChannelData(i);if(0===t[e].byteLength)t[e]=c.slice(o,o+128);else{const u=new Float32Array(c.buffer,o*Float32Array.BYTES_PER_ELEMENT,128);t[e].set(u)}}}const Xi=(r,t,e,i,o)=>{"function"==typeof r.copyToChannel?0!==t[e].byteLength&&r.copyToChannel(t[e],i,o):0!==t[e].byteLength&&r.getChannelData(i).set(t[e],o)},Gr=(r,t)=>{const e=[];for(let i=0;i<r;i+=1){const o=[],c="number"==typeof t?t:t[i];for(let u=0;u<c;u+=1)o.push(new Float32Array(128));e.push(o)}return e},vh=function(){var r=Ft(function*(t,e,i,o,c,u,d){const h=null===e?128*Math.ceil(t.context.length/128):e.length,f=o.channelCount*o.numberOfInputs,m=c.reduce((C,q)=>C+q,0),_=0===m?null:i.createBuffer(m,h,i.sampleRate);if(void 0===u)throw new Error("Missing the processor constructor.");const y=Te(t),b=yield((r,t)=>{const e=on(Pn,r),i=se(t);return on(e,i)})(i,t),w=Gr(o.numberOfInputs,o.channelCount),S=Gr(o.numberOfOutputs,c),F=Array.from(t.parameters.keys()).reduce((C,q)=>({...C,[q]:new Float32Array(128)}),{});for(let C=0;C<h;C+=128){if(o.numberOfInputs>0&&null!==e)for(let q=0;q<o.numberOfInputs;q+=1)for(let L=0;L<o.channelCount;L+=1)Br(e,w[q],L,L,C);void 0!==u.parameterDescriptors&&null!==e&&u.parameterDescriptors.forEach(({name:q},L)=>{Br(e,F,q,f+L,C)});for(let q=0;q<o.numberOfInputs;q+=1)for(let L=0;L<c[q];L+=1)0===S[q][L].byteLength&&(S[q][L]=new Float32Array(128));try{const q=w.map((z,D)=>0===y.activeInputs[D].size?[]:z),L=d(C/i.sampleRate,i.sampleRate,()=>b.process(q,S,F));if(null!==_)for(let z=0,D=0;z<o.numberOfOutputs;z+=1){for(let I=0;I<c[z];I+=1)Xi(_,S[z],I,D+I,C);D+=c[z]}if(!L)break}catch(q){t.dispatchEvent(new ErrorEvent("processorerror",{colno:q.colno,filename:q.filename,lineno:q.lineno,message:q.message}));break}}return _});return function(e,i,o,c,u,d,h){return r.apply(this,arguments)}}(),pu={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Th={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},_u={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Sh={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Ah={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},da=r=>{const{port1:t,port2:e}=new MessageChannel;return new Promise(i=>{const o=()=>{e.onmessage=null,t.close(),e.close(),i()};e.onmessage=()=>o();try{t.postMessage(r,[r])}catch{}finally{o()}})},Su={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},$i=(r,t,e)=>{const i=t[e];if(void 0===i)throw r();return i},Eh={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Lh={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},xe=()=>new DOMException("","InvalidStateError"),Ki=()=>new DOMException("","InvalidAccessError"),Du={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},cn=(r,t,e,i,o,c,u,d,h,f,m)=>{const _=f.length;let y=d;for(let b=0;b<_;b+=1){let w=e[0]*f[b];for(let S=1;S<o;S+=1){const F=y-S&h-1;w+=e[S]*c[F],w-=r[S]*u[F]}for(let S=o;S<i;S+=1)w+=e[S]*c[y-S&h-1];for(let S=o;S<t;S+=1)w-=r[S]*u[y-S&h-1];c[y]=f[b],u[y]=w,y=y+1&h-1,m[b]=w}return y},oe={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},zs=r=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const e=r.decodeAudioData(t.buffer,()=>{});return void 0!==e&&(e.catch(()=>{}),!0)}catch{}return!1},zt=(r,t,e)=>{const i=t[e];void 0!==i&&i!==r[e]&&(r[e]=i)},be=(r,t)=>{zt(r,t,"channelCount"),zt(r,t,"channelCountMode"),zt(r,t,"channelInterpretation")},va=r=>"function"==typeof r.getFloatTimeDomainData,le=(r,t,e)=>{const i=t[e];void 0!==i&&i!==r[e].value&&(r[e].value=i)},tr=r=>{var t;r.start=(t=r.start,(e=0,i=0,o)=>{if("number"==typeof o&&o<0||i<0||e<0)throw new RangeError("The parameters can't be negative.");t.call(r,e,i,o)})},er=r=>{var t;r.stop=(t=r.stop,(e=0)=>{if(e<0)throw new RangeError("The parameter can't be negative.");t.call(r,e)})},Ta=(r,t)=>null===r?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(r*t))))),Jh=function(){var r=Ft(function*(t,e){const i=yield(r=>new Promise((t,e)=>{const{port1:i,port2:o}=new MessageChannel;i.onmessage=({data:c})=>{i.close(),o.close(),t(c)},i.onmessageerror=({data:c})=>{i.close(),o.close(),e(c)},o.postMessage(r)}))(e);return new t(i)});return function(e,i){return r.apply(this,arguments)}}(),Bu=(r,t)=>{const e=r.createBiquadFilter();return be(e,t),le(e,t,"Q"),le(e,t,"detune"),le(e,t,"frequency"),le(e,t,"gain"),zt(e,t,"type"),e},sr=(r,t)=>{const e=r.createChannelSplitter(t.numberOfOutputs);return be(e,t),(r=>{const t=r.numberOfOutputs;Object.defineProperty(r,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw xe()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:e=>{if("explicit"!==e)throw xe()}}),Object.defineProperty(r,"channelInterpretation",{get:()=>"discrete",set:e=>{if("discrete"!==e)throw xe()}})})(e),e},js=(r,t)=>(r.connect=t.connect.bind(t),r.disconnect=t.disconnect.bind(t),r),Gu=(r,t)=>{const e=r.createDelay(t.maxDelayTime);return be(e,t),le(e,t,"delayTime"),e},tn=(r,t)=>{const e=r.createGain();return be(e,t),le(e,t,"gain"),e};function Gn(r,t){const e=t[0]*t[0]+t[1]*t[1];return[(r[0]*t[0]+r[1]*t[1])/e,(r[1]*t[0]-r[0]*t[1])/e]}function Uu(r,t){return[r[0]*t[0]-r[1]*t[1],r[0]*t[1]+r[1]*t[0]]}function zu(r,t){let e=[0,0];for(let i=r.length-1;i>=0;i-=1)e=Uu(e,t),e[0]+=r[i];return e}const Rt=(r,t,e,i)=>r.createScriptProcessor(t,e,i),$t=()=>new DOMException("","NotSupportedError"),Hr={numberOfChannels:1},Ti={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},jt={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},$r={disableNormalization:!1},Qu={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},rr=()=>new DOMException("","UnknownError"),pd={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},$u=(r,t,e)=>void 0===r.copyFromChannel?r.getChannelData(e)[0]:(r.copyFromChannel(t,e),t[0]),Ku=r=>{if(null===r)return!1;const t=r.length;return t%2!=0?0!==r[Math.floor(t/2)]:r[t/2-1]+r[t/2]!==0},he=(r,t,e,i)=>{let o=r;for(;!o.hasOwnProperty(t);)o=Object.getPrototypeOf(o);const{get:c,set:u}=Object.getOwnPropertyDescriptor(o,t);Object.defineProperty(r,t,{get:e(c),set:i(u)})},Ca=(r,t,e)=>{try{r.setValueAtTime(t,e)}catch(i){if(9!==i.code)throw i;Ca(r,t,e+1e-7)}},ar=r=>{const t=r.createOscillator();try{t.start(-1)}catch(e){return e instanceof RangeError}return!1},Qs=r=>{const t=r.createBuffer(1,1,44100),e=r.createBufferSource();e.buffer=t,e.start(),e.stop();try{return e.stop(),!0}catch{return!1}},Hs=r=>{const t=r.createOscillator();try{t.stop(-1)}catch(e){return e instanceof RangeError}return!1},Ys=(r,t)=>{const e=t.createGain();r.connect(e);const i=(o=r.disconnect,()=>{o.call(r,e),r.removeEventListener("ended",i)});var o;r.addEventListener("ended",i),js(r,e),r.stop=(o=>{let c=!1;return(u=0)=>{if(c)try{o.call(r,u)}catch{e.gain.setValueAtTime(0,u)}else o.call(r,u),c=!0}})(r.stop)},bi=(r,t)=>e=>{const i={value:r};return Object.defineProperties(e,{currentTarget:i,target:i}),"function"==typeof t?t.call(r,e):t.handleEvent.call(r,e)},wd=(r=Bs,(t,e,[i,o,c],u)=>{r(t[o],[e,i,c],d=>d[0]===e&&d[1]===i,u)}),Td=(r=>(t,e,[i,o,c],u)=>{const d=t.get(i);void 0===d?t.set(i,new Set([[o,e,c]])):r(d,[o,e,c],h=>h[0]===o&&h[1]===e,u)})(Bs),bd=(r=>(t,e,i,o)=>r(t[o],c=>c[0]===e&&c[1]===i))(pi),Ju=new WeakMap,ro=(r=>t=>{var e;return null!==(e=r.get(t))&&void 0!==e?e:0})(Ju),We=((r,t)=>(e,i)=>{const o=t.get(e);if(void 0!==o)return o;const c=r.get(e);if(void 0!==c)return c;try{const u=i();return u instanceof Promise?(r.set(e,u),u.catch(()=>!1).then(d=>(r.delete(e),t.set(e,d),d))):(t.set(e,u),u)}catch{return t.set(e,!1),!1}})(new Map,new WeakMap),Sn=typeof window>"u"?null:window,g=((r,t)=>(e,i)=>{const o=e.createAnalyser();if(be(o,i),!(i.maxDecibels>i.minDecibels))throw t();return zt(o,i,"fftSize"),zt(o,i,"maxDecibels"),zt(o,i,"minDecibels"),zt(o,i,"smoothingTimeConstant"),r(va,()=>va(o))||(r=>{r.getFloatTimeDomainData=t=>{const e=new Uint8Array(t.length);r.getByteTimeDomainData(e);const i=Math.max(e.length,r.fftSize);for(let o=0;o<i;o+=1)t[o]=.0078125*(e[o]-128);return t}})(o),o})(We,Fe),Cs=(r=>t=>{const e=r(t);if(null===e.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return e.renderer})(Te),we=((r,t,e)=>function(){var i=Ft(function*(o,c,u){const d=r(o);yield Promise.all(d.activeInputs.map((h,f)=>Array.from(h).map(function(){var m=Ft(function*([_,y]){const w=yield t(_).render(_,c),S=o.context.destination;!e(_)&&(o!==S||!e(o))&&w.connect(u,y,f)});return function(_){return m.apply(this,arguments)}}())).reduce((h,f)=>[...h,...f],[]))});return function(o,c,u){return i.apply(this,arguments)}}())(Te,Cs,Us),An=((r,t,e)=>()=>{const i=new WeakMap,o=function(){var c=Ft(function*(u,d){let h=t(u);return Kt(h,d)||(h=r(d,{channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,fftSize:h.fftSize,maxDecibels:h.maxDecibels,minDecibels:h.minDecibels,smoothingTimeConstant:h.smoothingTimeConstant})),i.set(d,h),yield e(u,d,h),h});return function(d,h){return c.apply(this,arguments)}}();return{render(c,u){const d=i.get(u);return void 0!==d?Promise.resolve(d):o(c,u)}}})(g,se,we),it=(r=>t=>{const e=r.get(t);if(void 0===e)throw xe();return e})(Ee),Re=(r=>null===r?null:r.hasOwnProperty("OfflineAudioContext")?r.OfflineAudioContext:r.hasOwnProperty("webkitOfflineAudioContext")?r.webkitOfflineAudioContext:null)(Sn),Ht=(r=>t=>null!==r&&t instanceof r)(Re),tl=new WeakMap,ks=(r=>class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(e,i,o){if(null!==i){let c=this._listeners.get(i);void 0===c&&(c=r(this,i),"function"==typeof i&&this._listeners.set(i,c)),this._nativeEventTarget.addEventListener(e,c,o)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,i,o){const c=null===i?void 0:this._listeners.get(i);this._nativeEventTarget.removeEventListener(e,void 0===c?null:c,o)}})(bi),hs=(r=>null===r?null:r.hasOwnProperty("AudioContext")?r.AudioContext:r.hasOwnProperty("webkitAudioContext")?r.webkitAudioContext:null)(Sn),Oa=(r=>t=>null!==r&&t instanceof r)(hs),Da=(r=>t=>null!==r&&"function"==typeof r.AudioNode&&t instanceof r.AudioNode)(Sn),el=(r=>t=>null!==r&&"function"==typeof r.AudioParam&&t instanceof r.AudioParam)(Sn),Si=(r=>null===r?null:r.hasOwnProperty("AudioWorkletNode")?r.AudioWorkletNode:null)(Sn),Zt=((r,t,e,i,o,c,u,d,h,f,m,_,y,b,w,S)=>class extends f{constructor(C,q,L,z){super(L),this._context=C,this._nativeAudioNode=L;const D=m(C);_(D)&&!0!==e(uu,()=>uu(D,S))&&(r=>{const t=new Map;var e;r.connect=(e=r.connect.bind(r),(i,o=0,c=0)=>{const u=Vr(i)?e(i,o,c):e(i,o),d=t.get(i);return void 0===d?t.set(i,[{input:c,output:o}]):d.every(h=>h.input!==c||h.output!==o)&&d.push({input:c,output:o}),u}),r.disconnect=(e=>(i,o,c)=>{if(e.apply(r),void 0===i)t.clear();else if("number"==typeof i)for(const[u,d]of t){const h=d.filter(f=>f.output!==i);0===h.length?t.delete(u):t.set(u,h)}else if(t.has(i))if(void 0===o)t.delete(i);else{const u=t.get(i);if(void 0!==u){const d=u.filter(h=>h.output!==o&&(h.input!==c||void 0===c));0===d.length?t.delete(i):t.set(i,d)}}for(const[u,d]of t)d.forEach(h=>{Vr(u)?r.connect(u,h.output,h.input):r.connect(u,h.output)})})(r.disconnect)})(L),xn.set(this,L),wn.set(this,new Set),"closed"!==C.state&&q&&X(this),r(this,z,L)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(C){this._nativeAudioNode.channelCount=C}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(C){this._nativeAudioNode.channelCountMode=C}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(C){this._nativeAudioNode.channelInterpretation=C}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(C,q=0,L=0){if(q<0||q>=this._nativeAudioNode.numberOfOutputs)throw o();const z=m(this._context),D=w(z);if(y(C)||b(C))throw c();if(_i(C)){const E=se(C);try{const U=Zi(this._nativeAudioNode,E,q,L),H=vi(this);(D||H)&&this._nativeAudioNode.disconnect(...U),"closed"!==this.context.state&&!H&&vi(C)&&X(C)}catch(U){throw 12===U.code?c():U}if(t(this,C,q,L,D)){const U=h([this],C);Yi(U,i(D))}return C}const I=Hi(C);if("playbackRate"===I.name&&1024===I.maxValue)throw u();try{this._nativeAudioNode.connect(I,q),(D||vi(this))&&this._nativeAudioNode.disconnect(I,q)}catch(E){throw 12===E.code?c():E}if(((r,t,e,i)=>{const{activeInputs:o,passiveInputs:c}=Jn(t),{outputs:u}=Te(r),d=qt(r),h=f=>{const m=se(r),_=Hi(t);if(f){const y=cu(c,r,e);iu(o,r,y,!1),!i&&!Us(r)&&m.connect(_,e)}else{const y=((r,t,e)=>pi(r,i=>i[0]===t&&i[1]===e))(o,r,e);ru(c,y,!1),!i&&!Us(r)&&m.disconnect(_,e)}};return!!Bs(u,[t,e],f=>f[0]===t&&f[1]===e,!0)&&(d.add(h),re(r)?iu(o,r,[e,h],!0):ru(c,[r,e,h],!0),!0)})(this,C,q,D)){const E=h([this],C);Yi(E,i(D))}}disconnect(C,q,L){let z;const D=m(this._context),I=w(D);if(void 0===C)z=((r,t)=>{const e=Te(r),i=[];for(const o of e.outputs)Ws(o)?oa(r,t,...o):aa(r,t,...o),i.push(o[0]);return e.outputs.clear(),i})(this,I);else if("number"==typeof C){if(C<0||C>=this.numberOfOutputs)throw o();z=((r,t,e)=>{const i=Te(r),o=[];for(const c of i.outputs)c[1]===e&&(Ws(c)?oa(r,t,...c):aa(r,t,...c),o.push(c[0]),i.outputs.delete(c));return o})(this,I,C)}else{if(void 0!==q&&(q<0||q>=this.numberOfOutputs)||_i(C)&&void 0!==L&&(L<0||L>=C.numberOfInputs))throw o();if(z=((r,t,e,i,o)=>{const c=Te(r);return Array.from(c.outputs).filter(u=>!(u[0]!==e||void 0!==i&&u[1]!==i||void 0!==o&&u[2]!==o)).map(u=>(Ws(u)?oa(r,t,...u):aa(r,t,...u),c.outputs.delete(u),u[0]))})(this,I,C,q,L),0===z.length)throw c()}for(const M of z){const E=h([this],M);Yi(E,d)}}})((r=>(t,e,i)=>{const o=[];for(let c=0;c<i.numberOfInputs;c+=1)o.push(new Set);r.set(t,{activeInputs:o,outputs:new Set,passiveInputs:new WeakMap,renderer:e})})(yn),((r,t,e,i,o,c,u,d,h,f,m,_,y)=>{const b=new WeakMap;return(w,S,F,C,q)=>{const{activeInputs:L,passiveInputs:z}=c(S),{outputs:D}=c(w),I=d(w),M=E=>{const j=h(S),U=h(w);if(E){const H=Wi(z,w,F,C);r(L,w,H,!1),!q&&!_(w)&&e(U,j,F,C),y(S)&&X(S)}else{const H=i(L,w,F,C);t(z,C,H,!1),!q&&!_(w)&&o(U,j,F,C);const W=u(S);if(0===W)m(S)&&yt(S,L);else{const et=b.get(S);void 0!==et&&clearTimeout(et),b.set(S,setTimeout(()=>{m(S)&&yt(S,L)},1e3*W))}}};return!!f(D,[S,F,C],E=>E[0]===S&&E[1]===F&&E[2]===C,!0)&&(I.add(M),m(w)?r(L,w,[F,C,M],!0):t(z,C,[w,F,M],!0),!0)}})(wd,Td,Zi,bd,Qi,Te,ro,qt,se,Bs,re,Us,vi),We,((r,t,e,i,o,c)=>u=>(d,h)=>{const f=r.get(d);if(void 0===f){if(!u&&c(d)){const m=i(d),{outputs:_}=e(d);for(const y of _)if(Ws(y)){const b=i(y[0]);t(m,b,y[1],y[2])}else{const b=o(y[0]);m.disconnect(b,y[1])}}r.set(d,h)}else r.set(d,f+h)})(xs,Qi,Te,se,Hi,re),Fe,Ki,$t,((r,t,e,i,o,c,u,d)=>(h,f)=>{const m=t.get(h);if(void 0===m)throw new Error("Missing the expected cycle count.");const _=c(h.context),y=d(_);if(m===f){if(t.delete(h),!y&&u(h)){const b=i(h),{outputs:w}=e(h);for(const S of w)if(Ws(S)){const F=i(S[0]);r(b,F,S[1],S[2])}else{const F=o(S[0]);b.connect(F,S[1])}}}else t.set(h,m-f)})(Zi,xs,Te,se,Hi,it,re,Ht),((r,t,e)=>function i(o,c){const u=_i(c)?c:e(r,c);if((r=>"delayTime"in r)(u))return[];if(o[0]===u)return[o];if(o.includes(u))return[];const{outputs:d}=t(u);return Array.from(d).map(h=>i([...o,u],h[0])).reduce((h,f)=>h.concat(f),[])})(tl,Te,on),ks,it,Oa,Da,el,Ht,Si),Sd=((r,t,e,i,o,c)=>class extends r{constructor(d,h){const f=o(d),m={...Vs,...h},_=i(f,m);super(d,!1,_,c(f)?t():null),this._nativeAnalyserNode=_}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(d){this._nativeAnalyserNode.fftSize=d}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(d){const h=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=d,!(d>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=h,e()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(d){const h=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=d,!(this._nativeAnalyserNode.maxDecibels>d))throw this._nativeAnalyserNode.minDecibels=h,e()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(d){this._nativeAnalyserNode.smoothingTimeConstant=d}getByteFrequencyData(d){this._nativeAnalyserNode.getByteFrequencyData(d)}getByteTimeDomainData(d){this._nativeAnalyserNode.getByteTimeDomainData(d)}getFloatFrequencyData(d){this._nativeAnalyserNode.getFloatFrequencyData(d)}getFloatTimeDomainData(d){this._nativeAnalyserNode.getFloatTimeDomainData(d)}})(Zt,An,Fe,g,it,Ht),Na=new WeakSet,nl=(r=>null===r?null:r.hasOwnProperty("AudioBuffer")?r.AudioBuffer:null)(Sn),sl=(r=>t=>(r[0]=t,r[0]))(new Uint32Array(1)),Ea=((r,t)=>e=>{e.copyFromChannel=(i,o,c=0)=>{const u=r(c),d=r(o);if(d>=e.numberOfChannels)throw t();const h=e.length,f=e.getChannelData(d),m=i.length;for(let _=u<0?-u:0;_+u<h&&_<m;_+=1)i[_]=f[_+u]},e.copyToChannel=(i,o,c=0)=>{const u=r(c),d=r(o);if(d>=e.numberOfChannels)throw t();const h=e.length,f=e.getChannelData(d),m=i.length;for(let _=u<0?-u:0;_+u<h&&_<m;_+=1)f[_+u]=i[_]}})(sl,Fe),Un=(r=>t=>{var e;t.copyFromChannel=(e=t.copyFromChannel,(i,o,c=0)=>{const u=r(c),d=r(o);if(u<t.length)return e.call(t,i,d,u)}),t.copyToChannel=(e=>(i,o,c=0)=>{const u=r(c),d=r(o);if(u<t.length)return e.call(t,i,d,u)})(t.copyToChannel)})(sl),Ad=((r,t,e,i,o,c,u,d)=>{let h=null;return class ap{constructor(m){if(null===o)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:_,numberOfChannels:y,sampleRate:b}={...Bi,...m};null===h&&(h=new o(1,1,44100));const w=null!==i&&t(c,c)?new i({length:_,numberOfChannels:y,sampleRate:b}):h.createBuffer(y,_,b);if(0===w.numberOfChannels)throw e();return"function"!=typeof w.copyFromChannel?(u(w),an(w)):t(ls,()=>ls(w))||d(w),r.add(w),w}static[Symbol.hasInstance](m){return null!==m&&"object"==typeof m&&Object.getPrototypeOf(m)===ap.prototype||r.has(m)}}})(Na,We,$t,nl,Re,(r=>()=>{if(null===r)return!1;try{new r({length:1,sampleRate:44100})}catch{return!1}return!0})(nl),Ea,Un),oo=(r=>(t,e)=>{const i=r(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(i).connect(t.destination);const o=()=>{e.removeEventListener("ended",o),e.disconnect(i),i.disconnect()};e.addEventListener("ended",o)})(tn),il=((r,t,e)=>function(){var i=Ft(function*(o,c,u){const d=t(o);yield Promise.all(Array.from(d.activeInputs).map(function(){var h=Ft(function*([f,m]){const y=yield r(f).render(f,c);e(f)||y.connect(u,m)});return function(f){return h.apply(this,arguments)}}()))});return function(o,c,u){return i.apply(this,arguments)}}())(Cs,Jn,Us),ts=(r=>(t,e,i)=>r(e,t,i))(il),Ai=((r,t,e,i,o,c,u,d,h,f,m)=>(_,y)=>{const b=_.createBufferSource();return be(b,y),le(b,y,"playbackRate"),zt(b,y,"buffer"),zt(b,y,"loop"),zt(b,y,"loopEnd"),zt(b,y,"loopStart"),t(e,()=>e(_))||(r=>{r.start=(t=>{let e=!1;return(i=0,o=0,c)=>{if(e)throw xe();t.call(r,i,o,c),e=!0}})(r.start)})(b),t(i,()=>i(_))||(r=>{var t;r.start=(t=r.start,(e=0,i=0,o)=>{const c=r.buffer,u=null===c?i:Math.min(c.duration,i);null!==c&&u>c.duration-.5/r.context.sampleRate?t.call(r,e,0,0):t.call(r,e,u,o)})})(b),t(o,()=>o(_))||f(b,_),t(c,()=>c(_))||tr(b),t(u,()=>u(_))||m(b,_),t(d,()=>d(_))||er(b),r(_,b),b})(oo,We,r=>{const t=r.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},r=>{const t=r.createBufferSource(),e=r.createBuffer(1,1,44100);t.buffer=e;try{t.start(0,1)}catch{return!1}return!0},r=>{const t=r.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},ar,Qs,Hs,0,(r=>(t,e)=>{const i=e.createBuffer(1,1,44100);null===t.buffer&&(t.buffer=i),r(t,"buffer",o=>()=>{const c=o.call(t);return c===i?null:c},o=>c=>o.call(t,null===c?i:c))})(he),Ys),ze=((r,t)=>(e,i,o)=>(r(i).replay(o),t(i,e,o)))((r=>t=>{const e=r(t);if(null===e.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return e.renderer})(Jn),il),Cd=((r,t,e,i,o)=>()=>{const c=new WeakMap;let u=null,d=null;const h=function(){var f=Ft(function*(m,_){let y=e(m);const b=Kt(y,_);return b||(y=t(_,{buffer:y.buffer,channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,loop:y.loop,loopEnd:y.loopEnd,loopStart:y.loopStart,playbackRate:y.playbackRate.value}),null!==u&&y.start(...u),null!==d&&y.stop(d)),c.set(_,y),b?yield r(_,m.playbackRate,y.playbackRate):yield i(_,m.playbackRate,y.playbackRate),yield o(m,_,y),y});return function(_,y){return f.apply(this,arguments)}}();return{set start(f){u=f},set stop(f){d=f},render(f,m){const _=c.get(m);return void 0!==_?Promise.resolve(_):h(f,m)}}})(ts,Ai,se,ze,we),zn=((r,t,e,i,o,c,u,d,h,f,m,_,y)=>(b,w,S,F=null,C=null)=>{const q=S.value,L=new Ot.AutomationEventList(q),z=w?(r=>({replay(t){for(const e of r)if("exponentialRampToValue"===e.type){const{endTime:i,value:o}=e;t.exponentialRampToValueAtTime(o,i)}else if("linearRampToValue"===e.type){const{endTime:i,value:o}=e;t.linearRampToValueAtTime(o,i)}else if("setTarget"===e.type){const{startTime:i,target:o,timeConstant:c}=e;t.setTargetAtTime(o,i,c)}else if("setValue"===e.type){const{startTime:i,value:o}=e;t.setValueAtTime(o,i)}else{if("setValueCurve"!==e.type)throw new Error("Can't apply an unknown automation.");{const{duration:i,startTime:o,values:c}=e;t.setValueCurveAtTime(c,o,i)}}}}))(L):null,D={get defaultValue(){return q},get maxValue(){return null===F?S.maxValue:F},get minValue(){return null===C?S.minValue:C},get value(){return S.value},set value(I){S.value=I,D.setValueAtTime(I,b.context.currentTime)},cancelAndHoldAtTime(I){if("function"==typeof S.cancelAndHoldAtTime)null===z&&L.flush(b.context.currentTime),L.add(o(I)),S.cancelAndHoldAtTime(I);else{const M=Array.from(L).pop();null===z&&L.flush(b.context.currentTime),L.add(o(I));const E=Array.from(L).pop();S.cancelScheduledValues(I),M!==E&&void 0!==E&&("exponentialRampToValue"===E.type?S.exponentialRampToValueAtTime(E.value,E.endTime):"linearRampToValue"===E.type?S.linearRampToValueAtTime(E.value,E.endTime):"setValue"===E.type?S.setValueAtTime(E.value,E.startTime):"setValueCurve"===E.type&&S.setValueCurveAtTime(E.values,E.startTime,E.duration))}return D},cancelScheduledValues:I=>(null===z&&L.flush(b.context.currentTime),L.add(c(I)),S.cancelScheduledValues(I),D),exponentialRampToValueAtTime(I,M){if(0===I)throw new RangeError;if(!Number.isFinite(M)||M<0)throw new RangeError;const E=b.context.currentTime;return null===z&&L.flush(E),0===Array.from(L).length&&(L.add(f(q,E)),S.setValueAtTime(q,E)),L.add(u(I,M)),S.exponentialRampToValueAtTime(I,M),D},linearRampToValueAtTime(I,M){const E=b.context.currentTime;return null===z&&L.flush(E),0===Array.from(L).length&&(L.add(f(q,E)),S.setValueAtTime(q,E)),L.add(d(I,M)),S.linearRampToValueAtTime(I,M),D},setTargetAtTime:(I,M,E)=>(null===z&&L.flush(b.context.currentTime),L.add(h(I,M,E)),S.setTargetAtTime(I,M,E),D),setValueAtTime:(I,M)=>(null===z&&L.flush(b.context.currentTime),L.add(f(I,M)),S.setValueAtTime(I,M),D),setValueCurveAtTime(I,M,E){const j=I instanceof Float32Array?I:new Float32Array(I);if(null!==_&&"webkitAudioContext"===_.name){const U=M+E,H=b.context.sampleRate,W=Math.ceil(M*H),et=Math.floor(U*H),rt=et-W,nt=new Float32Array(rt);for(let at=0;at<rt;at+=1){const _t=(j.length-1)/E*((W+at)/H-M),lt=Math.floor(_t),bt=Math.ceil(_t);nt[at]=lt===bt?j[lt]:(1-(_t-lt))*j[lt]+(1-(bt-_t))*j[bt]}null===z&&L.flush(b.context.currentTime),L.add(m(nt,M,E)),S.setValueCurveAtTime(nt,M,E);const st=et/H;st<U&&y(D,nt[nt.length-1],st),y(D,j[j.length-1],U)}else null===z&&L.flush(b.context.currentTime),L.add(m(j,M,E)),S.setValueCurveAtTime(j,M,E);return D}};return e.set(D,S),t.set(D,b),r(D,z),D})((r=>(t,e)=>{r.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})})(Pe),tl,Kn,0,Ot.createCancelAndHoldAutomationEvent,Ot.createCancelScheduledValuesAutomationEvent,Ot.createExponentialRampToValueAutomationEvent,Ot.createLinearRampToValueAutomationEvent,Ot.createSetTargetAutomationEvent,Ot.createSetValueAutomationEvent,Ot.createSetValueCurveAutomationEvent,hs,Ca),jn=((r,t,e,i,o,c,u,d)=>class extends r{constructor(f,m){const _=c(f),y={...su,...m},b=o(_,y),w=u(_),S=w?t():null;super(f,!1,b,S),this._audioBufferSourceNodeRenderer=S,this._isBufferNullified=!1,this._isBufferSet=null!==y.buffer,this._nativeAudioBufferSourceNode=b,this._onended=null,this._playbackRate=e(this,w,b.playbackRate,Me,ue)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(f){if(this._nativeAudioBufferSourceNode.buffer=f,null!==f){if(this._isBufferSet)throw i();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(f){this._nativeAudioBufferSourceNode.loop=f}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(f){this._nativeAudioBufferSourceNode.loopEnd=f}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(f){this._nativeAudioBufferSourceNode.loopStart=f}get onended(){return this._onended}set onended(f){const m="function"==typeof f?d(this,f):null;this._nativeAudioBufferSourceNode.onended=m;const _=this._nativeAudioBufferSourceNode.onended;this._onended=null!==_&&_===m?f:_}get playbackRate(){return this._playbackRate}start(f=0,m=0,_){if(this._nativeAudioBufferSourceNode.start(f,m,_),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===_?[f,m]:[f,m,_]),"closed"!==this.context.state){X(this);const y=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",y),re(this)&&Z(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",y)}}stop(f=0){this._nativeAudioBufferSourceNode.stop(f),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=f)}})(Zt,Cd,zn,xe,Ai,it,Ht,bi),kd=((r,t,e,i,o,c,u,d)=>class extends r{constructor(f,m){const _=c(f),y=u(_),b=o(_,m,y);super(f,!1,b,y?t(d):null),this._isNodeOfNativeOfflineAudioContext=y,this._nativeAudioDestinationNode=b}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(f){if(this._isNodeOfNativeOfflineAudioContext)throw i();if(f>this._nativeAudioDestinationNode.maxChannelCount)throw e();this._nativeAudioDestinationNode.channelCount=f}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(f){if(this._isNodeOfNativeOfflineAudioContext)throw i();this._nativeAudioDestinationNode.channelCountMode=f}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(Zt,r=>{const t=new WeakMap,e=function(){var i=Ft(function*(o,c){const u=c.destination;return t.set(c,u),yield r(o,c,u),u});return function(c,u){return i.apply(this,arguments)}}();return{render(i,o){const c=t.get(o);return void 0!==c?Promise.resolve(c):e(i,o)}}},Fe,xe,((r,t)=>(e,i,o)=>{const c=e.destination;if(c.channelCount!==i)try{c.channelCount=i}catch{}o&&"explicit"!==c.channelCountMode&&(c.channelCountMode="explicit"),0===c.maxChannelCount&&Object.defineProperty(c,"maxChannelCount",{value:i});const u=r(e,{channelCount:i,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:1});return t(u,"channelCount",d=>()=>d.call(u),d=>h=>{d.call(u,h);try{c.channelCount=h}catch(f){if(h>c.maxChannelCount)throw f}}),t(u,"channelCountMode",d=>()=>d.call(u),d=>h=>{d.call(u,h),c.channelCountMode=h}),t(u,"channelInterpretation",d=>()=>d.call(u),d=>h=>{d.call(u,h),c.channelInterpretation=h}),Object.defineProperty(u,"maxChannelCount",{get:()=>c.maxChannelCount}),u.connect(c),u})(tn,he),it,Ht,we),Od=((r,t,e,i,o)=>()=>{const c=new WeakMap,u=function(){var d=Ft(function*(h,f){let m=e(h);const _=Kt(m,f);return _||(m=t(f,{Q:m.Q.value,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,detune:m.detune.value,frequency:m.frequency.value,gain:m.gain.value,type:m.type})),c.set(f,m),_?(yield r(f,h.Q,m.Q),yield r(f,h.detune,m.detune),yield r(f,h.frequency,m.frequency),yield r(f,h.gain,m.gain)):(yield i(f,h.Q,m.Q),yield i(f,h.detune,m.detune),yield i(f,h.frequency,m.frequency),yield i(f,h.gain,m.gain)),yield o(h,f,m),m});return function(f,m){return d.apply(this,arguments)}}();return{render(d,h){const f=c.get(h);return void 0!==f?Promise.resolve(f):u(d,h)}}})(ts,Bu,se,ze,we),Xs=(r=>(t,e)=>r.set(t,e))(Ju),Dd=((r,t,e,i,o,c,u,d)=>class extends r{constructor(f,m){const _=c(f),y={...pu,...m},b=o(_,y),w=u(_);super(f,!1,b,w?e():null),this._Q=t(this,w,b.Q,Me,ue),this._detune=t(this,w,b.detune,1200*Math.log2(Me),-1200*Math.log2(Me)),this._frequency=t(this,w,b.frequency,f.sampleRate/2,0),this._gain=t(this,w,b.gain,40*Math.log10(Me),ue),this._nativeBiquadFilterNode=b,d(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(f){this._nativeBiquadFilterNode.type=f}getFrequencyResponse(f,m,_){try{this._nativeBiquadFilterNode.getFrequencyResponse(f,m,_)}catch(y){throw 11===y.code?i():y}if(f.length!==m.length||m.length!==_.length)throw i()}})(Zt,zn,Od,Ki,Bu,it,Ht,Xs),Os=((r,t)=>(e,i,o)=>{const c=new Set;return e.connect=(u=e.connect,(d,h=0,f=0)=>{const m=0===c.size;if(t(d))return u.call(e,d,h,f),r(c,[d,h,f],_=>_[0]===d&&_[1]===h&&_[2]===f,!0),m&&i(),d;u.call(e,d,h),r(c,[d,h],_=>_[0]===d&&_[1]===h,!0),m&&i()}),e.disconnect=(u=>(d,h,f)=>{const m=c.size>0;if(void 0===d)u.apply(e),c.clear();else if("number"==typeof d){u.call(e,d);for(const y of c)y[1]===d&&c.delete(y)}else{t(d)?u.call(e,d,h,f):u.call(e,d,h);for(const y of c)y[0]===d&&(void 0===h||y[1]===h)&&(void 0===f||y[2]===f)&&c.delete(y)}m&&0===c.size&&o()})(e.disconnect),e;var u})(Bs,Da),rl=((r,t)=>(e,i)=>{i.channelCount=1,i.channelCountMode="explicit",Object.defineProperty(i,"channelCount",{get:()=>1,set:()=>{throw r()}}),Object.defineProperty(i,"channelCountMode",{get:()=>"explicit",set:()=>{throw r()}});const o=e.createBufferSource();t(i,()=>{const d=i.numberOfInputs;for(let h=0;h<d;h+=1)o.connect(i,0,h)},()=>o.disconnect(i))})(xe,Os),ds=((r,t)=>(e,i)=>{const o=e.createChannelMerger(i.numberOfInputs);return null!==r&&"webkitAudioContext"===r.name&&t(e,o),be(o,i),o})(hs,rl),Nd=((r,t,e)=>()=>{const i=new WeakMap,o=function(){var c=Ft(function*(u,d){let h=t(u);return Kt(h,d)||(h=r(d,{channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,numberOfInputs:h.numberOfInputs})),i.set(d,h),yield e(u,d,h),h});return function(d,h){return c.apply(this,arguments)}}();return{render(c,u){const d=i.get(u);return void 0!==d?Promise.resolve(d):o(c,u)}}})(ds,se,we),Ed=((r,t,e,i,o)=>class extends r{constructor(u,d){const h=i(u),f={...Th,...d};super(u,!1,e(h,f),o(h)?t():null)}})(Zt,Nd,ds,it,Ht),Fa=((r,t,e)=>()=>{const i=new WeakMap,o=function(){var c=Ft(function*(u,d){let h=t(u);return Kt(h,d)||(h=r(d,{channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,numberOfOutputs:h.numberOfOutputs})),i.set(d,h),yield e(u,d,h),h});return function(d,h){return c.apply(this,arguments)}}();return{render(c,u){const d=i.get(u);return void 0!==d?Promise.resolve(d):o(c,u)}}})(sr,se,we),ur=((r,t,e,i,o,c)=>class extends r{constructor(d,h){const f=i(d),m=(r=>({...r,channelCount:r.numberOfOutputs}))({..._u,...h});super(d,!1,e(f,m),o(f)?t():null)}})(Zt,Fa,sr,it,Ht),ao=((r,t,e,i)=>(o,{offset:c,...u})=>{const d=o.createBuffer(1,2,44100),h=t(o,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),f=e(o,{...u,gain:c}),m=d.getChannelData(0);m[0]=1,m[1]=1,h.buffer=d,h.loop=!0;const _={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(w){f.channelCount=w},get channelCountMode(){return f.channelCountMode},set channelCountMode(w){f.channelCountMode=w},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(w){f.channelInterpretation=w},get context(){return f.context},get inputs(){return[]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get offset(){return f.gain},get onended(){return h.onended},set onended(w){h.onended=w},addEventListener:(...w)=>h.addEventListener(w[0],w[1],w[2]),dispatchEvent:(...w)=>h.dispatchEvent(w[0]),removeEventListener:(...w)=>h.removeEventListener(w[0],w[1],w[2]),start(w=0){h.start.call(h,w)},stop(w=0){h.stop.call(h,w)}};return r(o,h),i(js(_,f),()=>h.connect(f),()=>h.disconnect(f))})(oo,Ai,tn,Os),Ci=((r,t,e,i,o)=>(c,u)=>{if(void 0===c.createConstantSource)return e(c,u);const d=c.createConstantSource();return be(d,u),le(d,u,"offset"),t(i,()=>i(c))||tr(d),t(o,()=>o(c))||er(d),r(c,d),d})(oo,We,ao,ar,Hs),ol=((r,t,e,i,o)=>()=>{const c=new WeakMap;let u=null,d=null;const h=function(){var f=Ft(function*(m,_){let y=e(m);const b=Kt(y,_);return b||(y=t(_,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,offset:y.offset.value}),null!==u&&y.start(u),null!==d&&y.stop(d)),c.set(_,y),b?yield r(_,m.offset,y.offset):yield i(_,m.offset,y.offset),yield o(m,_,y),y});return function(_,y){return f.apply(this,arguments)}}();return{set start(f){u=f},set stop(f){d=f},render(f,m){const _=c.get(m);return void 0!==_?Promise.resolve(_):h(f,m)}}})(ts,Ci,se,ze,we),Fd=((r,t,e,i,o,c,u)=>class extends r{constructor(h,f){const m=o(h),_={...Sh,...f},y=i(m,_),b=c(m),w=b?e():null;super(h,!1,y,w),this._constantSourceNodeRenderer=w,this._nativeConstantSourceNode=y,this._offset=t(this,b,y.offset,Me,ue),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(h){const f="function"==typeof h?u(this,h):null;this._nativeConstantSourceNode.onended=f;const m=this._nativeConstantSourceNode.onended;this._onended=null!==m&&m===f?h:m}start(h=0){if(this._nativeConstantSourceNode.start(h),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=h),"closed"!==this.context.state){X(this);const f=()=>{this._nativeConstantSourceNode.removeEventListener("ended",f),re(this)&&Z(this)};this._nativeConstantSourceNode.addEventListener("ended",f)}}stop(h=0){this._nativeConstantSourceNode.stop(h),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=h)}})(Zt,zn,ol,Ci,it,Ht,bi),es=((r,t)=>(e,i)=>{const o=e.createConvolver();if(be(o,i),i.disableNormalization===o.normalize&&(o.normalize=!i.disableNormalization),zt(o,i,"buffer"),i.channelCount>2||(t(o,"channelCount",c=>()=>c.call(o),c=>u=>{if(u>2)throw r();return c.call(o,u)}),"max"===i.channelCountMode))throw r();return t(o,"channelCountMode",c=>()=>c.call(o),c=>u=>{if("max"===u)throw r();return c.call(o,u)}),o})($t,he),Ma=((r,t,e)=>()=>{const i=new WeakMap,o=function(){var c=Ft(function*(u,d){let h=t(u);return Kt(h,d)||(h=r(d,{buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,disableNormalization:!h.normalize})),i.set(d,h),Gs(h)?yield e(u,d,h.inputs[0]):yield e(u,d,h),h});return function(d,h){return c.apply(this,arguments)}}();return{render(c,u){const d=i.get(u);return void 0!==d?Promise.resolve(d):o(c,u)}}})(es,se,we),$s=((r,t,e,i,o,c)=>class extends r{constructor(d,h){const f=i(d),m={...Ah,...h},_=e(f,m);super(d,!1,_,o(f)?t():null),this._isBufferNullified=!1,this._nativeConvolverNode=_,null!==m.buffer&&c(this,m.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(d){if(this._nativeConvolverNode.buffer=d,null===d&&null!==this._nativeConvolverNode.buffer){const h=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=h.createBuffer(1,1,h.sampleRate),this._isBufferNullified=!0,c(this,0)}else this._isBufferNullified=!1,c(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(d){this._nativeConvolverNode.normalize=d}})(Zt,Ma,es,it,Ht,Xs),Cn=((r,t,e,i,o)=>c=>{const u=new WeakMap,d=function(){var h=Ft(function*(f,m){let _=e(f);const y=Kt(_,m);return y||(_=t(m,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,delayTime:_.delayTime.value,maxDelayTime:c})),u.set(m,_),y?yield r(m,f.delayTime,_.delayTime):yield i(m,f.delayTime,_.delayTime),yield o(f,m,_),_});return function(m,_){return h.apply(this,arguments)}}();return{render(h,f){const m=u.get(f);return void 0!==m?Promise.resolve(m):d(h,f)}}})(ts,Gu,se,ze,we),Md=((r,t,e,i,o,c,u)=>class extends r{constructor(h,f){const m=o(h),_={...Su,...f},y=i(m,_),b=c(m);super(h,!1,y,b?e(_.maxDelayTime):null),this._delayTime=t(this,b,y.delayTime),u(this,_.maxDelayTime)}get delayTime(){return this._delayTime}})(Zt,zn,Cn,Gu,it,Ht,Xs),Ra=(r=>(t,e)=>{const i=t.createDynamicsCompressor();if(be(i,e),e.channelCount>2||"max"===e.channelCountMode)throw r();return le(i,e,"attack"),le(i,e,"knee"),le(i,e,"ratio"),le(i,e,"release"),le(i,e,"threshold"),i})($t),al=((r,t,e,i,o)=>()=>{const c=new WeakMap,u=function(){var d=Ft(function*(h,f){let m=e(h);const _=Kt(m,f);return _||(m=t(f,{attack:m.attack.value,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,knee:m.knee.value,ratio:m.ratio.value,release:m.release.value,threshold:m.threshold.value})),c.set(f,m),_?(yield r(f,h.attack,m.attack),yield r(f,h.knee,m.knee),yield r(f,h.ratio,m.ratio),yield r(f,h.release,m.release),yield r(f,h.threshold,m.threshold)):(yield i(f,h.attack,m.attack),yield i(f,h.knee,m.knee),yield i(f,h.ratio,m.ratio),yield i(f,h.release,m.release),yield i(f,h.threshold,m.threshold)),yield o(h,f,m),m});return function(f,m){return d.apply(this,arguments)}}();return{render(d,h){const f=c.get(h);return void 0!==f?Promise.resolve(f):u(d,h)}}})(ts,Ra,se,ze,we),lr=((r,t,e,i,o,c,u,d)=>class extends r{constructor(f,m){const _=c(f),y={...Eh,...m},b=i(_,y),w=u(_);super(f,!1,b,w?e():null),this._attack=t(this,w,b.attack),this._knee=t(this,w,b.knee),this._nativeDynamicsCompressorNode=b,this._ratio=t(this,w,b.ratio),this._release=t(this,w,b.release),this._threshold=t(this,w,b.threshold),d(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(f){const m=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=f,f>2)throw this._nativeDynamicsCompressorNode.channelCount=m,o()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(f){const m=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=f,"max"===f)throw this._nativeDynamicsCompressorNode.channelCountMode=m,o()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(Zt,zn,al,Ra,$t,it,Ht,Xs),Ds=((r,t,e,i,o)=>()=>{const c=new WeakMap,u=function(){var d=Ft(function*(h,f){let m=e(h);const _=Kt(m,f);return _||(m=t(f,{channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:m.gain.value})),c.set(f,m),_?yield r(f,h.gain,m.gain):yield i(f,h.gain,m.gain),yield o(h,f,m),m});return function(f,m){return d.apply(this,arguments)}}();return{render(d,h){const f=c.get(h);return void 0!==f?Promise.resolve(f):u(d,h)}}})(ts,tn,se,ze,we),cl=((r,t,e,i,o,c)=>class extends r{constructor(d,h){const f=o(d),m={...Lh,...h},_=i(f,m),y=c(f);super(d,!1,_,y?e():null),this._gain=t(this,y,_.gain,Me,ue)}get gain(){return this._gain}})(Zt,zn,Ds,tn,it,Ht),Rd=((r,t,e,i)=>(o,c,{channelCount:u,channelCountMode:d,channelInterpretation:h,feedback:f,feedforward:m})=>{const _=Ta(c,o.sampleRate),y=f instanceof Float64Array?f:new Float64Array(f),b=m instanceof Float64Array?m:new Float64Array(m),w=y.length,S=b.length,F=Math.min(w,S);if(0===w||w>20)throw i();if(0===y[0])throw t();if(0===S||S>20)throw i();if(0===b[0])throw t();if(1!==y[0]){for(let E=0;E<S;E+=1)b[E]/=y[0];for(let E=1;E<w;E+=1)y[E]/=y[0]}const C=e(o,_,u,u);C.channelCount=u,C.channelCountMode=d,C.channelInterpretation=h;const L=[],z=[],D=[];for(let E=0;E<u;E+=1){L.push(0);const j=new Float32Array(32),U=new Float32Array(32);j.fill(0),U.fill(0),z.push(j),D.push(U)}C.onaudioprocess=E=>{const j=E.inputBuffer,U=E.outputBuffer,H=j.numberOfChannels;for(let W=0;W<H;W+=1){const et=j.getChannelData(W),rt=U.getChannelData(W);L[W]=cn(y,w,b,S,F,z[W],D[W],L[W],32,et,rt)}};const I=o.sampleRate/2;return js({get bufferSize(){return _},get channelCount(){return C.channelCount},set channelCount(E){C.channelCount=E},get channelCountMode(){return C.channelCountMode},set channelCountMode(E){C.channelCountMode=E},get channelInterpretation(){return C.channelInterpretation},set channelInterpretation(E){C.channelInterpretation=E},get context(){return C.context},get inputs(){return[C]},get numberOfInputs(){return C.numberOfInputs},get numberOfOutputs(){return C.numberOfOutputs},addEventListener:(...E)=>C.addEventListener(E[0],E[1],E[2]),dispatchEvent:(...E)=>C.dispatchEvent(E[0]),getFrequencyResponse(E,j,U){if(E.length!==j.length||j.length!==U.length)throw r();const H=E.length;for(let W=0;W<H;W+=1){const et=-Math.PI*(E[W]/I),rt=[Math.cos(et),Math.sin(et)],at=Gn(zu(b,rt),zu(y,rt));j[W]=Math.sqrt(at[0]*at[0]+at[1]*at[1]),U[W]=Math.atan2(at[1],at[0])}},removeEventListener:(...E)=>C.removeEventListener(E[0],E[1],E[2])},C)})(Ki,xe,Rt,$t),Ks=((r,t,e,i)=>o=>r(zs,()=>zs(o))?Promise.resolve(r(i,i)).then(c=>{if(!c){const u=e(o,512,0,1);o.oncomplete=()=>{u.onaudioprocess=null,u.disconnect()},u.onaudioprocess=()=>o.currentTime,u.connect(o.destination)}return o.startRendering()}):new Promise(c=>{const u=t(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});o.oncomplete=d=>{u.disconnect(),c(d.renderedBuffer)},u.connect(o.destination),o.startRendering()}))(We,tn,Rt,((r,t)=>()=>{if(null===t)return Promise.resolve(!1);const e=new t(1,1,44100),i=r(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(o=>{e.oncomplete=()=>{i.disconnect(),o(0!==e.currentTime)},e.startRendering()})})(tn,Re)),Id=((r,t,e,i,o)=>(c,u)=>{const d=new WeakMap;let h=null;const f=function(){var m=Ft(function*(_,y){let b=null,w=t(_);const S=Kt(w,y);if(void 0===y.createIIRFilter?b=r(y,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):S||(w=y.createIIRFilter(u,c)),d.set(y,null===b?w:b),null!==b){if(null===h){if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");const C=new e(_.context.destination.channelCount,_.context.length,y.sampleRate);h=Ft(function*(){return yield i(_,C,C.destination),((r,t,e,i)=>{const o=e instanceof Float64Array?e:new Float64Array(e),c=i instanceof Float64Array?i:new Float64Array(i),u=o.length,d=c.length,h=Math.min(u,d);if(1!==o[0]){for(let w=0;w<u;w+=1)c[w]/=o[0];for(let w=1;w<d;w+=1)o[w]/=o[0]}const m=new Float32Array(32),_=new Float32Array(32),y=t.createBuffer(r.numberOfChannels,r.length,r.sampleRate),b=r.numberOfChannels;for(let w=0;w<b;w+=1){const S=r.getChannelData(w),F=y.getChannelData(w);m.fill(0),_.fill(0),cn(o,u,c,d,h,m,_,0,32,S,F)}return y})(yield o(C),y,c,u)})()}const F=yield h;return b.buffer=F,b.start(0),b}return yield i(_,y,w),w});return function(y,b){return m.apply(this,arguments)}}();return{render(m,_){const y=d.get(_);return void 0!==y?Promise.resolve(y):f(m,_)}}})(Ai,se,Re,we,Ks),ul=(r=>(t,e,i)=>{if(void 0===t.createIIRFilter)return r(t,e,i);const o=t.createIIRFilter(i.feedforward,i.feedback);return be(o,i),o})(Rd),Be=((r,t,e,i,o,c)=>class extends r{constructor(d,h){const f=i(d),m=o(f),_={...Du,...h},y=t(f,m?null:d.baseLatency,_);super(d,!1,y,m?e(_.feedback,_.feedforward):null),(r=>{var t;r.getFrequencyResponse=(t=r.getFrequencyResponse,(e,i,o)=>{if(e.length!==i.length||i.length!==o.length)throw Ki();return t.call(r,e,i,o)})})(y),this._nativeIIRFilterNode=y,c(this,1)}getFrequencyResponse(d,h,f){return this._nativeIIRFilterNode.getFrequencyResponse(d,h,f)}})(Zt,ul,Id,it,Ht,Xs),Ia=((r,t,e,i,o,c,u,d)=>(h,f)=>{const m=f.listener,{forwardX:y,forwardY:b,forwardZ:w,positionX:S,positionY:F,positionZ:C,upX:q,upY:L,upZ:z}=void 0===m.forwardX?(()=>{const D=new Float32Array(1),I=t(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),M=u(f);let E=!1,j=[0,0,-1,0,1,0],U=[0,0,0];const H=()=>{if(E)return;E=!0;const nt=i(f,256,9,0);nt.onaudioprocess=({inputBuffer:st})=>{const at=[c(st,D,0),c(st,D,1),c(st,D,2),c(st,D,3),c(st,D,4),c(st,D,5)];at.some((lt,bt)=>lt!==j[bt])&&(m.setOrientation(...at),j=at);const _t=[c(st,D,6),c(st,D,7),c(st,D,8)];_t.some((lt,bt)=>lt!==U[bt])&&(m.setPosition(..._t),U=_t)},I.connect(nt)},W=nt=>st=>{st!==j[nt]&&(j[nt]=st,m.setOrientation(...j))},et=nt=>st=>{st!==U[nt]&&(U[nt]=st,m.setPosition(...U))},rt=(nt,st,at)=>{const _t=e(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:st});_t.connect(I,0,nt),_t.start(),Object.defineProperty(_t.offset,"defaultValue",{get:()=>st});const lt=r({context:h},M,_t.offset,Me,ue);return d(lt,"value",bt=>()=>bt.call(lt),bt=>Ct=>{try{bt.call(lt,Ct)}catch(ne){if(9!==ne.code)throw ne}H(),M&&at(Ct)}),lt.cancelAndHoldAtTime=(bt=lt.cancelAndHoldAtTime,M?()=>{throw o()}:(...Ct)=>{const ne=bt.apply(lt,Ct);return H(),ne}),lt.cancelScheduledValues=(bt=>M?()=>{throw o()}:(...Ct)=>{const ne=bt.apply(lt,Ct);return H(),ne})(lt.cancelScheduledValues),lt.exponentialRampToValueAtTime=(bt=>M?()=>{throw o()}:(...Ct)=>{const ne=bt.apply(lt,Ct);return H(),ne})(lt.exponentialRampToValueAtTime),lt.linearRampToValueAtTime=(bt=>M?()=>{throw o()}:(...Ct)=>{const ne=bt.apply(lt,Ct);return H(),ne})(lt.linearRampToValueAtTime),lt.setTargetAtTime=(bt=>M?()=>{throw o()}:(...Ct)=>{const ne=bt.apply(lt,Ct);return H(),ne})(lt.setTargetAtTime),lt.setValueAtTime=(bt=>M?()=>{throw o()}:(...Ct)=>{const ne=bt.apply(lt,Ct);return H(),ne})(lt.setValueAtTime),lt.setValueCurveAtTime=(bt=>M?()=>{throw o()}:(...Ct)=>{const ne=bt.apply(lt,Ct);return H(),ne})(lt.setValueCurveAtTime),lt;var bt};return{forwardX:rt(0,0,W(0)),forwardY:rt(1,0,W(1)),forwardZ:rt(2,-1,W(2)),positionX:rt(6,0,et(0)),positionY:rt(7,0,et(1)),positionZ:rt(8,0,et(2)),upX:rt(3,0,W(3)),upY:rt(4,1,W(4)),upZ:rt(5,0,W(5))}})():m;return{get forwardX(){return y},get forwardY(){return b},get forwardZ(){return w},get positionX(){return S},get positionY(){return F},get positionZ(){return C},get upX(){return q},get upY(){return L},get upZ(){return z}}})(zn,ds,Ci,Rt,$t,$u,Ht,he),qa=new WeakMap,kn=((r,t,e,i,o,c)=>class extends e{constructor(d,h){super(d),this._nativeContext=d,Ee.set(this,d),i(d)&&o.set(d,new Set),this._destination=new r(this,h),this._listener=t(this,d),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(d){const h="function"==typeof d?c(this,d):null;this._nativeContext.onstatechange=h;const f=this._nativeContext.onstatechange;this._onstatechange=null!==f&&f===h?d:f}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(kd,Ia,ks,Ht,qa,bi),co=((r,t,e,i,o,c)=>(u,d)=>{const h=u.createOscillator();return be(h,d),le(h,d,"detune"),le(h,d,"frequency"),void 0!==d.periodicWave?h.setPeriodicWave(d.periodicWave):zt(h,d,"type"),t(e,()=>e(u))||tr(h),t(i,()=>i(u))||c(h,u),t(o,()=>o(u))||er(h),r(u,h),h})(oo,We,ar,Qs,Hs,Ys),uo=((r,t,e,i,o)=>()=>{const c=new WeakMap;let u=null,d=null,h=null;const f=function(){var m=Ft(function*(_,y){let b=e(_);const w=Kt(b,y);return w||(b=t(y,{channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,detune:b.detune.value,frequency:b.frequency.value,periodicWave:null===u?void 0:u,type:b.type}),null!==d&&b.start(d),null!==h&&b.stop(h)),c.set(y,b),w?(yield r(y,_.detune,b.detune),yield r(y,_.frequency,b.frequency)):(yield i(y,_.detune,b.detune),yield i(y,_.frequency,b.frequency)),yield o(_,y,b),b});return function(y,b){return m.apply(this,arguments)}}();return{set periodicWave(m){u=m},set start(m){d=m},set stop(m){h=m},render(m,_){const y=c.get(_);return void 0!==y?Promise.resolve(y):f(m,_)}}})(ts,co,se,ze,we),Js=((r,t,e,i,o,c,u)=>class extends r{constructor(h,f){const m=o(h),_={...Ti,...f},y=e(m,_),b=c(m),w=b?i():null,S=h.sampleRate/2;super(h,!1,y,w),this._detune=t(this,b,y.detune,153600,-153600),this._frequency=t(this,b,y.frequency,S,-S),this._nativeOscillatorNode=y,this._onended=null,this._oscillatorNodeRenderer=w,null!==this._oscillatorNodeRenderer&&void 0!==_.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=_.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(h){const f="function"==typeof h?u(this,h):null;this._nativeOscillatorNode.onended=f;const m=this._nativeOscillatorNode.onended;this._onended=null!==m&&m===f?h:m}get type(){return this._nativeOscillatorNode.type}set type(h){this._nativeOscillatorNode.type=h,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(h){this._nativeOscillatorNode.setPeriodicWave(h),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=h)}start(h=0){if(this._nativeOscillatorNode.start(h),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=h),"closed"!==this.context.state){X(this);const f=()=>{this._nativeOscillatorNode.removeEventListener("ended",f),re(this)&&Z(this)};this._nativeOscillatorNode.addEventListener("ended",f)}}stop(h=0){this._nativeOscillatorNode.stop(h),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=h)}})(Zt,zn,co,uo,it,Ht,bi),Pa=(r=>(t,e)=>{const i=r(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),o=t.createBuffer(1,2,44100);return i.buffer=o,i.loop=!0,i.connect(e),i.start(),()=>{i.stop(),i.disconnect(e)}})(Ai),Ye=((r,t,e,i,o)=>(c,{curve:u,oversample:d,...h})=>{const f=c.createWaveShaper(),m=c.createWaveShaper();be(f,h),be(m,h);const _=e(c,{...h,gain:1}),y=e(c,{...h,gain:-1}),b=e(c,{...h,gain:1}),w=e(c,{...h,gain:-1});let S=null,F=!1,C=null;const q={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(D){_.channelCount=D,y.channelCount=D,f.channelCount=D,b.channelCount=D,m.channelCount=D,w.channelCount=D},get channelCountMode(){return f.channelCountMode},set channelCountMode(D){_.channelCountMode=D,y.channelCountMode=D,f.channelCountMode=D,b.channelCountMode=D,m.channelCountMode=D,w.channelCountMode=D},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(D){_.channelInterpretation=D,y.channelInterpretation=D,f.channelInterpretation=D,b.channelInterpretation=D,m.channelInterpretation=D,w.channelInterpretation=D},get context(){return f.context},get curve(){return C},set curve(D){if(null!==D&&D.length<2)throw t();if(null===D)f.curve=D,m.curve=D;else{const I=D.length,M=new Float32Array(I+2-I%2),E=new Float32Array(I+2-I%2);M[0]=D[0],E[0]=-D[I-1];const j=Math.ceil((I+1)/2),U=(I+1)/2-1;for(let H=1;H<j;H+=1){const W=H/j*U,et=Math.floor(W),rt=Math.ceil(W);M[H]=et===rt?D[et]:(1-(W-et))*D[et]+(1-(rt-W))*D[rt],E[H]=et===rt?-D[I-1-et]:-(1-(W-et))*D[I-1-et]-(1-(rt-W))*D[I-1-rt]}M[j]=I%2==1?D[j-1]:(D[j-2]+D[j-1])/2,f.curve=M,m.curve=E}C=D,F&&(i(C)&&null===S?S=r(c,_):null!==S&&(S(),S=null))},get inputs(){return[_]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get oversample(){return f.oversample},set oversample(D){f.oversample=D,m.oversample=D},addEventListener:(...D)=>_.addEventListener(D[0],D[1],D[2]),dispatchEvent:(...D)=>_.dispatchEvent(D[0]),removeEventListener:(...D)=>_.removeEventListener(D[0],D[1],D[2])};return null!==u&&(q.curve=u instanceof Float32Array?u:new Float32Array(u)),d!==q.oversample&&(q.oversample=d),o(js(q,b),()=>{_.connect(f).connect(b),_.connect(y).connect(m).connect(w).connect(b),F=!0,i(C)&&(S=r(c,_))},()=>{_.disconnect(f),f.disconnect(b),_.disconnect(y),y.disconnect(m),m.disconnect(w),w.disconnect(b),F=!1,null!==S&&(S(),S=null)})})(Pa,xe,tn,Ku,Os),ki=((r,t,e,i,o,c,u)=>(d,h)=>{const f=d.createWaveShaper();if(null!==c&&"webkitAudioContext"===c.name&&void 0===d.createGain().gain.automationRate)return e(d,h);be(f,h);const m=null===h.curve||h.curve instanceof Float32Array?h.curve:new Float32Array(h.curve);if(null!==m&&m.length<2)throw t();zt(f,{curve:m},"curve"),zt(f,h,"oversample");let _=null,y=!1;return u(f,"curve",S=>()=>S.call(f),S=>F=>(S.call(f,F),y&&(i(F)&&null===_?_=r(d,f):!i(F)&&null!==_&&(_(),_=null)),F)),o(f,()=>{y=!0,i(f.curve)&&(_=r(d,f))},()=>{y=!1,null!==_&&(_(),_=null)})})(Pa,xe,Ye,Ku,Os,hs,he),qd=((r,t,e,i,o,c,u,d,h,f)=>(m,{coneInnerAngle:_,coneOuterAngle:y,coneOuterGain:b,distanceModel:w,maxDistance:S,orientationX:F,orientationY:C,orientationZ:q,panningModel:L,positionX:z,positionY:D,positionZ:I,refDistance:M,rolloffFactor:E,...j})=>{const U=m.createPanner();if(j.channelCount>2||"max"===j.channelCountMode)throw u();be(U,j);const H={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},W=e(m,{...H,channelInterpretation:"speakers",numberOfInputs:6}),et=i(m,{...j,gain:1}),rt=i(m,{...H,gain:1}),nt=i(m,{...H,gain:0}),st=i(m,{...H,gain:0}),at=i(m,{...H,gain:0}),_t=i(m,{...H,gain:0}),lt=i(m,{...H,gain:0}),bt=o(m,256,6,1),Ct=c(m,{...H,curve:new Float32Array([1,1]),oversample:"none"});let ne=[F,C,q],Ce=[z,D,I];const Ke=new Float32Array(1);bt.onaudioprocess=({inputBuffer:$})=>{const ke=[h($,Ke,0),h($,Ke,1),h($,Ke,2)];ke.some((li,hi)=>li!==ne[hi])&&(U.setOrientation(...ke),ne=ke);const cs=[h($,Ke,3),h($,Ke,4),h($,Ke,5)];cs.some((li,hi)=>li!==Ce[hi])&&(U.setPosition(...cs),Ce=cs)},Object.defineProperty(nt.gain,"defaultValue",{get:()=>0}),Object.defineProperty(st.gain,"defaultValue",{get:()=>0}),Object.defineProperty(at.gain,"defaultValue",{get:()=>0}),Object.defineProperty(_t.gain,"defaultValue",{get:()=>0}),Object.defineProperty(lt.gain,"defaultValue",{get:()=>0});const kt={get bufferSize(){},get channelCount(){return U.channelCount},set channelCount($){if($>2)throw u();et.channelCount=$,U.channelCount=$},get channelCountMode(){return U.channelCountMode},set channelCountMode($){if("max"===$)throw u();et.channelCountMode=$,U.channelCountMode=$},get channelInterpretation(){return U.channelInterpretation},set channelInterpretation($){et.channelInterpretation=$,U.channelInterpretation=$},get coneInnerAngle(){return U.coneInnerAngle},set coneInnerAngle($){U.coneInnerAngle=$},get coneOuterAngle(){return U.coneOuterAngle},set coneOuterAngle($){U.coneOuterAngle=$},get coneOuterGain(){return U.coneOuterGain},set coneOuterGain($){if($<0||$>1)throw t();U.coneOuterGain=$},get context(){return U.context},get distanceModel(){return U.distanceModel},set distanceModel($){U.distanceModel=$},get inputs(){return[et]},get maxDistance(){return U.maxDistance},set maxDistance($){if($<0)throw new RangeError;U.maxDistance=$},get numberOfInputs(){return U.numberOfInputs},get numberOfOutputs(){return U.numberOfOutputs},get orientationX(){return rt.gain},get orientationY(){return nt.gain},get orientationZ(){return st.gain},get panningModel(){return U.panningModel},set panningModel($){U.panningModel=$},get positionX(){return at.gain},get positionY(){return _t.gain},get positionZ(){return lt.gain},get refDistance(){return U.refDistance},set refDistance($){if($<0)throw new RangeError;U.refDistance=$},get rolloffFactor(){return U.rolloffFactor},set rolloffFactor($){if($<0)throw new RangeError;U.rolloffFactor=$},addEventListener:(...$)=>et.addEventListener($[0],$[1],$[2]),dispatchEvent:(...$)=>et.dispatchEvent($[0]),removeEventListener:(...$)=>et.removeEventListener($[0],$[1],$[2])};return _!==kt.coneInnerAngle&&(kt.coneInnerAngle=_),y!==kt.coneOuterAngle&&(kt.coneOuterAngle=y),b!==kt.coneOuterGain&&(kt.coneOuterGain=b),w!==kt.distanceModel&&(kt.distanceModel=w),S!==kt.maxDistance&&(kt.maxDistance=S),F!==kt.orientationX.value&&(kt.orientationX.value=F),C!==kt.orientationY.value&&(kt.orientationY.value=C),q!==kt.orientationZ.value&&(kt.orientationZ.value=q),L!==kt.panningModel&&(kt.panningModel=L),z!==kt.positionX.value&&(kt.positionX.value=z),D!==kt.positionY.value&&(kt.positionY.value=D),I!==kt.positionZ.value&&(kt.positionZ.value=I),M!==kt.refDistance&&(kt.refDistance=M),E!==kt.rolloffFactor&&(kt.rolloffFactor=E),(1!==ne[0]||0!==ne[1]||0!==ne[2])&&U.setOrientation(...ne),(0!==Ce[0]||0!==Ce[1]||0!==Ce[2])&&U.setPosition(...Ce),f(js(kt,U),()=>{et.connect(U),r(et,Ct,0,0),Ct.connect(rt).connect(W,0,0),Ct.connect(nt).connect(W,0,1),Ct.connect(st).connect(W,0,2),Ct.connect(at).connect(W,0,3),Ct.connect(_t).connect(W,0,4),Ct.connect(lt).connect(W,0,5),W.connect(bt).connect(m.destination)},()=>{et.disconnect(U),d(et,Ct,0,0),Ct.disconnect(rt),rt.disconnect(W),Ct.disconnect(nt),nt.disconnect(W),Ct.disconnect(st),st.disconnect(W),Ct.disconnect(at),at.disconnect(W),Ct.disconnect(_t),_t.disconnect(W),Ct.disconnect(lt),lt.disconnect(W),W.disconnect(bt),bt.disconnect(m.destination)})})(Zi,xe,ds,tn,Rt,ki,$t,Qi,$u,Os),ll=(r=>(t,e)=>{const i=t.createPanner();return void 0===i.orientationX?r(t,e):(be(i,e),le(i,e,"orientationX"),le(i,e,"orientationY"),le(i,e,"orientationZ"),le(i,e,"positionX"),le(i,e,"positionY"),le(i,e,"positionZ"),zt(i,e,"coneInnerAngle"),zt(i,e,"coneOuterAngle"),zt(i,e,"coneOuterGain"),zt(i,e,"distanceModel"),zt(i,e,"maxDistance"),zt(i,e,"panningModel"),zt(i,e,"refDistance"),zt(i,e,"rolloffFactor"),i)})(qd),Pd=((r,t,e,i,o,c,u,d,h,f)=>()=>{const m=new WeakMap;let _=null;const y=function(){var b=Ft(function*(w,S){let F=null,C=c(w);const q={channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation},L={...q,coneInnerAngle:C.coneInnerAngle,coneOuterAngle:C.coneOuterAngle,coneOuterGain:C.coneOuterGain,distanceModel:C.distanceModel,maxDistance:C.maxDistance,panningModel:C.panningModel,refDistance:C.refDistance,rolloffFactor:C.rolloffFactor},z=Kt(C,S);if("bufferSize"in C)F=i(S,{...q,gain:1});else if(!z){const D={...L,orientationX:C.orientationX.value,orientationY:C.orientationY.value,orientationZ:C.orientationZ.value,positionX:C.positionX.value,positionY:C.positionY.value,positionZ:C.positionZ.value};C=o(S,D)}if(m.set(S,null===F?C:F),null!==F){if(null===_){if(null===u)throw new Error("Missing the native OfflineAudioContext constructor.");const W=new u(6,w.context.length,S.sampleRate),et=t(W,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});et.connect(W.destination),_=Ft(function*(){const rt=yield Promise.all([w.orientationX,w.orientationY,w.orientationZ,w.positionX,w.positionY,w.positionZ].map(function(){var nt=Ft(function*(st,at){const _t=e(W,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===at?1:0});return yield d(W,st,_t.offset),_t});return function(st,at){return nt.apply(this,arguments)}}()));for(let nt=0;nt<6;nt+=1)rt[nt].connect(et,0,nt),rt[nt].start(0);return f(W)})()}const D=yield _,I=i(S,{...q,gain:1});yield h(w,S,I);const M=[];for(let W=0;W<D.numberOfChannels;W+=1)M.push(D.getChannelData(W));let E=[M[0][0],M[1][0],M[2][0]],j=[M[3][0],M[4][0],M[5][0]],U=i(S,{...q,gain:1}),H=o(S,{...L,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:j[0],positionY:j[1],positionZ:j[2]});I.connect(U).connect(H.inputs[0]),H.connect(F);for(let W=128;W<D.length;W+=128){const et=[M[0][W],M[1][W],M[2][W]],rt=[M[3][W],M[4][W],M[5][W]];if(et.some((nt,st)=>nt!==E[st])||rt.some((nt,st)=>nt!==j[st])){E=et,j=rt;const nt=W/S.sampleRate;U.gain.setValueAtTime(0,nt),U=i(S,{...q,gain:0}),H=o(S,{...L,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:j[0],positionY:j[1],positionZ:j[2]}),U.gain.setValueAtTime(1,nt),I.connect(U).connect(H.inputs[0]),H.connect(F)}}return F}return z?(yield r(S,w.orientationX,C.orientationX),yield r(S,w.orientationY,C.orientationY),yield r(S,w.orientationZ,C.orientationZ),yield r(S,w.positionX,C.positionX),yield r(S,w.positionY,C.positionY),yield r(S,w.positionZ,C.positionZ)):(yield d(S,w.orientationX,C.orientationX),yield d(S,w.orientationY,C.orientationY),yield d(S,w.orientationZ,C.orientationZ),yield d(S,w.positionX,C.positionX),yield d(S,w.positionY,C.positionY),yield d(S,w.positionZ,C.positionZ)),Gs(C)?yield h(w,S,C.inputs[0]):yield h(w,S,C),C});return function(S,F){return b.apply(this,arguments)}}();return{render(b,w){const S=m.get(w);return void 0!==S?Promise.resolve(S):y(b,w)}}})(ts,ds,Ci,tn,ll,se,Re,ze,we,Ks),La=((r,t,e,i,o,c,u)=>class extends r{constructor(h,f){const m=o(h),_={...jt,...f},y=e(m,_),b=c(m);super(h,!1,y,b?i():null),this._nativePannerNode=y,this._orientationX=t(this,b,y.orientationX,Me,ue),this._orientationY=t(this,b,y.orientationY,Me,ue),this._orientationZ=t(this,b,y.orientationZ,Me,ue),this._positionX=t(this,b,y.positionX,Me,ue),this._positionY=t(this,b,y.positionY,Me,ue),this._positionZ=t(this,b,y.positionZ,Me,ue),u(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(h){this._nativePannerNode.coneInnerAngle=h}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(h){this._nativePannerNode.coneOuterAngle=h}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(h){this._nativePannerNode.coneOuterGain=h}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(h){this._nativePannerNode.distanceModel=h}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(h){this._nativePannerNode.maxDistance=h}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(h){this._nativePannerNode.panningModel=h}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(h){this._nativePannerNode.refDistance=h}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(h){this._nativePannerNode.rolloffFactor=h}})(Zt,zn,ll,Pd,it,Ht,Xs),Ld=(r=>(t,{disableNormalization:e,imag:i,real:o})=>{const c=i instanceof Float32Array?i:new Float32Array(i),u=o instanceof Float32Array?o:new Float32Array(o),d=t.createPeriodicWave(u,c,{disableNormalization:e});if(Array.from(i).length<2)throw r();return d})(Fe),hr=((r,t,e,i)=>class cp{constructor(c,u){const d=t(c),h=(r=>{const{imag:t,real:e}=r;return void 0===t?void 0===e?{...r,imag:[0,0],real:[0,0]}:{...r,imag:Array.from(e,()=>0),real:e}:void 0===e?{...r,imag:t,real:Array.from(t,()=>0)}:{...r,imag:t,real:e}})({...$r,...u}),f=r(d,h);return e.add(f),f}static[Symbol.hasInstance](c){return null!==c&&"object"==typeof c&&Object.getPrototypeOf(c)===cp.prototype||e.has(c)}})(Ld,it,new WeakSet),hl=((r,t,e,i,o,c)=>{const d=new Float32Array([1,1]),h=Math.PI/2,f={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},m={...f,oversample:"none"},b=(w,S,F,C,q)=>{if(1===S)return((w,S,F,C)=>{const q=new Float32Array(16385),L=new Float32Array(16385);for(let j=0;j<16385;j+=1){const U=j/16384*h;q[j]=Math.cos(U),L[j]=Math.sin(U)}const z=e(w,{...f,gain:0}),D=i(w,{...m,curve:q}),I=i(w,{...m,curve:d}),M=e(w,{...f,gain:0}),E=i(w,{...m,curve:L});return{connectGraph(){S.connect(z),S.connect(void 0===I.inputs?I:I.inputs[0]),S.connect(M),I.connect(F),F.connect(void 0===D.inputs?D:D.inputs[0]),F.connect(void 0===E.inputs?E:E.inputs[0]),D.connect(z.gain),E.connect(M.gain),z.connect(C,0,0),M.connect(C,0,1)},disconnectGraph(){S.disconnect(z),S.disconnect(void 0===I.inputs?I:I.inputs[0]),S.disconnect(M),I.disconnect(F),F.disconnect(void 0===D.inputs?D:D.inputs[0]),F.disconnect(void 0===E.inputs?E:E.inputs[0]),D.disconnect(z.gain),E.disconnect(M.gain),z.disconnect(C,0,0),M.disconnect(C,0,1)}}})(w,F,C,q);if(2===S)return((w,S,F,C)=>{const q=new Float32Array(16385),L=new Float32Array(16385),z=new Float32Array(16385),D=new Float32Array(16385),I=Math.floor(8192.5);for(let at=0;at<16385;at+=1)if(at>I){const _t=(at-I)/(16384-I)*h;q[at]=Math.cos(_t),L[at]=Math.sin(_t),z[at]=0,D[at]=1}else{const _t=at/(16384-I)*h;q[at]=1,L[at]=0,z[at]=Math.cos(_t),D[at]=Math.sin(_t)}const M=t(w,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),E=e(w,{...f,gain:0}),j=i(w,{...m,curve:q}),U=e(w,{...f,gain:0}),H=i(w,{...m,curve:L}),W=i(w,{...m,curve:d}),et=e(w,{...f,gain:0}),rt=i(w,{...m,curve:z}),nt=e(w,{...f,gain:0}),st=i(w,{...m,curve:D});return{connectGraph(){S.connect(M),S.connect(void 0===W.inputs?W:W.inputs[0]),M.connect(E,0),M.connect(U,0),M.connect(et,1),M.connect(nt,1),W.connect(F),F.connect(void 0===j.inputs?j:j.inputs[0]),F.connect(void 0===H.inputs?H:H.inputs[0]),F.connect(void 0===rt.inputs?rt:rt.inputs[0]),F.connect(void 0===st.inputs?st:st.inputs[0]),j.connect(E.gain),H.connect(U.gain),rt.connect(et.gain),st.connect(nt.gain),E.connect(C,0,0),et.connect(C,0,0),U.connect(C,0,1),nt.connect(C,0,1)},disconnectGraph(){S.disconnect(M),S.disconnect(void 0===W.inputs?W:W.inputs[0]),M.disconnect(E,0),M.disconnect(U,0),M.disconnect(et,1),M.disconnect(nt,1),W.disconnect(F),F.disconnect(void 0===j.inputs?j:j.inputs[0]),F.disconnect(void 0===H.inputs?H:H.inputs[0]),F.disconnect(void 0===rt.inputs?rt:rt.inputs[0]),F.disconnect(void 0===st.inputs?st:st.inputs[0]),j.disconnect(E.gain),H.disconnect(U.gain),rt.disconnect(et.gain),st.disconnect(nt.gain),E.disconnect(C,0,0),et.disconnect(C,0,0),U.disconnect(C,0,1),nt.disconnect(C,0,1)}}})(w,F,C,q);throw o()};return(w,{channelCount:S,channelCountMode:F,pan:C,...q})=>{if("max"===F)throw o();const L=r(w,{...q,channelCount:1,channelCountMode:F,numberOfInputs:2}),z=e(w,{...q,channelCount:S,channelCountMode:F,gain:1}),D=e(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:C});let{connectGraph:I,disconnectGraph:M}=b(w,S,z,D,L);Object.defineProperty(D.gain,"defaultValue",{get:()=>0}),Object.defineProperty(D.gain,"maxValue",{get:()=>1}),Object.defineProperty(D.gain,"minValue",{get:()=>-1});const E={get bufferSize(){},get channelCount(){return z.channelCount},set channelCount(W){z.channelCount!==W&&(j&&M(),({connectGraph:I,disconnectGraph:M}=b(w,W,z,D,L)),j&&I()),z.channelCount=W},get channelCountMode(){return z.channelCountMode},set channelCountMode(W){if("clamped-max"===W||"max"===W)throw o();z.channelCountMode=W},get channelInterpretation(){return z.channelInterpretation},set channelInterpretation(W){z.channelInterpretation=W},get context(){return z.context},get inputs(){return[z]},get numberOfInputs(){return z.numberOfInputs},get numberOfOutputs(){return z.numberOfOutputs},get pan(){return D.gain},addEventListener:(...W)=>z.addEventListener(W[0],W[1],W[2]),dispatchEvent:(...W)=>z.dispatchEvent(W[0]),removeEventListener:(...W)=>z.removeEventListener(W[0],W[1],W[2])};let j=!1;return c(js(E,L),()=>{I(),j=!0},()=>{M(),j=!1})}})(ds,sr,tn,ki,$t,Os),dl=((r,t)=>(e,i)=>{const o=i.channelCountMode;if("clamped-max"===o)throw t();if(void 0===e.createStereoPanner)return r(e,i);const c=e.createStereoPanner();return be(c,i),le(c,i,"pan"),Object.defineProperty(c,"channelCountMode",{get:()=>o,set:u=>{if(u!==o)throw t()}}),c})(hl,$t),Vd=((r,t,e,i,o)=>()=>{const c=new WeakMap,u=function(){var d=Ft(function*(h,f){let m=e(h);const _=Kt(m,f);return _||(m=t(f,{channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,pan:m.pan.value})),c.set(f,m),_?yield r(f,h.pan,m.pan):yield i(f,h.pan,m.pan),Gs(m)?yield o(h,f,m.inputs[0]):yield o(h,f,m),m});return function(f,m){return d.apply(this,arguments)}}();return{render(d,h){const f=c.get(h);return void 0!==f?Promise.resolve(f):u(d,h)}}})(ts,dl,se,ze,we),dr=((r,t,e,i,o,c)=>class extends r{constructor(d,h){const f=o(d),m={...Qu,...h},_=e(f,m),y=c(f);super(d,!1,_,y?i():null),this._pan=t(this,y,_.pan)}get pan(){return this._pan}})(Zt,zn,dl,Vd,it,Ht),Wd=((r,t,e)=>()=>{const i=new WeakMap,o=function(){var c=Ft(function*(u,d){let h=t(u);return Kt(h,d)||(h=r(d,{channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,curve:h.curve,oversample:h.oversample})),i.set(d,h),Gs(h)?yield e(u,d,h.inputs[0]):yield e(u,d,h),h});return function(d,h){return c.apply(this,arguments)}}();return{render(c,u){const d=i.get(u);return void 0!==d?Promise.resolve(d):o(c,u)}}})(ki,se,we),Bd=((r,t,e,i,o,c,u)=>class extends r{constructor(h,f){const m=o(h),_={...pd,...f},y=e(m,_);super(h,!0,y,c(m)?i():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=y,u(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(h){if(null===h)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(h.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=h}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(h){this._nativeWaveShaperNode.oversample=h}})(Zt,xe,ki,Wd,it,Ht,Xs),lo=(r=>null!==r&&r.isSecureContext)(Sn),ho=(r=>(t,e,i)=>{Object.defineProperties(r,{currentFrame:{configurable:!0,get:()=>Math.round(t*e)},currentTime:{configurable:!0,get:()=>t}});try{return i()}finally{null!==r&&(delete r.currentFrame,delete r.currentTime)}})(Sn),fl=new WeakMap,Gd=((r,t)=>e=>{let i=r.get(e);if(void 0!==i)return i;if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");return i=new t(1,1,44100),r.set(e,i),i})(fl,Re),Ud=lo?((r,t,e,i,o,c,u,d,h,f,m,_,y)=>{let b=0;return(w,S,F={credentials:"omit"})=>{const C=m.get(w);if(void 0!==C&&C.has(S))return Promise.resolve();const q=f.get(w);if(void 0!==q){const D=q.get(S);if(void 0!==D)return D}const L=c(w),z=void 0===L.audioWorklet?o(S).then(([D,I])=>{const[M,E]=Ln(D,I);return e(`${M};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${E}\n})})(window,'_AWGS')`)}).then(()=>{const D=y._AWGS.pop();if(void 0===D)throw new SyntaxError;i(L.currentTime,L.sampleRate,()=>D(class{},void 0,(I,M)=>{if(""===I.trim())throw t();const E=ge.get(L);if(void 0!==E){if(E.has(I))throw t();qr(M),fi(M.parameterDescriptors),E.set(I,M)}else qr(M),fi(M.parameterDescriptors),ge.set(L,new Map([[I,M]]))},L.sampleRate,void 0,void 0))}):Promise.all([o(S),Promise.resolve(r(_,_))]).then(([[D,I],M])=>{const E=b+1;b=E;const[j,U]=Ln(D,I),nt=new Blob([`${j};((AudioWorkletProcessor,registerProcessor)=>{${U}\n})(${M?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${M?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${M?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${E}',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),st=URL.createObjectURL(nt);return L.audioWorklet.addModule(st,F).then(()=>{if(d(L))return L;const at=u(L);return at.audioWorklet.addModule(st,F).then(()=>at)}).then(at=>{if(null===h)throw new SyntaxError;try{new h(at,`__sac${E}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(st))});return void 0===q?f.set(w,new Map([[S,z]])):q.set(S,z),z.then(()=>{const D=m.get(w);void 0===D?m.set(w,new Set([S])):D.add(S)}).finally(()=>{const D=f.get(w);void 0!==D&&D.delete(S)}),z}})(We,$t,(r=>t=>new Promise((e,i)=>{if(null===r)return void i(new SyntaxError);const o=r.document.head;if(null===o)i(new SyntaxError);else{const c=r.document.createElement("script"),u=new Blob([t],{type:"application/javascript"}),d=URL.createObjectURL(u),h=r.onerror,f=()=>{r.onerror=h,URL.revokeObjectURL(d)};r.onerror=(m,_,y,b,w)=>_===d||_===r.location.href&&1===y&&1===b?(f(),i(w),!1):null!==h?h(m,_,y,b,w):void 0,c.onerror=()=>{f(),i(new SyntaxError)},c.onload=()=>{f(),e()},c.src=d,c.type="module",o.appendChild(c)}}))(Sn),ho,function(){var t=Ft(function*(e){try{const i=yield fetch(e);if(i.ok)return[yield i.text(),i.url]}catch{}throw new DOMException("","AbortError")});return function(e){return t.apply(this,arguments)}}(),it,Gd,Ht,Si,new WeakMap,new WeakMap,((r,t)=>Ft(function*(){if(null===r)return!0;if(null===t)return!1;const e=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),i=new t(1,128,44100),o=URL.createObjectURL(e);let c=!1,u=!1;try{yield i.audioWorklet.addModule(o);const d=new r(i,"a",{numberOfOutputs:0}),h=i.createOscillator();d.port.onmessage=()=>c=!0,d.onprocessorerror=()=>u=!0,h.connect(d),h.start(0),yield i.startRendering()}catch{}finally{URL.revokeObjectURL(o)}return c&&!u}))(Si,Re),Sn):void 0,pl=((r,t)=>e=>r(e)||t(e))(Oa,Ht),Va=((r,t,e,i,o,c,u,d,h,f,m)=>(_,y)=>{const b=u(_)?_:c(_);if(o.has(y)){const w=new DOMException("","DataCloneError");return Promise.reject(w)}try{o.add(y)}catch{}return t(h,()=>h(b))?b.decodeAudioData(y).then(w=>(da(y).catch(()=>{}),t(d,()=>d(w))||m(w),r.add(w),w)):new Promise((w,S)=>{const F=function(){var q=Ft(function*(){try{yield da(y)}catch{}});return function(){return q.apply(this,arguments)}}(),C=q=>{S(q),F()};try{b.decodeAudioData(y,q=>{"function"!=typeof q.copyFromChannel&&(f(q),an(q)),r.add(q),F().then(()=>w(q))},q=>{C(null===q?new DOMException("","EncodingError"):q)})}catch(q){C(q)}})})(Na,We,0,0,new WeakSet,it,pl,ls,zs,Ea,Un),ml=((r,t,e,i,o,c,u,d,h,f,m,_,y,b,w,S,F,C,q,L)=>class extends w{constructor(D,I){super(D,I),this._nativeContext=D,this._audioWorklet=void 0===r?void 0:{addModule:(M,E)=>r(this,M,E)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new o(this)}createBuffer(D,I,M){return new e({length:I,numberOfChannels:D,sampleRate:M})}createBufferSource(){return new i(this)}createChannelMerger(D=6){return new c(this,{numberOfInputs:D})}createChannelSplitter(D=6){return new u(this,{numberOfOutputs:D})}createConstantSource(){return new d(this)}createConvolver(){return new h(this)}createDelay(D=1){return new m(this,{maxDelayTime:D})}createDynamicsCompressor(){return new _(this)}createGain(){return new y(this)}createIIRFilter(D,I){return new b(this,{feedback:I,feedforward:D})}createOscillator(){return new S(this)}createPanner(){return new F(this)}createPeriodicWave(D,I,M={disableNormalization:!1}){return new C(this,{...M,imag:I,real:D})}createStereoPanner(){return new q(this)}createWaveShaper(){return new L(this)}decodeAudioData(D,I,M){return f(this._nativeContext,D).then(E=>("function"==typeof I&&I(E),E),E=>{throw"function"==typeof M&&M(E),E})}})(Ud,Sd,Ad,jn,Dd,Ed,ur,Fd,$s,Va,Md,lr,cl,Be,kn,Js,La,hr,dr,Bd),Wa=((r,t,e,i)=>class extends r{constructor(c,u){const d=e(c),h=((r,t)=>r.createMediaElementSource(t.mediaElement))(d,u);if(i(d))throw TypeError();super(c,!0,h,null),this._nativeMediaElementAudioSourceNode=h}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})(Zt,0,it,Ht),gl=((r,t,e,i)=>class extends r{constructor(c,u){const d=e(c);if(i(d))throw new TypeError;const f=((r,t)=>{const e=r.createMediaStreamDestination();return be(e,t),1===e.numberOfOutputs&&Object.defineProperty(e,"numberOfOutputs",{get:()=>0}),e})(d,{...oe,...u});super(c,!1,f,null),this._nativeMediaStreamAudioDestinationNode=f}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(Zt,0,it,Ht),_l=((r,t,e,i)=>class extends r{constructor(c,u){const d=e(c),h=((r,{mediaStream:t})=>{const e=t.getAudioTracks();e.sort((c,u)=>c.id<u.id?-1:c.id>u.id?1:0);const i=e.slice(0,1),o=r.createMediaStreamSource(new MediaStream(i));return Object.defineProperty(o,"mediaStream",{value:t}),o})(d,u);if(i(d))throw new TypeError;super(c,!0,h,null),this._nativeMediaStreamAudioSourceNode=h}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(Zt,0,it,Ht),vl=((r,t)=>(e,{mediaStreamTrack:i})=>{if("function"==typeof e.createMediaStreamTrackSource)return e.createMediaStreamTrackSource(i);const o=new MediaStream([i]),c=e.createMediaStreamSource(o);if("audio"!==i.kind)throw r();if(t(e))throw new TypeError;return c})(xe,Ht),fo=((r,t,e)=>class extends r{constructor(o,c){const u=e(o);super(o,!0,t(u,c),null)}})(Zt,vl,it),zd=((r,t,e,i,o,c,u,d,h)=>class extends r{constructor(m={}){if(null===h)throw new Error("Missing the native AudioContext constructor.");let _;try{_=new h(m)}catch(w){throw 12===w.code&&"sampleRate is not in range"===w.message?e():w}if(null===_)throw i();if(!(r=>void 0===r||"number"==typeof r||"string"==typeof r&&("balanced"===r||"interactive"===r||"playback"===r))(m.latencyHint))throw new TypeError(`The provided value '${m.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==m.sampleRate&&_.sampleRate!==m.sampleRate)throw e();super(_,2);const{latencyHint:y}=m,{sampleRate:b}=_;if(this._baseLatency="number"==typeof _.baseLatency?_.baseLatency:"balanced"===y?512/b:"interactive"===y||void 0===y?256/b:"playback"===y?1024/b:128*Math.max(2,Math.min(128,Math.round(y*b/128)))/b,this._nativeAudioContext=_,"webkitAudioContext"===h.name?(this._nativeGainNode=_.createGain(),this._nativeOscillatorNode=_.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(_.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===_.state){this._state="suspended";const w=()=>{"suspended"===this._state&&(this._state=null),_.removeEventListener("statechange",w)};_.addEventListener("statechange",w)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then(()=>{throw t()}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then(()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),gi(this)}))}createMediaElementSource(m){return new o(this,{mediaElement:m})}createMediaStreamDestination(){return new c(this)}createMediaStreamSource(m){return new u(this,{mediaStream:m})}createMediaStreamTrackSource(m){return new d(this,{mediaStreamTrack:m})}resume(){return"suspended"===this._state?new Promise((m,_)=>{const y=()=>{this._nativeAudioContext.removeEventListener("statechange",y),"running"===this._nativeAudioContext.state?m():this.resume().then(m,_)};this._nativeAudioContext.addEventListener("statechange",y)}):this._nativeAudioContext.resume().catch(m=>{throw void 0===m||15===m.code?t():m})}suspend(){return this._nativeAudioContext.suspend().catch(m=>{throw void 0===m?t():m})}})(ml,xe,$t,rr,Wa,gl,_l,fo,hs),po=(r=>t=>{const e=r.get(t);if(void 0===e)throw new Error("The context has no set of AudioWorkletNodes.");return e})(qa),yl=(r=>(t,e)=>{r(t).add(e)})(po),xl=(r=>(t,e,i=0,o=0)=>{const c=t[i];if(void 0===c)throw r();return Vr(e)?c.connect(e,0,o):c.connect(e,0)})(Fe),wl=(r=>(t,e)=>{r(t).delete(e)})(po),Tl=(r=>(t,e=void 0,i=void 0,o=0)=>void 0===e?t.forEach(c=>c.disconnect()):"number"==typeof e?$i(r,t,e).disconnect():Vr(e)?void 0===i?t.forEach(c=>c.disconnect(e)):void 0===o?$i(r,t,i).disconnect(e,0):$i(r,t,i).disconnect(e,0,o):void 0===i?t.forEach(c=>c.disconnect(e)):$i(r,t,i).disconnect(e,0))(Fe),mo=new WeakMap,bl=((r,t)=>e=>t(r,e))(mo,on),Ba=((r,t,e,i,o,c,u,d,h,f,m,_,y)=>(b,w,S,F)=>{if(0===F.numberOfInputs&&0===F.numberOfOutputs)throw h();const C=Array.isArray(F.outputChannelCount)?F.outputChannelCount:Array.from(F.outputChannelCount);if(C.some(K=>K<1))throw h();if(C.length!==F.numberOfOutputs)throw t();if("explicit"!==F.channelCountMode)throw h();const q=F.channelCount*F.numberOfInputs,L=C.reduce((K,vt)=>K+vt,0),z=void 0===S.parameterDescriptors?0:S.parameterDescriptors.length;if(q+z>6||L>6)throw h();const D=new MessageChannel,I=[],M=[];for(let K=0;K<F.numberOfInputs;K+=1)I.push(u(b,{channelCount:F.channelCount,channelCountMode:F.channelCountMode,channelInterpretation:F.channelInterpretation,gain:1})),M.push(o(b,{channelCount:F.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:F.channelCount}));const E=[];if(void 0!==S.parameterDescriptors)for(const{defaultValue:K,maxValue:vt,minValue:Oe,name:fe}of S.parameterDescriptors){const Bt=c(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==F.parameterData[fe]?F.parameterData[fe]:void 0===K?0:K});Object.defineProperties(Bt.offset,{defaultValue:{get:()=>void 0===K?0:K},maxValue:{get:()=>void 0===vt?Me:vt},minValue:{get:()=>void 0===Oe?ue:Oe}}),E.push(Bt)}const j=i(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,q+z)}),U=Ta(w,b.sampleRate),H=d(b,U,q+z,Math.max(1,L)),W=o(b,{channelCount:Math.max(1,L),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,L)}),et=[];for(let K=0;K<F.numberOfOutputs;K+=1)et.push(i(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:C[K]}));for(let K=0;K<F.numberOfInputs;K+=1){I[K].connect(M[K]);for(let vt=0;vt<F.channelCount;vt+=1)M[K].connect(j,vt,K*F.channelCount+vt)}const rt=new hu(void 0===S.parameterDescriptors?[]:S.parameterDescriptors.map(({name:K},vt)=>{const Oe=E[vt];return Oe.connect(j,0,q+vt),Oe.start(0),[K,Oe.offset]}));j.connect(H);let nt=F.channelInterpretation,st=null;const at=0===F.numberOfOutputs?[H]:et,_t={get bufferSize(){return U},get channelCount(){return F.channelCount},set channelCount(K){throw e()},get channelCountMode(){return F.channelCountMode},set channelCountMode(K){throw e()},get channelInterpretation(){return nt},set channelInterpretation(K){for(const vt of I)vt.channelInterpretation=K;nt=K},get context(){return H.context},get inputs(){return I},get numberOfInputs(){return F.numberOfInputs},get numberOfOutputs(){return F.numberOfOutputs},get onprocessorerror(){return st},set onprocessorerror(K){"function"==typeof st&&_t.removeEventListener("processorerror",st),st="function"==typeof K?K:null,"function"==typeof st&&_t.addEventListener("processorerror",st)},get parameters(){return rt},get port(){return D.port2},addEventListener:(...K)=>H.addEventListener(K[0],K[1],K[2]),connect:r.bind(null,at),disconnect:f.bind(null,at),dispatchEvent:(...K)=>H.dispatchEvent(K[0]),removeEventListener:(...K)=>H.removeEventListener(K[0],K[1],K[2])},lt=new Map;var K;D.port1.addEventListener=(K=D.port1.addEventListener,(...vt)=>{if("message"===vt[0]){const Oe="function"==typeof vt[1]?vt[1]:"object"==typeof vt[1]&&null!==vt[1]&&"function"==typeof vt[1].handleEvent?vt[1].handleEvent:null;if(null!==Oe){const fe=lt.get(vt[1]);void 0!==fe?vt[1]=fe:(vt[1]=Bt=>{m(b.currentTime,b.sampleRate,()=>Oe(Bt))},lt.set(Oe,vt[1]))}}return K.call(D.port1,vt[0],vt[1],vt[2])}),D.port1.removeEventListener=(K=>(...vt)=>{if("message"===vt[0]){const Oe=lt.get(vt[1]);void 0!==Oe&&(lt.delete(vt[1]),vt[1]=Oe)}return K.call(D.port1,vt[0],vt[1],vt[2])})(D.port1.removeEventListener);let bt=null;Object.defineProperty(D.port1,"onmessage",{get:()=>bt,set:K=>{"function"==typeof bt&&D.port1.removeEventListener("message",bt),bt="function"==typeof K?K:null,"function"==typeof bt&&(D.port1.addEventListener("message",bt),D.port1.start())}}),S.prototype.port=D.port1;let Ct=null;((r,t,e,i)=>{let o=Pn.get(r);void 0===o&&(o=new WeakMap,Pn.set(r,o));const c=Jh(e,i);return o.set(t,c),c})(b,_t,S,F).then(K=>Ct=K);const Ce=Gr(F.numberOfInputs,F.channelCount),Ke=Gr(F.numberOfOutputs,C),kt=void 0===S.parameterDescriptors?[]:S.parameterDescriptors.reduce((K,{name:vt})=>({...K,[vt]:new Float32Array(128)}),{});let vs=!0;const qs=()=>{F.numberOfOutputs>0&&H.disconnect(W);for(let K=0,vt=0;K<F.numberOfOutputs;K+=1){const Oe=et[K];for(let fe=0;fe<C[K];fe+=1)W.disconnect(Oe,vt+fe,fe);vt+=C[K]}},$=new Map;H.onaudioprocess=({inputBuffer:K,outputBuffer:vt})=>{if(null!==Ct){const Oe=_(_t);for(let fe=0;fe<U;fe+=128){for(let Bt=0;Bt<F.numberOfInputs;Bt+=1)for(let me=0;me<F.channelCount;me+=1)Br(K,Ce[Bt],me,me,fe);void 0!==S.parameterDescriptors&&S.parameterDescriptors.forEach(({name:Bt},me)=>{Br(K,kt,Bt,q+me,fe)});for(let Bt=0;Bt<F.numberOfInputs;Bt+=1)for(let me=0;me<C[Bt];me+=1)0===Ke[Bt][me].byteLength&&(Ke[Bt][me]=new Float32Array(128));try{const Bt=Ce.map((Rn,Ps)=>{if(Oe[Ps].size>0)return $.set(Ps,U/128),Rn;const nu=$.get(Ps);return void 0===nu?[]:(Rn.every(bf=>bf.every(Sf=>0===Sf))&&(1===nu?$.delete(Ps):$.set(Ps,nu-1)),Rn)});vs=m(b.currentTime+fe/b.sampleRate,b.sampleRate,()=>Ct.process(Bt,Ke,kt));for(let Rn=0,Ps=0;Rn<F.numberOfOutputs;Rn+=1){for(let Ir=0;Ir<C[Rn];Ir+=1)Xi(vt,Ke[Rn],Ir,Ps+Ir,fe);Ps+=C[Rn]}}catch(Bt){vs=!1,_t.dispatchEvent(new ErrorEvent("processorerror",{colno:Bt.colno,filename:Bt.filename,lineno:Bt.lineno,message:Bt.message}))}if(!vs){for(let Bt=0;Bt<F.numberOfInputs;Bt+=1){I[Bt].disconnect(M[Bt]);for(let me=0;me<F.channelCount;me+=1)M[fe].disconnect(j,me,Bt*F.channelCount+me)}if(void 0!==S.parameterDescriptors){const Bt=S.parameterDescriptors.length;for(let me=0;me<Bt;me+=1){const Rn=E[me];Rn.disconnect(j,0,q+me),Rn.stop()}}j.disconnect(H),H.onaudioprocess=null,ke?qs():hi();break}}}};let ke=!1;const cs=u(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),li=()=>H.connect(cs).connect(b.destination),hi=()=>{H.disconnect(cs),cs.disconnect()};return li(),y(_t,()=>{if(vs){hi(),F.numberOfOutputs>0&&H.connect(W);for(let K=0,vt=0;K<F.numberOfOutputs;K+=1){const Oe=et[K];for(let fe=0;fe<C[K];fe+=1)W.connect(Oe,vt+fe,fe);vt+=C[K]}}ke=!0},()=>{vs&&(li(),qs()),ke=!1})})(xl,Fe,xe,ds,sr,Ci,tn,Rt,$t,Tl,ho,bl,Os),jd=((r,t,e,i,o)=>(c,u,d,h,f,m)=>{if(null!==d)try{const _=new d(c,h,m),y=new Map;let b=null;if(Object.defineProperties(_,{channelCount:{get:()=>m.channelCount,set:()=>{throw r()}},channelCountMode:{get:()=>"explicit",set:()=>{throw r()}},onprocessorerror:{get:()=>b,set:w=>{"function"==typeof b&&_.removeEventListener("processorerror",b),b="function"==typeof w?w:null,"function"==typeof b&&_.addEventListener("processorerror",b)}}}),_.addEventListener=(w=_.addEventListener,(...S)=>{if("processorerror"===S[0]){const F="function"==typeof S[1]?S[1]:"object"==typeof S[1]&&null!==S[1]&&"function"==typeof S[1].handleEvent?S[1].handleEvent:null;if(null!==F){const C=y.get(S[1]);void 0!==C?S[1]=C:(S[1]=q=>{"error"===q.type?(Object.defineProperties(q,{type:{value:"processorerror"}}),F(q)):F(new ErrorEvent(S[0],{...q}))},y.set(F,S[1]))}}return w.call(_,"error",S[1],S[2]),w.call(_,...S)}),_.removeEventListener=(w=>(...S)=>{if("processorerror"===S[0]){const F=y.get(S[1]);void 0!==F&&(y.delete(S[1]),S[1]=F)}return w.call(_,"error",S[1],S[2]),w.call(_,S[0],S[1],S[2])})(_.removeEventListener),0!==m.numberOfOutputs){const w=e(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return _.connect(w).connect(c.destination),o(_,()=>w.disconnect(),()=>w.connect(c.destination))}return _}catch(_){throw 11===_.code?i():_}var w;if(void 0===f)throw i();return(r=>{const{port1:t}=new MessageChannel;try{t.postMessage(r)}finally{t.close()}})(m),t(c,u,f,m)})(xe,Ba,tn,$t,Os),Ga=((r,t,e,i,o,c,u,d,h,f,m,_,y,b,w,S)=>(F,C,q)=>{const L=new WeakMap;let z=null;const D=function(){var I=Ft(function*(M,E){let j=m(M),U=null;const H=Kt(j,E),W=Array.isArray(C.outputChannelCount)?C.outputChannelCount:Array.from(C.outputChannelCount);if(null===_){const et=W.reduce((at,_t)=>at+_t,0),rt=o(E,{channelCount:Math.max(1,et),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,et)}),nt=[];for(let at=0;at<M.numberOfOutputs;at+=1)nt.push(i(E,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:W[at]}));const st=u(E,{channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation,gain:1});st.connect=t.bind(null,nt),st.disconnect=h.bind(null,nt),U=[rt,nt,st]}else H||(j=new _(E,F));if(L.set(E,null===U?j:U[2]),null!==U){if(null===z){if(void 0===q)throw new Error("Missing the processor constructor.");if(null===y)throw new Error("Missing the native OfflineAudioContext constructor.");const _t=M.channelCount*M.numberOfInputs,lt=void 0===q.parameterDescriptors?0:q.parameterDescriptors.length,bt=_t+lt;z=vh(M,0===bt?null:yield function(){var ne=Ft(function*(){const Ce=new y(bt,128*Math.ceil(M.context.length/128),E.sampleRate),Ke=[],kt=[];for(let $=0;$<C.numberOfInputs;$+=1)Ke.push(u(Ce,{channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation,gain:1})),kt.push(o(Ce,{channelCount:C.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:C.channelCount}));const vs=yield Promise.all(Array.from(M.parameters.values()).map(function(){var $=Ft(function*(ke){const cs=c(Ce,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ke.value});return yield b(Ce,ke,cs.offset),cs});return function(ke){return $.apply(this,arguments)}}())),qs=i(Ce,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,_t+lt)});for(let $=0;$<C.numberOfInputs;$+=1){Ke[$].connect(kt[$]);for(let ke=0;ke<C.channelCount;ke+=1)kt[$].connect(qs,ke,$*C.channelCount+ke)}for(const[$,ke]of vs.entries())ke.connect(qs,0,_t+$),ke.start(0);return qs.connect(Ce.destination),yield Promise.all(Ke.map($=>w(M,Ce,$))),S(Ce)});return function(){return ne.apply(this,arguments)}}()(),E,C,W,q,f)}const et=yield z,rt=e(E,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[nt,st,at]=U;null!==et&&(rt.buffer=et,rt.start(0)),rt.connect(nt);for(let _t=0,lt=0;_t<M.numberOfOutputs;_t+=1){const bt=st[_t];for(let Ct=0;Ct<W[_t];Ct+=1)nt.connect(bt,lt+Ct,Ct);lt+=W[_t]}return at}if(H)for(const[et,rt]of M.parameters.entries())yield r(E,rt,j.parameters.get(et));else for(const[et,rt]of M.parameters.entries())yield b(E,rt,j.parameters.get(et));return yield w(M,E,j),j});return function(E,j){return I.apply(this,arguments)}}();return{render(I,M){d(M,I);const E=L.get(M);return void 0!==E?Promise.resolve(E):D(I,M)}}})(ts,xl,Ai,ds,sr,Ci,tn,wl,Tl,ho,se,Si,Re,ze,we,Ks),Nt=(r=>t=>r.get(t))(fl),Zd=(r=>(t,e)=>{r.set(t,e)})(mo),Sl=lo?((r,t,e,i,o,c,u,d,h,f,m,_,y,b)=>class extends t{constructor(S,F,C){var q;const L=d(S),z=h(L),D=(r=>({...r,outputChannelCount:void 0!==r.outputChannelCount?r.outputChannelCount:1===r.numberOfInputs&&1===r.numberOfOutputs?[r.channelCount]:Array.from({length:r.numberOfOutputs},()=>1)}))({...gh,...C});(r=>{const{port1:t,port2:e}=new MessageChannel;try{t.postMessage(r)}finally{t.close(),e.close()}})(D);const I=ge.get(L),M=I?.get(F),E=z||"closed"!==L.state?L:null!==(q=u(L))&&void 0!==q?q:L,j=o(E,z?null:S.baseLatency,f,F,M,D);super(S,!0,j,z?i(F,D,M):null);const H=[];j.parameters.forEach((et,rt)=>{const nt=e(this,z,et);H.push([rt,nt])}),this._nativeAudioWorkletNode=j,this._onprocessorerror=null,this._parameters=new hu(H),z&&r(L,this);const{activeInputs:W}=c(this);_(j,W)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(S){const F="function"==typeof S?b(this,S):null;this._nativeAudioWorkletNode.onprocessorerror=F;const C=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==C&&C===F?S:C}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(yl,Zt,zn,Ga,jd,Te,Nt,it,Ht,Si,0,Zd,0,bi):void 0,Ua=((r,t)=>(e,i,o)=>{if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(e,i,o)}catch(c){throw"SyntaxError"===c.name?r():c}})($t,Re),Al=((r,t,e,i,o,c,u,d)=>(h,f)=>e(h).render(h,f).then(()=>Promise.all(Array.from(i(f)).map(m=>e(m).render(m,f)))).then(()=>o(f)).then(m=>("function"!=typeof m.copyFromChannel?(u(m),an(m)):t(c,()=>c(m))||d(m),r.add(m),m)))(Na,We,Cs,po,Ks,ls,Ea,Un),On=((r,t,e,i,o)=>class extends r{constructor(u,d,h){let f;if("number"==typeof u&&void 0!==d&&void 0!==h)f={length:d,numberOfChannels:u,sampleRate:h};else{if("object"!=typeof u)throw new Error("The given parameters are not valid.");f=u}const{length:m,numberOfChannels:_,sampleRate:y}={...Hr,...f},b=i(_,m,y);t(zs,()=>zs(b))||b.addEventListener("statechange",(()=>{let w=0;const S=F=>{"running"===this._state&&(w>0?(b.removeEventListener("statechange",S),F.stopImmediatePropagation(),this._waitForThePromiseToSettle(F)):w+=1)};return S})()),super(b,_),this._length=m,this._nativeOfflineAudioContext=b,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(e()):(this._state="running",o(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,gi(this)}))}_waitForThePromiseToSettle(u){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(u):setTimeout(()=>this._waitForThePromiseToSettle(u))}})(ml,We,xe,Ua,Al),Qd=((r,t)=>e=>{const i=r.get(e);return t(i)||t(e)})(Ee,Oa),_o=((r,t)=>e=>r.has(e)||t(e))(xn,Da),za=((r,t)=>e=>r.has(e)||t(e))(Kn,el),Cl=((r,t)=>e=>{const i=r.get(e);return t(i)||t(e)})(Ee,Ht);var r;function ut(r,t){if(!r)throw new Error(t)}function Xe(r,t,e=1/0){if(!(t<=r&&r<=e))throw new RangeError(`Value must be within [${t}, ${e}], got: ${r}`)}function vo(r){!r.isOffline&&"running"!==r.state&&xo('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let yo=console;function xo(...r){yo.warn(...r)}function en(r){return typeof r>"u"}function St(r){return!en(r)}function je(r){return"number"==typeof r}function Ns(r){return"[object Object]"===Object.prototype.toString.call(r)&&r.constructor===Object}function fs(r){return"boolean"==typeof r}function hn(r){return Array.isArray(r)}function Zn(r){return"string"==typeof r}function Oi(r){return Zn(r)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(r)}function Xd(r,t,e){return new On(r,t,e)}const ti="object"==typeof self?self:null,Ol=ti&&(ti.hasOwnProperty("AudioContext")||ti.hasOwnProperty("webkitAudioContext"));var Vt=Tt(7582);class Nl{constructor(t,e,i){this._callback=t,this._type=e,this._updateInterval=i,this._createClock()}_createWorker(){const t=new Blob([`\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t`],{type:"text/javascript"}),e=URL.createObjectURL(t),i=new Worker(e);i.onmessage=this._callback.bind(this),this._worker=i}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch{this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){this._updateInterval=Math.max(t,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*t,1))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function Es(r){return za(r)}function _e(r){return _o(r)}function dn(r){return Cl(r)}function Di(r){return Qd(r)}function El(r){return r instanceof AudioBuffer}function wo(r,t){return"value"===r||Es(t)||_e(t)||El(t)}function Qn(r,...t){if(!t.length)return r;const e=t.shift();if(Ns(r)&&Ns(e))for(const i in e)wo(i,e[i])?r[i]=e[i]:Ns(e[i])?(r[i]||Object.assign(r,{[i]:{}}),Qn(r[i],e[i])):Object.assign(r,{[i]:e[i]});return Qn(r,...t)}function Q(r,t,e=[],i){const o={},c=Array.from(t);if(Ns(c[0])&&i&&!Reflect.has(c[0],i)&&(Object.keys(c[0]).some(d=>Reflect.has(r,d))||(Qn(o,{[i]:c[0]}),e.splice(e.indexOf(i),1),c.shift())),1===c.length&&Ns(c[0]))Qn(o,c[0]);else for(let u=0;u<e.length;u++)St(c[u])&&(o[e[u]]=c[u]);return Qn(r,o)}function Hn(r,t){return en(r)?t:r}function ei(r,t){return t.forEach(e=>{Reflect.has(r,e)&&delete r[e]}),r}let Dn=(()=>{class r{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||ti&&this.toString()===ti.TONE_DEBUG_CLASS)&&function kl(...r){yo.log(...r)}(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}return r.version=Lt,r})();const Qa=1e-6;function fr(r,t){return r>t+Qa}function To(r,t){return fr(r,t)||Nn(r,t)}function pr(r,t){return r+Qa<t}function Nn(r,t){return Math.abs(r-t)<Qa}class En extends Dn{constructor(){super(),this.name="Timeline",this._timeline=[];const t=Q(En.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(ut(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length)ut(To(t.time,this._timeline[this.length-1].time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t);else{const e=this._search(t.time);this._timeline.splice(e+1,0,t)}return this.length>this.memory&&this._timeline.splice(0,this.length-this.memory),this}remove(t){const e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this}get(t,e="time"){const i=this._search(t,e);return-1!==i?this._timeline[i]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){const i=this._search(t,e);return i+1<this._timeline.length?this._timeline[i+1]:null}getBefore(t){const e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];const i=this._search(t);return i-1>=0?this._timeline[i-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(Nn(this._timeline[e].time,t)){for(let i=e;i>=0&&Nn(this._timeline[i].time,t);i--)e=i;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&To(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){const e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(0===this._timeline.length)return-1;let i=0;const o=this._timeline.length;let c=o;if(o>0&&this._timeline[o-1][e]<=t)return o-1;for(;i<c;){let u=Math.floor(i+(c-i)/2);const d=this._timeline[u],h=this._timeline[u+1];if(Nn(d[e],t)){for(let f=u;f<this._timeline.length&&Nn(this._timeline[f][e],t);f++)u=f;return u}if(pr(d[e],t)&&fr(h[e],t))return u;fr(d[e],t)?c=u:i=u+1}return-1}_iterate(t,e=0,i=this._timeline.length-1){this._timeline.slice(e,i+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){const i=this._search(t);return-1!==i&&this._iterate(e,0,i),this}forEachAfter(t,e){const i=this._search(t);return this._iterate(e,i+1),this}forEachBetween(t,e,i){let o=this._search(t),c=this._search(e);return-1!==o&&-1!==c?(this._timeline[o].time!==t&&(o+=1),this._timeline[c].time===e&&(c-=1),this._iterate(i,o,c)):-1===o&&this._iterate(i,0,c),this}forEachFrom(t,e){let i=this._search(t);for(;i>=0&&this._timeline[i].time>=t;)i--;return this._iterate(e,i+1),this}forEachAtTime(t,e){const i=this._search(t);if(-1!==i&&Nn(this._timeline[i].time,t)){let o=i;for(let c=i;c>=0&&Nn(this._timeline[c].time,t);c--)o=c;this._iterate(c=>{e(c)},o,i)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const mr=[];function So(r){mr.push(r)}const gr=[];function _r(r){gr.push(r)}class vr extends Dn{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach(o=>{en(this._events)&&(this._events={}),this._events.hasOwnProperty(o)||(this._events[o]=[]),this._events[o].push(e)}),this}once(t,e){const i=(...o)=>{e(...o),this.off(t,i)};return this.on(t,i),this}off(t,e){return t.split(/\W+/).forEach(o=>{if(en(this._events)&&(this._events={}),this._events.hasOwnProperty(t))if(en(e))this._events[t]=[];else{const c=this._events[t];for(let u=c.length-1;u>=0;u--)c[u]===e&&c.splice(u,1)}}),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){const i=this._events[t].slice(0);for(let o=0,c=i.length;o<c;o++)i[o].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach(e=>{const i=Object.getOwnPropertyDescriptor(vr.prototype,e);Object.defineProperty(t.prototype,e,i)})}dispose(){return super.dispose(),this._events=void 0,this}}class Ya extends vr{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class fn extends Ya{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new En,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const t=Q(fn.getDefaults(),arguments,["context"]);this._context=t.context?t.context:function Yd(r){return new zd(r)}({latencyHint:t.latencyHint}),this._ticker=new Nl(this.emit.bind(this,"tick"),t.clockSource,t.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(t.latencyHint),this.lookAhead=t.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(function Ml(r){mr.forEach(t=>t(r))}(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,i){return this._context.createBuffer(t,e,i)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,i){return this._context.createPeriodicWave(t,e,i)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return ut(Di(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return ut(Di(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return ut(Di(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){ut(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){ut(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){ut(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){ut(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return function Dl(r,t,e){return ut(St(Sl),"This node only works in a secure context (https or localhost)"),new Sl(r,t,e)}(this.rawContext,t,e)}addAudioWorkletModule(t,e){return(0,Vt.mG)(this,void 0,void 0,function*(){ut(St(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(e)||this._workletModules.set(e,this.rawContext.audioWorklet.addModule(t)),yield this._workletModules.get(e)})}workletsAreReady(){return(0,Vt.mG)(this,void 0,void 0,function*(){const t=[];this._workletModules.forEach(e=>t.push(e)),yield Promise.all(t)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get latencyHint(){return this._latencyHint}_setLatencyHint(t){let e=0;if(this._latencyHint=t,Zn(t))switch(t){case"interactive":e=.1;break;case"playback":e=.5;break;case"balanced":e=.25}this.lookAhead=e,this.updateInterval=e/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return Di(this._context)?this._context.resume():Promise.resolve()}close(){return(0,Vt.mG)(this,void 0,void 0,function*(){Di(this._context)&&(yield this._context.close()),this._initialized&&function Ha(r){gr.forEach(t=>t(r))}(this)})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const e=this._context.createBuffer(1,128,this._context.sampleRate),i=e.getChannelData(0);for(let c=0;c<i.length;c++)i[c]=t;const o=this._context.createBufferSource();return o.channelCount=1,o.channelCountMode="explicit",o.buffer=e,o.loop=!0,o.start(0),this._constants.set(t,o),o}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this}_timeoutLoop(){const t=this.now();let e=this._timeouts.peek();for(;this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()}setTimeout(t,e){this._timeoutIds++;const i=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:i+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(e=>{e.id===t&&this._timeouts.remove(e)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){const i=++this._timeoutIds,o=()=>{const c=this.now();this._timeouts.add({callback:()=>{t(),o()},id:i,time:c+e})};return o(),i}}function de(r,t){hn(t)?t.forEach(e=>de(r,e)):Object.defineProperty(r,t,{enumerable:!0,writable:!1})}function Il(r,t){hn(t)?t.forEach(e=>Il(r,e)):Object.defineProperty(r,t,{writable:!0})}const Qt=()=>{};let ns=(()=>{class r extends Dn{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Qt;const e=Q(r.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,e.url&&El(e.url)||e.url instanceof r?this.set(e.url):Zn(e.url)&&this.load(e.url).catch(e.onerror)}static getDefaults(){return{onerror:Qt,onload:Qt,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:pn().sampleRate}set(e){return e instanceof r?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return(0,Vt.mG)(this,void 0,void 0,function*(){const i=r.load(e).then(o=>{this.set(o),this.onload(this)});r.downloads.push(i);try{yield i}finally{const o=r.downloads.indexOf(i);r.downloads.splice(o,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const i=hn(e)&&e[0].length>0,o=i?e.length:1,c=i?e[0].length:e.length,u=pn(),d=u.createBuffer(o,c,u.sampleRate),h=i||1!==o?e:[e];for(let f=0;f<o;f++)d.copyToChannel(h[f],f);return this._buffer=d,this}toMono(e){if(je(e))this.fromArray(this.toArray(e));else{let i=new Float32Array(this.length);const o=this.numberOfChannels;for(let c=0;c<o;c++){const u=this.toArray(c);for(let d=0;d<u.length;d++)i[d]+=u[d]}i=i.map(c=>c/o),this.fromArray(i)}return this}toArray(e){if(je(e))return this.getChannelData(e);if(1===this.numberOfChannels)return this.toArray(0);{const i=[];for(let o=0;o<this.numberOfChannels;o++)i[o]=this.getChannelData(o);return i}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,i=this.duration){const o=Math.floor(e*this.sampleRate),c=Math.floor(i*this.sampleRate);ut(o<c,"The start time must be less than the end time");const u=c-o,d=pn().createBuffer(this.numberOfChannels,u,this.sampleRate);for(let h=0;h<this.numberOfChannels;h++)d.copyToChannel(this.getChannelData(h).subarray(o,c),h);return new r(d)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return(new r).fromArray(e)}static fromUrl(e){return(0,Vt.mG)(this,void 0,void 0,function*(){return yield(new r).load(e)})}static load(e){return(0,Vt.mG)(this,void 0,void 0,function*(){const i=e.match(/\[([^\]\[]+\|.+)\]$/);if(i){const h=i[1].split("|");let f=h[0];for(const m of h)if(r.supportsType(m)){f=m;break}e=e.replace(i[0],f)}const o=""===r.baseUrl||r.baseUrl.endsWith("/")?r.baseUrl:r.baseUrl+"/",c=yield fetch(o+e);if(!c.ok)throw new Error(`could not load url: ${e}`);const u=yield c.arrayBuffer();return yield pn().decodeAudioData(u)})}static supportsType(e){const i=e.split("."),o=i[i.length-1];return""!==document.createElement("audio").canPlayType("audio/"+o)}static loaded(){return(0,Vt.mG)(this,void 0,void 0,function*(){for(yield Promise.resolve();r.downloads.length;)yield r.downloads[0]})}}return r.baseUrl="",r.downloads=[],r})();class Xa extends fn{constructor(){super({clockSource:"offline",context:dn(arguments[0])?arguments[0]:Xd(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:dn(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=dn(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return(0,Vt.mG)(this,void 0,void 0,function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;const i=Math.floor(this.sampleRate/128);t&&e%i==0&&(yield new Promise(o=>setTimeout(o,1)))}})}render(t=!0){return(0,Vt.mG)(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(t);const e=yield this._context.startRendering();return new ns(e)})}close(){return Promise.resolve()}}const ss=new class Rl extends Ya{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,i){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,i){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t,e){return(0,Vt.mG)(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}};let Fs=ss;function pn(){return Fs===ss&&Ol&&function $a(r){Fs=Di(r)?new fn(r):dn(r)?new Xa(r):r}(new fn),Fs}if(ti&&!ti.TONE_SILENCE_LOGGING){console.log(`%c * Tone.js ${"v"}${Lt} * `,"background: #000; color: #fff")}function ko(r){return Math.pow(2,r/12)}let is=440;function Oo(r){return Math.round(Ge(r))}function Ge(r){return 69+12*Math.log2(r/is)}class Ja extends Dn{constructor(t,e,i){super(),this.defaultUnits="s",this._val=e,this._units=i,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{const i=parseInt(t,10),o="."===e?1.5:1;return 1===i?this._beatsToUnits(this._getTimeSignature())*o:this._beatsToUnits(4/i)*o},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const e=parseInt(t,10);return this._beatsToUnits(8/(3*Math.floor(e)))},regexp:/^(\d+)t$/i},tr:{method:(t,e,i)=>{let o=0;return t&&"0"!==t&&(o+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(o+=this._beatsToUnits(parseFloat(e))),i&&"0"!==i&&(o+=this._beatsToUnits(parseFloat(i)/4)),o},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Ja&&this.fromType(this._val),en(this._val))return this._noArg();if(Zn(this._val)&&en(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(Ns(this._val)){let t=0;for(const e in this._val)if(St(this._val[e])){const i=this._val[e];t+=new this.constructor(this.context,e).valueOf()*i}return t}if(St(this._units)){const t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}return Zn(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class mn extends Ja{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const e=new mn(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){const i=new this.constructor(this.context,t).valueOf(),o=this.valueOf();return o+(Math.round(o/i)*i-o)*e}toNotation(){const t=this.toSeconds(),e=["1m"];for(let c=1;c<9;c++){const u=Math.pow(2,c);e.push(u+"n."),e.push(u+"n"),e.push(u+"t")}e.push("0");let i=e[0],o=new mn(this.context,e[0]).toSeconds();return e.forEach(c=>{const u=new mn(this.context,c).toSeconds();Math.abs(u-t)<Math.abs(o-t)&&(i=c,o=u)}),i}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let e=this.valueOf()/t;e=parseFloat(e.toFixed(4));const i=Math.floor(e/this._getTimeSignature());let o=e%1*4;e=Math.floor(e)%this._getTimeSignature();const c=o.toString();return c.length>3&&(o=parseFloat(parseFloat(c).toFixed(3))),[i,e,o].join(":")}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return Oo(this.toFrequency())}_now(){return this.context.now()}}class nn extends mn{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return function Kd(){return is}()}static set A4(t){!function Ka(r){is=r}(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return"midi"===this.defaultUnits?t:nn.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(t,e){const o=tf[t.toLowerCase()]+12*(parseInt(e,10)+1);return"midi"===this.defaultUnits?o:nn.mtof(o)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,i){let o=1;return t&&"0"!==t&&(o*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(o*=this._beatsToUnits(parseFloat(e))),i&&"0"!==i&&(o*=this._beatsToUnits(parseFloat(i)/4)),o}}})}transpose(t){return new nn(this.context,this.valueOf()*ko(t))}harmonize(t){return t.map(e=>this.transpose(e))}toMidi(){return Oo(this.valueOf())}toNote(){const t=this.toFrequency(),e=Math.log2(t/nn.A4);let i=Math.round(12*e)+57;const o=Math.floor(i/12);return o<0&&(i+=-12*o),ef[i%12]+o.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return function Jd(r){return is*Math.pow(2,(r-69)/12)}(t)}static ftom(t){return Oo(t)}}const tf={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},ef=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class $e extends mn{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Ie extends Dn{constructor(){super();const t=Q(Ie.getDefaults(),arguments,["context"]);this.context=this.defaultContext?this.defaultContext:t.context}static getDefaults(){return{context:pn()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return new mn(this.context,t).toSeconds()}toFrequency(t){return new nn(this.context,t).toFrequency()}toTicks(t){return new $e(this.context,t).toTicks()}_getPartialProperties(t){const e=this.get();return Object.keys(e).forEach(i=>{en(t[i])&&delete e[i]}),e}get(){const t=function $d(r){return r.constructor.getDefaults()}(this);return Object.keys(t).forEach(e=>{if(Reflect.has(this,e)){const i=this[e];St(i)&&St(i.value)&&St(i.setValueAtTime)?t[e]=i.value:i instanceof Ie?t[e]=i._getPartialProperties(t[e]):hn(i)||je(i)||Zn(i)||fs(i)?t[e]=i:delete t[e]}}),t}set(t){return Object.keys(t).forEach(e=>{Reflect.has(this,e)&&St(this[e])&&(this[e]&&St(this[e].value)&&St(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof Ie?this[e].set(t[e]):this[e]=t[e])}),this}}class xr extends En{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const e=this.get(t);return null!==e?e.state:this._initial}setStateAtTime(t,e,i){return Xe(e,0),this.add(Object.assign({},i,{state:t,time:e})),this}getLastState(t,e){for(let o=this._search(e);o>=0;o--){const c=this._timeline[o];if(c.state===t)return c}}getNextState(t,e){const i=this._search(e);if(-1!==i)for(let o=i;o<this._timeline.length;o++){const c=this._timeline[o];if(c.state===t)return c}}}class te extends Ie{constructor(){super(Q(te.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const t=Q(te.getDefaults(),arguments,["param","units","convert"]);for(ut(St(t.param)&&(Es(t.param)||t.param instanceof te),"param must be an AudioParam");!Es(t.param);)t.param=t.param._param;this._swappable=!!St(t.swappable)&&t.swappable,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new En(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,St(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Ie.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return St(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return St(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return St(this.maxValue)&&St(this.minValue)&&Xe(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?function dt(r){return Math.pow(10,r/20)}(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&"decibels"===this.units?function Co(r){return Math.log(r)/Math.LN10*20}(t):t}setValueAtTime(t,e){const i=this.toSeconds(e),o=this._fromType(t);return ut(isFinite(o)&&isFinite(i),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(o),this.log(this.units,"setValueAtTime",t,i),this._events.add({time:i,type:"setValueAtTime",value:o}),this._param.setValueAtTime(o,i),this}getValueAtTime(t){const e=Math.max(this.toSeconds(t),0),i=this._events.getAfter(e),o=this._events.get(e);let c=this._initialValue;if(null===o)c=this._initialValue;else if("setTargetAtTime"!==o.type||null!==i&&"setValueAtTime"!==i.type)if(null===i)c=o.value;else if("linearRampToValueAtTime"===i.type||"exponentialRampToValueAtTime"===i.type){let u=o.value;if("setTargetAtTime"===o.type){const d=this._events.getBefore(o.time);u=null===d?this._initialValue:d.value}c="linearRampToValueAtTime"===i.type?this._linearInterpolate(o.time,u,i.time,i.value,e):this._exponentialInterpolate(o.time,u,i.time,i.value,e)}else c=o.value;else{const u=this._events.getBefore(o.time);let d;d=null===u?this._initialValue:u.value,"setTargetAtTime"===o.type&&(c=this._exponentialApproach(o.time,d,o.value,o.constant,e))}return this._toType(c)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){const i=this._fromType(t),o=this.toSeconds(e);return ut(isFinite(i)&&isFinite(o),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(i),this._events.add({time:o,type:"linearRampToValueAtTime",value:i}),this.log(this.units,"linearRampToValueAtTime",t,o),this._param.linearRampToValueAtTime(i,o),this}exponentialRampToValueAtTime(t,e){let i=this._fromType(t);i=Nn(i,0)?this._minOutput:i,this._assertRange(i);const o=this.toSeconds(e);return ut(isFinite(i)&&isFinite(o),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:o,type:"exponentialRampToValueAtTime",value:i}),this.log(this.units,"exponentialRampToValueAtTime",t,o),this._param.exponentialRampToValueAtTime(i,o),this}exponentialRampTo(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialRampToValueAtTime(t,i+this.toSeconds(e)),this}linearRampTo(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.linearRampToValueAtTime(t,i+this.toSeconds(e)),this}targetRampTo(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialApproachValueAtTime(t,i,e),this}exponentialApproachValueAtTime(t,e,i){e=this.toSeconds(e),i=this.toSeconds(i);const o=Math.log(i+1)/Math.log(200);return this.setTargetAtTime(t,e,o),this.cancelAndHoldAtTime(e+.9*i),this.linearRampToValueAtTime(t,e+i),this}setTargetAtTime(t,e,i){const o=this._fromType(t);ut(isFinite(i)&&i>0,"timeConstant must be a number greater than 0");const c=this.toSeconds(e);return this._assertRange(o),ut(isFinite(o)&&isFinite(c),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:i,time:c,type:"setTargetAtTime",value:o}),this.log(this.units,"setTargetAtTime",t,c,i),this._param.setTargetAtTime(o,c,i),this}setValueCurveAtTime(t,e,i,o=1){i=this.toSeconds(i),e=this.toSeconds(e);const c=this._fromType(t[0])*o;this.setValueAtTime(this._toType(c),e);const u=i/(t.length-1);for(let d=1;d<t.length;d++){const h=this._fromType(t[d])*o;this.linearRampToValueAtTime(this._toType(h),e+d*u)}return this}cancelScheduledValues(t){const e=this.toSeconds(t);return ut(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){const e=this.toSeconds(t),i=this._fromType(this.getValueAtTime(e));ut(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+i);const o=this._events.get(e),c=this._events.getAfter(e);return o&&Nn(o.time,e)?c?(this._param.cancelScheduledValues(c.time),this._events.cancel(c.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):c&&(this._param.cancelScheduledValues(c.time),this._events.cancel(c.time),"linearRampToValueAtTime"===c.type?this.linearRampToValueAtTime(this._toType(i),e):"exponentialRampToValueAtTime"===c.type&&this.exponentialRampToValueAtTime(this._toType(i),e)),this._events.add({time:e,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,e),this}rampTo(t,e=.1,i){return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,i):this.linearRampTo(t,e,i),this}apply(t){const e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);const i=this._events.get(e);if(i&&"setTargetAtTime"===i.type){const o=this._events.getAfter(i.time),c=o?o.time:e+2,u=(c-e)/10;for(let d=e;d<c;d+=u)t.linearRampToValueAtTime(this.getValueAtTime(d),d)}return this._events.forEachAfter(this.context.currentTime,o=>{"cancelScheduledValues"===o.type?t.cancelScheduledValues(o.time):"setTargetAtTime"===o.type?t.setTargetAtTime(o.value,o.time,o.constant):t[o.type](o.value,o.time)}),this}setParam(t){ut(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,i,o,c){return i+(e-i)*Math.exp(-(c-t)/o)}_linearInterpolate(t,e,i,o,c){return e+(c-t)/(i-t)*(o-e)}_exponentialInterpolate(t,e,i,o,c){return e*Math.pow(o/e,(c-t)/(i-t))}}class Mt extends Ie{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return St(this.input)?Es(this.input)||this.input instanceof te?1:this.input.numberOfInputs:0}get numberOfOutputs(){return St(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return St(t)&&(t instanceof Mt||_e(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(i=>{i.channelCount=t.channelCount,i.channelCountMode=t.channelCountMode,i.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){const t=this._getInternalNodes();ut(t.length>0,"ToneAudioNode does not have any internal nodes");const e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,i=0){return rs(this,t,e,i),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return xo("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,i=0){return function ql(r,t,e=0,i=0){if(St(t))for(;t instanceof Mt;)t=t.input;for(;!_e(r);)St(r.output)&&(r=r.output);Es(t)?r.disconnect(t,e):_e(t)?r.disconnect(t,e,i):r.disconnect()}(this,t,e,i),this}chain(...t){return tc(this,...t),this}fan(...t){return t.forEach(e=>this.connect(e)),this}dispose(){return super.dispose(),St(this.input)&&(this.input instanceof Mt?this.input.dispose():_e(this.input)&&this.input.disconnect()),St(this.output)&&(this.output instanceof Mt?this.output.dispose():_e(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function tc(...r){const t=r.shift();r.reduce((e,i)=>(e instanceof Mt?e.connect(i):_e(e)&&rs(e,i),i),t)}function rs(r,t,e=0,i=0){for(ut(St(r),"Cannot connect from undefined node"),ut(St(t),"Cannot connect to undefined node"),(t instanceof Mt||_e(t))&&ut(t.numberOfInputs>0,"Cannot connect to node with no inputs"),ut(r.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof Mt||t instanceof te;)St(t.input)&&(t=t.input);for(;r instanceof Mt;)St(r.output)&&(r=r.output);Es(t)?r.connect(t,e):r.connect(t,e,i)}class Ze extends Mt{constructor(){super(Q(Ze.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const t=Q(Ze.getDefaults(),arguments,["gain","units"]);this.gain=new te({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),de(this,"gain")}static getDefaults(){return Object.assign(Mt.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Ni extends Mt{constructor(t){super(t),this.onended=Qt,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Ze({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(e){const i=this.toSeconds(e);return-1!==this._startTime&&i>=this._startTime&&(-1===this._stopTime||i<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(Mt.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Qt})}_startGain(t,e=1){ut(-1===this._startTime,"Source cannot be started more than once");const i=this.toSeconds(this._fadeIn);return this._startTime=t+i,this._startTime=Math.max(this._startTime,this.context.currentTime),i>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+i):this._gainNode.gain.exponentialApproachValueAtTime(e,t,i)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){ut(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();const e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.context.currentTime),e>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const i="exponential"===this._curve?2*e:0;this._stopSource(this.now()+i),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Qt&&(this.onended(this),this.onended=Qt,!this.context.isOffline)){const t=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(t):setTimeout(t,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),ut(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class Do extends Ni{constructor(){super(Q(Do.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const t=Q(Do.getDefaults(),arguments,["offset"]);rs(this._source,this._gainNode),this.offset=new te({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(Ni.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Ae extends Mt{constructor(){super(Q(Ae.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const t=Q(Ae.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Do({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(Mt.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,i=0){return ec(this,t,e,i),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,i){return this._param.exponentialRampTo(t,e,i),this}linearRampTo(t,e,i){return this._param.linearRampTo(t,e,i),this}targetRampTo(t,e,i){return this._param.targetRampTo(t,e,i),this}exponentialApproachValueAtTime(t,e,i){return this._param.exponentialApproachValueAtTime(t,e,i),this}setTargetAtTime(t,e,i){return this._param.setTargetAtTime(t,e,i),this}setValueCurveAtTime(t,e,i,o){return this._param.setValueCurveAtTime(t,e,i,o),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,i){return this._param.rampTo(t,e,i),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function ec(r,t,e,i){(t instanceof te||Es(t)||t instanceof Ae&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof Ae&&(t.overridden=!0)),rs(r,t,e,i)}class wr extends te{constructor(){super(Q(wr.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new En(1/0),this._multiplier=1;const t=Q(wr.getDefaults(),arguments,["value"]);this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(te.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,i){e=this.toSeconds(e),this.setRampPoint(e);const o=this._fromType(t),c=this._events.get(e),u=Math.round(Math.max(1/i,1));for(let d=0;d<=u;d++){const h=i*d+e,f=this._exponentialApproach(c.time,c.value,o,i,h);this.linearRampToValueAtTime(this._toType(f),h)}return this}setValueAtTime(t,e){const i=this.toSeconds(e);super.setValueAtTime(t,e);const o=this._events.get(i),c=this._events.previousEvent(o),u=this._getTicksUntilEvent(c,i);return o.ticks=Math.max(u,0),this}linearRampToValueAtTime(t,e){const i=this.toSeconds(e);super.linearRampToValueAtTime(t,e);const o=this._events.get(i),c=this._events.previousEvent(o),u=this._getTicksUntilEvent(c,i);return o.ticks=Math.max(u,0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);const i=this._fromType(t),o=this._events.get(e),c=Math.round(Math.max(10*(e-o.time),1)),u=(e-o.time)/c;for(let d=0;d<=c;d++){const h=u*d+o.time,f=this._exponentialInterpolate(o.time,o.value,e,i,h);this.linearRampToValueAtTime(this._toType(f),h)}return this}_getTicksUntilEvent(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(en(t.ticks)){const u=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(u,t.time)}const i=this._fromType(this.getValueAtTime(t.time));let o=this._fromType(this.getValueAtTime(e));const c=this._events.get(e);return c&&c.time===e&&"setValueAtTime"===c.type&&(o=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(i+o)+t.ticks}getTicksAtTime(t){const e=this.toSeconds(t),i=this._events.get(e);return Math.max(this._getTicksUntilEvent(i,e),0)}getDurationOfTicks(t,e){const i=this.toSeconds(e),o=this.getTicksAtTime(e);return this.getTimeOfTick(o+t)-i}getTimeOfTick(t){const e=this._events.get(t,"ticks"),i=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&i&&"linearRampToValueAtTime"===i.type&&e.value!==i.value){const o=this._fromType(this.getValueAtTime(e.time)),u=(this._fromType(this.getValueAtTime(i.time))-o)/(i.time-e.time),d=Math.sqrt(Math.pow(o,2)-2*u*(e.ticks-t)),h=(-o+d)/u;return(h>0?h:(-o-d)/u)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){const i=this.toSeconds(e),o=this.toSeconds(t),c=this.getTicksAtTime(i);return this.getTicksAtTime(i+o)-c}_fromType(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class Tr extends Ae{constructor(){super(Q(Tr.getDefaults(),arguments,["value"])),this.name="TickSignal";const t=Q(Tr.getDefaults(),arguments,["value"]);this.input=this._param=new wr({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(Ae.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class No extends Ie{constructor(){super(Q(No.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new xr,this._tickOffset=new En;const t=Q(No.getDefaults(),arguments,["frequency"]);this.frequency=new Tr({context:this.context,units:t.units,value:t.frequency}),de(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Ie.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){const i=this.toSeconds(t);return"started"!==this._state.getValueAtTime(i)&&(this._state.setStateAtTime("started",i),St(e)&&this.setTicksAtTime(e,i)),this}stop(t){const e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){const i=this._state.get(e);i&&i.time>0&&(this._tickOffset.cancel(i.time),this._state.cancel(i.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&this._state.setStateAtTime("paused",e),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this}getTicksAtTime(t){const e=this.toSeconds(t),i=this._state.getLastState("stopped",e),o={state:"paused",time:e};this._state.add(o);let c=i,u=0;return this._state.forEachBetween(i.time,e+this.sampleTime,d=>{let h=c.time;const f=this._tickOffset.get(d.time);f&&f.time>=c.time&&(u=f.ticks,h=f.time),"started"===c.state&&"started"!==d.state&&(u+=this.frequency.getTicksAtTime(d.time)-this.frequency.getTicksAtTime(h)),c=d}),this._state.remove(o),u}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const e=this.now(),i=this.frequency.timeToTicks(t,e);this.setTicksAtTime(i,e)}getSecondsAtTime(t){t=this.toSeconds(t);const e=this._state.getLastState("stopped",t),i={state:"paused",time:t};this._state.add(i);let o=e,c=0;return this._state.forEachBetween(e.time,t+this.sampleTime,u=>{let d=o.time;const h=this._tickOffset.get(u.time);h&&h.time>=o.time&&(c=h.seconds,d=h.time),"started"===o.state&&"started"!==u.state&&(c+=u.time-d),o=u}),this._state.remove(i),c}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){const i=this._tickOffset.get(e),o=this._state.get(e),c=Math.max(i.time,o.time),u=this.frequency.getTicksAtTime(c)+t-i.ticks;return this.frequency.getTimeOfTick(u)}forEachTickBetween(t,e,i){let o=this._state.get(t);this._state.forEachBetween(t,e,u=>{o&&"started"===o.state&&"started"!==u.state&&this.forEachTickBetween(Math.max(o.time,t),u.time-this.sampleTime,i),o=u});let c=null;if(o&&"started"===o.state){const u=Math.max(o.time,t),d=this.frequency.getTicksAtTime(u),f=d-this.frequency.getTicksAtTime(o.time);let m=Math.ceil(f)-f;m=Nn(m,1)?0:m;let _=this.frequency.getTimeOfTick(d+m);for(;_<e;){try{i(_,Math.round(this.getTicksAtTime(_)))}catch(y){c=y;break}_+=this.frequency.getDurationOfTicks(1,_)}}if(c)throw c;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class ni extends Ie{constructor(){super(Q(ni.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=Qt,this._lastUpdate=0,this._state=new xr("stopped"),this._boundLoop=this._loop.bind(this);const t=Q(ni.getDefaults(),arguments,["callback","frequency"]);this.callback=t.callback,this._tickSource=new No({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,de(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Ie.getDefaults(),{callback:Qt,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){vo(this.context);const i=this.toSeconds(t);return this.log("start",i),"started"!==this._state.getValueAtTime(i)&&(this._state.setStateAtTime("started",i),this._tickSource.start(i,e),i<this._lastUpdate&&this.emit("start",i,e)),this}stop(t){const e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){const i=this.toSeconds(e),o=this.getTicksAtTime(i);return this._tickSource.getTimeOfTick(o+t,i)}_loop(){const t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,i=>{switch(i.state){case"started":const o=this._tickSource.getTicksAtTime(i.time);this.emit("start",i.time,o);break;case"stopped":0!==i.time&&this.emit("stop",i.time);break;case"paused":this.emit("pause",i.time)}}),this._tickSource.forEachTickBetween(t,e,(i,o)=>{this.callback(i,o)}))}getStateAtTime(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}vr.mixin(ni);class br extends Dn{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=Q(br.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(e=>{this._loadingCount++,this.add(e,t.urls[e],this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Qt,onload:Qt,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return ut(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,0===this._loadingCount&&t&&t()}get loaded(){return Array.from(this._buffers).every(([t,e])=>e.loaded)}add(t,e,i=Qt,o=Qt){return Zn(e)?this._buffers.set(t.toString(),new ns(this.baseUrl+e,i,o)):this._buffers.set(t.toString(),new ns(e,i,o)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}}class ee extends $e{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class os extends Ie{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new En,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=t;){const e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}So(r=>{r.draw=new os({context:r})}),_r(r=>{r.draw.dispose()});class si extends Dn{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){ut(St(t.time),"Events must have a time property"),ut(St(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new rf(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(null!==this._root){const e=[];this._root.search(t.time,e);for(const i of e)if(i.event===t){this._removeNode(i),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,e=>this.remove(e)),this}_setRoot(t){this._root=t,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{let i,o=null;if(t.getBalance()>0)if(null===t.left.right)i=t.left,i.right=t.right,o=i;else{for(i=t.left.right;null!==i.right;)i=i.right;i.parent&&(i.parent.right=i.left,o=i.parent,i.left=t.left,i.right=t.right)}else if(null===t.right.left)i=t.right,i.left=t.left,o=i;else{for(i=t.right.left;null!==i.left;)i=i.left;i.parent&&(i.parent.left=i.right,o=i.parent,i.left=t.left,i.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=i:t.parent.right=i:this._setRoot(i),o&&this._rebalance(o)}t.dispose()}_rotateLeft(t){const e=t.parent,i=t.isLeftChild(),o=t.right;o&&(t.right=o.left,o.left=t),null!==e?i?e.left=o:e.right=o:this._setRoot(o)}_rotateRight(t){const e=t.parent,i=t.isLeftChild(),o=t.left;o&&(t.left=o.right,o.right=t),null!==e?i?e.left=o:e.right=o:this._setRoot(o)}_rebalance(t){const e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(null!==this._root){const e=[];if(this._root.search(t,e),e.length>0){let i=e[0];for(let o=1;o<e.length;o++)e[o].low>i.low&&(i=e[o]);return i.event}}return null}forEach(t){if(null!==this._root){const e=[];this._root.traverse(i=>e.push(i)),e.forEach(i=>{i.event&&t(i.event)})}return this}forEachAtTime(t,e){if(null!==this._root){const i=[];this._root.search(t,i),i.forEach(o=>{o.event&&e(o.event)})}return this}forEachFrom(t,e){if(null!==this._root){const i=[];this._root.searchAfter(t,i),i.forEach(o=>{o.event&&e(o.event)})}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse(t=>t.dispose()),this._root=null,this}}class rf{constructor(t,e,i){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=i,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),!(this.low>t)&&null!==this.right&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)}traverse(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)}updateHeight(){this.height=null!==this.left&&null!==this.right?Math.max(this.left.height,this.right.height)+1:null!==this.right?this.right.height+1:null!==this.left?this.left.height+1:0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Ms extends Mt{constructor(){super(Q(Ms.getDefaults(),arguments,["volume"])),this.name="Volume";const t=Q(Ms.getDefaults(),arguments,["volume"]);this.input=this.output=new Ze({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,de(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(Mt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Ro extends Mt{constructor(){super(Q(Ro.getDefaults(),arguments)),this.name="Destination",this.input=new Ms({context:this.context}),this.output=new Ze({context:this.context}),this.volume=this.input.volume;const t=Q(Ro.getDefaults(),arguments);tc(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(Mt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),tc(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}So(r=>{r.destination=new Ro({context:r})}),_r(r=>{r.destination.dispose()});class of extends Dn{constructor(t){super(),this.name="TimelineValue",this._timeline=new En({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){const e=this._timeline.get(t);return e?e.value:this._initialValue}}let Io=(()=>{class r{constructor(e,i){this.id=r._eventId++;const o=Object.assign(r.getDefaults(),i);this.transport=e,this.callback=o.callback,this._once=o.once,this.time=o.time}static getDefaults(){return{callback:Qt,once:!1,time:0}}invoke(e){this.callback&&(this.callback(e),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}return r._eventId=0,r})();class nc extends Io{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const i=Object.assign(nc.getDefaults(),e);this.duration=new ee(t.context,i.duration).valueOf(),this._interval=new ee(t.context,i.interval).valueOf(),this._nextTick=i.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Io.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvents(t){const e=this.transport.getTicksAtTime(t);e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new ee(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const e=this.transport.getTicksAtTime(t);e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new ee(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new ee(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class Sr extends Ie{constructor(){super(Q(Sr.getDefaults(),arguments)),this.name="Transport",this._loop=new of(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new En,this._repeatedEvents=new si,this._syncedSignals=[],this._swingAmount=0;const t=Q(Sr.getDefaults(),arguments);this._ppq=t.ppq,this._clock=new ni({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),de(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(Ie.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!=0&&e%(2*this._swingTicks)!=0){const o=Math.sin(e%(2*this._swingTicks)/(2*this._swingTicks)*Math.PI)*this._swingAmount;t+=new ee(this.context,2*this._swingTicks/3).toSeconds()*o}this._timeline.forEachAtTime(e,i=>i.invoke(t))}schedule(t,e){const i=new Io(this,{callback:t,time:new $e(this.context,e).toTicks()});return this._addEvent(i,this._timeline)}scheduleRepeat(t,e,i,o=1/0){const c=new nc(this,{callback:t,duration:new mn(this.context,o).toTicks(),interval:new mn(this.context,e).toTicks(),time:new $e(this.context,i).toTicks()});return this._addEvent(c,this._repeatedEvents)}scheduleOnce(t,e){const i=new Io(this,{callback:t,once:!0,time:new $e(this.context,e).toTicks()});return this._addEvent(i,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){const e=this.toTicks(t);return this._timeline.forEachFrom(e,i=>this.clear(i.id)),this._repeatedEvents.forEachFrom(e,i=>this.clear(i.id)),this}_bindClockEvents(){this._clock.on("start",(t,e)=>{e=new ee(this.context,e).toSeconds(),this.emit("start",t,e)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){let i;return St(e)&&(i=this.toTicks(e)),this._clock.start(t,i),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){hn(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new mn(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new mn(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new ee(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),e=this._clock.getTicksAtTime(t);return new ee(this.context,e).toBarsBeatsSixteenths()}set position(t){const e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){const e=this.now(),i=this._clock.frequency.timeToTicks(t,e);this.ticks=i}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const e=this.now();if("started"===this.state){const i=this._clock.getTicksAtTime(e),c=e+this._clock.frequency.getDurationOfTicks(Math.ceil(i)-i,e);this.emit("stop",c),this._clock.setTicksAtTime(t,c),this.emit("start",c,this._clock.getSecondsAtTime(c))}else this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return Math.round(this._clock.getTicksAtTime(t))}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),"started"!==this.state)return 0;{const e=this.now(),i=this.getTicksAtTime(e);return this._clock.nextTickTime(t-i%t,e)}}syncSignal(t,e){if(!e){const o=this.now();if(0!==t.getValueAtTime(o)){const u=1/(60/this.bpm.getValueAtTime(o)/this.PPQ);e=t.getValueAtTime(o)/u}else e=0}const i=new Ze(e);return this.bpm.connect(i),i.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:i,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){const i=this._syncedSignals[e];i.signal===t&&(i.ratio.dispose(),i.signal.value=i.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Il(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}vr.mixin(Sr),So(r=>{r.transport=new Sr({context:r})}),_r(r=>{r.transport.dispose()});class gn extends Mt{constructor(t){super(t),this.input=void 0,this._state=new xr("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Qt,this._syncedStop=Qt,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Ms({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,de(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(Mt.getDefaults(),{mute:!1,onstop:Qt,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,i){let o=en(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(o=this._clampToCurrentTime(o),this._synced||"started"!==this._state.getValueAtTime(o))if(this.log("start",o),this._state.setStateAtTime("started",o),this._synced){const c=this._state.get(o);c&&(c.offset=this.toSeconds(Hn(e,0)),c.duration=i?this.toSeconds(i):void 0);const u=this.context.transport.schedule(d=>{this._start(d,e,i)},o);this._scheduled.push(u),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>o&&this._syncedStart(this.now(),this.context.transport.seconds)}else vo(this.context),this._start(o,e,i);else ut(fr(o,this._state.get(o).time),"Start time must be strictly greater than previous start time"),this._state.cancel(o),this._state.setStateAtTime("started",o),this.log("restart",o),this.restart(o,e,i);return this}stop(t){let e=en(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),"started"===this._state.getValueAtTime(e)||St(this._state.getNextState("started",e))){if(this.log("stop",e),this._synced){const i=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(i)}else this._stop(e);this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,i){return t=this.toSeconds(t),"started"===this._state.getValueAtTime(t)&&(this._state.cancel(t),this._restart(t,e,i)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(e>0){const i=this._state.get(e);if(i&&"started"===i.state&&i.time!==e){const o=e-this.toSeconds(i.time);let c;i.duration&&(c=this.toSeconds(i.duration)-o),this._start(t,this.toSeconds(i.offset)+o,c)}}},this._syncedStop=t=>{const e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));"started"===this._state.getValueAtTime(e)&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Qt,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Ar extends Ni{constructor(){super(Q(Ar.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const t=Q(Ar.getDefaults(),arguments,["url","onload"]);rs(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new te({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new ns(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Ni.getDefaults(),{url:new ns,loop:!1,loopEnd:0,loopStart:0,onload:Qt,onerror:Qt,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,i,o=1){ut(this.buffer.loaded,"buffer is either not set or not loaded");const c=this.toSeconds(t);this._startGain(c,o),e=Hn(e,this.loop?this.loopStart:0);let u=Math.max(this.toSeconds(e),0);if(this.loop){const d=this.toSeconds(this.loopEnd)||this.buffer.duration,h=this.toSeconds(this.loopStart),f=d-h;To(u,d)&&(u=(u-h)%f+h),Nn(u,this.buffer.duration)&&(u=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,pr(u,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(c,u)),St(i)){let d=this.toSeconds(i);d=Math.max(d,0),this.stop(c+d)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function Rs(r,t){return(0,Vt.mG)(this,void 0,void 0,function*(){const e=t/r.context.sampleRate,i=new Xa(1,e,r.context.sampleRate);return new r.constructor(Object.assign(r.get(),{frequency:2/e,detune:0,context:i})).toDestination().start(0),(yield i.render()).getChannelData(0)})}class qo extends Ni{constructor(){super(Q(qo.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const t=Q(qo.getDefaults(),arguments,["frequency","type"]);rs(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new te({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new te({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),de(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ni.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}let Fn=(()=>{class r extends gn{constructor(){super(Q(r.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=Q(r.getDefaults(),arguments,["frequency","type"]);this.frequency=new Ae({context:this.context,units:"frequency",value:e.frequency}),de(this,"frequency"),this.detune=new Ae({context:this.context,units:"cents",value:e.detune}),de(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&"custom"!==e.type&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(gn.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const i=this.toSeconds(e),o=new qo({context:this.context,onended:()=>this.onstop(this)});this._oscillator=o,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(i)}_stop(e){const i=this.toSeconds(e);this._oscillator&&this._oscillator.stop(i)}_restart(e){const i=this.toSeconds(e);return this.log("restart",i),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(i),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type)return r._periodicWaveCache.find(i=>i.phase===this._phase&&function Fl(r,t){return r.length===t.length&&r.every((e,i)=>t[i]===e)}(i.partials,this._partials));{const e=r._periodicWaveCache.find(i=>i.type===this._type&&i.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const i=-1!==["sine","square","sawtooth","triangle"].indexOf(e);if(0===this._phase&&i)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=e);else{const o=this._getCachedPeriodicWave();if(St(o)){const{partials:c,wave:u}=o;this._wave=u,this._partials=c,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{const[c,u]=this._getRealImaginary(e,this._phase),d=this.context.createPeriodicWave(c,u);this._wave=d,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),r._periodicWaveCache.push({imag:u,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:c,type:this._type,wave:this._wave}),r._periodicWaveCache.length>100&&r._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.type=this.partialCount&&"custom"!==this._type&&"custom"!==e?e+this.partialCount:e}get partialCount(){return this._partialCount}set partialCount(e){Xe(e,0);let i=this._type;const o=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(o&&(i=o[1]),"custom"!==this._type)this.type=0===e?i:i+e.toString();else{const c=new Float32Array(e);this._partials.forEach((u,d)=>c[d]=u),this._partials=Array.from(c),this.type=this._type}}_getRealImaginary(e,i){let c=2048;const u=new Float32Array(c),d=new Float32Array(c);let h=1;if("custom"===e){if(h=this._partials.length+1,this._partialCount=this._partials.length,c=h,0===this._partials.length)return[u,d]}else{const f=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);f?(h=parseInt(f[2],10)+1,this._partialCount=parseInt(f[2],10),e=f[1],h=Math.max(h,2),c=h):this._partialCount=0,this._partials=[]}for(let f=1;f<c;++f){const m=2/(f*Math.PI);let _;switch(e){case"sine":_=f<=h?1:0,this._partials[f-1]=_;break;case"square":_=1&f?2*m:0,this._partials[f-1]=_;break;case"sawtooth":_=m*(1&f?1:-1),this._partials[f-1]=_;break;case"triangle":_=1&f?m*m*2*(f-1>>1&1?-1:1):0,this._partials[f-1]=_;break;case"custom":_=this._partials[f-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}0!==_?(u[f]=-_*Math.sin(i*f),d[f]=_*Math.cos(i*f)):(u[f]=0,d[f]=0)}return[u,d]}_inverseFFT(e,i,o){let c=0;const u=e.length;for(let d=0;d<u;d++)c+=e[d]*Math.cos(d*o)+i[d]*Math.sin(d*o);return c}getInitialValue(){const[e,i]=this._getRealImaginary(this._type,0);let o=0;const c=2*Math.PI;for(let d=0;d<32;d++)o=Math.max(this._inverseFFT(e,i,d/32*c),o);return function bo(r,t,e){return Math.max(Math.min(r,e),t)}(-this._inverseFFT(e,i,this._phase)/o,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return(0,Vt.mG)(this,void 0,void 0,function*(){return Rs(this,e)})}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}return r._periodicWaveCache=[],r})();class Po extends Mt{constructor(){super(Object.assign(Q(Po.getDefaults(),arguments,["context"])))}connect(t,e=0,i=0){return ec(this,t,e,i),this}}class Mi extends Po{constructor(){super(Object.assign(Q(Mi.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const t=Q(Mi.getDefaults(),arguments,["mapping","length"]);hn(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):function Za(r){return"function"==typeof r}(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(Ae.getDefaults(),{length:1024})}setMap(t,e=1024){const i=new Float32Array(e);for(let o=0,c=e;o<c;o++)i[o]=t(o/(c-1)*2-1,o);return this.curve=i,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){ut(["none","2x","4x"].some(i=>i.includes(t)),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class af extends Po{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Mi({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class ii extends Ae{constructor(){super(Object.assign(Q(ii.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const t=Q(ii.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new Ze({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Ae.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Cr extends gn{constructor(){super(Q(Cr.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new af({context:this.context}),this._modulationNode=new Ze({context:this.context});const t=Q(Cr.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Fn({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Fn({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new ii({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),de(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Fn.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return(0,Vt.mG)(this,void 0,void 0,function*(){return Rs(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class kr extends gn{constructor(){super(Q(kr.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new Ze({context:this.context,gain:0});const t=Q(kr.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Fn({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new Ae({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new Fn({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new ii({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new ii({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),de(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Fn.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return(0,Vt.mG)(this,void 0,void 0,function*(){return Rs(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Ri extends gn{constructor(){super(Q(Ri.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new Ze({context:this.context,gain:0}),this._thresh=new Mi({context:this.context,mapping:e=>e<=0?-1:1});const t=Q(Ri.getDefaults(),arguments,["frequency","width"]);this.width=new Ae({context:this.context,units:"audioRange",value:t.width}),this._triangle=new Fn({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),de(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(gn.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(t=1024){return(0,Vt.mG)(this,void 0,void 0,function*(){return Rs(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Or extends gn{constructor(){super(Q(Or.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const t=Q(Or.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new Ae({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Ae({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,de(this,["frequency","detune"])}static getDefaults(){return Object.assign(Fn.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(e=>e.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(e=>e.stop(t))}_restart(t){this._forEach(e=>e.restart(t))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach(e=>e.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const e=-t/2,i=t/(this._oscillators.length-1);this._forEach((o,c)=>o.detune.value=e+i*c)}}get count(){return this._oscillators.length}set count(t){if(Xe(t,1),this._oscillators.length!==t){this._forEach(e=>e.dispose()),this._oscillators=[];for(let e=0;e<t;e++){const i=new Fn({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:0===e?()=>this.onstop(this):Qt});"custom"===this.type&&(i.partials=this._partials),this.frequency.connect(i.frequency),this.detune.connect(i.detune),i.detune.overridden=!1,i.connect(this.output),this._oscillators[e]=i}this.spread=this._spread,"started"===this.state&&this._forEach(e=>e.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((e,i)=>e.phase=this._phase+i/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(e=>e.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(e=>e.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(e=>e.partialCount=t),this._type=this._oscillators[0].type}asArray(t=1024){return(0,Vt.mG)(this,void 0,void 0,function*(){return Rs(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}class Qe extends gn{constructor(){super(Q(Qe.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new ii({context:this.context,value:2});const t=Q(Qe.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new Ri({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Fn({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),de(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(gn.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(t=1024){return(0,Vt.mG)(this,void 0,void 0,function*(){return Rs(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Pl={am:Cr,fat:Or,fm:kr,oscillator:Fn,pulse:Ri,pwm:Qe};class Dr extends gn{constructor(){super(Q(Dr.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const t=Q(Dr.getDefaults(),arguments,["frequency","type"]);this.frequency=new Ae({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Ae({context:this.context,units:"cents",value:t.detune}),de(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(Fn.getDefaults(),kr.getDefaults(),Cr.getDefaults(),Or.getDefaults(),Ri.getDefaults(),Qe.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(e=>this._sourceType===e)&&(t=this._sourceType),t+this._oscillator.type}set type(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const e=Pl[t],i=this.now();if(this._oscillator){const o=this._oscillator;o.stop(i),this.context.setTimeout(()=>o.dispose(),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(i)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")}_getOscType(t,e){return t instanceof Pl[e]}get baseType(){return this._oscillator.baseType}set baseType(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&"pulse"!==t&&"pwm"!==t&&(this._oscillator.baseType=t)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(t){this._getOscType(this._oscillator,"fat")&&je(t)&&(this._oscillator.count=t)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(t){this._getOscType(this._oscillator,"fat")&&je(t)&&(this._oscillator.spread=t)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Zn(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(t=1024){return(0,Vt.mG)(this,void 0,void 0,function*(){return Rs(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function Wl(r,t=1/0){const e=new WeakMap;return function(i,o){Reflect.defineProperty(i,o,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(c){Xe(c,r,t),e.set(this,c)}})}}function ms(r,t=1/0){const e=new WeakMap;return function(i,o){Reflect.defineProperty(i,o,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(c){Xe(this.toSeconds(c),r,t),e.set(this,c)}})}}class ri extends gn{constructor(){super(Q(ri.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const t=Q(ri.getDefaults(),arguments,["url","onload"]);this._buffer=new ns({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(gn.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Qt,onerror:Qt,playbackRate:1,reverse:!1})}load(t){return(0,Vt.mG)(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}_onload(t=Qt){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),0===this._activeSources.size&&!this._synced&&"started"===this._state.getValueAtTime(this.now())&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,i){return super.start(t,e,i),this}_start(t,e,i){e=Hn(e,this._loop?this._loopStart:0);const o=this.toSeconds(e),c=i;i=Hn(i,Math.max(this._buffer.duration-o,0));let u=this.toSeconds(i);u/=this._playbackRate,t=this.toSeconds(t);const d=new Ar({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(t+u),this._state.setStateAtTime("stopped",t+u,{implicitEnd:!0})),this._activeSources.add(d),this._loop&&en(c)?d.start(t,o):d.start(t,o,u-this.toSeconds(this.fadeOut))}_stop(t){const e=this.toSeconds(t);this._activeSources.forEach(i=>i.stop(e))}restart(t,e,i){return super.restart(t,e,i),this}_restart(t,e,i){this._stop(t),this._start(t,e,i)}seek(t,e){const i=this.toSeconds(e);if("started"===this._state.getValueAtTime(i)){const o=this.toSeconds(t);this._stop(i),this._start(i,o)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&Xe(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&Xe(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(e=>{e.loop=t}),t)){const e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const e=this.now(),i=this._state.getNextState("stopped",e);i&&i.implicitEnd&&(this._state.cancel(i.time),this._activeSources.forEach(o=>o.cancelStop())),this._activeSources.forEach(o=>{o.playbackRate.setValueAtTime(t,e)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}(0,Vt.gn)([ms(0)],ri.prototype,"fadeIn",void 0),(0,Vt.gn)([ms(0)],ri.prototype,"fadeOut",void 0);class gs extends Mt{constructor(){super(Q(gs.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new Ae({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const t=Q(gs.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(Mt.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(Zn(t))return t;{let i;for(i in Vo)if(Vo[i][e]===t)return i;return t}}_setCurve(t,e,i){if(Zn(i)&&Reflect.has(Vo,i)){const o=Vo[i];Ns(o)?"_decayCurve"!==t&&(this[t]=o[e]):this[t]=o}else{if(!hn(i)||"_decayCurve"===t)throw new Error("Envelope: invalid curve: "+i);this[t]=i}}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._decayCurve}set decayCurve(t){ut(["linear","exponential"].some(e=>e===t),`Invalid envelope curve: ${t}`),this._decayCurve=t}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);let o=this.toSeconds(this.attack);const c=this.toSeconds(this.decay),u=this.getValueAtTime(t);if(u>0&&(o=(1-u)/(1/o)),o<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,o,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,o,t);else{this._sig.cancelAndHoldAtTime(t);let d=this._attackCurve;for(let h=1;h<d.length;h++)if(d[h-1]<=u&&u<=d[h]){d=this._attackCurve.slice(h),d[0]=u;break}this._sig.setValueCurveAtTime(d,t,o,e)}if(c&&this.sustain<1){const d=e*this.sustain,h=t+o;this.log("decay",h),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(d,c+h):this._sig.exponentialApproachValueAtTime(d,h,c)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const e=this.getValueAtTime(t);if(e>0){const i=this.toSeconds(this.release);i<this.sampleTime?this._sig.setValueAtTime(0,t):"linear"===this._releaseCurve?this._sig.linearRampTo(0,i,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,i,t):(ut(hn(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,i,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,i=1){return e=this.toSeconds(e),this.triggerAttack(e,i),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,i=0){return ec(this,t,e,i),this}asArray(t=1024){return(0,Vt.mG)(this,void 0,void 0,function*(){const e=t/this.context.sampleRate,i=new Xa(1,e,this.context.sampleRate),o=this.toSeconds(this.attack)+this.toSeconds(this.decay),c=o+this.toSeconds(this.release),u=.1*c,d=c+u,h=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/d,decay:e*this.toSeconds(this.decay)/d,release:e*this.toSeconds(this.release)/d,context:i}));return h._sig.toDestination(),h.triggerAttackRelease(e*(o+u)/d,0),(yield i.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}(0,Vt.gn)([ms(0)],gs.prototype,"attack",void 0),(0,Vt.gn)([ms(0)],gs.prototype,"decay",void 0),(0,Vt.gn)([Wl(0,1)],gs.prototype,"sustain",void 0),(0,Vt.gn)([ms(0)],gs.prototype,"release",void 0);const Vo=(()=>{let t,e;const i=[];for(t=0;t<128;t++)i[t]=Math.sin(t/127*(Math.PI/2));const o=[];for(t=0;t<127;t++){e=t/127;const y=Math.sin(e*(2*Math.PI)*6.4-Math.PI/2)+1;o[t]=y/10+.83*e}o[127]=1;const u=[];for(t=0;t<128;t++)u[t]=Math.ceil(t/127*5)/5;const h=[];for(t=0;t<128;t++)e=t/127,h[t]=.5*(1-Math.cos(Math.PI*e));const f=[];for(t=0;t<128;t++){e=t/127;const y=4*Math.pow(e,3)+.2,b=Math.cos(y*Math.PI*2*e);f[t]=Math.abs(b*(1-e))}function m(y){const b=new Array(y.length);for(let w=0;w<y.length;w++)b[w]=1-y[w];return b}return{bounce:{In:m(f),Out:f},cosine:{In:i,Out:function _(y){return y.slice(0).reverse()}(i)},exponential:"exponential",linear:"linear",ripple:{In:o,Out:m(o)},sine:{In:h,Out:m(h)},step:{In:u,Out:m(u)}}})();class oi extends Mt{constructor(){super(Q(oi.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const t=Q(oi.getDefaults(),arguments);this._volume=this.output=new Ms({context:this.context,volume:t.volume}),this.volume=this._volume.volume,de(this,"volume")}static getDefaults(){return Object.assign(Mt.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){const i=this["_original_"+t]=this[t];this[t]=(...o)=>{const u=this.context.transport.schedule(d=>{o[e]=d,i.apply(this,o)},o[e]);this._scheduledEvents.push(u)}}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(t,e,i,o){const c=this.toSeconds(i),u=this.toSeconds(e);return this.triggerAttack(t,c,o),this.triggerRelease(c+u),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class ai extends oi{constructor(){super(Q(ai.getDefaults(),arguments));const t=Q(ai.getDefaults(),arguments);this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(oi.getDefaults(),{detune:0,onsilence:Qt,portamento:0})}triggerAttack(t,e,i=1){this.log("triggerAttack",t,e,i);const o=this.toSeconds(e);return this._triggerEnvelopeAttack(o,i),this.setNote(t,o),this}triggerRelease(t){this.log("triggerRelease",t);const e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){const i=this.toSeconds(e),o=t instanceof nn?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(i)>.05){const c=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(o,c,i)}else this.frequency.setValueAtTime(o,i);return this}}(0,Vt.gn)([ms(0)],ai.prototype,"portamento",void 0);class dc extends gs{constructor(){super(Q(dc.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Ze({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Nr extends ai{constructor(){super(Q(Nr.getDefaults(),arguments)),this.name="Synth";const t=Q(Nr.getDefaults(),arguments);this.oscillator=new Dr(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new dc(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),de(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(ai.getDefaults(),{envelope:Object.assign(ei(gs.getDefaults(),Object.keys(Mt.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(ei(Dr.getDefaults(),[...Object.keys(gn.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain){const i=this.toSeconds(this.envelope.attack),o=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+i+o)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Fr extends Nr{constructor(){super(Q(Fr.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const t=Q(Fr.getDefaults(),arguments);this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,de(this,["oscillator","envelope"])}static getDefaults(){return Qn(ai.getDefaults(),Nr.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){const i=this.toSeconds(e),o=this.toFrequency(t instanceof nn?t.toFrequency():t);return this.oscillator.frequency.setValueAtTime(o*this.octaves,i),this.oscillator.frequency.exponentialRampToValueAtTime(o,i+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}(0,Vt.gn)([Wl(0)],Fr.prototype,"octaves",void 0),(0,Vt.gn)([ms(0)],Fr.prototype,"pitchDecay",void 0);const xc=new Set;function Bo(r){xc.add(r)}function jl(r,t){xc.add(`registerProcessor("${r}", ${t})`)}Bo('\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n'),Bo("\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n"),Bo("\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n"),jl("feedback-comb-filter",'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');class Ii extends oi{constructor(){super(Q(Ii.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const t=Q(Ii.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),e={};Object.keys(t.urls).forEach(i=>{const o=parseInt(i,10);if(ut(Oi(i)||je(o)&&isFinite(o),`url key is neither a note or midi pitch: ${i}`),Oi(i)){const c=new nn(this.context,i).toMidi();e[c]=t.urls[i]}else je(o)&&isFinite(o)&&(e[o]=t.urls[o])}),this._buffers=new br({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(oi.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Qt,onerror:Qt,release:.1,urls:{}})}_findClosest(t){let i=0;for(;i<96;){if(this._buffers.has(t+i))return-i;if(this._buffers.has(t-i))return i;i++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,i=1){return this.log("triggerAttack",t,e,i),Array.isArray(t)||(t=[t]),t.forEach(o=>{const c=Ge(new nn(this.context,o).toFrequency()),u=Math.round(c),d=c-u,h=this._findClosest(u),m=this._buffers.get(u-h),_=ko(h+d),y=new Ar({url:m,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:_}).connect(this.output);y.start(e,0,m.duration/_,i),hn(this._activeSources.get(u))||this._activeSources.set(u,[]),this._activeSources.get(u).push(y),y.onended=()=>{if(this._activeSources&&this._activeSources.has(u)){const b=this._activeSources.get(u),w=b.indexOf(y);-1!==w&&b.splice(w,1)}}}),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach(i=>{const o=new nn(this.context,i).toMidi();if(this._activeSources.has(o)&&this._activeSources.get(o).length){const c=this._activeSources.get(o);e=this.toSeconds(e),c.forEach(u=>{u.stop(e)}),this._activeSources.set(o,[])}}),this}releaseAll(t){const e=this.toSeconds(t);return this._activeSources.forEach(i=>{for(;i.length;)i.shift().stop(e)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,i,o=1){const c=this.toSeconds(i);return this.triggerAttack(t,c,o),hn(e)?(ut(hn(t),"notes must be an array when duration is array"),t.forEach((u,d)=>{const h=e[Math.min(d,e.length-1)];this.triggerRelease(u,c+this.toSeconds(h))})):this.triggerRelease(t,c+this.toSeconds(e)),this}add(t,e,i){if(ut(Oi(t)||isFinite(t),`note must be a pitch or midi: ${t}`),Oi(t)){const o=new nn(this.context,t).toMidi();this._buffers.add(o,e,i)}else this._buffers.add(t,e,i);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(e=>e.dispose())}),this._activeSources.clear(),this}}(0,Vt.gn)([ms(0)],Ii.prototype,"attack",void 0),(0,Vt.gn)([ms(0)],Ii.prototype,"release",void 0);class ci extends Ie{constructor(){super(Q(ci.getDefaults(),arguments,["callback","value"])),this.name="ToneEvent",this._state=new xr("stopped"),this._startOffset=0;const t=Q(ci.getDefaults(),arguments,["callback","value"]);this._loop=t.loop,this.callback=t.callback,this.value=t.value,this._loopStart=this.toTicks(t.loopStart),this._loopEnd=this.toTicks(t.loopEnd),this._playbackRate=t.playbackRate,this._probability=t.probability,this._humanize=t.humanize,this.mute=t.mute,this._playbackRate=t.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(Ie.getDefaults(),{callback:Qt,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(t=-1){this._state.forEachFrom(t,e=>{let i;if("started"===e.state){-1!==e.id&&this.context.transport.clear(e.id);const o=e.time+Math.round(this.startOffset/this._playbackRate);if(!0===this._loop||je(this._loop)&&this._loop>1){i=1/0,je(this._loop)&&(i=this._loop*this._getLoopDuration());const c=this._state.getAfter(o);null!==c&&(i=Math.min(i,c.time-o)),i!==1/0&&(this._state.setStateAtTime("stopped",o+i+1,{id:-1}),i=new ee(this.context,i));const u=new ee(this.context,this._getLoopDuration());e.id=this.context.transport.scheduleRepeat(this._tick.bind(this),u,new ee(this.context,o),i)}else e.id=this.context.transport.schedule(this._tick.bind(this),new ee(this.context,o))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t}get probability(){return this._probability}set probability(t){this._probability=t}get humanize(){return this._humanize}set humanize(t){this._humanize=t}start(t){const e=this.toTicks(t);return"stopped"===this._state.getValueAtTime(e)&&(this._state.add({id:-1,state:"started",time:e}),this._rescheduleEvents(e)),this}stop(t){this.cancel(t);const e=this.toTicks(t);if("started"===this._state.getValueAtTime(e)){this._state.setStateAtTime("stopped",e,{id:-1});const i=this._state.getBefore(e);let o=e;null!==i&&(o=i.time),this._rescheduleEvents(o)}return this}cancel(t){t=Hn(t,-1/0);const e=this.toTicks(t);return this._state.forEachFrom(e,i=>{this.context.transport.clear(i.id)}),this._state.cancel(e),this}_tick(t){const e=this.context.transport.getTicksAtTime(t);if(!this.mute&&"started"===this._state.getValueAtTime(e)){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let i=.02;fs(this.humanize)||(i=this.toSeconds(this.humanize)),t+=(2*Math.random()-1)*i}this.callback(t,this.value)}}_getLoopDuration(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)}get loop(){return this._loop}set loop(t){this._loop=t,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._rescheduleEvents()}get loopEnd(){return new ee(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}get loopStart(){return new ee(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const t=this.context.transport.ticks,e=this._state.get(t);if(null!==e&&"started"===e.state){const i=this._getLoopDuration();return(t-e.time)%i/i}return 0}return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class Mr extends ci{constructor(){super(Q(Mr.getDefaults(),arguments,["callback","events"])),this.name="Part",this._state=new xr("stopped"),this._events=new Set;const t=Q(Mr.getDefaults(),arguments,["callback","events"]);this._state.increasing=!0,t.events.forEach(e=>{hn(e)?this.add(e[0],e[1]):this.add(e)})}static getDefaults(){return Object.assign(ci.getDefaults(),{events:[]})}start(t,e){const i=this.toTicks(t);if("started"!==this._state.getValueAtTime(i)){e=Hn(e,this._loop?this._loopStart:0),e=Hn(e,this._loop?this._loopStart:0);const o=this.toTicks(e);this._state.add({id:-1,offset:o,state:"started",time:i}),this._forEach(c=>{this._startNote(c,i,o)})}return this}_startNote(t,e,i){e-=i,this._loop?t.startOffset>=this._loopStart&&t.startOffset<this._loopEnd?(t.startOffset<i&&(e+=this._getLoopDuration()),t.start(new ee(this.context,e))):t.startOffset<this._loopStart&&t.startOffset>=i&&(t.loop=!1,t.start(new ee(this.context,e))):t.startOffset>=i&&t.start(new ee(this.context,e))}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t,this._forEach(e=>{e.startOffset+=this._startOffset})}stop(t){const e=this.toTicks(t);return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._forEach(i=>{i.stop(t)}),this}at(t,e){const i=new $e(this.context,t).toTicks(),o=new ee(this.context,1).toSeconds(),c=this._events.values();let u=c.next();for(;!u.done;){const d=u.value;if(Math.abs(i-d.startOffset)<o)return St(e)&&(d.value=e),d;u=c.next()}return St(e)?(this.add(t,e),this.at(t)):null}add(t,e){t instanceof Object&&Reflect.has(t,"time")&&(t=(e=t).time);const i=this.toTicks(t);let o;return e instanceof ci?(o=e,o.callback=this._tick.bind(this)):o=new ci({callback:this._tick.bind(this),context:this.context,value:e}),o.startOffset=i,o.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(o),this._restartEvent(o),this}_restartEvent(t){this._state.forEach(e=>{"started"===e.state?this._startNote(t,e.time,e.offset):t.stop(new ee(this.context,e.time))})}remove(t,e){return Ns(t)&&t.hasOwnProperty("time")&&(t=(e=t).time),t=this.toTicks(t),this._events.forEach(i=>{i.startOffset===t&&(en(e)||St(e)&&i.value===e)&&(this._events.delete(i),i.dispose())}),this}clear(){return this._forEach(t=>t.dispose()),this._events.clear(),this}cancel(t){return this._forEach(e=>e.cancel(t)),this._state.cancel(this.toTicks(t)),this}_forEach(t){return this._events&&this._events.forEach(e=>{e instanceof Mr?e._forEach(t):t(e)}),this}_setAll(t,e){this._forEach(i=>{i[t]=e})}_tick(t,e){this.mute||this.callback(t,e)}_testLoopBoundries(t){this._loop&&(t.startOffset<this._loopStart||t.startOffset>=this._loopEnd)?t.cancel(0):"stopped"===t.state&&this._restartEvent(t)}get probability(){return this._probability}set probability(t){this._probability=t,this._setAll("probability",t)}get humanize(){return this._humanize}set humanize(t){this._humanize=t,this._setAll("humanize",t)}get loop(){return this._loop}set loop(t){this._loop=t,this._forEach(e=>{e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.loop=t,this._testLoopBoundries(e)})}get loopEnd(){return new ee(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach(e=>{e.loopEnd=t,this._testLoopBoundries(e)})}get loopStart(){return new ee(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach(e=>{e.loopStart=this.loopStart,this._testLoopBoundries(e)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._setAll("playbackRate",t)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}class zo extends Mt{constructor(){super(Object.assign(Q(zo.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const t=Q(zo.getDefaults(),arguments,["pan"]);this.pan=new te({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",de(this,"pan")}static getDefaults(){return Object.assign(Mt.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}jl("bit-crusher","\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n");class Wt extends Mt{constructor(){super(Q(Wt.getDefaults(),arguments,["solo"])),this.name="Solo";const t=Q(Wt.getDefaults(),arguments,["solo"]);this.input=this.output=new Ze({context:this.context}),Wt._allSolos.has(this.context)||Wt._allSolos.set(this.context,new Set),Wt._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(Mt.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),Wt._allSolos.get(this.context).forEach(e=>e._updateSolo())}get muted(){return 0===this.input.gain.value}_addSolo(){Wt._soloed.has(this.context)||Wt._soloed.set(this.context,new Set),Wt._soloed.get(this.context).add(this)}_removeSolo(){Wt._soloed.has(this.context)&&Wt._soloed.get(this.context).delete(this)}_isSoloed(){return Wt._soloed.has(this.context)&&Wt._soloed.get(this.context).has(this)}_noSolos(){return!Wt._soloed.has(this.context)||Wt._soloed.has(this.context)&&0===Wt._soloed.get(this.context).size}_updateSolo(){this.input.gain.value=this._isSoloed()||this._noSolos()?1:0}dispose(){return super.dispose(),Wt._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Wt._allSolos=new Map,Wt._soloed=new Map;class Xo extends Mt{constructor(){super(Q(Xo.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const t=Q(Xo.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new zo({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Ms({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,de(this,["pan","volume"])}static getDefaults(){return Object.assign(Mt.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class ui extends Mt{constructor(){super(Q(ui.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const t=Q(ui.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Wt({solo:t.solo,context:this.context}),this._panVol=this.output=new Xo({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),de(this,["pan","volume"])}static getDefaults(){return Object.assign(Mt.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return ui.buses.has(t)||ui.buses.set(t,new Ze({context:this.context})),ui.buses.get(t)}send(t,e=0){const i=this._getBus(t),o=new Ze({context:this.context,units:"decibels",gain:e});return this.connect(o),o.connect(i),o}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}ui.buses=new Map;class hf extends Mt{constructor(){super(...arguments),this.name="Listener",this.positionX=new te({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new te({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new te({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new te({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new te({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new te({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new te({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new te({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new te({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(Mt.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}So(r=>{r.listener=new hf({context:r})}),_r(r=>{r.listener.dispose()});const Yn=pn().transport,$o=pn().destination;pn(),pn(),pn();const Ko=pn();function Jl(){return ns.loaded()}let ta=(()=>{class r{constructor(){this.chordProgressionActive=(0,k.tdS)(!1),this.melodyActive=(0,k.tdS)(!1),this.samplerReady=!1}start(){"started"!==Yn.state&&function Ao(){Fs.resume()}(),$o.volume.value=-5,this.sampler=new Ii({urls:{C6:"C6.mp3","D#6":"Ds6.mp3","F#6":"Fs6.mp3",A6:"A6.mp3",C5:"C5.mp3","D#5":"Ds5.mp3","F#5":"Fs5.mp3",A5:"A5.mp3",C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3",C3:"C3.mp3","D#3":"Ds3.mp3","F#3":"Fs3.mp3",A3:"A3.mp3",C2:"C2.mp3","D#2":"Ds2.mp3","F#2":"Fs2.mp3",A2:"A2.mp3",C1:"C1.mp3","D#1":"Ds1.mp3","F#1":"Fs1.mp3",A1:"A1.mp3",A0:"A0.mp3"},release:.5,baseUrl:"https://tonejs.github.io/audio/salamander/",onload:()=>{this.samplerReady=!0}}).toDestination()}setProgressionActive(){this.chordProgressionActive.set(!0)}setProgressionPassive(){this.chordProgressionActive.set(!1)}setMelodyActive(){this.melodyActive.set(!0)}setMelodyPassive(){this.melodyActive.set(!1)}playNote(e,i=0,o=.3){("suspended"!==Ko.state||!this.samplerReady)&&Jl().then(()=>{this.sampler.triggerAttackRelease(e,o,Ko.currentTime+i)})}playMelody(e,i=.3,o=.3){this.melodyActive()||!this.samplerReady||(this.setMelodyActive(),e.forEach((c,u)=>{this.playNote(c,u*i,o)}),setTimeout(()=>{this.setMelodyPassive()},1e3*i*(e.length-1)+1e3*o))}playChord(e,i=0,o=.5){("suspended"!==Ko.state||!this.samplerReady)&&Jl().then(()=>{this.sampler.triggerAttackRelease(e,o,Ko.currentTime+i)})}playProgression(e,i=.3,o=.3){if(this.chordProgressionActive()||!this.samplerReady)return;this.setProgressionActive();const c=new Mr((u,d)=>{this.sampler.triggerAttackRelease(d.chord,o,u)},e.map((u,d)=>({chord:u,time:d*i}))).start(0);Yn.start(),setTimeout(()=>{c.stop(),Yn.stop(),this.setProgressionPassive()},1e3*i*(e.length-1)+1e3*o)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=k.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),th=(()=>{class r{constructor(e){this.audioSrv=e,this.notes=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],this.solfegeList=["Do","Ra","Re","Me","Mi","Fa","Se","So","Le","La","Te","Ti"],this.octaves=["0","1","2","3","4","5","6"],this.selectedNoteList=(0,k.tdS)(["C4","D4","E4","F4","G4","A4","B4"]),this.selectedSolfegeList=(0,k.tdS)(["Do","Re","Mi","Fa","So","La","Ti"]),this.selectedRandomNote=(0,k.tdS)("C"),this.selectedRootNote=(0,k.tdS)("C"),this.possibleRandomNoteIndices=(0,k.tdS)(Ut.range(this.selectedNoteList().length)),this.randomizerWorkingOctave=3,this.randomizeWorkingKey()}randomizeWorkingKey(e=Ut.range(this.selectedNoteList().length)){const i=this.notes[Math.floor(Math.random()*this.notes.length)];this.selectedRootNote.set(i),this.selectedNoteList.set(this.getKeyNotesForOctave(i,this.randomizerWorkingOctave)),this.setRandomNote(i,{low:2,high:this.octaves.length-1},e)}setRandomNote(e,i,o=Ut.range(this.selectedNoteList().length)){if(i.low>i.high||i.low<0||i.low>this.octaves.length-1||i.high<0||i.high>this.octaves.length-1)throw new Error("Invalid octave range!");this.possibleRandomNoteIndices.set(o);const c=this.getKey(e),u=c[o[Math.floor(Math.random()*c.length)%o.length]];this.selectedRandomNote.set(u+this.octaves[i.low+Math.floor(Math.random()*Math.min(this.octaves.length,i.high-i.low))])}getKeyNotesForOctave(e,i){const o=this.getKey(e).map(c=>{const u=this.getKey(e);var d=this.notes.length;return u.forEach(h=>{this.notes.indexOf(h)<d&&(d=this.notes.indexOf(h))}),u.indexOf(c)<u.indexOf(this.notes[d])?c+this.octaves[i]:c+this.octaves[i+1]});return o.push(o[0].slice(0,-1)+this.octaves[this.octaves.indexOf(o[0].slice(-1))+1]),o}getKey(e,i=[0,2,4,5,7,9,11]){this.notes.indexOf(e);var o=[],c=[];return i.forEach(u=>{o.push(this.notes[(this.notes.indexOf(e)+u)%this.notes.length]),c.push(this.solfegeList[u]),this.selectedSolfegeList.set(c)}),o}}return r.\u0275fac=function(e){return new(e||r)(k.LFG(ta))},r.\u0275prov=k.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),eu=(()=>{class r{constructor(e){this.keySrv=e,this.questions=(0,k.tdS)([]),this.state=(0,k.tdS)(qe.FirstInit),this.questionCount=20,this.activeQuestion=0,this.SessionState=qe,this.selectedKey=(0,k.Flj)(()=>this.keySrv.selectedNoteList().map(i=>i.slice(0,-1))),this.activeQuestionState={},this.canProceedToTheNextQuestion=!1,this.results={},this.correctGuess=!1}startSession(e=20){if(this.state()===qe.Active)throw new Error("Session already active");this.state.set(qe.Active),this.questionCount=e}resetSession(){this.state.set(qe.FirstInit),this.activeQuestionState={},this.canProceedToTheNextQuestion=!1,this.activeQuestion=0,this.questions.set([])}goToNextQuestion(){this.activeQuestionState.isCorrect=!this.activeQuestionState.wrongNoteIndexList,this.questions.mutate(e=>e.push(this.activeQuestionState)),this.questionCount-1>this.activeQuestion?(console.log("Active Question: ",this.activeQuestion,"\nQuestions Array: ",this.questions()),this.activeQuestionState={},this.activeQuestion=this.activeQuestion+1,this.canProceedToTheNextQuestion=!1,this.correctGuess=!1):(console.log("Active Question: ",this.activeQuestion,"\nQuestions Array: ",this.questions()),this.endSession())}endSession(){if(this.state()!==qe.Active)throw new Error("No active session to end");this.state.set(qe.AfterSession);let e=0;this.correctGuess=!1,this.questions().forEach(i=>{i.isCorrect&&e++}),this.results={correctCount:e,questionCount:this.questionCount}}guess(e,i){const o=this.selectedKey().indexOf(i),c=this.selectedKey().indexOf(e);this.activeQuestionState.correctNoteIndex||(this.activeQuestionState.correctNoteIndex=c),o===c&&(this.activeQuestionState.wrongNoteIndexList||(this.correctGuess=!0),this.canProceedToTheNextQuestion=!0),!this.canProceedToTheNextQuestion&&(this.activeQuestionState.wrongNoteIndexList?this.activeQuestionState.wrongNoteIndexList.includes(o)||this.activeQuestionState.wrongNoteIndexList.push(o):this.activeQuestionState.wrongNoteIndexList=[o])}}return r.\u0275fac=function(e){return new(e||r)(k.LFG(th))},r.\u0275prov=k.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var qe=(()=>((qe=qe||{}).FirstInit="firstInit",qe.Active="active",qe.AfterSession="afterSession",qe))();function _n(r,t){if(1&r&&k._UZ(0,"div",7),2&r){const e=t.$implicit;k.ekj("correct",e.isCorrect)("incorrect",!e.isCorrect)("default",void 0===e.isCorrect)}}function Vi(r,t){1&r&&k._UZ(0,"div",8)}function mf(r,t){1&r&&(k.TgZ(0,"p",9),k._uU(1,"Incorrect"),k.qZA())}function gf(r,t){1&r&&(k.TgZ(0,"p",10),k._uU(1,"Correct"),k.qZA())}let _f=(()=>{class r{constructor(e){this.sessionSrv=e,this.remainingBoxes=(0,k.tdS)([]),this.remainingBoxes=(0,k.Flj)(()=>Array(this.sessionSrv.questionCount-this.sessionSrv.questions().length))}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)(k.Y36(eu))},r.\u0275cmp=k.Xpm({type:r,selectors:[["app-progress-info"]],decls:7,vars:4,consts:[[1,"cet-progress-info"],[1,"container"],["class","box",3,"correct","incorrect","default",4,"ngFor","ngForOf"],["class","box default",4,"ngFor","ngForOf"],[1,"cet-current-info"],["class","cet-incorrect-text",4,"ngIf"],["class","cet-correct-text",4,"ngIf"],[1,"box"],[1,"box","default"],[1,"cet-incorrect-text"],[1,"cet-correct-text"]],template:function(e,i){1&e&&(k.TgZ(0,"div",0)(1,"div",1),k.YNc(2,_n,1,6,"div",2),k.YNc(3,Vi,1,0,"div",3),k.qZA(),k.TgZ(4,"div",4),k.YNc(5,mf,2,0,"p",5),k.YNc(6,gf,2,0,"p",6),k.qZA()()),2&e&&(k.xp6(2),k.Q6J("ngForOf",i.sessionSrv.questions()),k.xp6(1),k.Q6J("ngForOf",i.remainingBoxes()),k.xp6(2),k.Q6J("ngIf",i.sessionSrv.activeQuestionState.wrongNoteIndexList),k.xp6(1),k.Q6J("ngIf",i.sessionSrv.correctGuess))},dependencies:[gt.sg,gt.O5],styles:[".cet-progress-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px}.box[_ngcontent-%COMP%]{width:30px;height:15px;background-color:#fff;border-radius:5px}.box.correct[_ngcontent-%COMP%]{background-color:green}.box.incorrect[_ngcontent-%COMP%]{background-color:red}.box.default[_ngcontent-%COMP%]{background-color:#fff}.cet-current-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:30px}.cet-current-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:30px}.cet-current-info[_ngcontent-%COMP%]   .cet-incorrect-text[_ngcontent-%COMP%]{color:red}.cet-current-info[_ngcontent-%COMP%]   .cet-correct-text[_ngcontent-%COMP%]{color:green}"]}),r})();function vf(r,t){if(1&r){const e=k.EpF();k.TgZ(0,"button",3),k.NdJ("click",function(){k.CHM(e);const o=k.oxw();return k.KtG(o.initialize())}),k._uU(1,"Start"),k.qZA()}}function yf(r,t){if(1&r){const e=k.EpF();k.TgZ(0,"button",10),k.NdJ("click",function(){const c=k.CHM(e).$implicit,u=k.oxw(2);return k.KtG(u.userGuess(c))}),k._uU(1),k.qZA()}if(2&r){const e=t.index,i=k.oxw(2);k.s9C("id","note-"+e),k.Q6J("disabled",!i.keySrv.possibleRandomNoteIndices().includes(e)),k.xp6(1),k.hij(" ",i.keySrv.selectedSolfegeList()[e%i.keySrv.selectedSolfegeList().length]," ")}}function eh(r,t){if(1&r){const e=k.EpF();k.ynx(0),k._UZ(1,"app-progress-info"),k.TgZ(2,"p"),k._uU(3),k.qZA(),k.TgZ(4,"div",4)(5,"div",5),k.YNc(6,yf,2,3,"button",6),k.qZA(),k.TgZ(7,"div",7)(8,"button",3),k.NdJ("click",function(){k.CHM(e);const o=k.oxw();return k.KtG(o.audioSrv.playNote(o.keySrv.selectedRandomNote()))}),k._uU(9," Note "),k.qZA(),k.TgZ(10,"button",3),k.NdJ("click",function(){k.CHM(e);const o=k.oxw();return k.KtG(o.audioSrv.playProgression([[o.keySrv.selectedNoteList()[0],o.keySrv.selectedNoteList()[2],o.keySrv.selectedNoteList()[4]],[o.keySrv.selectedNoteList()[3],o.keySrv.selectedNoteList()[5],o.keySrv.selectedNoteList()[0]],[o.keySrv.selectedNoteList()[4],o.keySrv.selectedNoteList()[6],o.keySrv.selectedNoteList()[1]],[o.keySrv.selectedNoteList()[0],o.keySrv.selectedNoteList()[2],o.keySrv.selectedNoteList()[4]]]))}),k._uU(11," Play Progression "),k.qZA(),k.TgZ(12,"button",8),k.NdJ("click",function(){k.CHM(e);const o=k.oxw();return k.KtG(o.setNewKey())}),k._uU(13,"Next"),k.qZA()(),k.TgZ(14,"button",9),k.NdJ("click",function(){k.CHM(e);const o=k.oxw();return k.KtG(o.sessionSrv.endSession())}),k._uU(15,"End Session"),k.qZA()(),k.BQk()}if(2&r){const e=k.oxw();k.xp6(3),k.AsE("Question ",e.sessionSrv.activeQuestion+1," of ",e.sessionSrv.questionCount,""),k.xp6(3),k.Q6J("ngForOf",e.keySrv.selectedNoteList()),k.xp6(6),k.Q6J("disabled",!e.sessionSrv.canProceedToTheNextQuestion||e.audioSrv.melodyActive()||e.audioSrv.chordProgressionActive())}}function _s(r,t){if(1&r){const e=k.EpF();k.ynx(0),k.TgZ(1,"p"),k._uU(2,"Fin"),k.qZA(),k._UZ(3,"app-progress-info"),k.TgZ(4,"p"),k._uU(5),k.qZA(),k.TgZ(6,"button",3),k.NdJ("click",function(){k.CHM(e);const o=k.oxw();return k.KtG(o.sessionSrv.resetSession())}),k._uU(7,"Restart"),k.qZA(),k.TgZ(8,"button",9),k.NdJ("click",function(){k.CHM(e);const o=k.oxw();return k.KtG(o.sessionSrv.resetSession())}),k._uU(9,"To Main Menu"),k.qZA(),k.BQk()}if(2&r){const e=k.oxw();k.xp6(5),k.AsE(" ",e.sessionSrv.results.correctCount," / ",e.sessionSrv.results.questionCount,"")}}let At=(()=>{class r{constructor(e,i,o){this.audioSrv=e,this.keySrv=i,this.sessionSrv=o,this.trainerStarted=(0,k.tdS)(!1),this.coloringActive=(0,k.tdS)(!1),this.guessFeedback=(0,k.tdS)(Mn.default),this.GuessState=Mn,this.msMelodySpeed=400,this.msAfterUserIsAllowedToClick=this.msMelodySpeed,this.SessionState=qe}ngOnInit(){this.sessionSrv.resetSession()}setNewKey(){this.keySrv.randomizeWorkingKey(),this.guessFeedback.set(Mn.default),this.sessionSrv.goToNextQuestion(),this.sessionSrv.state()===qe.Active&&(this.audioSrv.playProgression([[this.keySrv.selectedNoteList()[0],this.keySrv.selectedNoteList()[2],this.keySrv.selectedNoteList()[4]],[this.keySrv.selectedNoteList()[3],this.keySrv.selectedNoteList()[5],this.keySrv.selectedNoteList()[0]],[this.keySrv.selectedNoteList()[4],this.keySrv.selectedNoteList()[6],this.keySrv.selectedNoteList()[1]],[this.keySrv.selectedNoteList()[0],this.keySrv.selectedNoteList()[2],this.keySrv.selectedNoteList()[4]]]),this.audioSrv.playNote(this.keySrv.selectedRandomNote(),1.5))}userGuess(e){if(this.coloringActive())return;const i=e.slice(0,-1),o=this.keySrv.selectedRandomNote().slice(0,-1);if(this.sessionSrv.guess(o,i),i===o){this.guessFeedback.set(Mn.success);const c=this.changeOctave(Number(e.slice(-1))-Number(this.keySrv.selectedRandomNote().slice(-1))),u=this.getNotesIndicesToWalkOn(c,ce.ToRoot),d=this.getNotesToWalkOn(c,ce.ToRoot);this.audioSrv.playMelody(d,.001*this.msMelodySpeed,.001*this.msMelodySpeed),this.colorPlaying(u,this.msMelodySpeed)}else{this.guessFeedback.set(Mn.failure);let c=document.getElementById("note-"+this.keySrv.selectedNoteList().indexOf(e));c&&(c.classList.add("cet-failure"),setTimeout(()=>{c?.classList.remove("cet-failure")},this.msMelodySpeed))}}getNotesToWalkOn(e,i){let o;return o=e.indexOf(this.keySrv.selectedRandomNote())<e.length/2?e.slice(0,e.indexOf(this.keySrv.selectedRandomNote())+1).reverse():e.slice(e.indexOf(this.keySrv.selectedRandomNote()),e.length),this.transformResultForSelectedWalkMode(o,i)}getNotesIndicesToWalkOn(e,i){let o;return o=e.indexOf(this.keySrv.selectedRandomNote())<e.length/2?Ut.range(e.indexOf(this.keySrv.selectedRandomNote()),-1):Ut.range(e.indexOf(this.keySrv.selectedRandomNote()),e.length),this.transformResultForSelectedWalkMode(o,i)}transformResultForSelectedWalkMode(e,i){switch(i){case ce.ToRoot:return e;case ce.FromRoot:return e.reverse();case ce.JumpToRoot:let o=[];return o.push(e[0]),e[0]!==e[e.length-1]&&o.push(e[e.length-1]),o;case ce.NoWalk:return[e[0]];default:return e}}colorPlaying(e,i){this.coloringActive()||(this.coloringActive.set(!0),e.forEach((o,c)=>{let u=document.getElementById("note-"+o);u&&setTimeout(()=>{u?.classList.add("cet-playing"),setTimeout(()=>{u?.classList.remove("cet-playing")},i)},i*c)}),setTimeout(()=>{this.coloringActive.set(!1)},e.length*i+this.msAfterUserIsAllowedToClick))}changeOctave(e){return this.keySrv.selectedNoteList().map(c=>{const d=Number(c.slice(-1))-e;return c.slice(0,-1)+d})}initialize(){this.audioSrv.start(),this.trainerStarted.set(!0),this.keySrv.randomizeWorkingKey(),this.sessionSrv.startSession(5),setTimeout(()=>{this.audioSrv.playProgression([[this.keySrv.selectedNoteList()[0],this.keySrv.selectedNoteList()[2],this.keySrv.selectedNoteList()[4]],[this.keySrv.selectedNoteList()[3],this.keySrv.selectedNoteList()[5],this.keySrv.selectedNoteList()[0]],[this.keySrv.selectedNoteList()[4],this.keySrv.selectedNoteList()[6],this.keySrv.selectedNoteList()[1]],[this.keySrv.selectedNoteList()[0],this.keySrv.selectedNoteList()[2],this.keySrv.selectedNoteList()[4]]]),this.audioSrv.playNote(this.keySrv.selectedRandomNote(),1.5)},500)}}return r.\u0275fac=function(e){return new(e||r)(k.Y36(ta),k.Y36(th),k.Y36(eu))},r.\u0275cmp=k.Xpm({type:r,selectors:[["app-functional-trainer"]],decls:7,vars:3,consts:[[1,"cet-functional-wrapper"],[3,"click",4,"ngIf"],[4,"ngIf"],[3,"click"],[1,"cet-controls-wrapper"],[1,"cet-scale"],["class","cet-note",3,"disabled","id","click",4,"ngFor","ngForOf"],[1,"cet-controls"],[3,"disabled","click"],["routerLink","/home",3,"click"],[1,"cet-note",3,"disabled","id","click"]],template:function(e,i){1&e&&(k.TgZ(0,"div",0)(1,"h2"),k._uU(2,"Functional Trainer"),k.qZA(),k.ynx(3),k.YNc(4,vf,2,0,"button",1),k.BQk(),k.YNc(5,eh,16,4,"ng-container",2),k.YNc(6,_s,10,2,"ng-container",2),k.qZA()),2&e&&(k.xp6(4),k.Q6J("ngIf",i.sessionSrv.state()===i.SessionState.FirstInit),k.xp6(1),k.Q6J("ngIf",i.sessionSrv.state()===i.SessionState.Active),k.xp6(1),k.Q6J("ngIf",i.sessionSrv.state()===i.SessionState.AfterSession))},dependencies:[gt.sg,gt.O5,x.rH,_f],styles:[".cet-playing[_ngcontent-%COMP%], .cet-playing[_ngcontent-%COMP%]:hover{background-color:green}.cet-failure[_ngcontent-%COMP%], .cet-failure[_ngcontent-%COMP%]:hover{background-color:red}.cet-functional-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:calc(100vh - 16px);gap:30px;position:relative}.cet-functional-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{position:absolute;top:120px}.cet-functional-wrapper[_ngcontent-%COMP%]   .cet-controls-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:20px}.cet-scale[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:3px}.cet-scale[_ngcontent-%COMP%]   .cet-note[_ngcontent-%COMP%]{width:40px;height:40px;min-width:unset}.cet-controls[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:3px}"]}),r})();var Mn=(()=>((Mn=Mn||{}).default="def",Mn.success="success",Mn.failure="fail",Mn))(),ce=(()=>((ce=ce||{}).ToRoot="toRoot",ce.FromRoot="fromRoot",ce.JumpToRoot="jumpToRoot",ce.NoWalk="noWalk",ce))();const nh=[{path:"",component:At}];let xf=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=k.oAB({type:r}),r.\u0275inj=k.cJS({imports:[x.Bz.forChild(nh),x.Bz]}),r})(),Gt=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=k.oAB({type:r}),r.\u0275inj=k.cJS({imports:[gt.ez,xf]}),r})()},9884:function(tt,Yt,Tt){!function(gt,x,k,Ut){"use strict";var Lt=function(X,ft,Z){return{endTime:ft,insertTime:Z,type:"exponentialRampToValue",value:X}},Ot=function(X,ft,Z){return{endTime:ft,insertTime:Z,type:"linearRampToValue",value:X}},ye=function(X,ft){return{startTime:ft,type:"setValue",value:X}},qn=function(X,ft,Z){return{duration:Z,startTime:ft,type:"setValueCurve",values:X}},Ls=function(X,ft,Z){var ct=Z.target;return ct+(ft-ct)*Math.exp((Z.startTime-X)/Z.timeConstant)},rn=function(X){return"exponentialRampToValue"===X.type},Ne=function(X){return"linearRampToValue"===X.type},yn=function(X){return rn(X)||Ne(X)},xn=function(X){return"setValue"===X.type},Pe=function(X){return"setValueCurve"===X.type},Kn=function qt(X,ft,Z,yt){var ct=X[ft];return void 0===ct?yt:yn(ct)||xn(ct)?ct.value:Pe(ct)?ct.values[ct.values.length-1]:Ls(Z,qt(X,ft-1,ct.startTime,yt),ct)},Ee=function(X,ft,Z,yt,ct){return void 0===Z?[yt.insertTime,ct]:yn(Z)?[Z.endTime,Z.value]:xn(Z)?[Z.startTime,Z.value]:Pe(Z)?[Z.startTime+Z.duration,Z.values[Z.values.length-1]]:[Z.startTime,Kn(X,ft-1,Z.startTime,ct)]},wn=function(X){return"cancelAndHold"===X.type},xs=function(X){return"cancelScheduledValues"===X.type},ge=function(X){return wn(X)||xs(X)?X.cancelTime:rn(X)||Ne(X)?X.endTime:X.startTime},Pn=function(X,ft,Z,yt){var Dt=yt.value;return Z===Dt?Dt:0<Z&&0<Dt||Z<0&&Dt<0?Z*Math.pow(Dt/Z,(X-ft)/(yt.endTime-ft)):0},Je=function(X,ft,Z,yt){return Z+(X-ft)/(yt.endTime-ft)*(yt.value-Z)},Tn=function(X,ft){var ct=ft.values;return function(X,ft){var Z=Math.floor(ft),yt=Math.ceil(ft);return Z===yt?X[Z]:(1-(ft-Z))*X[Z]+(1-(yt-ft))*X[yt]}(ct,(X-ft.startTime)/ft.duration*(ct.length-1))},Ln=function(X){return"setTarget"===X.type},fi=function(qt){function X(ft){k(this,X),this._automationEvents=[],this._currenTime=0,this._defaultValue=ft}return Ut(X,[{key:qt,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(Z){var yt=ge(Z);if(wn(Z)||xs(Z)){var ct=this._automationEvents.findIndex(function(re){return xs(Z)&&Pe(re)?re.startTime+re.duration>=yt:ge(re)>=yt}),Dt=this._automationEvents[ct];if(-1!==ct&&(this._automationEvents=this._automationEvents.slice(0,ct)),wn(Z)){var ht=this._automationEvents[this._automationEvents.length-1];if(void 0!==Dt&&yn(Dt)){if(void 0!==ht&&Ln(ht))throw new Error("The internal list is malformed.");var mi=void 0===ht?Dt.insertTime:Pe(ht)?ht.startTime+ht.duration:ge(ht),Vs=void 0===ht?this._defaultValue:Pe(ht)?ht.values[ht.values.length-1]:ht.value,Vn=rn(Dt)?Pn(yt,mi,Vs,Dt):Je(yt,mi,Vs,Dt),us=rn(Dt)?Lt(Vn,yt,this._currenTime):Ot(Vn,yt,this._currenTime);this._automationEvents.push(us)}if(void 0!==ht&&Ln(ht)&&this._automationEvents.push(ye(this.getValue(yt),yt)),void 0!==ht&&Pe(ht)&&ht.startTime+ht.duration>yt){var Ft=yt-ht.startTime,Kt=(ht.values.length-1)/ht.duration,Wn=Math.max(2,1+Math.ceil(Ft*Kt)),ls=Ft/(Wn-1)*Kt,Fe=ht.values.slice(0,Wn);if(ls<1)for(var an=1;an<Wn;an+=1){var Bi=ls*an%1;Fe[an]=ht.values[an-1]*(1-Bi)+ht.values[an]*Bi}this._automationEvents[this._automationEvents.length-1]=qn(Fe,ht.startTime,Ft)}}}else{var Le=this._automationEvents.findIndex(function(re){return ge(re)>yt}),ue=-1===Le?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[Le-1];if(void 0!==ue&&Pe(ue)&&ge(ue)+ue.duration>yt)return!1;var Me=rn(Z)?Lt(Z.value,Z.endTime,this._currenTime):Ne(Z)?Ot(Z.value,yt,this._currenTime):Z;if(-1===Le)this._automationEvents.push(Me);else{if(Pe(Z)&&yt+Z.duration>ge(this._automationEvents[Le]))return!1;this._automationEvents.splice(Le,0,Me)}}return!0}},{key:"flush",value:function(Z){var yt=this._automationEvents.findIndex(function(ht){return ge(ht)>Z});if(yt>1){var ct=this._automationEvents.slice(yt-1),Dt=ct[0];Ln(Dt)&&ct.unshift(ye(Kn(this._automationEvents,yt-2,Dt.startTime,this._defaultValue),Dt.startTime)),this._automationEvents=ct}}},{key:"getValue",value:function(Z){if(0===this._automationEvents.length)return this._defaultValue;var yt=this._automationEvents.findIndex(function(Fe){return ge(Fe)>Z}),ct=this._automationEvents[yt],Dt=(-1===yt?this._automationEvents.length:yt)-1,ht=this._automationEvents[Dt];if(void 0!==ht&&Ln(ht)&&(void 0===ct||!yn(ct)||ct.insertTime>Z))return Ls(Z,Kn(this._automationEvents,Dt-1,ht.startTime,this._defaultValue),ht);if(void 0!==ht&&xn(ht)&&(void 0===ct||!yn(ct)))return ht.value;if(void 0!==ht&&Pe(ht)&&(void 0===ct||!yn(ct)||ht.startTime+ht.duration>Z))return Z<ht.startTime+ht.duration?Tn(Z,ht):ht.values[ht.values.length-1];if(void 0!==ht&&yn(ht)&&(void 0===ct||!yn(ct)))return ht.value;if(void 0!==ct&&rn(ct)){var mi=Ee(this._automationEvents,Dt,ht,ct,this._defaultValue),Vs=x(mi,2);return Pn(Z,Vs[0],Vs[1],ct)}if(void 0!==ct&&Ne(ct)){var Ft=Ee(this._automationEvents,Dt,ht,ct,this._defaultValue),Kt=x(Ft,2);return Je(Z,Kt[0],Kt[1],ct)}return this._defaultValue}}]),X}(Symbol.iterator);gt.AutomationEventList=fi,gt.createCancelAndHoldAutomationEvent=function(X){return{cancelTime:X,type:"cancelAndHold"}},gt.createCancelScheduledValuesAutomationEvent=function(X){return{cancelTime:X,type:"cancelScheduledValues"}},gt.createExponentialRampToValueAutomationEvent=function(X,ft){return{endTime:ft,type:"exponentialRampToValue",value:X}},gt.createLinearRampToValueAutomationEvent=function(X,ft){return{endTime:ft,type:"linearRampToValue",value:X}},gt.createSetTargetAutomationEvent=function(X,ft,Z){return{startTime:ft,target:X,timeConstant:Z,type:"setTarget"}},gt.createSetValueAutomationEvent=ye,gt.createSetValueCurveAutomationEvent=qn}(Yt,Tt(7424),Tt(6690),Tt(9728))},6990:function(tt,Yt,Tt){var gt;tt=Tt.nmd(tt),function(){var x,Ot="Expected a function",qn="__lodash_hash_undefined__",rn="__lodash_placeholder__",ft=1/0,Z=9007199254740991,Dt=4294967295,Vs=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Vn="[object Arguments]",us="[object Array]",Kt="[object Boolean]",Wn="[object Date]",Fe="[object Error]",an="[object Function]",Bi="[object GeneratorFunction]",Le="[object Map]",ue="[object Number]",re="[object Object]",su="[object Promise]",Gi="[object RegExp]",Bn="[object Set]",Ui="[object String]",Pr="[object Symbol]",zi="[object WeakMap]",Te="[object ArrayBuffer]",Jn="[object DataView]",ji="[object Float32Array]",gi="[object Float64Array]",Lr="[object Int8Array]",na="[object Int16Array]",sa="[object Int32Array]",ia="[object Uint8Array]",ra="[object Uint8ClampedArray]",_i="[object Uint16Array]",Ws="[object Uint32Array]",Bs=/\b__p \+= '';/g,iu=/\b(__p \+=) '' \+/g,ru=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Gs=/&(?:amp|lt|gt|quot|#39);/g,Zi=/[&<>"']/g,ou=RegExp(Gs.source),oh=RegExp(Zi.source),au=/<%-([\s\S]+?)%>/g,cu=/<%([\s\S]+?)%>/g,Qi=/<%=([\s\S]+?)%>/g,se=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Hi=/^\w*$/,Us=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vi=/[\\^$.*+?()[\]{}|]/g,uu=RegExp(vi.source),Yi=/^\s+/,Vr=/\s/,ah=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ch=/\{\n\/\* \[wrapped with (.+)\] \*/,uh=/,? & /,lh=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,oa=/[()=,{}\[\]\/\s]/,aa=/\\(\\)?/g,hh=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,lu=/\w*$/,dh=/^[-+]0x[0-9a-f]+$/i,fh=/^0b[01]+$/i,ph=/^\[object .+?Constructor\]$/,mh=/^0o[0-7]+$/i,hu=/^(?:0|[1-9]\d*)$/,gh=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Wr=/($^)/,Br=/['\n\r\u2028\u2029\\]/g,Xi="\\ud800-\\udfff",du="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",fu="\\u2700-\\u27bf",pu="a-z\\xdf-\\xf6\\xf8-\\xff",mu="A-Z\\xc0-\\xd6\\xd8-\\xde",gu="\\ufe0e\\ufe0f",_u="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",bh="["+Xi+"]",vu="["+_u+"]",Ur="["+du+"]",yu="\\d+",Sh="["+fu+"]",xu="["+pu+"]",wu="[^"+Xi+_u+yu+fu+pu+mu+"]",ua="\\ud83c[\\udffb-\\udfff]",Tu="[^"+Xi+"]",la="(?:\\ud83c[\\udde6-\\uddff]){2}",ha="[\\ud800-\\udbff][\\udc00-\\udfff]",yi="["+mu+"]",bu="(?:"+xu+"|"+wu+")",Ch="(?:"+yi+"|"+wu+")",Su="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Au="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Cu="(?:"+Ur+"|"+ua+")?",ku="["+gu+"]?",$i=ku+Cu+"(?:\\u200d(?:"+[Tu,la,ha].join("|")+")"+ku+Cu+")*",Nh="(?:"+[Sh,la,ha].join("|")+")"+$i,Eh="(?:"+[Tu+Ur+"?",Ur,la,ha,bh].join("|")+")",Fh=RegExp("['\u2019]","g"),Mh=RegExp(Ur,"g"),fa=RegExp(ua+"(?="+ua+")|"+Eh+$i,"g"),Rh=RegExp([yi+"?"+xu+"+"+Su+"(?="+[vu,yi,"$"].join("|")+")",Ch+"+"+Au+"(?="+[vu,yi+bu,"$"].join("|")+")",yi+"?"+bu+"+"+Su,yi+"+"+Au,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",yu,Nh].join("|"),"g"),Ih=RegExp("[\\u200d"+Xi+du+gu+"]"),qh=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ph=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Lh=-1,ie={};ie[ji]=ie[gi]=ie[Lr]=ie[na]=ie[sa]=ie[ia]=ie[ra]=ie[_i]=ie[Ws]=!0,ie[Vn]=ie[us]=ie[Te]=ie[Kt]=ie[Jn]=ie[Wn]=ie[Fe]=ie[an]=ie[Le]=ie[ue]=ie[re]=ie[Gi]=ie[Bn]=ie[Ui]=ie[zi]=!1;var Jt={};Jt[Vn]=Jt[us]=Jt[Te]=Jt[Jn]=Jt[Kt]=Jt[Wn]=Jt[ji]=Jt[gi]=Jt[Lr]=Jt[na]=Jt[sa]=Jt[Le]=Jt[ue]=Jt[re]=Jt[Gi]=Jt[Bn]=Jt[Ui]=Jt[Pr]=Jt[ia]=Jt[ra]=Jt[_i]=Jt[Ws]=!0,Jt[Fe]=Jt[an]=Jt[zi]=!1;var Gh={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Uh=parseFloat,xe=parseInt,Ou="object"==typeof global&&global&&global.Object===Object&&global,zh="object"==typeof self&&self&&self.Object===Object&&self,Ve=Ou||zh||Function("return this")(),Ki=Yt&&!Yt.nodeType&&Yt,Ji=Ki&&tt&&!tt.nodeType&&tt,Du=Ji&&Ji.exports===Ki,pa=Du&&Ou.process,cn=function(){try{return Ji&&Ji.require&&Ji.require("util").types||pa&&pa.binding&&pa.binding("util")}catch{}}(),Nu=cn&&cn.isArrayBuffer,Eu=cn&&cn.isDate,Fu=cn&&cn.isMap,Mu=cn&&cn.isRegExp,Ru=cn&&cn.isSet,Iu=cn&&cn.isTypedArray;function un(O,P,R){switch(R.length){case 0:return O.call(P);case 1:return O.call(P,R[0]);case 2:return O.call(P,R[0],R[1]);case 3:return O.call(P,R[0],R[1],R[2])}return O.apply(P,R)}function jh(O,P,R,J){for(var wt=-1,Rt=null==O?0:O.length;++wt<Rt;){var Se=O[wt];P(J,Se,R(Se),O)}return J}function bn(O,P){for(var R=-1,J=null==O?0:O.length;++R<J&&!1!==P(O[R],R,O););return O}function Zh(O,P){for(var R=null==O?0:O.length;R--&&!1!==P(O[R],R,O););return O}function qu(O,P){for(var R=-1,J=null==O?0:O.length;++R<J;)if(!P(O[R],R,O))return!1;return!0}function Ts(O,P){for(var R=-1,J=null==O?0:O.length,wt=0,Rt=[];++R<J;){var Se=O[R];P(Se,R,O)&&(Rt[wt++]=Se)}return Rt}function zr(O,P){return!(null==O||!O.length)&&zt(O,P,0)>-1}function ma(O,P,R){for(var J=-1,wt=null==O?0:O.length;++J<wt;)if(R(P,O[J]))return!0;return!1}function oe(O,P){for(var R=-1,J=null==O?0:O.length,wt=Array(J);++R<J;)wt[R]=P(O[R],R,O);return wt}function bs(O,P){for(var R=-1,J=P.length,wt=O.length;++R<J;)O[wt+R]=P[R];return O}function ga(O,P,R,J){var wt=-1,Rt=null==O?0:O.length;for(J&&Rt&&(R=O[++wt]);++wt<Rt;)R=P(R,O[wt],wt,O);return R}function Qh(O,P,R,J){var wt=null==O?0:O.length;for(J&&wt&&(R=O[--wt]);wt--;)R=P(R,O[wt],wt,O);return R}function _a(O,P){for(var R=-1,J=null==O?0:O.length;++R<J;)if(P(O[R],R,O))return!0;return!1}var Hh=ya("length");function Pu(O,P,R){var J;return R(O,function(wt,Rt,Se){if(P(wt,Rt,Se))return J=Rt,!1}),J}function jr(O,P,R,J){for(var wt=O.length,Rt=R+(J?1:-1);J?Rt--:++Rt<wt;)if(P(O[Rt],Rt,O))return Rt;return-1}function zt(O,P,R){return P==P?function sd(O,P,R){for(var J=R-1,wt=O.length;++J<wt;)if(O[J]===P)return J;return-1}(O,P,R):jr(O,va,R)}function be(O,P,R,J){for(var wt=R-1,Rt=O.length;++wt<Rt;)if(J(O[wt],P))return wt;return-1}function va(O){return O!=O}function Lu(O,P){var R=null==O?0:O.length;return R?tr(O,P)/R:NaN}function ya(O){return function(P){return null==P?x:P[O]}}function xa(O){return function(P){return null==O?x:O[P]}}function le(O,P,R,J,wt){return wt(O,function(Rt,Se,Xt){R=J?(J=!1,Rt):P(R,Rt,Se,Xt)}),R}function tr(O,P){for(var R,J=-1,wt=O.length;++J<wt;){var Rt=P(O[J]);Rt!==x&&(R=R===x?Rt:R+Rt)}return R}function er(O,P){for(var R=-1,J=Array(O);++R<O;)J[R]=P(R);return J}function Vu(O){return O&&O.slice(0,Uu(O)+1).replace(Yi,"")}function ln(O){return function(P){return O(P)}}function wa(O,P){return oe(P,function(R){return O[R]})}function nr(O,P){return O.has(P)}function Wu(O,P){for(var R=-1,J=O.length;++R<J&&zt(P,O[R],0)>-1;);return R}function Ta(O,P){for(var R=O.length;R--&&zt(P,O[R],0)>-1;);return R}var Jh=xa({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),td=xa({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ed(O){return"\\"+Gh[O]}function xi(O){return Ih.test(O)}function ba(O){var P=-1,R=Array(O.size);return O.forEach(function(J,wt){R[++P]=[wt,J]}),R}function js(O,P){return function(R){return O(P(R))}}function Ss(O,P){for(var R=-1,J=O.length,wt=0,Rt=[];++R<J;){var Se=O[R];(Se===P||Se===rn)&&(O[R]=rn,Rt[wt++]=R)}return Rt}function Zr(O){var P=-1,R=Array(O.size);return O.forEach(function(J){R[++P]=J}),R}function wi(O){return xi(O)?function id(O){for(var P=fa.lastIndex=0;fa.test(O);)++P;return P}(O):Hh(O)}function Gn(O){return xi(O)?function rd(O){return O.match(fa)||[]}(O):function zs(O){return O.split("")}(O)}function Uu(O){for(var P=O.length;P--&&Vr.test(O.charAt(P)););return P}var zu=xa({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Qr=function O(P){var n,R=(P=null==P?Ve:Qr.defaults(Ve.Object(),P,Qr.pick(Ve,Ph))).Array,J=P.Date,wt=P.Error,Rt=P.Function,Se=P.Math,Xt=P.Object,Sa=P.RegExp,cd=P.String,$t=P.TypeError,Hr=R.prototype,Ti=Xt.prototype,Yr=P["__core-js_shared__"],Xr=Rt.prototype.toString,jt=Ti.hasOwnProperty,ld=0,ju=(n=/[^.]+$/.exec(Yr&&Yr.keys&&Yr.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",$r=Ti.toString,hd=Xr.call(Xt),dd=Ve._,fd=Sa("^"+Xr.call(jt).replace(vi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kr=Du?P.Buffer:x,As=P.Symbol,Jr=P.Uint8Array,Zu=Kr?Kr.allocUnsafe:x,to=js(Xt.getPrototypeOf,Xt),Qu=Xt.create,Hu=Ti.propertyIsEnumerable,eo=Hr.splice,Yu=As?As.isConcatSpreadable:x,ir=As?As.iterator:x,Zs=As?As.toStringTag:x,rr=function(){try{var n=is(Xt,"defineProperty");return n({},"",{}),n}catch{}}(),pd=P.clearTimeout!==Ve.clearTimeout&&P.clearTimeout,md=J&&J.now!==Ve.Date.now&&J.now,gd=P.setTimeout!==Ve.setTimeout&&P.setTimeout,no=Se.ceil,so=Se.floor,Aa=Xt.getOwnPropertySymbols,_d=Kr?Kr.isBuffer:x,Xu=P.isFinite,$u=Hr.join,Ku=js(Xt.keys,Xt),he=Se.max,Ue=Se.min,vd=J.now,yd=P.parseInt,Ca=Se.random,xd=Hr.reverse,ka=is(P,"DataView"),or=is(P,"Map"),ar=is(P,"Promise"),Qs=is(P,"Set"),Hs=is(P,"WeakMap"),cr=is(Xt,"create"),io=Hs&&new Hs,Ys={},bi=si(ka),wd=si(or),Td=si(ar),bd=si(Qs),Ju=si(Hs),ro=As?As.prototype:x,We=ro?ro.valueOf:x,Sn=ro?ro.toString:x;function g(n){if(ve(n)&&!xt(n)&&!(n instanceof it)){if(n instanceof An)return n;if(jt.call(n,"__wrapped__"))return Ms(n)}return new An(n)}var Cs=function(){function n(){}return function(s){if(!pe(s))return{};if(Qu)return Qu(s);n.prototype=s;var a=new n;return n.prototype=x,a}}();function we(){}function An(n,s){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=x}function it(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Dt,this.__views__=[]}function ks(n){var s=-1,a=null==n?0:n.length;for(this.clear();++s<a;){var l=n[s];this.set(l[0],l[1])}}function Zt(n){var s=-1,a=null==n?0:n.length;for(this.clear();++s<a;){var l=n[s];this.set(l[0],l[1])}}function Un(n){var s=-1,a=null==n?0:n.length;for(this.clear();++s<a;){var l=n[s];this.set(l[0],l[1])}}function ze(n){var s=-1,a=null==n?0:n.length;for(this.__data__=new Un;++s<a;)this.add(n[s])}function jn(n){var s=this.__data__=new Zt(n);this.size=s.size}function rl(n,s){var a=xt(n),l=!a&&Is(n),p=!a&&!l&&as(n),v=!a&&!l&&!p&&Vi(n),T=a||l||p||v,A=T?er(n.length,cd):[],N=A.length;for(var V in n)(s||jt.call(n,V))&&(!T||!("length"==V||p&&("offset"==V||"parent"==V)||v&&("buffer"==V||"byteLength"==V||"byteOffset"==V)||$e(V,N)))&&A.push(V);return A}function ds(n){var s=n.length;return s?n[Ba(0,s-1)]:x}function Nd(n,s){return ee(_e(n),$s(s,0,n.length))}function Ed(n){return ee(_e(n))}function Fa(n,s,a){(a!==x&&!Wt(n[s],a)||a===x&&!(s in n))&&es(n,s,a)}function ur(n,s,a){var l=n[s];(!jt.call(n,s)||!Wt(l,a)||a===x&&!(s in n))&&es(n,s,a)}function ao(n,s){for(var a=n.length;a--;)if(Wt(n[a][0],s))return a;return-1}function Ci(n,s,a,l){return Ds(n,function(p,v,T){s(l,p,a(p),T)}),l}function ol(n,s){return n&&dn(s,I(s),n)}function es(n,s,a){"__proto__"==s&&rr?rr(n,s,{configurable:!0,enumerable:!0,value:a,writable:!0}):n[s]=a}function Ma(n,s){for(var a=-1,l=s.length,p=R(l),v=null==n;++a<l;)p[a]=v?x:F(n,s[a]);return p}function $s(n,s,a){return n==n&&(a!==x&&(n=n<=a?n:a),s!==x&&(n=n>=s?n:s)),n}function Cn(n,s,a,l,p,v){var T,A=1&s,N=2&s,V=4&s;if(a&&(T=p?a(n,l,p,v):a(n)),T!==x)return T;if(!pe(n))return n;var B=xt(n);if(B){if(T=function Mf(n){var s=n.length,a=new n.constructor(s);return s&&"string"==typeof n[0]&&jt.call(n,"index")&&(a.index=n.index,a.input=n.input),a}(n),!A)return _e(n,T)}else{var G=Ge(n),Y=G==an||G==Bi;if(as(n))return Zn(n,A);if(G==re||G==Vn||Y&&!p){if(T=N||Y?{}:nn(n),!A)return N?function El(n,s){return dn(n,Oo(n),s)}(n,function Fd(n,s){return n&&dn(s,M(s),n)}(T,n)):function Di(n,s){return dn(n,Ka(n),s)}(n,ol(T,n))}else{if(!Jt[G])return p?n:{};T=function tf(n,s,a){var l=n.constructor;switch(s){case Te:return Oi(n);case Kt:case Wn:return new l(+n);case Jn:return function Yd(n,s){var a=s?Oi(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.byteLength)}(n,a);case ji:case gi:case Lr:case na:case sa:case ia:case ra:case _i:case Ws:return Ol(n,a);case Le:return new l;case ue:case Ui:return new l(n);case Gi:return function Xd(n){var s=new n.constructor(n.source,lu.exec(n));return s.lastIndex=n.lastIndex,s}(n);case Bn:return new l;case Pr:return function ti(n){return We?Xt(We.call(n)):{}}(n)}}(n,G,A)}}v||(v=new jn);var ot=v.get(n);if(ot)return ot;v.set(n,T),eu(n)?n.forEach(function(mt){T.add(Cn(mt,s,a,mt,n,v))}):ff(n)&&n.forEach(function(mt,It){T.set(It,Cn(mt,s,a,It,n,v))});var Et=B?x:(V?N?pn:Fs:N?M:I)(n);return bn(Et||n,function(mt,It){Et&&(mt=n[It=mt]),ur(T,It,Cn(mt,s,a,It,n,v))}),T}function Ra(n,s,a){var l=a.length;if(null==n)return!l;for(n=Xt(n);l--;){var p=a[l],T=n[p];if(T===x&&!(p in n)||!(0,s[p])(T))return!1}return!0}function al(n,s,a){if("function"!=typeof n)throw new $t(Ot);return Fo(function(){n.apply(x,a)},s)}function lr(n,s,a,l){var p=-1,v=zr,T=!0,A=n.length,N=[],V=s.length;if(!A)return N;a&&(s=oe(s,ln(a))),l?(v=ma,T=!1):s.length>=200&&(v=nr,T=!1,s=new ze(s));t:for(;++p<A;){var B=n[p],G=null==a?B:a(B);if(B=l||0!==B?B:0,T&&G==G){for(var Y=V;Y--;)if(s[Y]===G)continue t;N.push(B)}else v(s,G,l)||N.push(B)}return N}g.templateSettings={escape:au,evaluate:cu,interpolate:Qi,variable:"",imports:{_:g}},(g.prototype=we.prototype).constructor=g,(An.prototype=Cs(we.prototype)).constructor=An,(it.prototype=Cs(we.prototype)).constructor=it,ks.prototype.clear=function hs(){this.__data__=cr?cr(null):{},this.size=0},ks.prototype.delete=function Oa(n){var s=this.has(n)&&delete this.__data__[n];return this.size-=s?1:0,s},ks.prototype.get=function Da(n){var s=this.__data__;if(cr){var a=s[n];return a===qn?x:a}return jt.call(s,n)?s[n]:x},ks.prototype.has=function el(n){var s=this.__data__;return cr?s[n]!==x:jt.call(s,n)},ks.prototype.set=function Si(n,s){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=cr&&s===x?qn:s,this},Zt.prototype.clear=function Sd(){this.__data__=[],this.size=0},Zt.prototype.delete=function Na(n){var s=this.__data__,a=ao(s,n);return!(a<0||(a==s.length-1?s.pop():eo.call(s,a,1),--this.size,0))},Zt.prototype.get=function nl(n){var s=this.__data__,a=ao(s,n);return a<0?x:s[a][1]},Zt.prototype.has=function sl(n){return ao(this.__data__,n)>-1},Zt.prototype.set=function Ea(n,s){var a=this.__data__,l=ao(a,n);return l<0?(++this.size,a.push([n,s])):a[l][1]=s,this},Un.prototype.clear=function Ad(){this.size=0,this.__data__={hash:new ks,map:new(or||Zt),string:new ks}},Un.prototype.delete=function oo(n){var s=Co(this,n).delete(n);return this.size-=s?1:0,s},Un.prototype.get=function il(n){return Co(this,n).get(n)},Un.prototype.has=function ts(n){return Co(this,n).has(n)},Un.prototype.set=function Ai(n,s){var a=Co(this,n),l=a.size;return a.set(n,s),this.size+=a.size==l?0:1,this},ze.prototype.add=ze.prototype.push=function Cd(n){return this.__data__.set(n,qn),this},ze.prototype.has=function zn(n){return this.__data__.has(n)},jn.prototype.clear=function kd(){this.__data__=new Zt,this.size=0},jn.prototype.delete=function Od(n){var s=this.__data__,a=s.delete(n);return this.size=s.size,a},jn.prototype.get=function Xs(n){return this.__data__.get(n)},jn.prototype.has=function Dd(n){return this.__data__.has(n)},jn.prototype.set=function Os(n,s){var a=this.__data__;if(a instanceof Zt){var l=a.__data__;if(!or||l.length<199)return l.push([n,s]),this.size=++a.size,this;a=this.__data__=new Un(l)}return a.set(n,s),this.size=a.size,this};var Ds=Fl(kn),cl=Fl(co,!0);function Rd(n,s){var a=!0;return Ds(n,function(l,p,v){return a=!!s(l,p,v)}),a}function Ks(n,s,a){for(var l=-1,p=n.length;++l<p;){var v=n[l],T=s(v);if(null!=T&&(A===x?T==T&&!_n(T):a(T,A)))var A=T,N=v}return N}function ul(n,s){var a=[];return Ds(n,function(l,p,v){s(l,p,v)&&a.push(l)}),a}function Be(n,s,a,l,p){var v=-1,T=n.length;for(a||(a=Rf),p||(p=[]);++v<T;){var A=n[v];s>0&&a(A)?s>1?Be(A,s-1,a,l,p):bs(p,A):l||(p[p.length]=A)}return p}var Ia=Q(),qa=Q(!0);function kn(n,s){return n&&Ia(n,s,I)}function co(n,s){return n&&qa(n,s,I)}function uo(n,s){return Ts(s,function(a){return Yn(n[a])})}function Js(n,s){for(var a=0,l=(s=je(s,n)).length;null!=n&&a<l;)n=n[os(s[a++])];return a&&a==l?n:x}function Pa(n,s,a){var l=s(n);return xt(n)?l:bs(l,a(n))}function Ye(n){return null==n?n===x?"[object Undefined]":"[object Null]":Zs&&Zs in Xt(n)?function Kd(n){var s=jt.call(n,Zs),a=n[Zs];try{n[Zs]=x;var l=!0}catch{}var p=$r.call(n);return l&&(s?n[Zs]=a:delete n[Zs]),p}(n):function ec(n){return $r.call(n)}(n)}function ki(n,s){return n>s}function qd(n,s){return null!=n&&jt.call(n,s)}function ll(n,s){return null!=n&&s in Xt(n)}function La(n,s,a){for(var l=a?ma:zr,p=n[0].length,v=n.length,T=v,A=R(v),N=1/0,V=[];T--;){var B=n[T];T&&s&&(B=oe(B,ln(s))),N=Ue(B.length,N),A[T]=!a&&(s||p>=120&&B.length>=120)?new ze(T&&B):x}B=n[0];var G=-1,Y=A[0];t:for(;++G<p&&V.length<N;){var ot=B[G],pt=s?s(ot):ot;if(ot=a||0!==ot?ot:0,!(Y?nr(Y,pt):l(V,pt,a))){for(T=v;--T;){var Et=A[T];if(!(Et?nr(Et,pt):l(n[T],pt,a)))continue t}Y&&Y.push(pt),V.push(ot)}}return V}function hr(n,s,a){var l=null==(n=Tr(n,s=je(s,n)))?n:n[os(Qe(s))];return null==l?x:un(l,n,a)}function hl(n){return ve(n)&&Ye(n)==Vn}function dr(n,s,a,l,p){return n===s||(null==n||null==s||!ve(n)&&!ve(s)?n!=n&&s!=s:function Wd(n,s,a,l,p,v){var T=xt(n),A=xt(s),N=T?us:Ge(n),V=A?us:Ge(s),B=(N=N==Vn?re:N)==re,G=(V=V==Vn?re:V)==re,Y=N==V;if(Y&&as(n)){if(!as(s))return!1;T=!0,B=!1}if(Y&&!B)return v||(v=new jn),T||Vi(n)?Qt(n,s,a,l,p,v):function ns(n,s,a,l,p,v,T){switch(a){case Jn:if(n.byteLength!=s.byteLength||n.byteOffset!=s.byteOffset)return!1;n=n.buffer,s=s.buffer;case Te:return!(n.byteLength!=s.byteLength||!v(new Jr(n),new Jr(s)));case Kt:case Wn:case ue:return Wt(+n,+s);case Fe:return n.name==s.name&&n.message==s.message;case Gi:case Ui:return n==s+"";case Le:var A=ba;case Bn:if(A||(A=Zr),n.size!=s.size&&!(1&l))return!1;var V=T.get(n);if(V)return V==s;l|=2,T.set(n,s);var B=Qt(A(n),A(s),l,p,v,T);return T.delete(n),B;case Pr:if(We)return We.call(n)==We.call(s)}return!1}(n,s,N,a,l,p,v);if(!(1&a)){var ot=B&&jt.call(n,"__wrapped__"),pt=G&&jt.call(s,"__wrapped__");if(ot||pt){var Et=ot?n.value():n,mt=pt?s.value():s;return v||(v=new jn),p(Et,mt,a,l,v)}}return!!Y&&(v||(v=new jn),function Xa(n,s,a,l,p,v){var T=1&a,A=Fs(n),N=A.length;if(N!=Fs(s).length&&!T)return!1;for(var G=N;G--;){var Y=A[G];if(!(T?Y in s:jt.call(s,Y)))return!1}var ot=v.get(n),pt=v.get(s);if(ot&&pt)return ot==s&&pt==n;var Et=!0;v.set(n,s),v.set(s,n);for(var mt=T;++G<N;){var It=n[Y=A[G]],Pt=s[Y];if(l)var Xn=T?l(Pt,It,Y,s,n,v):l(It,Pt,Y,n,s,v);if(!(Xn===x?It===Pt||p(It,Pt,a,l,v):Xn)){Et=!1;break}mt||(mt="constructor"==Y)}if(Et&&!mt){var vn=n.constructor,$n=s.constructor;vn!=$n&&"constructor"in n&&"constructor"in s&&!("function"==typeof vn&&vn instanceof vn&&"function"==typeof $n&&$n instanceof $n)&&(Et=!1)}return v.delete(n),v.delete(s),Et}(n,s,a,l,p,v))}(n,s,a,l,dr,p))}function lo(n,s,a,l){var p=a.length,v=p,T=!l;if(null==n)return!v;for(n=Xt(n);p--;){var A=a[p];if(T&&A[2]?A[1]!==n[A[0]]:!(A[0]in n))return!1}for(;++p<v;){var N=(A=a[p])[0],V=n[N],B=A[1];if(T&&A[2]){if(V===x&&!(N in n))return!1}else{var G=new jn;if(l)var Y=l(V,B,N,n,s,G);if(!(Y===x?dr(B,V,3,l,G):Y))return!1}}return!0}function ho(n){return!(!pe(n)||function Mt(n){return!!ju&&ju in n}(n))&&(Yn(n)?fd:ph).test(si(n))}function pl(n){return"function"==typeof n?n:null==n?In:"object"==typeof n?xt(n)?vl(n[0],n[1]):_l(n):rp(n)}function Va(n){if(!rs(n))return Ku(n);var s=[];for(var a in Xt(n))jt.call(n,a)&&"constructor"!=a&&s.push(a);return s}function Wa(n,s){return n<s}function gl(n,s){var a=-1,l=He(n)?R(n.length):[];return Ds(n,function(p,v,T){l[++a]=s(p,v,T)}),l}function _l(n){var s=ko(n);return 1==s.length&&s[0][2]?Ze(s[0][0],s[0][1]):function(a){return a===n||lo(a,n,s)}}function vl(n,s){return Ie(n)&&ql(s)?Ze(os(n),s):function(a){var l=F(a,n);return l===x&&l===s?q(a,n):dr(s,l,3)}}function fo(n,s,a,l,p){n!==s&&Ia(s,function(v,T){if(p||(p=new jn),pe(v))!function zd(n,s,a,l,p,v,T){var A=ni(n,a),N=ni(s,a),V=T.get(N);if(V)Fa(n,a,V);else{var B=v?v(A,N,a+"",n,s,T):x,G=B===x;if(G){var Y=xt(N),ot=!Y&&as(N),pt=!Y&&!ot&&Vi(N);B=N,Y||ot||pt?xt(A)?B=A:ae(A)?B=_e(A):ot?(G=!1,B=Zn(N,!0)):pt?(G=!1,B=Ol(N,!0)):B=[]:Jo(N)||Is(N)?(B=A,Is(A)?B=nh(A):(!pe(A)||Yn(A))&&(B=nn(N))):G=!1}G&&(T.set(N,B),p(B,N,l,v,T),T.delete(N)),Fa(n,a,B)}}(n,s,T,a,fo,l,p);else{var A=l?l(ni(n,T),v,T+"",n,s,p):x;A===x&&(A=v),Fa(n,T,A)}},M)}function po(n,s){var a=n.length;if(a)return $e(s+=s<0?a:0,a)?n[s]:x}function yl(n,s,a){s=s.length?oe(s,function(v){return xt(v)?function(T){return Js(T,1===v.length?v[0]:v)}:v}):[In];var l=-1;return s=oe(s,ln(dt())),function Xh(O,P){var R=O.length;for(O.sort(P);R--;)O[R]=O[R].value;return O}(gl(n,function(v,T,A){return{criteria:oe(s,function(V){return V(v)}),index:++l,value:v}}),function(v,T){return function Vt(n,s,a){for(var l=-1,p=n.criteria,v=s.criteria,T=p.length,A=a.length;++l<T;){var N=Dl(p[l],v[l]);if(N)return l>=A?N:N*("desc"==a[l]?-1:1)}return n.index-s.index}(v,T,a)})}function wl(n,s,a){for(var l=-1,p=s.length,v={};++l<p;){var T=s[l],A=Js(n,T);a(A,T)&&go(v,je(T,n),A)}return v}function mo(n,s,a,l){var p=l?be:zt,v=-1,T=s.length,A=n;for(n===s&&(s=_e(s)),a&&(A=oe(n,ln(a)));++v<T;)for(var N=0,V=s[v],B=a?a(V):V;(N=p(A,B,N,l))>-1;)A!==n&&eo.call(A,N,1),eo.call(n,N,1);return n}function bl(n,s){for(var a=n?s.length:0,l=a-1;a--;){var p=s[a];if(a==l||p!==v){var v=p;$e(p)?eo.call(n,p,1):vo(n,p)}}return n}function Ba(n,s){return n+so(Ca()*(s-n+1))}function Ga(n,s){var a="";if(!n||s<1||s>Z)return a;do{s%2&&(a+=n),(s=so(s/2))&&(n+=n)}while(s);return a}function Nt(n,s){return br(wr(n,s,In),n+"")}function Zd(n){return ds(kt(n))}function Sl(n,s){var a=kt(n);return ee(a,$s(s,0,a.length))}function go(n,s,a,l){if(!pe(n))return n;for(var p=-1,v=(s=je(s,n)).length,T=v-1,A=n;null!=A&&++p<v;){var N=os(s[p]),V=a;if("__proto__"===N||"constructor"===N||"prototype"===N)return n;if(p!=T){var B=A[N];(V=l?l(B,N,A):x)===x&&(V=pe(B)?B:$e(s[p+1])?[]:{})}ur(A,N,V),A=A[N]}return n}var Ua=io?function(n,s){return io.set(n,s),n}:In,Al=rr?function(n,s){return rr(n,"toString",{configurable:!0,enumerable:!1,value:Cf(s),writable:!0})}:In;function Ff(n){return ee(kt(n))}function On(n,s,a){var l=-1,p=n.length;s<0&&(s=-s>p?0:p+s),(a=a>p?p:a)<0&&(a+=p),p=s>a?0:a-s>>>0,s>>>=0;for(var v=R(p);++l<p;)v[l]=n[l+s];return v}function Qd(n,s){var a;return Ds(n,function(l,p,v){return!(a=s(l,p,v))}),!!a}function _o(n,s,a){var l=0,p=null==n?l:n.length;if("number"==typeof s&&s==s&&p<=2147483647){for(;l<p;){var v=l+p>>>1,T=n[v];null!==T&&!_n(T)&&(a?T<=s:T<s)?l=v+1:p=v}return p}return za(n,s,In,a)}function za(n,s,a,l){var p=0,v=null==n?0:n.length;if(0===v)return 0;for(var T=(s=a(s))!=s,A=null===s,N=_n(s),V=s===x;p<v;){var B=so((p+v)/2),G=a(n[B]),Y=G!==x,ot=null===G,pt=G==G,Et=_n(G);if(T)var mt=l||pt;else mt=V?pt&&(l||Y):A?pt&&Y&&(l||!ot):N?pt&&Y&&!ot&&(l||!Et):!ot&&!Et&&(l?G<=s:G<s);mt?p=B+1:v=B}return Ue(v,4294967294)}function Cl(n,s){for(var a=-1,l=n.length,p=0,v=[];++a<l;){var T=n[a],A=s?s(T):T;if(!a||!Wt(A,N)){var N=A;v[p++]=0===T?0:T}}return v}function Hd(n){return"number"==typeof n?n:_n(n)?NaN:+n}function ut(n){if("string"==typeof n)return n;if(xt(n))return oe(n,ut)+"";if(_n(n))return Sn?Sn.call(n):"";var s=n+"";return"0"==s&&1/n==-ft?"-0":s}function Xe(n,s,a){var l=-1,p=zr,v=n.length,T=!0,A=[],N=A;if(a)T=!1,p=ma;else if(v>=200){var V=s?null:vr(n);if(V)return Zr(V);T=!1,p=nr,N=new ze}else N=s?[]:A;t:for(;++l<v;){var B=n[l],G=s?s(B):B;if(B=a||0!==B?B:0,T&&G==G){for(var Y=N.length;Y--;)if(N[Y]===G)continue t;s&&N.push(G),A.push(B)}else p(N,G,a)||(N!==A&&N.push(G),A.push(B))}return A}function vo(n,s){return null==(n=Tr(n,s=je(s,n)))||delete n[os(Qe(s))]}function yo(n,s,a,l){return go(n,s,a(Js(n,s)),l)}function ja(n,s,a,l){for(var p=n.length,v=l?p:-1;(l?v--:++v<p)&&s(n[v],v,n););return a?On(n,l?0:v,l?v+1:p):On(n,l?v+1:0,l?p:v)}function kl(n,s){var a=n;return a instanceof it&&(a=a.value()),ga(s,function(l,p){return p.func.apply(p.thisArg,bs([l],p.args))},a)}function xo(n,s,a){var l=n.length;if(l<2)return l?Xe(n[0]):[];for(var p=-1,v=R(l);++p<l;)for(var T=n[p],A=-1;++A<l;)A!=p&&(v[p]=lr(v[p]||T,n[A],s,a));return Xe(Be(v,1),s,a)}function en(n,s,a){for(var l=-1,p=n.length,v=s.length,T={};++l<p;)a(T,n[l],l<v?s[l]:x);return T}function St(n){return ae(n)?n:[]}function Za(n){return"function"==typeof n?n:In}function je(n,s){return xt(n)?n:Ie(n,s)?[n]:sf(Gt(n))}var Ns=Nt;function fs(n,s,a){var l=n.length;return a=a===x?l:a,!s&&a>=l?n:On(n,s,a)}var hn=pd||function(n){return Ve.clearTimeout(n)};function Zn(n,s){if(s)return n.slice();var a=n.length,l=Zu?Zu(a):new n.constructor(a);return n.copy(l),l}function Oi(n){var s=new n.constructor(n.byteLength);return new Jr(s).set(new Jr(n)),s}function Ol(n,s){var a=s?Oi(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.length)}function Dl(n,s){if(n!==s){var a=n!==x,l=null===n,p=n==n,v=_n(n),T=s!==x,A=null===s,N=s==s,V=_n(s);if(!A&&!V&&!v&&n>s||v&&T&&N&&!A&&!V||l&&T&&N||!a&&N||!p)return 1;if(!l&&!v&&!V&&n<s||V&&a&&p&&!l&&!v||A&&a&&p||!T&&p||!N)return-1}return 0}function Nl(n,s,a,l){for(var p=-1,v=n.length,T=a.length,A=-1,N=s.length,V=he(v-T,0),B=R(N+V),G=!l;++A<N;)B[A]=s[A];for(;++p<T;)(G||p<v)&&(B[a[p]]=n[p]);for(;V--;)B[A++]=n[p++];return B}function Es(n,s,a,l){for(var p=-1,v=n.length,T=-1,A=a.length,N=-1,V=s.length,B=he(v-A,0),G=R(B+V),Y=!l;++p<B;)G[p]=n[p];for(var ot=p;++N<V;)G[ot+N]=s[N];for(;++T<A;)(Y||p<v)&&(G[ot+a[T]]=n[p++]);return G}function _e(n,s){var a=-1,l=n.length;for(s||(s=R(l));++a<l;)s[a]=n[a];return s}function dn(n,s,a,l){var p=!a;a||(a={});for(var v=-1,T=s.length;++v<T;){var A=s[v],N=l?l(a[A],n[A],A,a,n):x;N===x&&(N=n[A]),p?es(a,A,N):ur(a,A,N)}return a}function wo(n,s){return function(a,l){var p=xt(a)?jh:Ci,v=s?s():{};return p(a,n,dt(l,2),v)}}function Qn(n){return Nt(function(s,a){var l=-1,p=a.length,v=p>1?a[p-1]:x,T=p>2?a[2]:x;for(v=n.length>3&&"function"==typeof v?(p--,v):x,T&&sn(a[0],a[1],T)&&(v=p<3?x:v,p=1),s=Xt(s);++l<p;){var A=a[l];A&&n(s,A,l,v)}return s})}function Fl(n,s){return function(a,l){if(null==a)return a;if(!He(a))return n(a,l);for(var p=a.length,v=s?p:-1,T=Xt(a);(s?v--:++v<p)&&!1!==l(T[v],v,T););return a}}function Q(n){return function(s,a,l){for(var p=-1,v=Xt(s),T=l(s),A=T.length;A--;){var N=T[n?A:++p];if(!1===a(v[N],N,v))break}return s}}function Hn(n){return function(s){var a=xi(s=Gt(s))?Gn(s):x,l=a?a[0]:s.charAt(0),p=a?fs(a,1).join(""):s.slice(1);return l[n]()+p}}function ei(n){return function(s){return ga(sp(hi(s).replace(Fh,"")),n,"")}}function Dn(n){return function(){var s=arguments;switch(s.length){case 0:return new n;case 1:return new n(s[0]);case 2:return new n(s[0],s[1]);case 3:return new n(s[0],s[1],s[2]);case 4:return new n(s[0],s[1],s[2],s[3]);case 5:return new n(s[0],s[1],s[2],s[3],s[4]);case 6:return new n(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new n(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var a=Cs(n.prototype),l=n.apply(a,s);return pe(l)?l:a}}function fr(n){return function(s,a,l){var p=Xt(s);if(!He(s)){var v=dt(a,3);s=I(s),a=function(A){return v(p[A],A,p)}}var T=n(s,a,l);return T>-1?p[v?s[T]:T]:x}}function To(n){return ss(function(s){var a=s.length,l=a,p=An.prototype.thru;for(n&&s.reverse();l--;){var v=s[l];if("function"!=typeof v)throw new $t(Ot);if(p&&!T&&"wrapper"==Ao(v))var T=new An([],!0)}for(l=T?l:a;++l<a;){var A=Ao(v=s[l]),N="wrapper"==A?$a(v):x;T=N&&te(N[0])&&424==N[1]&&!N[4].length&&1==N[9]?T[Ao(N[0])].apply(T,N[3]):1==v.length&&te(v)?T[A]():T.thru(v)}return function(){var V=arguments,B=V[0];if(T&&1==V.length&&xt(B))return T.plant(B).value();for(var G=0,Y=a?s[G].apply(this,V):B;++G<a;)Y=s[G].call(this,Y);return Y}})}function pr(n,s,a,l,p,v,T,A,N,V){var B=128&s,G=1&s,Y=2&s,ot=24&s,pt=512&s,Et=Y?x:Dn(n);return function mt(){for(var It=arguments.length,Pt=R(It),Xn=It;Xn--;)Pt[Xn]=arguments[Xn];if(ot)var vn=yr(mt),$n=function Kh(O,P){for(var R=O.length,J=0;R--;)O[R]===P&&++J;return J}(Pt,vn);if(l&&(Pt=Nl(Pt,l,p,ot)),v&&(Pt=Es(Pt,v,T,ot)),It-=$n,ot&&It<V){var De=Ss(Pt,vn);return _r(n,s,pr,mt.placeholder,a,Pt,De,A,N,V-It)}var ys=G?a:this,di=Y?ys[n]:n;return It=Pt.length,A?Pt=function No(n,s){for(var a=n.length,l=Ue(s.length,a),p=_e(n);l--;){var v=s[l];n[l]=$e(v,a)?p[v]:x}return n}(Pt,A):pt&&It>1&&Pt.reverse(),B&&N<It&&(Pt.length=N),this&&this!==Ve&&this instanceof mt&&(di=Et||Dn(di)),di.apply(ys,Pt)}}function Nn(n,s){return function(a,l){return function Ld(n,s,a,l){return kn(n,function(p,v,T){s(l,a(p),v,T)}),l}(a,n,s(l),{})}}function bo(n,s){return function(a,l){var p;if(a===x&&l===x)return s;if(a!==x&&(p=a),l!==x){if(p===x)return l;"string"==typeof a||"string"==typeof l?(a=ut(a),l=ut(l)):(a=Hd(a),l=Hd(l)),p=n(a,l)}return p}}function En(n){return ss(function(s){return s=oe(s,ln(dt())),Nt(function(a){var l=this;return n(s,function(p){return un(p,l,a)})})})}function mr(n,s){var a=(s=s===x?" ":ut(s)).length;if(a<2)return a?Ga(s,n):s;var l=Ga(s,no(n/wi(s)));return xi(s)?fs(Gn(l),0,n).join(""):l.slice(0,n)}function Ml(n){return function(s,a,l){return l&&"number"!=typeof l&&sn(s,a,l)&&(a=l=x),s=_s(s),a===x?(a=s,s=0):a=_s(a),function jd(n,s,a,l){for(var p=-1,v=he(no((s-n)/(a||1)),0),T=R(v);v--;)T[l?v:++p]=n,n+=a;return T}(s,a,l=l===x?s<a?1:-1:_s(l),n)}}function gr(n){return function(s,a){return"string"==typeof s&&"string"==typeof a||(s=ce(s),a=ce(a)),n(s,a)}}function _r(n,s,a,l,p,v,T,A,N,V){var B=8&s;s|=B?32:64,4&(s&=~(B?64:32))||(s&=-4);var Et=[n,s,p,B?v:x,B?T:x,B?x:v,B?x:T,A,N,V],mt=a.apply(x,Et);return te(n)&&Eo(mt,Et),mt.placeholder=l,Mo(mt,n,s)}function Ha(n){var s=Se[n];return function(a,l){if(a=ce(a),(l=null==l?0:Ue(At(l),292))&&Xu(a)){var p=(Gt(a)+"e").split("e");return+((p=(Gt(s(p[0]+"e"+(+p[1]+l)))+"e").split("e"))[0]+"e"+(+p[1]-l))}return s(a)}}var vr=Qs&&1/Zr(new Qs([,-0]))[1]==ft?function(n){return new Qs(n)}:Df;function Ya(n){return function(s){var a=Ge(s);return a==Le?ba(s):a==Bn?function Gu(O){var P=-1,R=Array(O.size);return O.forEach(function(J){R[++P]=[J,J]}),R}(s):function $h(O,P){return oe(P,function(R){return[R,O[R]]})}(s,n(s))}}function fn(n,s,a,l,p,v,T,A){var N=2&s;if(!N&&"function"!=typeof n)throw new $t(Ot);var V=l?l.length:0;if(V||(s&=-97,l=p=x),T=T===x?T:he(At(T),0),A=A===x?A:At(A),V-=p?p.length:0,64&s){var B=l,G=p;l=p=x}var Y=N?x:$a(n),ot=[n,s,a,l,p,B,G,v,T,A];if(Y&&function Do(n,s){var a=n[1],l=s[1],p=a|l;if(!(p<131)&&!(128==l&&8==a||128==l&&256==a&&n[7].length<=s[8]||384==l&&s[7].length<=s[8]&&8==a))return n;1&l&&(n[2]=s[2],p|=1&a?0:4);var A=s[3];if(A){var N=n[3];n[3]=N?Nl(N,A,s[4]):A,n[4]=N?Ss(n[3],rn):s[4]}(A=s[5])&&(n[5]=(N=n[5])?Es(N,A,s[6]):A,n[6]=N?Ss(n[5],rn):s[6]),(A=s[7])&&(n[7]=A),128&l&&(n[8]=null==n[8]?s[8]:Ue(n[8],s[8])),null==n[9]&&(n[9]=s[9]),n[0]=s[0],n[1]=p}(ot,Y),n=ot[0],s=ot[1],a=ot[2],l=ot[3],p=ot[4],!(A=ot[9]=ot[9]===x?N?0:n.length:he(ot[9]-V,0))&&24&s&&(s&=-25),s&&1!=s)pt=8==s||16==s?function Qa(n,s,a){var l=Dn(n);return function p(){for(var v=arguments.length,T=R(v),A=v,N=yr(p);A--;)T[A]=arguments[A];var V=v<3&&T[0]!==N&&T[v-1]!==N?[]:Ss(T,N);return(v-=V.length)<a?_r(n,s,pr,p.placeholder,x,T,V,x,x,a-v):un(this&&this!==Ve&&this instanceof p?l:n,this,T)}}(n,s,A):32!=s&&33!=s||p.length?pr.apply(x,ot):function So(n,s,a,l){var p=1&s,v=Dn(n);return function T(){for(var A=-1,N=arguments.length,V=-1,B=l.length,G=R(B+N),Y=this&&this!==Ve&&this instanceof T?v:n;++V<B;)G[V]=l[V];for(;N--;)G[V++]=arguments[++A];return un(Y,p?a:this,G)}}(n,s,a,l);else var pt=function $d(n,s,a){var l=1&s,p=Dn(n);return function v(){return(this&&this!==Ve&&this instanceof v?p:n).apply(l?a:this,arguments)}}(n,s,a);return Mo((Y?Ua:Eo)(pt,ot),n,s)}function Rl(n,s,a,l){return n===x||Wt(n,Ti[a])&&!jt.call(l,a)?s:n}function de(n,s,a,l,p,v){return pe(n)&&pe(s)&&(v.set(s,n),fo(n,s,x,de,v),v.delete(s)),n}function Il(n){return Jo(n)?x:n}function Qt(n,s,a,l,p,v){var T=1&a,A=n.length,N=s.length;if(A!=N&&!(T&&N>A))return!1;var V=v.get(n),B=v.get(s);if(V&&B)return V==s&&B==n;var G=-1,Y=!0,ot=2&a?new ze:x;for(v.set(n,s),v.set(s,n);++G<A;){var pt=n[G],Et=s[G];if(l)var mt=T?l(Et,pt,G,s,n,v):l(pt,Et,G,n,s,v);if(mt!==x){if(mt)continue;Y=!1;break}if(ot){if(!_a(s,function(It,Pt){if(!nr(ot,Pt)&&(pt===It||p(pt,It,a,l,v)))return ot.push(Pt)})){Y=!1;break}}else if(pt!==Et&&!p(pt,Et,a,l,v)){Y=!1;break}}return v.delete(n),v.delete(s),Y}function ss(n){return br(wr(n,x,Rs),n+"")}function Fs(n){return Pa(n,I,Ka)}function pn(n){return Pa(n,M,Oo)}var $a=io?function(n){return io.get(n)}:Df;function Ao(n){for(var s=n.name+"",a=Ys[s],l=jt.call(Ys,s)?a.length:0;l--;){var p=a[l],v=p.func;if(null==v||v==n)return p.name}return s}function yr(n){return(jt.call(g,"placeholder")?g:n).placeholder}function dt(){var n=g.iteratee||kf;return n=n===kf?pl:n,arguments.length?n(arguments[0],arguments[1]):n}function Co(n,s){var a=n.__data__;return function xr(n){var s=typeof n;return"string"==s||"number"==s||"symbol"==s||"boolean"==s?"__proto__"!==n:null===n}(s)?a["string"==typeof s?"string":"hash"]:a.map}function ko(n){for(var s=I(n),a=s.length;a--;){var l=s[a],p=n[l];s[a]=[l,p,ql(p)]}return s}function is(n,s){var a=function Bu(O,P){return null==O?x:O[P]}(n,s);return ho(a)?a:x}var Ka=Aa?function(n){return null==n?[]:(n=Xt(n),Ts(Aa(n),function(s){return Hu.call(n,s)}))}:Nf,Oo=Aa?function(n){for(var s=[];n;)bs(s,Ka(n)),n=to(n);return s}:Nf,Ge=Ye;function mn(n,s,a){for(var l=-1,p=(s=je(s,n)).length,v=!1;++l<p;){var T=os(s[l]);if(!(v=null!=n&&a(n,T)))break;n=n[T]}return v||++l!=p?v:!!(p=null==n?0:n.length)&&$o(p)&&$e(T,p)&&(xt(n)||Is(n))}function nn(n){return"function"!=typeof n.constructor||rs(n)?{}:Cs(to(n))}function Rf(n){return xt(n)||Is(n)||!!(Yu&&n&&n[Yu])}function $e(n,s){var a=typeof n;return!!(s=s??Z)&&("number"==a||"symbol"!=a&&hu.test(n))&&n>-1&&n%1==0&&n<s}function sn(n,s,a){if(!pe(a))return!1;var l=typeof s;return!!("number"==l?He(a)&&$e(s,a.length):"string"==l&&s in a)&&Wt(a[s],n)}function Ie(n,s){if(xt(n))return!1;var a=typeof n;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=n&&!_n(n))||Hi.test(n)||!se.test(n)||null!=s&&n in Xt(s)}function te(n){var s=Ao(n),a=g[s];if("function"!=typeof a||!(s in it.prototype))return!1;if(n===a)return!0;var l=$a(a);return!!l&&n===l[0]}(ka&&Ge(new ka(new ArrayBuffer(1)))!=Jn||or&&Ge(new or)!=Le||ar&&Ge(ar.resolve())!=su||Qs&&Ge(new Qs)!=Bn||Hs&&Ge(new Hs)!=zi)&&(Ge=function(n){var s=Ye(n),a=s==re?n.constructor:x,l=a?si(a):"";if(l)switch(l){case bi:return Jn;case wd:return Le;case Td:return su;case bd:return Bn;case Ju:return zi}return s});var tc=Yr?Yn:Ef;function rs(n){var s=n&&n.constructor;return n===("function"==typeof s&&s.prototype||Ti)}function ql(n){return n==n&&!pe(n)}function Ze(n,s){return function(a){return null!=a&&a[n]===s&&(s!==x||n in Xt(a))}}function wr(n,s,a){return s=he(s===x?n.length-1:s,0),function(){for(var l=arguments,p=-1,v=he(l.length-s,0),T=R(v);++p<v;)T[p]=l[s+p];p=-1;for(var A=R(s+1);++p<s;)A[p]=l[p];return A[s]=a(T),un(n,this,A)}}function Tr(n,s){return s.length<2?n:Js(n,On(s,0,-1))}function ni(n,s){if(("constructor"!==s||"function"!=typeof n[s])&&"__proto__"!=s)return n[s]}var Eo=nf(Ua),Fo=gd||function(n,s){return Ve.setTimeout(n,s)},br=nf(Al);function Mo(n,s,a){var l=s+"";return br(n,function ef(n,s){var a=s.length;if(!a)return n;var l=a-1;return s[l]=(a>1?"& ":"")+s[l],s=s.join(a>2?", ":" "),n.replace(ah,"{\n/* [wrapped with "+s+"] */\n")}(l,function rf(n,s){return bn(Vs,function(a){var l="_."+a[0];s&a[1]&&!zr(n,l)&&n.push(l)}),n.sort()}(function Ja(n){var s=n.match(ch);return s?s[1].split(uh):[]}(l),a)))}function nf(n){var s=0,a=0;return function(){var l=vd(),p=16-(l-a);if(a=l,p>0){if(++s>=800)return arguments[0]}else s=0;return n.apply(x,arguments)}}function ee(n,s){var a=-1,l=n.length,p=l-1;for(s=s===x?l:s;++a<s;){var v=Ba(a,p),T=n[v];n[v]=n[a],n[a]=T}return n.length=s,n}var sf=function Ni(n){var s=Li(n,function(l){return 500===a.size&&a.clear(),l}),a=s.cache;return s}(function(n){var s=[];return 46===n.charCodeAt(0)&&s.push(""),n.replace(Us,function(a,l,p,v){s.push(p?v.replace(aa,"$1"):l||a)}),s});function os(n){if("string"==typeof n||_n(n))return n;var s=n+"";return"0"==s&&1/n==-ft?"-0":s}function si(n){if(null!=n){try{return Xr.call(n)}catch{}try{return n+""}catch{}}return""}function Ms(n){if(n instanceof it)return n.clone();var s=new An(n.__wrapped__,n.__chain__);return s.__actions__=_e(n.__actions__),s.__index__=n.__index__,s.__values__=n.__values__,s}var nc=Nt(function(n,s){return ae(n)?lr(n,Be(s,1,ae,!0)):[]}),Sr=Nt(function(n,s){var a=Qe(s);return ae(a)&&(a=x),ae(n)?lr(n,Be(s,1,ae,!0),dt(a,2)):[]}),gn=Nt(function(n,s){var a=Qe(s);return ae(a)&&(a=x),ae(n)?lr(n,Be(s,1,ae,!0),x,a):[]});function rc(n,s,a){var l=null==n?0:n.length;if(!l)return-1;var p=null==a?0:At(a);return p<0&&(p=he(l+p,0)),jr(n,dt(s,3),p)}function Fi(n,s,a){var l=null==n?0:n.length;if(!l)return-1;var p=l-1;return a!==x&&(p=At(a),p=a<0?he(l+p,0):Ue(p,l-1)),jr(n,dt(s,3),p,!0)}function Rs(n){return null!=n&&n.length?Be(n,1):[]}function Mi(n){return n&&n.length?n[0]:x}var Cr=Nt(function(n){var s=oe(n,St);return s.length&&s[0]===n[0]?La(s):[]}),kr=Nt(function(n){var s=Qe(n),a=oe(n,St);return s===Qe(a)?s=x:a.pop(),a.length&&a[0]===n[0]?La(a,dt(s,2)):[]}),Ri=Nt(function(n){var s=Qe(n),a=oe(n,St);return(s="function"==typeof s?s:x)&&a.pop(),a.length&&a[0]===n[0]?La(a,x,s):[]});function Qe(n){var s=null==n?0:n.length;return s?n[s-1]:x}var Ll=Nt(Lo);function Lo(n,s){return n&&n.length&&s&&s.length?mo(n,s):n}var Wl=ss(function(n,s){var a=null==n?0:n.length,l=Ma(n,s);return bl(n,oe(s,function(p){return $e(p,a)?+p:p}).sort(Dl)),l});function ri(n){return null==n?n:xd.call(n)}var ai=Nt(function(n){return Xe(Be(n,1,ae,!0))}),dc=Nt(function(n){var s=Qe(n);return ae(s)&&(s=x),Xe(Be(n,1,ae,!0),dt(s,2))}),Nr=Nt(function(n){var s=Qe(n);return s="function"==typeof s?s:x,Xe(Be(n,1,ae,!0),x,s)});function Er(n){if(!n||!n.length)return[];var s=0;return n=Ts(n,function(a){if(ae(a))return s=he(a.length,s),!0}),er(s,function(a){return oe(n,ya(a))})}function Wo(n,s){if(!n||!n.length)return[];var a=Er(n);return null==s?a:oe(a,function(l){return un(s,x,l)})}var mc=Nt(function(n,s){return ae(n)?lr(n,s):[]}),gc=Nt(function(n){return xo(Ts(n,ae))}),_c=Nt(function(n){var s=Qe(n);return ae(s)&&(s=x),xo(Ts(n,ae),dt(s,2))}),zl=Nt(function(n){var s=Qe(n);return s="function"==typeof s?s:x,xo(Ts(n,ae),x,s)}),vc=Nt(Er),xc=Nt(function(n){var s=n.length,a=s>1?n[s-1]:x;return a="function"==typeof a?(n.pop(),a):x,Wo(n,a)});function Bo(n){var s=g(n);return s.__chain__=!0,s}function wc(n,s){return s(n)}var Vf=ss(function(n){var s=n.length,a=s?n[0]:0,l=this.__wrapped__,p=function(v){return Ma(v,n)};return!(s>1||this.__actions__.length)&&l instanceof it&&$e(a)?((l=l.slice(a,+a+(s?1:0))).__actions__.push({func:wc,args:[p],thisArg:x}),new An(l,this.__chain__).thru(function(v){return s&&!v.length&&v.push(x),v})):this.thru(p)}),Sc=wo(function(n,s,a){jt.call(n,a)?++n[a]:es(n,a,1)}),Ii=fr(rc),ci=fr(Fi);function Go(n,s){return(xt(n)?bn:Ds)(n,dt(s,3))}function Uo(n,s){return(xt(n)?Zh:cl)(n,dt(s,3))}var jf=wo(function(n,s,a){jt.call(n,a)?n[a].push(s):es(n,a,[s])}),Dc=Nt(function(n,s,a){var l=-1,p="function"==typeof s,v=He(n)?R(n.length):[];return Ds(n,function(T){v[++l]=p?un(s,T,a):hr(T,s,a)}),v}),zo=wo(function(n,s,a){es(n,a,s)});function qi(n,s){return(xt(n)?oe:gl)(n,dt(s,3))}var Ec=wo(function(n,s,a){n[a?0:1].push(s)},function(){return[[],[]]}),Xf=Nt(function(n,s){if(null==n)return[];var a=s.length;return a>1&&sn(n,s[0],s[1])?s=[]:a>2&&sn(s[0],s[1],s[2])&&(s=[s[0]]),yl(n,Be(s,1),[])}),Pi=md||function(){return Ve.Date.now()};function cf(n,s,a){return s=a?x:s,fn(n,128,x,x,x,x,s=n&&null==s?n.length:s)}function Zo(n,s){var a;if("function"!=typeof s)throw new $t(Ot);return n=At(n),function(){return--n>0&&(a=s.apply(this,arguments)),n<=1&&(s=x),a}}var Zl=Nt(function(n,s,a){var l=1;if(a.length){var p=Ss(a,yr(Zl));l|=32}return fn(n,l,s,a,p)}),Qo=Nt(function(n,s,a){var l=3;if(a.length){var p=Ss(a,yr(Qo));l|=32}return fn(s,l,n,a,p)});function Ho(n,s,a){var l,p,v,T,A,N,V=0,B=!1,G=!1,Y=!0;if("function"!=typeof n)throw new $t(Ot);function ot(De){var ys=l,di=p;return l=p=x,V=De,T=n.apply(di,ys)}function mt(De){var ys=De-N;return N===x||ys>=s||ys<0||G&&De-V>=v}function It(){var De=Pi();if(mt(De))return Pt(De);A=Fo(It,function Et(De){var op=s-(De-N);return G?Ue(op,v-(De-V)):op}(De))}function Pt(De){return A=x,Y&&l?ot(De):(l=p=x,T)}function $n(){var De=Pi(),ys=mt(De);if(l=arguments,p=this,N=De,ys){if(A===x)return function pt(De){return V=De,A=Fo(It,s),B?ot(De):T}(N);if(G)return hn(A),A=Fo(It,s),ot(N)}return A===x&&(A=Fo(It,s)),T}return s=ce(s)||0,pe(a)&&(B=!!a.leading,v=(G="maxWait"in a)?he(ce(a.maxWait)||0,s):v,Y="trailing"in a?!!a.trailing:Y),$n.cancel=function Xn(){A!==x&&hn(A),V=0,l=N=p=A=x},$n.flush=function vn(){return A===x?T:Pt(Pi())},$n}var Ql=Nt(function(n,s){return al(n,1,s)}),uf=Nt(function(n,s,a){return al(n,ce(s)||0,a)});function Li(n,s){if("function"!=typeof n||null!=s&&"function"!=typeof s)throw new $t(Ot);var a=function(){var l=arguments,p=s?s.apply(this,l):l[0],v=a.cache;if(v.has(p))return v.get(p);var T=n.apply(this,l);return a.cache=v.set(p,T)||v,T};return a.cache=new(Li.Cache||Un),a}function Vc(n){if("function"!=typeof n)throw new $t(Ot);return function(){var s=arguments;switch(s.length){case 0:return!n.call(this);case 1:return!n.call(this,s[0]);case 2:return!n.call(this,s[0],s[1]);case 3:return!n.call(this,s[0],s[1],s[2])}return!n.apply(this,s)}}Li.Cache=Un;var Bc=Ns(function(n,s){var a=(s=1==s.length&&xt(s[0])?oe(s[0],ln(dt())):oe(Be(s,1),ln(dt()))).length;return Nt(function(l){for(var p=-1,v=Ue(l.length,a);++p<v;)l[p]=s[p].call(this,l[p]);return un(n,this,l)})}),Rr=Nt(function(n,s){var a=Ss(s,yr(Rr));return fn(n,32,x,s,a)}),Yo=Nt(function(n,s){var a=Ss(s,yr(Yo));return fn(n,64,x,s,a)}),Hl=ss(function(n,s){return fn(n,256,x,x,x,s)});function Wt(n,s){return n===s||n!=n&&s!=s}var Xo=gr(ki),ui=gr(function(n,s){return n>=s}),Is=hl(function(){return arguments}())?hl:function(n){return ve(n)&&jt.call(n,"callee")&&!Hu.call(n,"callee")},xt=R.isArray,hf=Nu?ln(Nu):function dl(n){return ve(n)&&Ye(n)==Te};function He(n){return null!=n&&$o(n.length)&&!Yn(n)}function ae(n){return ve(n)&&He(n)}var as=_d||Ef,Xc=Eu?ln(Eu):function Vd(n){return ve(n)&&Ye(n)==Wn};function Kl(n){if(!ve(n))return!1;var s=Ye(n);return s==Fe||"[object DOMException]"==s||"string"==typeof n.message&&"string"==typeof n.name&&!Jo(n)}function Yn(n){if(!pe(n))return!1;var s=Ye(n);return s==an||s==Bi||"[object AsyncFunction]"==s||"[object Proxy]"==s}function df(n){return"number"==typeof n&&n==At(n)}function $o(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=Z}function pe(n){var s=typeof n;return null!=n&&("object"==s||"function"==s)}function ve(n){return null!=n&&"object"==typeof n}var ff=Fu?ln(Fu):function Bd(n){return ve(n)&&Ge(n)==Le};function pf(n){return"number"==typeof n||ve(n)&&Ye(n)==ue}function Jo(n){if(!ve(n)||Ye(n)!=re)return!1;var s=to(n);if(null===s)return!0;var a=jt.call(s,"constructor")&&s.constructor;return"function"==typeof a&&a instanceof a&&Xr.call(a)==hd}var ta=Mu?ln(Mu):function fl(n){return ve(n)&&Ye(n)==Gi},eu=Ru?ln(Ru):function Gd(n){return ve(n)&&Ge(n)==Bn};function qe(n){return"string"==typeof n||!xt(n)&&ve(n)&&Ye(n)==Ui}function _n(n){return"symbol"==typeof n||ve(n)&&Ye(n)==Pr}var Vi=Iu?ln(Iu):function Ud(n){return ve(n)&&$o(n.length)&&!!ie[Ye(n)]},vf=gr(Wa),yf=gr(function(n,s){return n<=s});function eh(n){if(!n)return[];if(He(n))return qe(n)?Gn(n):_e(n);if(ir&&n[ir])return function sr(O){for(var P,R=[];!(P=O.next()).done;)R.push(P.value);return R}(n[ir]());var s=Ge(n);return(s==Le?ba:s==Bn?Zr:kt)(n)}function _s(n){return n?(n=ce(n))===ft||n===-ft?17976931348623157e292*(n<0?-1:1):n==n?n:0:0===n?n:0}function At(n){var s=_s(n),a=s%1;return s==s?a?s-a:s:0}function Mn(n){return n?$s(At(n),0,Dt):0}function ce(n){if("number"==typeof n)return n;if(_n(n))return NaN;if(pe(n)){var s="function"==typeof n.valueOf?n.valueOf():n;n=pe(s)?s+"":s}if("string"!=typeof n)return 0===n?n:+n;n=Vu(n);var a=fh.test(n);return a||mh.test(n)?xe(n.slice(2),a?2:8):dh.test(n)?NaN:+n}function nh(n){return dn(n,M(n))}function Gt(n){return null==n?"":ut(n)}var r=Qn(function(n,s){if(rs(s)||He(s))dn(s,I(s),n);else for(var a in s)jt.call(s,a)&&ur(n,a,s[a])}),t=Qn(function(n,s){dn(s,M(s),n)}),e=Qn(function(n,s,a,l){dn(s,M(s),n,l)}),i=Qn(function(n,s,a,l){dn(s,I(s),n,l)}),o=ss(Ma),u=Nt(function(n,s){n=Xt(n);var a=-1,l=s.length,p=l>2?s[2]:x;for(p&&sn(s[0],s[1],p)&&(l=1);++a<l;)for(var v=s[a],T=M(v),A=-1,N=T.length;++A<N;){var V=T[A],B=n[V];(B===x||Wt(B,Ti[V])&&!jt.call(n,V))&&(n[V]=v[V])}return n}),d=Nt(function(n){return n.push(x,de),un(H,x,n)});function F(n,s,a){var l=null==n?x:Js(n,s);return l===x?a:l}function q(n,s){return null!=n&&mn(n,s,ll)}var L=Nn(function(n,s,a){null!=s&&"function"!=typeof s.toString&&(s=$r.call(s)),n[s]=a},Cf(In)),z=Nn(function(n,s,a){null!=s&&"function"!=typeof s.toString&&(s=$r.call(s)),jt.call(n,s)?n[s].push(a):n[s]=[a]},dt),D=Nt(hr);function I(n){return He(n)?rl(n):Va(n)}function M(n){return He(n)?rl(n,!0):function ml(n){if(!pe(n))return function Ae(n){var s=[];if(null!=n)for(var a in Xt(n))s.push(a);return s}(n);var s=rs(n),a=[];for(var l in n)"constructor"==l&&(s||!jt.call(n,l))||a.push(l);return a}(n)}var U=Qn(function(n,s,a){fo(n,s,a)}),H=Qn(function(n,s,a,l){fo(n,s,a,l)}),W=ss(function(n,s){var a={};if(null==n)return a;var l=!1;s=oe(s,function(v){return v=je(v,n),l||(l=v.length>1),v}),dn(n,pn(n),a),l&&(a=Cn(a,7,Il));for(var p=s.length;p--;)vo(a,s[p]);return a}),rt=ss(function(n,s){return null==n?{}:function xl(n,s){return wl(n,s,function(a,l){return q(n,l)})}(n,s)});function nt(n,s){if(null==n)return{};var a=oe(pn(n),function(l){return[l]});return s=dt(s),wl(n,a,function(l,p){return s(l,p[0])})}var lt=Ya(I),bt=Ya(M);function kt(n){return null==n?[]:wa(n,I(n))}var cs=ei(function(n,s,a){return s=s.toLowerCase(),n+(a?li(s):s)});function li(n){return Af(Gt(n).toLowerCase())}function hi(n){return(n=Gt(n))&&n.replace(gh,Jh).replace(Mh,"")}var vt=ei(function(n,s,a){return n+(a?"-":"")+s.toLowerCase()}),Oe=ei(function(n,s,a){return n+(a?" ":"")+s.toLowerCase()}),fe=Hn("toLowerCase"),bf=ei(function(n,s,a){return n+(a?"_":"")+s.toLowerCase()}),up=ei(function(n,s,a){return n+(a?" ":"")+Af(s)}),yp=ei(function(n,s,a){return n+(a?" ":"")+s.toUpperCase()}),Af=Hn("toUpperCase");function sp(n,s,a){return n=Gt(n),(s=a?x:s)===x?function nd(O){return qh.test(O)}(n)?function od(O){return O.match(Rh)||[]}(n):function Yh(O){return O.match(lh)||[]}(n):n.match(s)||[]}var ip=Nt(function(n,s){try{return un(n,x,s)}catch(a){return Kl(a)?a:new wt(a)}}),xp=ss(function(n,s){return bn(s,function(a){a=os(a),es(n,a,Zl(n[a],n))}),n});function Cf(n){return function(){return n}}var Sp=To(),Ap=To(!0);function In(n){return n}function kf(n){return pl("function"==typeof n?n:Cn(n,1))}var Op=Nt(function(n,s){return function(a){return hr(a,n,s)}}),Dp=Nt(function(n,s){return function(a){return hr(n,a,s)}});function Of(n,s,a){var l=I(s),p=uo(s,l);null==a&&(!pe(s)||!p.length&&l.length)&&(a=s,s=n,n=this,p=uo(s,I(s)));var v=!(pe(a)&&"chain"in a&&!a.chain),T=Yn(n);return bn(p,function(A){var N=s[A];n[A]=N,T&&(n.prototype[A]=function(){var V=this.__chain__;if(v||V){var B=n(this.__wrapped__);return(B.__actions__=_e(this.__actions__)).push({func:N,args:arguments,thisArg:n}),B.__chain__=V,B}return N.apply(n,bs([this.value()],arguments))})}),n}function Df(){}var Fp=En(oe),Mp=En(qu),Rp=En(_a);function rp(n){return Ie(n)?ya(os(n)):function Tl(n){return function(s){return Js(s,n)}}(n)}var qp=Ml(),Pp=Ml(!0);function Nf(){return[]}function Ef(){return!1}var zp=bo(function(n,s){return n+s},0),jp=Ha("ceil"),Zp=bo(function(n,s){return n/s},1),Qp=Ha("floor"),tm=bo(function(n,s){return n*s},1),em=Ha("round"),nm=bo(function(n,s){return n-s},0);return g.after=function qc(n,s){if("function"!=typeof s)throw new $t(Ot);return n=At(n),function(){if(--n<1)return s.apply(this,arguments)}},g.ary=cf,g.assign=r,g.assignIn=t,g.assignInWith=e,g.assignWith=i,g.at=o,g.before=Zo,g.bind=Zl,g.bindAll=xp,g.bindKey=Qo,g.castArray=function jc(){if(!arguments.length)return[];var n=arguments[0];return xt(n)?n:[n]},g.chain=Bo,g.chunk=function Ro(n,s,a){s=(a?sn(n,s,a):s===x)?1:he(At(s),0);var l=null==n?0:n.length;if(!l||s<1)return[];for(var p=0,v=0,T=R(no(l/s));p<l;)T[v++]=On(n,p,p+=s);return T},g.compact=function of(n){for(var s=-1,a=null==n?0:n.length,l=0,p=[];++s<a;){var v=n[s];v&&(p[l++]=v)}return p},g.concat=function Io(){var n=arguments.length;if(!n)return[];for(var s=R(n-1),a=arguments[0],l=n;l--;)s[l-1]=arguments[l];return bs(xt(a)?_e(a):[a],Be(s,1))},g.cond=function wp(n){var s=null==n?0:n.length,a=dt();return n=s?oe(n,function(l){if("function"!=typeof l[1])throw new $t(Ot);return[a(l[0]),l[1]]}):[],Nt(function(l){for(var p=-1;++p<s;){var v=n[p];if(un(v[0],this,l))return un(v[1],this,l)}})},g.conforms=function Tp(n){return function Md(n){var s=I(n);return function(a){return Ra(a,n,s)}}(Cn(n,1))},g.constant=Cf,g.countBy=Sc,g.create=function c(n,s){var a=Cs(n);return null==s?a:ol(a,s)},g.curry=function Pc(n,s,a){var l=fn(n,8,x,x,x,x,x,s=a?x:s);return l.placeholder=Pc.placeholder,l},g.curryRight=function Lc(n,s,a){var l=fn(n,16,x,x,x,x,x,s=a?x:s);return l.placeholder=Lc.placeholder,l},g.debounce=Ho,g.defaults=u,g.defaultsDeep=d,g.defer=Ql,g.delay=uf,g.difference=nc,g.differenceBy=Sr,g.differenceWith=gn,g.drop=function Ar(n,s,a){var l=null==n?0:n.length;return l?On(n,(s=a||s===x?1:At(s))<0?0:s,l):[]},g.dropRight=function sc(n,s,a){var l=null==n?0:n.length;return l?On(n,0,(s=l-(s=a||s===x?1:At(s)))<0?0:s):[]},g.dropRightWhile=function Ei(n,s){return n&&n.length?ja(n,dt(s,3),!0,!0):[]},g.dropWhile=function ic(n,s){return n&&n.length?ja(n,dt(s,3),!0):[]},g.fill=function ps(n,s,a,l){var p=null==n?0:n.length;return p?(a&&"number"!=typeof a&&sn(n,s,a)&&(a=0,l=p),function Id(n,s,a,l){var p=n.length;for((a=At(a))<0&&(a=-a>p?0:p+a),(l=l===x||l>p?p:At(l))<0&&(l+=p),l=a>l?0:Mn(l);a<l;)n[a++]=s;return n}(n,s,a,l)):[]},g.filter=function Cc(n,s){return(xt(n)?Ts:ul)(n,dt(s,3))},g.flatMap=function kc(n,s){return Be(qi(n,s),1)},g.flatMapDeep=function Mr(n,s){return Be(qi(n,s),ft)},g.flatMapDepth=function Oc(n,s,a){return a=a===x?1:At(a),Be(qi(n,s),a)},g.flatten=Rs,g.flattenDeep=function qo(n){return null!=n&&n.length?Be(n,ft):[]},g.flattenDepth=function Fn(n,s){return null!=n&&n.length?Be(n,s=s===x?1:At(s)):[]},g.flip=function lf(n){return fn(n,512)},g.flow=Sp,g.flowRight=Ap,g.fromPairs=function Po(n){for(var s=-1,a=null==n?0:n.length,l={};++s<a;){var p=n[s];l[p[0]]=p[1]}return l},g.functions=function w(n){return null==n?[]:uo(n,I(n))},g.functionsIn=function S(n){return null==n?[]:uo(n,M(n))},g.groupBy=jf,g.initial=function ii(n){return null!=n&&n.length?On(n,0,-1):[]},g.intersection=Cr,g.intersectionBy=kr,g.intersectionWith=Ri,g.invert=L,g.invertBy=z,g.invokeMap=Dc,g.iteratee=kf,g.keyBy=zo,g.keys=I,g.keysIn=M,g.map=qi,g.mapKeys=function E(n,s){var a={};return s=dt(s,3),kn(n,function(l,p,v){es(a,s(l,p,v),l)}),a},g.mapValues=function j(n,s){var a={};return s=dt(s,3),kn(n,function(l,p,v){es(a,p,s(l,p,v))}),a},g.matches=function Cp(n){return _l(Cn(n,1))},g.matchesProperty=function kp(n,s){return vl(n,Cn(s,1))},g.memoize=Li,g.merge=U,g.mergeWith=H,g.method=Op,g.methodOf=Dp,g.mixin=Of,g.negate=Vc,g.nthArg=function Ep(n){return n=At(n),Nt(function(s){return po(s,n)})},g.omit=W,g.omitBy=function et(n,s){return nt(n,Vc(dt(s)))},g.once=function Wc(n){return Zo(2,n)},g.orderBy=function Nc(n,s,a,l){return null==n?[]:(xt(s)||(s=null==s?[]:[s]),xt(a=l?x:a)||(a=null==a?[]:[a]),yl(n,s,a))},g.over=Fp,g.overArgs=Bc,g.overEvery=Mp,g.overSome=Rp,g.partial=Rr,g.partialRight=Yo,g.partition=Ec,g.pick=rt,g.pickBy=nt,g.property=rp,g.propertyOf=function Ip(n){return function(s){return null==n?x:Js(n,s)}},g.pull=Ll,g.pullAll=Lo,g.pullAllBy=function Vl(n,s,a){return n&&n.length&&s&&s.length?mo(n,s,dt(a,2)):n},g.pullAllWith=function oc(n,s,a){return n&&n.length&&s&&s.length?mo(n,s,x,a):n},g.pullAt=Wl,g.range=qp,g.rangeRight=Pp,g.rearg=Hl,g.reject=function Fc(n,s){return(xt(n)?Ts:ul)(n,Vc(dt(s,3)))},g.remove=function ms(n,s){var a=[];if(!n||!n.length)return a;var l=-1,p=[],v=n.length;for(s=dt(s,3);++l<v;){var T=n[l];s(T,l,n)&&(a.push(T),p.push(l))}return bl(n,p),a},g.rest=function Yl(n,s){if("function"!=typeof n)throw new $t(Ot);return Nt(n,s=s===x?s:At(s))},g.reverse=ri,g.sampleSize=function Mc(n,s,a){return s=(a?sn(n,s,a):s===x)?1:At(s),(xt(n)?Nd:Sl)(n,s)},g.set=function at(n,s,a){return null==n?n:go(n,s,a)},g.setWith=function _t(n,s,a,l){return l="function"==typeof l?l:x,null==n?n:go(n,s,a,l)},g.shuffle=function Rc(n){return(xt(n)?Ed:Ff)(n)},g.slice=function ac(n,s,a){var l=null==n?0:n.length;return l?(a&&"number"!=typeof a&&sn(n,s,a)?(s=0,a=l):(s=null==s?0:At(s),a=a===x?l:At(a)),On(n,s,a)):[]},g.sortBy=Xf,g.sortedUniq=function uc(n){return n&&n.length?Cl(n):[]},g.sortedUniqBy=function lc(n,s){return n&&n.length?Cl(n,dt(s,2)):[]},g.split=function Sf(n,s,a){return a&&"number"!=typeof a&&sn(n,s,a)&&(s=a=x),(a=a===x?Dt:a>>>0)?(n=Gt(n))&&("string"==typeof s||null!=s&&!ta(s))&&!(s=ut(s))&&xi(n)?fs(Gn(n),0,a):n.split(s,a):[]},g.spread=function $f(n,s){if("function"!=typeof n)throw new $t(Ot);return s=null==s?0:he(At(s),0),Nt(function(a){var l=a[s],p=fs(a,0,s);return l&&bs(p,l),un(n,this,p)})},g.tail=function hc(n){var s=null==n?0:n.length;return s?On(n,1,s):[]},g.take=function Lf(n,s,a){return n&&n.length?On(n,0,(s=a||s===x?1:At(s))<0?0:s):[]},g.takeRight=function gs(n,s,a){var l=null==n?0:n.length;return l?On(n,(s=l-(s=a||s===x?1:At(s)))<0?0:s,l):[]},g.takeRightWhile=function Vo(n,s){return n&&n.length?ja(n,dt(s,3),!1,!0):[]},g.takeWhile=function oi(n,s){return n&&n.length?ja(n,dt(s,3)):[]},g.tap=function jl(n,s){return s(n),n},g.throttle=function Gc(n,s,a){var l=!0,p=!0;if("function"!=typeof n)throw new $t(Ot);return pe(a)&&(l="leading"in a?!!a.leading:l,p="trailing"in a?!!a.trailing:p),Ho(n,s,{leading:l,maxWait:s,trailing:p})},g.thru=wc,g.toArray=eh,g.toPairs=lt,g.toPairsIn=bt,g.toPath=function Gp(n){return xt(n)?oe(n,os):_n(n)?[n]:_e(sf(Gt(n)))},g.toPlainObject=nh,g.transform=function Ct(n,s,a){var l=xt(n),p=l||as(n)||Vi(n);if(s=dt(s,4),null==a){var v=n&&n.constructor;a=p?l?new v:[]:pe(n)&&Yn(v)?Cs(to(n)):{}}return(p?bn:kn)(n,function(T,A,N){return s(a,T,A,N)}),a},g.unary=function Uc(n){return cf(n,1)},g.union=ai,g.unionBy=dc,g.unionWith=Nr,g.uniq=function fc(n){return n&&n.length?Xe(n):[]},g.uniqBy=function Ul(n,s){return n&&n.length?Xe(n,dt(s,2)):[]},g.uniqWith=function pc(n,s){return s="function"==typeof s?s:x,n&&n.length?Xe(n,x,s):[]},g.unset=function ne(n,s){return null==n||vo(n,s)},g.unzip=Er,g.unzipWith=Wo,g.update=function Ce(n,s,a){return null==n?n:yo(n,s,Za(a))},g.updateWith=function Ke(n,s,a,l){return l="function"==typeof l?l:x,null==n?n:yo(n,s,Za(a),l)},g.values=kt,g.valuesIn=function vs(n){return null==n?[]:wa(n,M(n))},g.without=mc,g.words=sp,g.wrap=function zc(n,s){return Rr(Za(s),n)},g.xor=gc,g.xorBy=_c,g.xorWith=zl,g.zip=vc,g.zipObject=function Fr(n,s){return en(n||[],s||[],ur)},g.zipObjectDeep=function yc(n,s){return en(n||[],s||[],go)},g.zipWith=xc,g.entries=lt,g.entriesIn=bt,g.extend=t,g.extendWith=e,Of(g,g),g.add=zp,g.attempt=ip,g.camelCase=cs,g.capitalize=li,g.ceil=jp,g.clamp=function qs(n,s,a){return a===x&&(a=s,s=x),a!==x&&(a=(a=ce(a))==a?a:0),s!==x&&(s=(s=ce(s))==s?s:0),$s(ce(n),s,a)},g.clone=function Xl(n){return Cn(n,4)},g.cloneDeep=function Qc(n){return Cn(n,5)},g.cloneDeepWith=function $l(n,s){return Cn(n,5,s="function"==typeof s?s:x)},g.cloneWith=function Zc(n,s){return Cn(n,4,s="function"==typeof s?s:x)},g.conformsTo=function Hc(n,s){return null==s||Ra(n,s,I(s))},g.deburr=hi,g.defaultTo=function bp(n,s){return null==n||n!=n?s:n},g.divide=Zp,g.endsWith=function wf(n,s,a){n=Gt(n),s=ut(s);var l=n.length,p=a=a===x?l:$s(At(a),0,l);return(a-=s.length)>=0&&n.slice(a,p)==s},g.eq=Wt,g.escape=function Tf(n){return(n=Gt(n))&&oh.test(n)?n.replace(Zi,td):n},g.escapeRegExp=function K(n){return(n=Gt(n))&&uu.test(n)?n.replace(vi,"\\$&"):n},g.every=function Ac(n,s,a){var l=xt(n)?qu:Rd;return a&&sn(n,s,a)&&(s=x),l(n,dt(s,3))},g.find=Ii,g.findIndex=rc,g.findKey=function h(n,s){return Pu(n,dt(s,3),kn)},g.findLast=ci,g.findLastIndex=Fi,g.findLastKey=function f(n,s){return Pu(n,dt(s,3),co)},g.floor=Qp,g.forEach=Go,g.forEachRight=Uo,g.forIn=function m(n,s){return null==n?n:Ia(n,dt(s,3),M)},g.forInRight=function _(n,s){return null==n?n:qa(n,dt(s,3),M)},g.forOwn=function y(n,s){return n&&kn(n,dt(s,3))},g.forOwnRight=function b(n,s){return n&&co(n,dt(s,3))},g.get=F,g.gt=Xo,g.gte=ui,g.has=function C(n,s){return null!=n&&mn(n,s,qd)},g.hasIn=q,g.head=Mi,g.identity=In,g.includes=function Zf(n,s,a,l){n=He(n)?n:kt(n),a=a&&!l?At(a):0;var p=n.length;return a<0&&(a=he(p+a,0)),qe(n)?a<=p&&n.indexOf(s,a)>-1:!!p&&zt(n,s,a)>-1},g.indexOf=function af(n,s,a){var l=null==n?0:n.length;if(!l)return-1;var p=null==a?0:At(a);return p<0&&(p=he(l+p,0)),zt(n,s,p)},g.inRange=function $(n,s,a){return s=_s(s),a===x?(a=s,s=0):a=_s(a),function Pd(n,s,a){return n>=Ue(s,a)&&n<he(s,a)}(n=ce(n),s,a)},g.invoke=D,g.isArguments=Is,g.isArray=xt,g.isArrayBuffer=hf,g.isArrayLike=He,g.isArrayLikeObject=ae,g.isBoolean=function Yc(n){return!0===n||!1===n||ve(n)&&Ye(n)==Kt},g.isBuffer=as,g.isDate=Xc,g.isElement=function $c(n){return ve(n)&&1===n.nodeType&&!Jo(n)},g.isEmpty=function Kc(n){if(null==n)return!0;if(He(n)&&(xt(n)||"string"==typeof n||"function"==typeof n.splice||as(n)||Vi(n)||Is(n)))return!n.length;var s=Ge(n);if(s==Le||s==Bn)return!n.size;if(rs(n))return!Va(n).length;for(var a in n)if(jt.call(n,a))return!1;return!0},g.isEqual=function Jc(n,s){return dr(n,s)},g.isEqualWith=function tu(n,s,a){var l=(a="function"==typeof a?a:x)?a(n,s):x;return l===x?dr(n,s,x,a):!!l},g.isError=Kl,g.isFinite=function Kf(n){return"number"==typeof n&&Xu(n)},g.isFunction=Yn,g.isInteger=df,g.isLength=$o,g.isMap=ff,g.isMatch=function Jf(n,s){return n===s||lo(n,s,ko(s))},g.isMatchWith=function tp(n,s,a){return a="function"==typeof a?a:x,lo(n,s,ko(s),a)},g.isNaN=function ep(n){return pf(n)&&n!=+n},g.isNative=function Ko(n){if(tc(n))throw new wt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ho(n)},g.isNil=function np(n){return null==n},g.isNull=function Jl(n){return null===n},g.isNumber=pf,g.isObject=pe,g.isObjectLike=ve,g.isPlainObject=Jo,g.isRegExp=ta,g.isSafeInteger=function th(n){return df(n)&&n>=-Z&&n<=Z},g.isSet=eu,g.isString=qe,g.isSymbol=_n,g.isTypedArray=Vi,g.isUndefined=function mf(n){return n===x},g.isWeakMap=function gf(n){return ve(n)&&Ge(n)==zi},g.isWeakSet=function _f(n){return ve(n)&&"[object WeakSet]"==Ye(n)},g.join=function Or(n,s){return null==n?"":$u.call(n,s)},g.kebabCase=vt,g.last=Qe,g.lastIndexOf=function Pl(n,s,a){var l=null==n?0:n.length;if(!l)return-1;var p=l;return a!==x&&(p=(p=At(a))<0?he(l+p,0):Ue(p,l-1)),s==s?function tn(O,P,R){for(var J=R+1;J--;)if(O[J]===P)return J;return J}(n,s,p):jr(n,va,p,!0)},g.lowerCase=Oe,g.lowerFirst=fe,g.lt=vf,g.lte=yf,g.max=function Hp(n){return n&&n.length?Ks(n,In,ki):x},g.maxBy=function Yp(n,s){return n&&n.length?Ks(n,dt(s,2),ki):x},g.mean=function Xp(n){return Lu(n,In)},g.meanBy=function $p(n,s){return Lu(n,dt(s,2))},g.min=function Kp(n){return n&&n.length?Ks(n,In,Wa):x},g.minBy=function Jp(n,s){return n&&n.length?Ks(n,dt(s,2),Wa):x},g.stubArray=Nf,g.stubFalse=Ef,g.stubObject=function Lp(){return{}},g.stubString=function Vp(){return""},g.stubTrue=function Wp(){return!0},g.multiply=tm,g.nth=function Dr(n,s){return n&&n.length?po(n,At(s)):x},g.noConflict=function Np(){return Ve._===this&&(Ve._=dd),this},g.noop=Df,g.now=Pi,g.pad=function Bt(n,s,a){n=Gt(n);var l=(s=At(s))?wi(n):0;if(!s||l>=s)return n;var p=(s-l)/2;return mr(so(p),a)+n+mr(no(p),a)},g.padEnd=function me(n,s,a){n=Gt(n);var l=(s=At(s))?wi(n):0;return s&&l<s?n+mr(s-l,a):n},g.padStart=function Rn(n,s,a){n=Gt(n);var l=(s=At(s))?wi(n):0;return s&&l<s?mr(s-l,a)+n:n},g.parseInt=function Ps(n,s,a){return a||null==s?s=0:s&&(s=+s),yd(Gt(n).replace(Yi,""),s||0)},g.random=function ke(n,s,a){if(a&&"boolean"!=typeof a&&sn(n,s,a)&&(s=a=x),a===x&&("boolean"==typeof s?(a=s,s=x):"boolean"==typeof n&&(a=n,n=x)),n===x&&s===x?(n=0,s=1):(n=_s(n),s===x?(s=n,n=0):s=_s(s)),n>s){var l=n;n=s,s=l}if(a||n%1||s%1){var p=Ca();return Ue(n+p*(s-n+Uh("1e-"+((p+"").length-1))),s)}return Ba(n,s)},g.reduce=function Qf(n,s,a){var l=xt(n)?ga:le,p=arguments.length<3;return l(n,dt(s,4),a,p,Ds)},g.reduceRight=function Hf(n,s,a){var l=xt(n)?Qh:le,p=arguments.length<3;return l(n,dt(s,4),a,p,cl)},g.repeat=function Ir(n,s,a){return s=(a?sn(n,s,a):s===x)?1:At(s),Ga(Gt(n),s)},g.replace=function nu(){var n=arguments,s=Gt(n[0]);return n.length<3?s:s.replace(n[1],n[2])},g.result=function st(n,s,a){var l=-1,p=(s=je(s,n)).length;for(p||(p=1,n=x);++l<p;){var v=null==n?x:n[os(s[l])];v===x&&(l=p,v=a),n=Yn(v)?v.call(n):v}return n},g.round=em,g.runInContext=O,g.sample=function jo(n){return(xt(n)?ds:Zd)(n)},g.size=function Ic(n){if(null==n)return 0;if(He(n))return qe(n)?wi(n):n.length;var s=Ge(n);return s==Le||s==Bn?n.size:Va(n).length},g.snakeCase=bf,g.some=function Yf(n,s,a){var l=xt(n)?_a:Qd;return a&&sn(n,s,a)&&(s=x),l(n,dt(s,3))},g.sortedIndex=function cc(n,s){return _o(n,s)},g.sortedIndexBy=function If(n,s,a){return za(n,s,dt(a,2))},g.sortedIndexOf=function qf(n,s){var a=null==n?0:n.length;if(a){var l=_o(n,s);if(l<a&&Wt(n[l],s))return l}return-1},g.sortedLastIndex=function Pf(n,s){return _o(n,s,!0)},g.sortedLastIndexBy=function Bl(n,s,a){return za(n,s,dt(a,2),!0)},g.sortedLastIndexOf=function Gl(n,s){if(null!=n&&n.length){var l=_o(n,s,!0)-1;if(Wt(n[l],s))return l}return-1},g.startCase=up,g.startsWith=function lp(n,s,a){return n=Gt(n),a=null==a?0:$s(At(a),0,n.length),s=ut(s),n.slice(a,a+s.length)==s},g.subtract=nm,g.sum=function sm(n){return n&&n.length?tr(n,In):0},g.sumBy=function im(n,s){return n&&n.length?tr(n,dt(s,2)):0},g.template=function hp(n,s,a){var l=g.templateSettings;a&&sn(n,s,a)&&(s=x),n=Gt(n),s=e({},s,l,Rl);var A,N,p=e({},s.imports,l.imports,Rl),v=I(p),T=wa(p,v),V=0,B=s.interpolate||Wr,G="__p += '",Y=Sa((s.escape||Wr).source+"|"+B.source+"|"+(B===Qi?hh:Wr).source+"|"+(s.evaluate||Wr).source+"|$","g"),ot="//# sourceURL="+(jt.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Lh+"]")+"\n";n.replace(Y,function(mt,It,Pt,Xn,vn,$n){return Pt||(Pt=Xn),G+=n.slice(V,$n).replace(Br,ed),It&&(A=!0,G+="' +\n__e("+It+") +\n'"),vn&&(N=!0,G+="';\n"+vn+";\n__p += '"),Pt&&(G+="' +\n((__t = ("+Pt+")) == null ? '' : __t) +\n'"),V=$n+mt.length,mt}),G+="';\n";var pt=jt.call(s,"variable")&&s.variable;if(pt){if(oa.test(pt))throw new wt("Invalid `variable` option passed into `_.template`")}else G="with (obj) {\n"+G+"\n}\n";G=(N?G.replace(Bs,""):G).replace(iu,"$1").replace(ru,"$1;"),G="function("+(pt||"obj")+") {\n"+(pt?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(A?", __e = _.escape":"")+(N?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+G+"return __p\n}";var Et=ip(function(){return Rt(v,ot+"return "+G).apply(x,T)});if(Et.source=G,Kl(Et))throw Et;return Et},g.times=function Bp(n,s){if((n=At(n))<1||n>Z)return[];var a=Dt,l=Ue(n,Dt);s=dt(s),n-=Dt;for(var p=er(l,s);++a<n;)s(a);return p},g.toFinite=_s,g.toInteger=At,g.toLength=Mn,g.toLower=function dp(n){return Gt(n).toLowerCase()},g.toNumber=ce,g.toSafeInteger=function xf(n){return n?$s(At(n),-Z,Z):0===n?n:0},g.toString=Gt,g.toUpper=function fp(n){return Gt(n).toUpperCase()},g.trim=function pp(n,s,a){if((n=Gt(n))&&(a||s===x))return Vu(n);if(!n||!(s=ut(s)))return n;var l=Gn(n),p=Gn(s);return fs(l,Wu(l,p),Ta(l,p)+1).join("")},g.trimEnd=function mp(n,s,a){if((n=Gt(n))&&(a||s===x))return n.slice(0,Uu(n)+1);if(!n||!(s=ut(s)))return n;var l=Gn(n);return fs(l,0,Ta(l,Gn(s))+1).join("")},g.trimStart=function gp(n,s,a){if((n=Gt(n))&&(a||s===x))return n.replace(Yi,"");if(!n||!(s=ut(s)))return n;var l=Gn(n);return fs(l,Wu(l,Gn(s))).join("")},g.truncate=function _p(n,s){var a=30,l="...";if(pe(s)){var p="separator"in s?s.separator:p;a="length"in s?At(s.length):a,l="omission"in s?ut(s.omission):l}var v=(n=Gt(n)).length;if(xi(n)){var T=Gn(n);v=T.length}if(a>=v)return n;var A=a-wi(l);if(A<1)return l;var N=T?fs(T,0,A).join(""):n.slice(0,A);if(p===x)return N+l;if(T&&(A+=N.length-A),ta(p)){if(n.slice(A).search(p)){var V,B=N;for(p.global||(p=Sa(p.source,Gt(lu.exec(p))+"g")),p.lastIndex=0;V=p.exec(B);)var G=V.index;N=N.slice(0,G===x?A:G)}}else if(n.indexOf(ut(p),A)!=A){var Y=N.lastIndexOf(p);Y>-1&&(N=N.slice(0,Y))}return N+l},g.unescape=function vp(n){return(n=Gt(n))&&ou.test(n)?n.replace(Gs,zu):n},g.uniqueId=function Up(n){var s=++ld;return Gt(n)+s},g.upperCase=yp,g.upperFirst=Af,g.each=Go,g.eachRight=Uo,g.first=Mi,Of(g,function(){var n={};return kn(g,function(s,a){jt.call(g.prototype,a)||(n[a]=s)}),n}(),{chain:!1}),g.VERSION="4.17.21",bn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){g[n].placeholder=g}),bn(["drop","take"],function(n,s){it.prototype[n]=function(a){a=a===x?1:he(At(a),0);var l=this.__filtered__&&!s?new it(this):this.clone();return l.__filtered__?l.__takeCount__=Ue(a,l.__takeCount__):l.__views__.push({size:Ue(a,Dt),type:n+(l.__dir__<0?"Right":"")}),l},it.prototype[n+"Right"]=function(a){return this.reverse()[n](a).reverse()}}),bn(["filter","map","takeWhile"],function(n,s){var a=s+1,l=1==a||3==a;it.prototype[n]=function(p){var v=this.clone();return v.__iteratees__.push({iteratee:dt(p,3),type:a}),v.__filtered__=v.__filtered__||l,v}}),bn(["head","last"],function(n,s){var a="take"+(s?"Right":"");it.prototype[n]=function(){return this[a](1).value()[0]}}),bn(["initial","tail"],function(n,s){var a="drop"+(s?"":"Right");it.prototype[n]=function(){return this.__filtered__?new it(this):this[a](1)}}),it.prototype.compact=function(){return this.filter(In)},it.prototype.find=function(n){return this.filter(n).head()},it.prototype.findLast=function(n){return this.reverse().find(n)},it.prototype.invokeMap=Nt(function(n,s){return"function"==typeof n?new it(this):this.map(function(a){return hr(a,n,s)})}),it.prototype.reject=function(n){return this.filter(Vc(dt(n)))},it.prototype.slice=function(n,s){n=At(n);var a=this;return a.__filtered__&&(n>0||s<0)?new it(a):(n<0?a=a.takeRight(-n):n&&(a=a.drop(n)),s!==x&&(a=(s=At(s))<0?a.dropRight(-s):a.take(s-n)),a)},it.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},it.prototype.toArray=function(){return this.take(Dt)},kn(it.prototype,function(n,s){var a=/^(?:filter|find|map|reject)|While$/.test(s),l=/^(?:head|last)$/.test(s),p=g[l?"take"+("last"==s?"Right":""):s],v=l||/^find/.test(s);p&&(g.prototype[s]=function(){var T=this.__wrapped__,A=l?[1]:arguments,N=T instanceof it,V=A[0],B=N||xt(T),G=function(It){var Pt=p.apply(g,bs([It],A));return l&&Y?Pt[0]:Pt};B&&a&&"function"==typeof V&&1!=V.length&&(N=B=!1);var Y=this.__chain__,pt=v&&!Y,Et=N&&!this.__actions__.length;if(!v&&B){T=Et?T:new it(this);var mt=n.apply(T,A);return mt.__actions__.push({func:wc,args:[G],thisArg:x}),new An(mt,Y)}return pt&&Et?n.apply(this,A):(mt=this.thru(G),pt?l?mt.value()[0]:mt.value():mt)})}),bn(["pop","push","shift","sort","splice","unshift"],function(n){var s=Hr[n],a=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",l=/^(?:pop|shift)$/.test(n);g.prototype[n]=function(){var p=arguments;if(l&&!this.__chain__){var v=this.value();return s.apply(xt(v)?v:[],p)}return this[a](function(T){return s.apply(xt(T)?T:[],p)})}}),kn(it.prototype,function(n,s){var a=g[s];if(a){var l=a.name+"";jt.call(Ys,l)||(Ys[l]=[]),Ys[l].push({name:s,func:a})}}),Ys[pr(x,2).name]=[{name:"wrapper",func:x}],it.prototype.clone=function Re(){var n=new it(this.__wrapped__);return n.__actions__=_e(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=_e(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=_e(this.__views__),n},it.prototype.reverse=function Ht(){if(this.__filtered__){var n=new it(this);n.__dir__=-1,n.__filtered__=!0}else(n=this.clone()).__dir__*=-1;return n},it.prototype.value=function tl(){var n=this.__wrapped__.value(),s=this.__dir__,a=xt(n),l=s<0,p=a?n.length:0,v=function Jd(n,s,a){for(var l=-1,p=a.length;++l<p;){var v=a[l],T=v.size;switch(v.type){case"drop":n+=T;break;case"dropRight":s-=T;break;case"take":s=Ue(s,n+T);break;case"takeRight":n=he(n,s-T)}}return{start:n,end:s}}(0,p,this.__views__),T=v.start,A=v.end,N=A-T,V=l?A:T-1,B=this.__iteratees__,G=B.length,Y=0,ot=Ue(N,this.__takeCount__);if(!a||!l&&p==N&&ot==N)return kl(n,this.__actions__);var pt=[];t:for(;N--&&Y<ot;){for(var Et=-1,mt=n[V+=s];++Et<G;){var It=B[Et],Xn=It.type,vn=(0,It.iteratee)(mt);if(2==Xn)mt=vn;else if(!vn){if(1==Xn)continue t;break t}}pt[Y++]=mt}return pt},g.prototype.at=Vf,g.prototype.chain=function Wf(){return Bo(this)},g.prototype.commit=function Bf(){return new An(this.value(),this.__chain__)},g.prototype.next=function Gf(){this.__values__===x&&(this.__values__=eh(this.value()));var n=this.__index__>=this.__values__.length;return{done:n,value:n?x:this.__values__[this.__index__++]}},g.prototype.plant=function zf(n){for(var s,a=this;a instanceof we;){var l=Ms(a);l.__index__=0,l.__values__=x,s?p.__wrapped__=l:s=l;var p=l;a=a.__wrapped__}return p.__wrapped__=n,s},g.prototype.reverse=function Tc(){var n=this.__wrapped__;if(n instanceof it){var s=n;return this.__actions__.length&&(s=new it(this)),(s=s.reverse()).__actions__.push({func:wc,args:[ri],thisArg:x}),new An(s,this.__chain__)}return this.thru(ri)},g.prototype.toJSON=g.prototype.valueOf=g.prototype.value=function bc(){return kl(this.__wrapped__,this.__actions__)},g.prototype.first=g.prototype.head,ir&&(g.prototype[ir]=function Uf(){return this}),g}();Ve._=Qr,(gt=function(){return Qr}.call(Yt,Tt,Yt,tt))!==x&&(tt.exports=gt)}.call(this)},3897:tt=>{tt.exports=function Yt(Tt,gt){(null==gt||gt>Tt.length)&&(gt=Tt.length);for(var x=0,k=new Array(gt);x<gt;x++)k[x]=Tt[x];return k},tt.exports.__esModule=!0,tt.exports.default=tt.exports},5372:tt=>{tt.exports=function Yt(Tt){if(Array.isArray(Tt))return Tt},tt.exports.__esModule=!0,tt.exports.default=tt.exports},6690:tt=>{tt.exports=function Yt(Tt,gt){if(!(Tt instanceof gt))throw new TypeError("Cannot call a class as a function")},tt.exports.__esModule=!0,tt.exports.default=tt.exports},9728:(tt,Yt,Tt)=>{var gt=Tt(4062);function x(Ut,Lt){for(var Ot=0;Ot<Lt.length;Ot++){var ye=Lt[Ot];ye.enumerable=ye.enumerable||!1,ye.configurable=!0,"value"in ye&&(ye.writable=!0),Object.defineProperty(Ut,gt(ye.key),ye)}}tt.exports=function k(Ut,Lt,Ot){return Lt&&x(Ut.prototype,Lt),Ot&&x(Ut,Ot),Object.defineProperty(Ut,"prototype",{writable:!1}),Ut},tt.exports.__esModule=!0,tt.exports.default=tt.exports},8872:tt=>{tt.exports=function Yt(Tt,gt){var x=null==Tt?null:typeof Symbol<"u"&&Tt[Symbol.iterator]||Tt["@@iterator"];if(null!=x){var k,Ut,Lt,Ot,ye=[],qn=!0,Ls=!1;try{if(Lt=(x=x.call(Tt)).next,0===gt){if(Object(x)!==x)return;qn=!1}else for(;!(qn=(k=Lt.call(x)).done)&&(ye.push(k.value),ye.length!==gt);qn=!0);}catch(rn){Ls=!0,Ut=rn}finally{try{if(!qn&&null!=x.return&&(Ot=x.return(),Object(Ot)!==Ot))return}finally{if(Ls)throw Ut}}return ye}},tt.exports.__esModule=!0,tt.exports.default=tt.exports},2218:tt=>{tt.exports=function Yt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},tt.exports.__esModule=!0,tt.exports.default=tt.exports},7424:(tt,Yt,Tt)=>{var gt=Tt(5372),x=Tt(8872),k=Tt(6116),Ut=Tt(2218);tt.exports=function Lt(Ot,ye){return gt(Ot)||x(Ot,ye)||k(Ot,ye)||Ut()},tt.exports.__esModule=!0,tt.exports.default=tt.exports},5036:(tt,Yt,Tt)=>{var gt=Tt(8698).default;tt.exports=function x(k,Ut){if("object"!==gt(k)||null===k)return k;var Lt=k[Symbol.toPrimitive];if(void 0!==Lt){var Ot=Lt.call(k,Ut||"default");if("object"!==gt(Ot))return Ot;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===Ut?String:Number)(k)},tt.exports.__esModule=!0,tt.exports.default=tt.exports},4062:(tt,Yt,Tt)=>{var gt=Tt(8698).default,x=Tt(5036);tt.exports=function k(Ut){var Lt=x(Ut,"string");return"symbol"===gt(Lt)?Lt:String(Lt)},tt.exports.__esModule=!0,tt.exports.default=tt.exports},8698:tt=>{function Yt(Tt){return tt.exports=Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(gt){return typeof gt}:function(gt){return gt&&"function"==typeof Symbol&&gt.constructor===Symbol&&gt!==Symbol.prototype?"symbol":typeof gt},tt.exports.__esModule=!0,tt.exports.default=tt.exports,Yt(Tt)}tt.exports=Yt,tt.exports.__esModule=!0,tt.exports.default=tt.exports},6116:(tt,Yt,Tt)=>{var gt=Tt(3897);tt.exports=function x(k,Ut){if(k){if("string"==typeof k)return gt(k,Ut);var Lt=Object.prototype.toString.call(k).slice(8,-1);if("Object"===Lt&&k.constructor&&(Lt=k.constructor.name),"Map"===Lt||"Set"===Lt)return Array.from(k);if("Arguments"===Lt||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Lt))return gt(k,Ut)}},tt.exports.__esModule=!0,tt.exports.default=tt.exports}}]);