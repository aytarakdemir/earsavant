(self.webpackChunkcomms=self.webpackChunkcomms||[]).push([[487],{3487:(tt,Yt,Tt)=>{"use strict";Tt.r(Yt),Tt.d(Yt,{FunctionalTrainerModule:()=>Gt});var gt=Tt(6814),x=Tt(4225),k=Tt(4946),Ut=Tt(6990);const Lt="14.7.77";var kt=Tt(9884);const De=new WeakSet,vn=new WeakMap,yn=new WeakMap,Ie=new WeakMap,Xn=new WeakMap,Ne=new WeakMap,xn=new WeakMap,_s=new WeakMap,me=new WeakMap,Pn=new WeakMap,Xe={construct:()=>Xe},wn=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Ln=(r,t)=>{const e=[];let i=r.replace(/^[\s]+/,""),o=i.match(wn);for(;null!==o;){const c=o[1].slice(1,-1),u=o[0].replace(/([\s]+)?;?$/,"").replace(c,new URL(c,t).toString());e.push(u),i=i.slice(o[0].length).replace(/^[\s]+/,""),o=i.match(wn)}return[e.join(";"),i]},di=r=>{if(void 0!==r&&!Array.isArray(r))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Mr=r=>{if(!(r=>{try{new new Proxy(r,Xe)}catch{return!1}return!0})(r))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===r.prototype||"object"!=typeof r.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},sn=(r,t)=>{const e=r.get(t);if(void 0===e)throw new Error("A value with the given key could not be found.");return e},fi=(r,t)=>{const e=Array.from(r).filter(t);if(e.length>1)throw Error("More than one element was found.");if(0===e.length)throw Error("No element was found.");const[i]=e;return r.delete(i),i},Vi=(r,t,e,i)=>{const o=sn(r,t),c=fi(o,u=>u[0]===e&&u[1]===i);return 0===o.size&&r.delete(t),c},qt=r=>sn(xn,r),X=r=>{if(De.has(r))throw new Error("The AudioNode is already stored.");De.add(r),qt(r).forEach(t=>t(!0))},ft=r=>"port"in r,Z=r=>{if(!De.has(r))throw new Error("The AudioNode is not stored.");De.delete(r),qt(r).forEach(t=>t(!1))},yt=(r,t)=>{!ft(r)&&t.every(e=>0===e.size)&&Z(r)},Ps={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8};function as(r,t,e,i,o,c,u){try{var d=r[c](u),h=d.value}catch(f){return void e(f)}d.done?t(h):Promise.resolve(h).then(i,o)}function Ft(r){return function(){var t=this,e=arguments;return new Promise(function(i,o){var c=r.apply(t,e);function u(h){as(c,i,o,u,d,"next",h)}function d(h){as(c,i,o,u,d,"throw",h)}u(void 0)})}}const Kt=(r,t)=>r.context===t,cs=r=>{try{r.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Ee=()=>new DOMException("","IndexSizeError"),rn=r=>{var t;r.getChannelData=(t=r.getChannelData,e=>{try{return t.call(r,e)}catch(i){throw 12===i.code?Ee():i}})},Wi={numberOfChannels:1},ce=-34028234663852886e22,Fe=-ce,ie=r=>De.has(r),su={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},we=r=>sn(vn,r),$n=r=>sn(Ie,r),zi=(r,t)=>{const{activeInputs:e}=we(r);e.forEach(o=>o.forEach(([c])=>{t.includes(r)||zi(c,[...t,r])}));const i=(r=>"playbackRate"in r)(r)?[r.playbackRate]:ft(r)?Array.from(r.parameters.values()):(r=>"frequency"in r&&"gain"in r)(r)?[r.Q,r.detune,r.frequency,r.gain]:(r=>"offset"in r)(r)?[r.offset]:(r=>!("frequency"in r)&&"gain"in r)(r)?[r.gain]:(r=>"detune"in r&&"frequency"in r)(r)?[r.detune,r.frequency]:(r=>"pan"in r)(r)?[r.pan]:[];for(const o of i){const c=$n(o);void 0!==c&&c.activeInputs.forEach(([u])=>zi(u,t))}ie(r)&&Z(r)},mi=r=>{zi(r.destination,[])},gi=r=>"context"in r,Ls=r=>gi(r[0]),Vs=(r,t,e,i)=>{for(const o of r)if(e(o)){if(i)return!1;throw Error("The set contains at least one similar element.")}return r.add(t),!0},iu=(r,t,[e,i],o)=>{Vs(r,[t,e,i],c=>c[0]===t&&c[1]===e,o)},ru=(r,[t,e,i],o)=>{const c=r.get(t);void 0===c?r.set(t,new Set([[e,i]])):Vs(c,[e,i],u=>u[0]===e,o)},Ws=r=>"inputs"in r,ji=(r,t,e,i)=>{if(Ws(t)){const o=t.inputs[i];return r.connect(o,e,0),[o,e,0]}return r.connect(t,e,i),[t,e,i]},ou=(r,t,e)=>{for(const i of r)if(i[0]===t&&i[1]===e)return r.delete(i),i;return null},au=(r,t)=>{if(!qt(r).delete(t))throw new Error("Missing the expected event listener.")},cu=(r,t,e)=>{const i=sn(r,t),o=fi(i,c=>c[0]===e);return 0===i.size&&r.delete(t),o},Zi=(r,t,e,i)=>{Ws(t)?r.disconnect(t.inputs[i],e,0):r.disconnect(t,e,i)},ne=r=>sn(yn,r),Qi=r=>sn(Xn,r),Bs=r=>_s.has(r),_i=r=>!De.has(r),uu=(r,t)=>new Promise(e=>{if(null!==t)e(!0);else{const i=r.createScriptProcessor(256,1,1),o=r.createGain(),c=r.createBuffer(1,2,44100),u=c.getChannelData(0);u[0]=1,u[1]=1;const d=r.createBufferSource();d.buffer=c,d.loop=!0,d.connect(i).connect(r.destination),d.connect(o),d.disconnect(o),i.onaudioprocess=h=>{const f=h.inputBuffer.getChannelData(0);Array.prototype.some.call(f,m=>1===m)?e(!0):e(!1),d.stop(),i.onaudioprocess=null,d.disconnect(i),i.disconnect(r.destination)},d.start()}}),Hi=(r,t)=>{const e=new Map;for(const i of r)for(const o of i){const c=e.get(o);e.set(o,void 0===c?1:c+1)}e.forEach((i,o)=>t(o,i))},qr=r=>"context"in r,ia=(r,t,e,i,o)=>{const[c,u]=((r,t,e,i)=>{const{activeInputs:o,passiveInputs:c}=we(t),u=ou(o[i],r,e);return null===u?[Vi(c,r,e,i)[2],!1]:[u[2],!0]})(r,e,i,o);if(null!==c&&(au(r,c),u&&!t&&!Bs(r)&&Zi(ne(r),ne(e),i,o)),ie(e)){const{activeInputs:d}=we(e);yt(e,d)}},ra=(r,t,e,i)=>{const[o,c]=((r,t,e)=>{const{activeInputs:i,passiveInputs:o}=$n(t),c=ou(i,r,e);return null===c?[cu(o,r,e)[1],!1]:[c[2],!0]})(r,e,i);null!==o&&(au(r,o),c&&!t&&!Bs(r)&&ne(r).disconnect(Qi(e),i))};class hu{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach((i,o)=>t.call(e,i,o,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const gh={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function Lr(r,t,e,i,o){if("function"==typeof r.copyFromChannel)0===t[e].byteLength&&(t[e]=new Float32Array(128)),r.copyFromChannel(t[e],i,o);else{const c=r.getChannelData(i);if(0===t[e].byteLength)t[e]=c.slice(o,o+128);else{const u=new Float32Array(c.buffer,o*Float32Array.BYTES_PER_ELEMENT,128);t[e].set(u)}}}const Yi=(r,t,e,i,o)=>{"function"==typeof r.copyToChannel?0!==t[e].byteLength&&r.copyToChannel(t[e],i,o):0!==t[e].byteLength&&r.getChannelData(i).set(t[e],o)},Vr=(r,t)=>{const e=[];for(let i=0;i<r;i+=1){const o=[],c="number"==typeof t?t:t[i];for(let u=0;u<c;u+=1)o.push(new Float32Array(128));e.push(o)}return e},vh=function(){var r=Ft(function*(t,e,i,o,c,u,d){const h=null===e?128*Math.ceil(t.context.length/128):e.length,f=o.channelCount*o.numberOfInputs,m=c.reduce((C,q)=>C+q,0),_=0===m?null:i.createBuffer(m,h,i.sampleRate);if(void 0===u)throw new Error("Missing the processor constructor.");const y=we(t),b=yield((r,t)=>{const e=sn(Pn,r),i=ne(t);return sn(e,i)})(i,t),w=Vr(o.numberOfInputs,o.channelCount),S=Vr(o.numberOfOutputs,c),F=Array.from(t.parameters.keys()).reduce((C,q)=>({...C,[q]:new Float32Array(128)}),{});for(let C=0;C<h;C+=128){if(o.numberOfInputs>0&&null!==e)for(let q=0;q<o.numberOfInputs;q+=1)for(let L=0;L<o.channelCount;L+=1)Lr(e,w[q],L,L,C);void 0!==u.parameterDescriptors&&null!==e&&u.parameterDescriptors.forEach(({name:q},L)=>{Lr(e,F,q,f+L,C)});for(let q=0;q<o.numberOfInputs;q+=1)for(let L=0;L<c[q];L+=1)0===S[q][L].byteLength&&(S[q][L]=new Float32Array(128));try{const q=w.map((z,D)=>0===y.activeInputs[D].size?[]:z),L=d(C/i.sampleRate,i.sampleRate,()=>b.process(q,S,F));if(null!==_)for(let z=0,D=0;z<o.numberOfOutputs;z+=1){for(let I=0;I<c[z];I+=1)Yi(_,S[z],I,D+I,C);D+=c[z]}if(!L)break}catch(q){t.dispatchEvent(new ErrorEvent("processorerror",{colno:q.colno,filename:q.filename,lineno:q.lineno,message:q.message}));break}}return _});return function(e,i,o,c,u,d,h){return r.apply(this,arguments)}}(),pu={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Th={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},_u={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Sh={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Ah={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},la=r=>{const{port1:t,port2:e}=new MessageChannel;return new Promise(i=>{const o=()=>{e.onmessage=null,t.close(),e.close(),i()};e.onmessage=()=>o();try{t.postMessage(r,[r])}catch{}finally{o()}})},Su={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Xi=(r,t,e)=>{const i=t[e];if(void 0===i)throw r();return i},Eh={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Lh={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},ye=()=>new DOMException("","InvalidStateError"),$i=()=>new DOMException("","InvalidAccessError"),Du={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},on=(r,t,e,i,o,c,u,d,h,f,m)=>{const _=f.length;let y=d;for(let b=0;b<_;b+=1){let w=e[0]*f[b];for(let S=1;S<o;S+=1){const F=y-S&h-1;w+=e[S]*c[F],w-=r[S]*u[F]}for(let S=o;S<i;S+=1)w+=e[S]*c[y-S&h-1];for(let S=o;S<t;S+=1)w-=r[S]*u[y-S&h-1];c[y]=f[b],u[y]=w,y=y+1&h-1,m[b]=w}return y},re={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},Gs=r=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const e=r.decodeAudioData(t.buffer,()=>{});return void 0!==e&&(e.catch(()=>{}),!0)}catch{}return!1},zt=(r,t,e)=>{const i=t[e];void 0!==i&&i!==r[e]&&(r[e]=i)},Te=(r,t)=>{zt(r,t,"channelCount"),zt(r,t,"channelCountMode"),zt(r,t,"channelInterpretation")},ga=r=>"function"==typeof r.getFloatTimeDomainData,ue=(r,t,e)=>{const i=t[e];void 0!==i&&i!==r[e].value&&(r[e].value=i)},Ji=r=>{var t;r.start=(t=r.start,(e=0,i=0,o)=>{if("number"==typeof o&&o<0||i<0||e<0)throw new RangeError("The parameters can't be negative.");t.call(r,e,i,o)})},tr=r=>{var t;r.stop=(t=r.stop,(e=0)=>{if(e<0)throw new RangeError("The parameter can't be negative.");t.call(r,e)})},xa=(r,t)=>null===r?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(r*t))))),Jh=function(){var r=Ft(function*(t,e){const i=yield(r=>new Promise((t,e)=>{const{port1:i,port2:o}=new MessageChannel;i.onmessage=({data:c})=>{i.close(),o.close(),t(c)},i.onmessageerror=({data:c})=>{i.close(),o.close(),e(c)},o.postMessage(r)}))(e);return new t(i)});return function(e,i){return r.apply(this,arguments)}}(),Bu=(r,t)=>{const e=r.createBiquadFilter();return Te(e,t),ue(e,t,"Q"),ue(e,t,"detune"),ue(e,t,"frequency"),ue(e,t,"gain"),zt(e,t,"type"),e},nr=(r,t)=>{const e=r.createChannelSplitter(t.numberOfOutputs);return Te(e,t),(r=>{const t=r.numberOfOutputs;Object.defineProperty(r,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw ye()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:e=>{if("explicit"!==e)throw ye()}}),Object.defineProperty(r,"channelInterpretation",{get:()=>"discrete",set:e=>{if("discrete"!==e)throw ye()}})})(e),e},Us=(r,t)=>(r.connect=t.connect.bind(t),r.disconnect=t.disconnect.bind(t),r),Gu=(r,t)=>{const e=r.createDelay(t.maxDelayTime);return Te(e,t),ue(e,t,"delayTime"),e},$e=(r,t)=>{const e=r.createGain();return Te(e,t),ue(e,t,"gain"),e};function Gn(r,t){const e=t[0]*t[0]+t[1]*t[1];return[(r[0]*t[0]+r[1]*t[1])/e,(r[1]*t[0]-r[0]*t[1])/e]}function Uu(r,t){return[r[0]*t[0]-r[1]*t[1],r[0]*t[1]+r[1]*t[0]]}function zu(r,t){let e=[0,0];for(let i=r.length-1;i>=0;i-=1)e=Uu(e,t),e[0]+=r[i];return e}const Rt=(r,t,e,i)=>r.createScriptProcessor(t,e,i),$t=()=>new DOMException("","NotSupportedError"),jr={numberOfChannels:1},wi={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},jt={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Hr={disableNormalization:!1},Qu={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},ir=()=>new DOMException("","UnknownError"),pd={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},$u=(r,t,e)=>void 0===r.copyFromChannel?r.getChannelData(e)[0]:(r.copyFromChannel(t,e),t[0]),Ku=r=>{if(null===r)return!1;const t=r.length;return t%2!=0?0!==r[Math.floor(t/2)]:r[t/2-1]+r[t/2]!==0},le=(r,t,e,i)=>{let o=r;for(;!o.hasOwnProperty(t);)o=Object.getPrototypeOf(o);const{get:c,set:u}=Object.getOwnPropertyDescriptor(o,t);Object.defineProperty(r,t,{get:e(c),set:i(u)})},Sa=(r,t,e)=>{try{r.setValueAtTime(t,e)}catch(i){if(9!==i.code)throw i;Sa(r,t,e+1e-7)}},or=r=>{const t=r.createOscillator();try{t.start(-1)}catch(e){return e instanceof RangeError}return!1},js=r=>{const t=r.createBuffer(1,1,44100),e=r.createBufferSource();e.buffer=t,e.start(),e.stop();try{return e.stop(),!0}catch{return!1}},Zs=r=>{const t=r.createOscillator();try{t.stop(-1)}catch(e){return e instanceof RangeError}return!1},Qs=(r,t)=>{const e=t.createGain();r.connect(e);const i=(o=r.disconnect,()=>{o.call(r,e),r.removeEventListener("ended",i)});var o;r.addEventListener("ended",i),Us(r,e),r.stop=(o=>{let c=!1;return(u=0)=>{if(c)try{o.call(r,u)}catch{e.gain.setValueAtTime(0,u)}else o.call(r,u),c=!0}})(r.stop)},Ti=(r,t)=>e=>{const i={value:r};return Object.defineProperties(e,{currentTarget:i,target:i}),"function"==typeof t?t.call(r,e):t.handleEvent.call(r,e)},wd=(r=Vs,(t,e,[i,o,c],u)=>{r(t[o],[e,i,c],d=>d[0]===e&&d[1]===i,u)}),Td=(r=>(t,e,[i,o,c],u)=>{const d=t.get(i);void 0===d?t.set(i,new Set([[o,e,c]])):r(d,[o,e,c],h=>h[0]===o&&h[1]===e,u)})(Vs),bd=(r=>(t,e,i,o)=>r(t[o],c=>c[0]===e&&c[1]===i))(fi),Ju=new WeakMap,no=(r=>t=>{var e;return null!==(e=r.get(t))&&void 0!==e?e:0})(Ju),Le=((r,t)=>(e,i)=>{const o=t.get(e);if(void 0!==o)return o;const c=r.get(e);if(void 0!==c)return c;try{const u=i();return u instanceof Promise?(r.set(e,u),u.catch(()=>!1).then(d=>(r.delete(e),t.set(e,d),d))):(t.set(e,u),u)}catch{return t.set(e,!1),!1}})(new Map,new WeakMap),bn=typeof window>"u"?null:window,g=((r,t)=>(e,i)=>{const o=e.createAnalyser();if(Te(o,i),!(i.maxDecibels>i.minDecibels))throw t();return zt(o,i,"fftSize"),zt(o,i,"maxDecibels"),zt(o,i,"minDecibels"),zt(o,i,"smoothingTimeConstant"),r(ga,()=>ga(o))||(r=>{r.getFloatTimeDomainData=t=>{const e=new Uint8Array(t.length);r.getByteTimeDomainData(e);const i=Math.max(e.length,r.fftSize);for(let o=0;o<i;o+=1)t[o]=.0078125*(e[o]-128);return t}})(o),o})(Le,Ee),bs=(r=>t=>{const e=r(t);if(null===e.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return e.renderer})(we),xe=((r,t,e)=>function(){var i=Ft(function*(o,c,u){const d=r(o);yield Promise.all(d.activeInputs.map((h,f)=>Array.from(h).map(function(){var m=Ft(function*([_,y]){const w=yield t(_).render(_,c),S=o.context.destination;!e(_)&&(o!==S||!e(o))&&w.connect(u,y,f)});return function(_){return m.apply(this,arguments)}}())).reduce((h,f)=>[...h,...f],[]))});return function(o,c,u){return i.apply(this,arguments)}}())(we,bs,Bs),Sn=((r,t,e)=>()=>{const i=new WeakMap,o=function(){var c=Ft(function*(u,d){let h=t(u);return Kt(h,d)||(h=r(d,{channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,fftSize:h.fftSize,maxDecibels:h.maxDecibels,minDecibels:h.minDecibels,smoothingTimeConstant:h.smoothingTimeConstant})),i.set(d,h),yield e(u,d,h),h});return function(d,h){return c.apply(this,arguments)}}();return{render(c,u){const d=i.get(u);return void 0!==d?Promise.resolve(d):o(c,u)}}})(g,ne,xe),it=(r=>t=>{const e=r.get(t);if(void 0===e)throw ye();return e})(Ne),Me=(r=>null===r?null:r.hasOwnProperty("OfflineAudioContext")?r.OfflineAudioContext:r.hasOwnProperty("webkitOfflineAudioContext")?r.webkitOfflineAudioContext:null)(bn),Qt=(r=>t=>null!==r&&t instanceof r)(Me),tl=new WeakMap,Ss=(r=>class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(e,i,o){if(null!==i){let c=this._listeners.get(i);void 0===c&&(c=r(this,i),"function"==typeof i&&this._listeners.set(i,c)),this._nativeEventTarget.addEventListener(e,c,o)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,i,o){const c=null===i?void 0:this._listeners.get(i);this._nativeEventTarget.removeEventListener(e,void 0===c?null:c,o)}})(Ti),us=(r=>null===r?null:r.hasOwnProperty("AudioContext")?r.AudioContext:r.hasOwnProperty("webkitAudioContext")?r.webkitAudioContext:null)(bn),Ca=(r=>t=>null!==r&&t instanceof r)(us),ka=(r=>t=>null!==r&&"function"==typeof r.AudioNode&&t instanceof r.AudioNode)(bn),el=(r=>t=>null!==r&&"function"==typeof r.AudioParam&&t instanceof r.AudioParam)(bn),bi=(r=>null===r?null:r.hasOwnProperty("AudioWorkletNode")?r.AudioWorkletNode:null)(bn),Zt=((r,t,e,i,o,c,u,d,h,f,m,_,y,b,w,S)=>class extends f{constructor(C,q,L,z){super(L),this._context=C,this._nativeAudioNode=L;const D=m(C);_(D)&&!0!==e(uu,()=>uu(D,S))&&(r=>{const t=new Map;var e;r.connect=(e=r.connect.bind(r),(i,o=0,c=0)=>{const u=qr(i)?e(i,o,c):e(i,o),d=t.get(i);return void 0===d?t.set(i,[{input:c,output:o}]):d.every(h=>h.input!==c||h.output!==o)&&d.push({input:c,output:o}),u}),r.disconnect=(e=>(i,o,c)=>{if(e.apply(r),void 0===i)t.clear();else if("number"==typeof i)for(const[u,d]of t){const h=d.filter(f=>f.output!==i);0===h.length?t.delete(u):t.set(u,h)}else if(t.has(i))if(void 0===o)t.delete(i);else{const u=t.get(i);if(void 0!==u){const d=u.filter(h=>h.output!==o&&(h.input!==c||void 0===c));0===d.length?t.delete(i):t.set(i,d)}}for(const[u,d]of t)d.forEach(h=>{qr(u)?r.connect(u,h.output,h.input):r.connect(u,h.output)})})(r.disconnect)})(L),yn.set(this,L),xn.set(this,new Set),"closed"!==C.state&&q&&X(this),r(this,z,L)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(C){this._nativeAudioNode.channelCount=C}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(C){this._nativeAudioNode.channelCountMode=C}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(C){this._nativeAudioNode.channelInterpretation=C}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(C,q=0,L=0){if(q<0||q>=this._nativeAudioNode.numberOfOutputs)throw o();const z=m(this._context),D=w(z);if(y(C)||b(C))throw c();if(gi(C)){const E=ne(C);try{const U=ji(this._nativeAudioNode,E,q,L),Q=_i(this);(D||Q)&&this._nativeAudioNode.disconnect(...U),"closed"!==this.context.state&&!Q&&_i(C)&&X(C)}catch(U){throw 12===U.code?c():U}if(t(this,C,q,L,D)){const U=h([this],C);Hi(U,i(D))}return C}const I=Qi(C);if("playbackRate"===I.name&&1024===I.maxValue)throw u();try{this._nativeAudioNode.connect(I,q),(D||_i(this))&&this._nativeAudioNode.disconnect(I,q)}catch(E){throw 12===E.code?c():E}if(((r,t,e,i)=>{const{activeInputs:o,passiveInputs:c}=$n(t),{outputs:u}=we(r),d=qt(r),h=f=>{const m=ne(r),_=Qi(t);if(f){const y=cu(c,r,e);iu(o,r,y,!1),!i&&!Bs(r)&&m.connect(_,e)}else{const y=((r,t,e)=>fi(r,i=>i[0]===t&&i[1]===e))(o,r,e);ru(c,y,!1),!i&&!Bs(r)&&m.disconnect(_,e)}};return!!Vs(u,[t,e],f=>f[0]===t&&f[1]===e,!0)&&(d.add(h),ie(r)?iu(o,r,[e,h],!0):ru(c,[r,e,h],!0),!0)})(this,C,q,D)){const E=h([this],C);Hi(E,i(D))}}disconnect(C,q,L){let z;const D=m(this._context),I=w(D);if(void 0===C)z=((r,t)=>{const e=we(r),i=[];for(const o of e.outputs)Ls(o)?ia(r,t,...o):ra(r,t,...o),i.push(o[0]);return e.outputs.clear(),i})(this,I);else if("number"==typeof C){if(C<0||C>=this.numberOfOutputs)throw o();z=((r,t,e)=>{const i=we(r),o=[];for(const c of i.outputs)c[1]===e&&(Ls(c)?ia(r,t,...c):ra(r,t,...c),o.push(c[0]),i.outputs.delete(c));return o})(this,I,C)}else{if(void 0!==q&&(q<0||q>=this.numberOfOutputs)||gi(C)&&void 0!==L&&(L<0||L>=C.numberOfInputs))throw o();if(z=((r,t,e,i,o)=>{const c=we(r);return Array.from(c.outputs).filter(u=>!(u[0]!==e||void 0!==i&&u[1]!==i||void 0!==o&&u[2]!==o)).map(u=>(Ls(u)?ia(r,t,...u):ra(r,t,...u),c.outputs.delete(u),u[0]))})(this,I,C,q,L),0===z.length)throw c()}for(const M of z){const E=h([this],M);Hi(E,d)}}})((r=>(t,e,i)=>{const o=[];for(let c=0;c<i.numberOfInputs;c+=1)o.push(new Set);r.set(t,{activeInputs:o,outputs:new Set,passiveInputs:new WeakMap,renderer:e})})(vn),((r,t,e,i,o,c,u,d,h,f,m,_,y)=>{const b=new WeakMap;return(w,S,F,C,q)=>{const{activeInputs:L,passiveInputs:z}=c(S),{outputs:D}=c(w),I=d(w),M=E=>{const j=h(S),U=h(w);if(E){const Q=Vi(z,w,F,C);r(L,w,Q,!1),!q&&!_(w)&&e(U,j,F,C),y(S)&&X(S)}else{const Q=i(L,w,F,C);t(z,C,Q,!1),!q&&!_(w)&&o(U,j,F,C);const W=u(S);if(0===W)m(S)&&yt(S,L);else{const et=b.get(S);void 0!==et&&clearTimeout(et),b.set(S,setTimeout(()=>{m(S)&&yt(S,L)},1e3*W))}}};return!!f(D,[S,F,C],E=>E[0]===S&&E[1]===F&&E[2]===C,!0)&&(I.add(M),m(w)?r(L,w,[F,C,M],!0):t(z,C,[w,F,M],!0),!0)}})(wd,Td,ji,bd,Zi,we,no,qt,ne,Vs,ie,Bs,_i),Le,((r,t,e,i,o,c)=>u=>(d,h)=>{const f=r.get(d);if(void 0===f){if(!u&&c(d)){const m=i(d),{outputs:_}=e(d);for(const y of _)if(Ls(y)){const b=i(y[0]);t(m,b,y[1],y[2])}else{const b=o(y[0]);m.disconnect(b,y[1])}}r.set(d,h)}else r.set(d,f+h)})(_s,Zi,we,ne,Qi,ie),Ee,$i,$t,((r,t,e,i,o,c,u,d)=>(h,f)=>{const m=t.get(h);if(void 0===m)throw new Error("Missing the expected cycle count.");const _=c(h.context),y=d(_);if(m===f){if(t.delete(h),!y&&u(h)){const b=i(h),{outputs:w}=e(h);for(const S of w)if(Ls(S)){const F=i(S[0]);r(b,F,S[1],S[2])}else{const F=o(S[0]);b.connect(F,S[1])}}}else t.set(h,m-f)})(ji,_s,we,ne,Qi,it,ie,Qt),((r,t,e)=>function i(o,c){const u=gi(c)?c:e(r,c);if((r=>"delayTime"in r)(u))return[];if(o[0]===u)return[o];if(o.includes(u))return[];const{outputs:d}=t(u);return Array.from(d).map(h=>i([...o,u],h[0])).reduce((h,f)=>h.concat(f),[])})(tl,we,sn),Ss,it,Ca,ka,el,Qt,bi),Sd=((r,t,e,i,o,c)=>class extends r{constructor(d,h){const f=o(d),m={...Ps,...h},_=i(f,m);super(d,!1,_,c(f)?t():null),this._nativeAnalyserNode=_}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(d){this._nativeAnalyserNode.fftSize=d}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(d){const h=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=d,!(d>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=h,e()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(d){const h=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=d,!(this._nativeAnalyserNode.maxDecibels>d))throw this._nativeAnalyserNode.minDecibels=h,e()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(d){this._nativeAnalyserNode.smoothingTimeConstant=d}getByteFrequencyData(d){this._nativeAnalyserNode.getByteFrequencyData(d)}getByteTimeDomainData(d){this._nativeAnalyserNode.getByteTimeDomainData(d)}getFloatFrequencyData(d){this._nativeAnalyserNode.getFloatFrequencyData(d)}getFloatTimeDomainData(d){this._nativeAnalyserNode.getFloatTimeDomainData(d)}})(Zt,Sn,Ee,g,it,Qt),Oa=new WeakSet,nl=(r=>null===r?null:r.hasOwnProperty("AudioBuffer")?r.AudioBuffer:null)(bn),sl=(r=>t=>(r[0]=t,r[0]))(new Uint32Array(1)),Da=((r,t)=>e=>{e.copyFromChannel=(i,o,c=0)=>{const u=r(c),d=r(o);if(d>=e.numberOfChannels)throw t();const h=e.length,f=e.getChannelData(d),m=i.length;for(let _=u<0?-u:0;_+u<h&&_<m;_+=1)i[_]=f[_+u]},e.copyToChannel=(i,o,c=0)=>{const u=r(c),d=r(o);if(d>=e.numberOfChannels)throw t();const h=e.length,f=e.getChannelData(d),m=i.length;for(let _=u<0?-u:0;_+u<h&&_<m;_+=1)f[_+u]=i[_]}})(sl,Ee),Un=(r=>t=>{var e;t.copyFromChannel=(e=t.copyFromChannel,(i,o,c=0)=>{const u=r(c),d=r(o);if(u<t.length)return e.call(t,i,d,u)}),t.copyToChannel=(e=>(i,o,c=0)=>{const u=r(c),d=r(o);if(u<t.length)return e.call(t,i,d,u)})(t.copyToChannel)})(sl),Ad=((r,t,e,i,o,c,u,d)=>{let h=null;return class ap{constructor(m){if(null===o)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:_,numberOfChannels:y,sampleRate:b}={...Wi,...m};null===h&&(h=new o(1,1,44100));const w=null!==i&&t(c,c)?new i({length:_,numberOfChannels:y,sampleRate:b}):h.createBuffer(y,_,b);if(0===w.numberOfChannels)throw e();return"function"!=typeof w.copyFromChannel?(u(w),rn(w)):t(cs,()=>cs(w))||d(w),r.add(w),w}static[Symbol.hasInstance](m){return null!==m&&"object"==typeof m&&Object.getPrototypeOf(m)===ap.prototype||r.has(m)}}})(Oa,Le,$t,nl,Me,(r=>()=>{if(null===r)return!1;try{new r({length:1,sampleRate:44100})}catch{return!1}return!0})(nl),Da,Un),so=(r=>(t,e)=>{const i=r(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(i).connect(t.destination);const o=()=>{e.removeEventListener("ended",o),e.disconnect(i),i.disconnect()};e.addEventListener("ended",o)})($e),il=((r,t,e)=>function(){var i=Ft(function*(o,c,u){const d=t(o);yield Promise.all(Array.from(d.activeInputs).map(function(){var h=Ft(function*([f,m]){const y=yield r(f).render(f,c);e(f)||y.connect(u,m)});return function(f){return h.apply(this,arguments)}}()))});return function(o,c,u){return i.apply(this,arguments)}}())(bs,$n,Bs),Kn=(r=>(t,e,i)=>r(e,t,i))(il),Si=((r,t,e,i,o,c,u,d,h,f,m)=>(_,y)=>{const b=_.createBufferSource();return Te(b,y),ue(b,y,"playbackRate"),zt(b,y,"buffer"),zt(b,y,"loop"),zt(b,y,"loopEnd"),zt(b,y,"loopStart"),t(e,()=>e(_))||(r=>{r.start=(t=>{let e=!1;return(i=0,o=0,c)=>{if(e)throw ye();t.call(r,i,o,c),e=!0}})(r.start)})(b),t(i,()=>i(_))||(r=>{var t;r.start=(t=r.start,(e=0,i=0,o)=>{const c=r.buffer,u=null===c?i:Math.min(c.duration,i);null!==c&&u>c.duration-.5/r.context.sampleRate?t.call(r,e,0,0):t.call(r,e,u,o)})})(b),t(o,()=>o(_))||f(b,_),t(c,()=>c(_))||Ji(b),t(u,()=>u(_))||m(b,_),t(d,()=>d(_))||tr(b),r(_,b),b})(so,Le,r=>{const t=r.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},r=>{const t=r.createBufferSource(),e=r.createBuffer(1,1,44100);t.buffer=e;try{t.start(0,1)}catch{return!1}return!0},r=>{const t=r.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},or,js,Zs,0,(r=>(t,e)=>{const i=e.createBuffer(1,1,44100);null===t.buffer&&(t.buffer=i),r(t,"buffer",o=>()=>{const c=o.call(t);return c===i?null:c},o=>c=>o.call(t,null===c?i:c))})(le),Qs),Ge=((r,t)=>(e,i,o)=>(r(i).replay(o),t(i,e,o)))((r=>t=>{const e=r(t);if(null===e.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return e.renderer})($n),il),Cd=((r,t,e,i,o)=>()=>{const c=new WeakMap;let u=null,d=null;const h=function(){var f=Ft(function*(m,_){let y=e(m);const b=Kt(y,_);return b||(y=t(_,{buffer:y.buffer,channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,loop:y.loop,loopEnd:y.loopEnd,loopStart:y.loopStart,playbackRate:y.playbackRate.value}),null!==u&&y.start(...u),null!==d&&y.stop(d)),c.set(_,y),b?yield r(_,m.playbackRate,y.playbackRate):yield i(_,m.playbackRate,y.playbackRate),yield o(m,_,y),y});return function(_,y){return f.apply(this,arguments)}}();return{set start(f){u=f},set stop(f){d=f},render(f,m){const _=c.get(m);return void 0!==_?Promise.resolve(_):h(f,m)}}})(Kn,Si,ne,Ge,xe),zn=((r,t,e,i,o,c,u,d,h,f,m,_,y)=>(b,w,S,F=null,C=null)=>{const q=S.value,L=new kt.AutomationEventList(q),z=w?(r=>({replay(t){for(const e of r)if("exponentialRampToValue"===e.type){const{endTime:i,value:o}=e;t.exponentialRampToValueAtTime(o,i)}else if("linearRampToValue"===e.type){const{endTime:i,value:o}=e;t.linearRampToValueAtTime(o,i)}else if("setTarget"===e.type){const{startTime:i,target:o,timeConstant:c}=e;t.setTargetAtTime(o,i,c)}else if("setValue"===e.type){const{startTime:i,value:o}=e;t.setValueAtTime(o,i)}else{if("setValueCurve"!==e.type)throw new Error("Can't apply an unknown automation.");{const{duration:i,startTime:o,values:c}=e;t.setValueCurveAtTime(c,o,i)}}}}))(L):null,D={get defaultValue(){return q},get maxValue(){return null===F?S.maxValue:F},get minValue(){return null===C?S.minValue:C},get value(){return S.value},set value(I){S.value=I,D.setValueAtTime(I,b.context.currentTime)},cancelAndHoldAtTime(I){if("function"==typeof S.cancelAndHoldAtTime)null===z&&L.flush(b.context.currentTime),L.add(o(I)),S.cancelAndHoldAtTime(I);else{const M=Array.from(L).pop();null===z&&L.flush(b.context.currentTime),L.add(o(I));const E=Array.from(L).pop();S.cancelScheduledValues(I),M!==E&&void 0!==E&&("exponentialRampToValue"===E.type?S.exponentialRampToValueAtTime(E.value,E.endTime):"linearRampToValue"===E.type?S.linearRampToValueAtTime(E.value,E.endTime):"setValue"===E.type?S.setValueAtTime(E.value,E.startTime):"setValueCurve"===E.type&&S.setValueCurveAtTime(E.values,E.startTime,E.duration))}return D},cancelScheduledValues:I=>(null===z&&L.flush(b.context.currentTime),L.add(c(I)),S.cancelScheduledValues(I),D),exponentialRampToValueAtTime(I,M){if(0===I)throw new RangeError;if(!Number.isFinite(M)||M<0)throw new RangeError;const E=b.context.currentTime;return null===z&&L.flush(E),0===Array.from(L).length&&(L.add(f(q,E)),S.setValueAtTime(q,E)),L.add(u(I,M)),S.exponentialRampToValueAtTime(I,M),D},linearRampToValueAtTime(I,M){const E=b.context.currentTime;return null===z&&L.flush(E),0===Array.from(L).length&&(L.add(f(q,E)),S.setValueAtTime(q,E)),L.add(d(I,M)),S.linearRampToValueAtTime(I,M),D},setTargetAtTime:(I,M,E)=>(null===z&&L.flush(b.context.currentTime),L.add(h(I,M,E)),S.setTargetAtTime(I,M,E),D),setValueAtTime:(I,M)=>(null===z&&L.flush(b.context.currentTime),L.add(f(I,M)),S.setValueAtTime(I,M),D),setValueCurveAtTime(I,M,E){const j=I instanceof Float32Array?I:new Float32Array(I);if(null!==_&&"webkitAudioContext"===_.name){const U=M+E,Q=b.context.sampleRate,W=Math.ceil(M*Q),et=Math.floor(U*Q),rt=et-W,nt=new Float32Array(rt);for(let at=0;at<rt;at+=1){const _t=(j.length-1)/E*((W+at)/Q-M),lt=Math.floor(_t),bt=Math.ceil(_t);nt[at]=lt===bt?j[lt]:(1-(_t-lt))*j[lt]+(1-(bt-_t))*j[bt]}null===z&&L.flush(b.context.currentTime),L.add(m(nt,M,E)),S.setValueCurveAtTime(nt,M,E);const st=et/Q;st<U&&y(D,nt[nt.length-1],st),y(D,j[j.length-1],U)}else null===z&&L.flush(b.context.currentTime),L.add(m(j,M,E)),S.setValueCurveAtTime(j,M,E);return D}};return e.set(D,S),t.set(D,b),r(D,z),D})((r=>(t,e)=>{r.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})})(Ie),tl,Xn,0,kt.createCancelAndHoldAutomationEvent,kt.createCancelScheduledValuesAutomationEvent,kt.createExponentialRampToValueAutomationEvent,kt.createLinearRampToValueAutomationEvent,kt.createSetTargetAutomationEvent,kt.createSetValueAutomationEvent,kt.createSetValueCurveAutomationEvent,us,Sa),jn=((r,t,e,i,o,c,u,d)=>class extends r{constructor(f,m){const _=c(f),y={...su,...m},b=o(_,y),w=u(_),S=w?t():null;super(f,!1,b,S),this._audioBufferSourceNodeRenderer=S,this._isBufferNullified=!1,this._isBufferSet=null!==y.buffer,this._nativeAudioBufferSourceNode=b,this._onended=null,this._playbackRate=e(this,w,b.playbackRate,Fe,ce)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(f){if(this._nativeAudioBufferSourceNode.buffer=f,null!==f){if(this._isBufferSet)throw i();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(f){this._nativeAudioBufferSourceNode.loop=f}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(f){this._nativeAudioBufferSourceNode.loopEnd=f}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(f){this._nativeAudioBufferSourceNode.loopStart=f}get onended(){return this._onended}set onended(f){const m="function"==typeof f?d(this,f):null;this._nativeAudioBufferSourceNode.onended=m;const _=this._nativeAudioBufferSourceNode.onended;this._onended=null!==_&&_===m?f:_}get playbackRate(){return this._playbackRate}start(f=0,m=0,_){if(this._nativeAudioBufferSourceNode.start(f,m,_),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===_?[f,m]:[f,m,_]),"closed"!==this.context.state){X(this);const y=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",y),ie(this)&&Z(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",y)}}stop(f=0){this._nativeAudioBufferSourceNode.stop(f),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=f)}})(Zt,Cd,zn,ye,Si,it,Qt,Ti),kd=((r,t,e,i,o,c,u,d)=>class extends r{constructor(f,m){const _=c(f),y=u(_),b=o(_,m,y);super(f,!1,b,y?t(d):null),this._isNodeOfNativeOfflineAudioContext=y,this._nativeAudioDestinationNode=b}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(f){if(this._isNodeOfNativeOfflineAudioContext)throw i();if(f>this._nativeAudioDestinationNode.maxChannelCount)throw e();this._nativeAudioDestinationNode.channelCount=f}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(f){if(this._isNodeOfNativeOfflineAudioContext)throw i();this._nativeAudioDestinationNode.channelCountMode=f}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(Zt,r=>{const t=new WeakMap,e=function(){var i=Ft(function*(o,c){const u=c.destination;return t.set(c,u),yield r(o,c,u),u});return function(c,u){return i.apply(this,arguments)}}();return{render(i,o){const c=t.get(o);return void 0!==c?Promise.resolve(c):e(i,o)}}},Ee,ye,((r,t)=>(e,i,o)=>{const c=e.destination;if(c.channelCount!==i)try{c.channelCount=i}catch{}o&&"explicit"!==c.channelCountMode&&(c.channelCountMode="explicit"),0===c.maxChannelCount&&Object.defineProperty(c,"maxChannelCount",{value:i});const u=r(e,{channelCount:i,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:1});return t(u,"channelCount",d=>()=>d.call(u),d=>h=>{d.call(u,h);try{c.channelCount=h}catch(f){if(h>c.maxChannelCount)throw f}}),t(u,"channelCountMode",d=>()=>d.call(u),d=>h=>{d.call(u,h),c.channelCountMode=h}),t(u,"channelInterpretation",d=>()=>d.call(u),d=>h=>{d.call(u,h),c.channelInterpretation=h}),Object.defineProperty(u,"maxChannelCount",{get:()=>c.maxChannelCount}),u.connect(c),u})($e,le),it,Qt,xe),Od=((r,t,e,i,o)=>()=>{const c=new WeakMap,u=function(){var d=Ft(function*(h,f){let m=e(h);const _=Kt(m,f);return _||(m=t(f,{Q:m.Q.value,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,detune:m.detune.value,frequency:m.frequency.value,gain:m.gain.value,type:m.type})),c.set(f,m),_?(yield r(f,h.Q,m.Q),yield r(f,h.detune,m.detune),yield r(f,h.frequency,m.frequency),yield r(f,h.gain,m.gain)):(yield i(f,h.Q,m.Q),yield i(f,h.detune,m.detune),yield i(f,h.frequency,m.frequency),yield i(f,h.gain,m.gain)),yield o(h,f,m),m});return function(f,m){return d.apply(this,arguments)}}();return{render(d,h){const f=c.get(h);return void 0!==f?Promise.resolve(f):u(d,h)}}})(Kn,Bu,ne,Ge,xe),Hs=(r=>(t,e)=>r.set(t,e))(Ju),Dd=((r,t,e,i,o,c,u,d)=>class extends r{constructor(f,m){const _=c(f),y={...pu,...m},b=o(_,y),w=u(_);super(f,!1,b,w?e():null),this._Q=t(this,w,b.Q,Fe,ce),this._detune=t(this,w,b.detune,1200*Math.log2(Fe),-1200*Math.log2(Fe)),this._frequency=t(this,w,b.frequency,f.sampleRate/2,0),this._gain=t(this,w,b.gain,40*Math.log10(Fe),ce),this._nativeBiquadFilterNode=b,d(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(f){this._nativeBiquadFilterNode.type=f}getFrequencyResponse(f,m,_){try{this._nativeBiquadFilterNode.getFrequencyResponse(f,m,_)}catch(y){throw 11===y.code?i():y}if(f.length!==m.length||m.length!==_.length)throw i()}})(Zt,zn,Od,$i,Bu,it,Qt,Hs),As=((r,t)=>(e,i,o)=>{const c=new Set;return e.connect=(u=e.connect,(d,h=0,f=0)=>{const m=0===c.size;if(t(d))return u.call(e,d,h,f),r(c,[d,h,f],_=>_[0]===d&&_[1]===h&&_[2]===f,!0),m&&i(),d;u.call(e,d,h),r(c,[d,h],_=>_[0]===d&&_[1]===h,!0),m&&i()}),e.disconnect=(u=>(d,h,f)=>{const m=c.size>0;if(void 0===d)u.apply(e),c.clear();else if("number"==typeof d){u.call(e,d);for(const y of c)y[1]===d&&c.delete(y)}else{t(d)?u.call(e,d,h,f):u.call(e,d,h);for(const y of c)y[0]===d&&(void 0===h||y[1]===h)&&(void 0===f||y[2]===f)&&c.delete(y)}m&&0===c.size&&o()})(e.disconnect),e;var u})(Vs,ka),rl=((r,t)=>(e,i)=>{i.channelCount=1,i.channelCountMode="explicit",Object.defineProperty(i,"channelCount",{get:()=>1,set:()=>{throw r()}}),Object.defineProperty(i,"channelCountMode",{get:()=>"explicit",set:()=>{throw r()}});const o=e.createBufferSource();t(i,()=>{const d=i.numberOfInputs;for(let h=0;h<d;h+=1)o.connect(i,0,h)},()=>o.disconnect(i))})(ye,As),ls=((r,t)=>(e,i)=>{const o=e.createChannelMerger(i.numberOfInputs);return null!==r&&"webkitAudioContext"===r.name&&t(e,o),Te(o,i),o})(us,rl),Nd=((r,t,e)=>()=>{const i=new WeakMap,o=function(){var c=Ft(function*(u,d){let h=t(u);return Kt(h,d)||(h=r(d,{channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,numberOfInputs:h.numberOfInputs})),i.set(d,h),yield e(u,d,h),h});return function(d,h){return c.apply(this,arguments)}}();return{render(c,u){const d=i.get(u);return void 0!==d?Promise.resolve(d):o(c,u)}}})(ls,ne,xe),Ed=((r,t,e,i,o)=>class extends r{constructor(u,d){const h=i(u),f={...Th,...d};super(u,!1,e(h,f),o(h)?t():null)}})(Zt,Nd,ls,it,Qt),Na=((r,t,e)=>()=>{const i=new WeakMap,o=function(){var c=Ft(function*(u,d){let h=t(u);return Kt(h,d)||(h=r(d,{channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,numberOfOutputs:h.numberOfOutputs})),i.set(d,h),yield e(u,d,h),h});return function(d,h){return c.apply(this,arguments)}}();return{render(c,u){const d=i.get(u);return void 0!==d?Promise.resolve(d):o(c,u)}}})(nr,ne,xe),cr=((r,t,e,i,o,c)=>class extends r{constructor(d,h){const f=i(d),m=(r=>({...r,channelCount:r.numberOfOutputs}))({..._u,...h});super(d,!1,e(f,m),o(f)?t():null)}})(Zt,Na,nr,it,Qt),io=((r,t,e,i)=>(o,{offset:c,...u})=>{const d=o.createBuffer(1,2,44100),h=t(o,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),f=e(o,{...u,gain:c}),m=d.getChannelData(0);m[0]=1,m[1]=1,h.buffer=d,h.loop=!0;const _={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(w){f.channelCount=w},get channelCountMode(){return f.channelCountMode},set channelCountMode(w){f.channelCountMode=w},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(w){f.channelInterpretation=w},get context(){return f.context},get inputs(){return[]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get offset(){return f.gain},get onended(){return h.onended},set onended(w){h.onended=w},addEventListener:(...w)=>h.addEventListener(w[0],w[1],w[2]),dispatchEvent:(...w)=>h.dispatchEvent(w[0]),removeEventListener:(...w)=>h.removeEventListener(w[0],w[1],w[2]),start(w=0){h.start.call(h,w)},stop(w=0){h.stop.call(h,w)}};return r(o,h),i(Us(_,f),()=>h.connect(f),()=>h.disconnect(f))})(so,Si,$e,As),Ai=((r,t,e,i,o)=>(c,u)=>{if(void 0===c.createConstantSource)return e(c,u);const d=c.createConstantSource();return Te(d,u),ue(d,u,"offset"),t(i,()=>i(c))||Ji(d),t(o,()=>o(c))||tr(d),r(c,d),d})(so,Le,io,or,Zs),ol=((r,t,e,i,o)=>()=>{const c=new WeakMap;let u=null,d=null;const h=function(){var f=Ft(function*(m,_){let y=e(m);const b=Kt(y,_);return b||(y=t(_,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,offset:y.offset.value}),null!==u&&y.start(u),null!==d&&y.stop(d)),c.set(_,y),b?yield r(_,m.offset,y.offset):yield i(_,m.offset,y.offset),yield o(m,_,y),y});return function(_,y){return f.apply(this,arguments)}}();return{set start(f){u=f},set stop(f){d=f},render(f,m){const _=c.get(m);return void 0!==_?Promise.resolve(_):h(f,m)}}})(Kn,Ai,ne,Ge,xe),Fd=((r,t,e,i,o,c,u)=>class extends r{constructor(h,f){const m=o(h),_={...Sh,...f},y=i(m,_),b=c(m),w=b?e():null;super(h,!1,y,w),this._constantSourceNodeRenderer=w,this._nativeConstantSourceNode=y,this._offset=t(this,b,y.offset,Fe,ce),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(h){const f="function"==typeof h?u(this,h):null;this._nativeConstantSourceNode.onended=f;const m=this._nativeConstantSourceNode.onended;this._onended=null!==m&&m===f?h:m}start(h=0){if(this._nativeConstantSourceNode.start(h),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=h),"closed"!==this.context.state){X(this);const f=()=>{this._nativeConstantSourceNode.removeEventListener("ended",f),ie(this)&&Z(this)};this._nativeConstantSourceNode.addEventListener("ended",f)}}stop(h=0){this._nativeConstantSourceNode.stop(h),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=h)}})(Zt,zn,ol,Ai,it,Qt,Ti),Jn=((r,t)=>(e,i)=>{const o=e.createConvolver();if(Te(o,i),i.disableNormalization===o.normalize&&(o.normalize=!i.disableNormalization),zt(o,i,"buffer"),i.channelCount>2||(t(o,"channelCount",c=>()=>c.call(o),c=>u=>{if(u>2)throw r();return c.call(o,u)}),"max"===i.channelCountMode))throw r();return t(o,"channelCountMode",c=>()=>c.call(o),c=>u=>{if("max"===u)throw r();return c.call(o,u)}),o})($t,le),Ea=((r,t,e)=>()=>{const i=new WeakMap,o=function(){var c=Ft(function*(u,d){let h=t(u);return Kt(h,d)||(h=r(d,{buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,disableNormalization:!h.normalize})),i.set(d,h),Ws(h)?yield e(u,d,h.inputs[0]):yield e(u,d,h),h});return function(d,h){return c.apply(this,arguments)}}();return{render(c,u){const d=i.get(u);return void 0!==d?Promise.resolve(d):o(c,u)}}})(Jn,ne,xe),Ys=((r,t,e,i,o,c)=>class extends r{constructor(d,h){const f=i(d),m={...Ah,...h},_=e(f,m);super(d,!1,_,o(f)?t():null),this._isBufferNullified=!1,this._nativeConvolverNode=_,null!==m.buffer&&c(this,m.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(d){if(this._nativeConvolverNode.buffer=d,null===d&&null!==this._nativeConvolverNode.buffer){const h=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=h.createBuffer(1,1,h.sampleRate),this._isBufferNullified=!0,c(this,0)}else this._isBufferNullified=!1,c(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(d){this._nativeConvolverNode.normalize=d}})(Zt,Ea,Jn,it,Qt,Hs),An=((r,t,e,i,o)=>c=>{const u=new WeakMap,d=function(){var h=Ft(function*(f,m){let _=e(f);const y=Kt(_,m);return y||(_=t(m,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,delayTime:_.delayTime.value,maxDelayTime:c})),u.set(m,_),y?yield r(m,f.delayTime,_.delayTime):yield i(m,f.delayTime,_.delayTime),yield o(f,m,_),_});return function(m,_){return h.apply(this,arguments)}}();return{render(h,f){const m=u.get(f);return void 0!==m?Promise.resolve(m):d(h,f)}}})(Kn,Gu,ne,Ge,xe),Md=((r,t,e,i,o,c,u)=>class extends r{constructor(h,f){const m=o(h),_={...Su,...f},y=i(m,_),b=c(m);super(h,!1,y,b?e(_.maxDelayTime):null),this._delayTime=t(this,b,y.delayTime),u(this,_.maxDelayTime)}get delayTime(){return this._delayTime}})(Zt,zn,An,Gu,it,Qt,Hs),Fa=(r=>(t,e)=>{const i=t.createDynamicsCompressor();if(Te(i,e),e.channelCount>2||"max"===e.channelCountMode)throw r();return ue(i,e,"attack"),ue(i,e,"knee"),ue(i,e,"ratio"),ue(i,e,"release"),ue(i,e,"threshold"),i})($t),al=((r,t,e,i,o)=>()=>{const c=new WeakMap,u=function(){var d=Ft(function*(h,f){let m=e(h);const _=Kt(m,f);return _||(m=t(f,{attack:m.attack.value,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,knee:m.knee.value,ratio:m.ratio.value,release:m.release.value,threshold:m.threshold.value})),c.set(f,m),_?(yield r(f,h.attack,m.attack),yield r(f,h.knee,m.knee),yield r(f,h.ratio,m.ratio),yield r(f,h.release,m.release),yield r(f,h.threshold,m.threshold)):(yield i(f,h.attack,m.attack),yield i(f,h.knee,m.knee),yield i(f,h.ratio,m.ratio),yield i(f,h.release,m.release),yield i(f,h.threshold,m.threshold)),yield o(h,f,m),m});return function(f,m){return d.apply(this,arguments)}}();return{render(d,h){const f=c.get(h);return void 0!==f?Promise.resolve(f):u(d,h)}}})(Kn,Fa,ne,Ge,xe),ur=((r,t,e,i,o,c,u,d)=>class extends r{constructor(f,m){const _=c(f),y={...Eh,...m},b=i(_,y),w=u(_);super(f,!1,b,w?e():null),this._attack=t(this,w,b.attack),this._knee=t(this,w,b.knee),this._nativeDynamicsCompressorNode=b,this._ratio=t(this,w,b.ratio),this._release=t(this,w,b.release),this._threshold=t(this,w,b.threshold),d(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(f){const m=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=f,f>2)throw this._nativeDynamicsCompressorNode.channelCount=m,o()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(f){const m=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=f,"max"===f)throw this._nativeDynamicsCompressorNode.channelCountMode=m,o()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(Zt,zn,al,Fa,$t,it,Qt,Hs),Cs=((r,t,e,i,o)=>()=>{const c=new WeakMap,u=function(){var d=Ft(function*(h,f){let m=e(h);const _=Kt(m,f);return _||(m=t(f,{channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:m.gain.value})),c.set(f,m),_?yield r(f,h.gain,m.gain):yield i(f,h.gain,m.gain),yield o(h,f,m),m});return function(f,m){return d.apply(this,arguments)}}();return{render(d,h){const f=c.get(h);return void 0!==f?Promise.resolve(f):u(d,h)}}})(Kn,$e,ne,Ge,xe),cl=((r,t,e,i,o,c)=>class extends r{constructor(d,h){const f=o(d),m={...Lh,...h},_=i(f,m),y=c(f);super(d,!1,_,y?e():null),this._gain=t(this,y,_.gain,Fe,ce)}get gain(){return this._gain}})(Zt,zn,Cs,$e,it,Qt),Rd=((r,t,e,i)=>(o,c,{channelCount:u,channelCountMode:d,channelInterpretation:h,feedback:f,feedforward:m})=>{const _=xa(c,o.sampleRate),y=f instanceof Float64Array?f:new Float64Array(f),b=m instanceof Float64Array?m:new Float64Array(m),w=y.length,S=b.length,F=Math.min(w,S);if(0===w||w>20)throw i();if(0===y[0])throw t();if(0===S||S>20)throw i();if(0===b[0])throw t();if(1!==y[0]){for(let E=0;E<S;E+=1)b[E]/=y[0];for(let E=1;E<w;E+=1)y[E]/=y[0]}const C=e(o,_,u,u);C.channelCount=u,C.channelCountMode=d,C.channelInterpretation=h;const L=[],z=[],D=[];for(let E=0;E<u;E+=1){L.push(0);const j=new Float32Array(32),U=new Float32Array(32);j.fill(0),U.fill(0),z.push(j),D.push(U)}C.onaudioprocess=E=>{const j=E.inputBuffer,U=E.outputBuffer,Q=j.numberOfChannels;for(let W=0;W<Q;W+=1){const et=j.getChannelData(W),rt=U.getChannelData(W);L[W]=on(y,w,b,S,F,z[W],D[W],L[W],32,et,rt)}};const I=o.sampleRate/2;return Us({get bufferSize(){return _},get channelCount(){return C.channelCount},set channelCount(E){C.channelCount=E},get channelCountMode(){return C.channelCountMode},set channelCountMode(E){C.channelCountMode=E},get channelInterpretation(){return C.channelInterpretation},set channelInterpretation(E){C.channelInterpretation=E},get context(){return C.context},get inputs(){return[C]},get numberOfInputs(){return C.numberOfInputs},get numberOfOutputs(){return C.numberOfOutputs},addEventListener:(...E)=>C.addEventListener(E[0],E[1],E[2]),dispatchEvent:(...E)=>C.dispatchEvent(E[0]),getFrequencyResponse(E,j,U){if(E.length!==j.length||j.length!==U.length)throw r();const Q=E.length;for(let W=0;W<Q;W+=1){const et=-Math.PI*(E[W]/I),rt=[Math.cos(et),Math.sin(et)],at=Gn(zu(b,rt),zu(y,rt));j[W]=Math.sqrt(at[0]*at[0]+at[1]*at[1]),U[W]=Math.atan2(at[1],at[0])}},removeEventListener:(...E)=>C.removeEventListener(E[0],E[1],E[2])},C)})($i,ye,Rt,$t),Xs=((r,t,e,i)=>o=>r(Gs,()=>Gs(o))?Promise.resolve(r(i,i)).then(c=>{if(!c){const u=e(o,512,0,1);o.oncomplete=()=>{u.onaudioprocess=null,u.disconnect()},u.onaudioprocess=()=>o.currentTime,u.connect(o.destination)}return o.startRendering()}):new Promise(c=>{const u=t(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});o.oncomplete=d=>{u.disconnect(),c(d.renderedBuffer)},u.connect(o.destination),o.startRendering()}))(Le,$e,Rt,((r,t)=>()=>{if(null===t)return Promise.resolve(!1);const e=new t(1,1,44100),i=r(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(o=>{e.oncomplete=()=>{i.disconnect(),o(0!==e.currentTime)},e.startRendering()})})($e,Me)),Id=((r,t,e,i,o)=>(c,u)=>{const d=new WeakMap;let h=null;const f=function(){var m=Ft(function*(_,y){let b=null,w=t(_);const S=Kt(w,y);if(void 0===y.createIIRFilter?b=r(y,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):S||(w=y.createIIRFilter(u,c)),d.set(y,null===b?w:b),null!==b){if(null===h){if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");const C=new e(_.context.destination.channelCount,_.context.length,y.sampleRate);h=Ft(function*(){return yield i(_,C,C.destination),((r,t,e,i)=>{const o=e instanceof Float64Array?e:new Float64Array(e),c=i instanceof Float64Array?i:new Float64Array(i),u=o.length,d=c.length,h=Math.min(u,d);if(1!==o[0]){for(let w=0;w<u;w+=1)c[w]/=o[0];for(let w=1;w<d;w+=1)o[w]/=o[0]}const m=new Float32Array(32),_=new Float32Array(32),y=t.createBuffer(r.numberOfChannels,r.length,r.sampleRate),b=r.numberOfChannels;for(let w=0;w<b;w+=1){const S=r.getChannelData(w),F=y.getChannelData(w);m.fill(0),_.fill(0),on(o,u,c,d,h,m,_,0,32,S,F)}return y})(yield o(C),y,c,u)})()}const F=yield h;return b.buffer=F,b.start(0),b}return yield i(_,y,w),w});return function(y,b){return m.apply(this,arguments)}}();return{render(m,_){const y=d.get(_);return void 0!==y?Promise.resolve(y):f(m,_)}}})(Si,ne,Me,xe,Xs),ul=(r=>(t,e,i)=>{if(void 0===t.createIIRFilter)return r(t,e,i);const o=t.createIIRFilter(i.feedforward,i.feedback);return Te(o,i),o})(Rd),Ve=((r,t,e,i,o,c)=>class extends r{constructor(d,h){const f=i(d),m=o(f),_={...Du,...h},y=t(f,m?null:d.baseLatency,_);super(d,!1,y,m?e(_.feedback,_.feedforward):null),(r=>{var t;r.getFrequencyResponse=(t=r.getFrequencyResponse,(e,i,o)=>{if(e.length!==i.length||i.length!==o.length)throw $i();return t.call(r,e,i,o)})})(y),this._nativeIIRFilterNode=y,c(this,1)}getFrequencyResponse(d,h,f){return this._nativeIIRFilterNode.getFrequencyResponse(d,h,f)}})(Zt,ul,Id,it,Qt,Hs),Ma=((r,t,e,i,o,c,u,d)=>(h,f)=>{const m=f.listener,{forwardX:y,forwardY:b,forwardZ:w,positionX:S,positionY:F,positionZ:C,upX:q,upY:L,upZ:z}=void 0===m.forwardX?(()=>{const D=new Float32Array(1),I=t(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),M=u(f);let E=!1,j=[0,0,-1,0,1,0],U=[0,0,0];const Q=()=>{if(E)return;E=!0;const nt=i(f,256,9,0);nt.onaudioprocess=({inputBuffer:st})=>{const at=[c(st,D,0),c(st,D,1),c(st,D,2),c(st,D,3),c(st,D,4),c(st,D,5)];at.some((lt,bt)=>lt!==j[bt])&&(m.setOrientation(...at),j=at);const _t=[c(st,D,6),c(st,D,7),c(st,D,8)];_t.some((lt,bt)=>lt!==U[bt])&&(m.setPosition(..._t),U=_t)},I.connect(nt)},W=nt=>st=>{st!==j[nt]&&(j[nt]=st,m.setOrientation(...j))},et=nt=>st=>{st!==U[nt]&&(U[nt]=st,m.setPosition(...U))},rt=(nt,st,at)=>{const _t=e(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:st});_t.connect(I,0,nt),_t.start(),Object.defineProperty(_t.offset,"defaultValue",{get:()=>st});const lt=r({context:h},M,_t.offset,Fe,ce);return d(lt,"value",bt=>()=>bt.call(lt),bt=>At=>{try{bt.call(lt,At)}catch(ee){if(9!==ee.code)throw ee}Q(),M&&at(At)}),lt.cancelAndHoldAtTime=(bt=lt.cancelAndHoldAtTime,M?()=>{throw o()}:(...At)=>{const ee=bt.apply(lt,At);return Q(),ee}),lt.cancelScheduledValues=(bt=>M?()=>{throw o()}:(...At)=>{const ee=bt.apply(lt,At);return Q(),ee})(lt.cancelScheduledValues),lt.exponentialRampToValueAtTime=(bt=>M?()=>{throw o()}:(...At)=>{const ee=bt.apply(lt,At);return Q(),ee})(lt.exponentialRampToValueAtTime),lt.linearRampToValueAtTime=(bt=>M?()=>{throw o()}:(...At)=>{const ee=bt.apply(lt,At);return Q(),ee})(lt.linearRampToValueAtTime),lt.setTargetAtTime=(bt=>M?()=>{throw o()}:(...At)=>{const ee=bt.apply(lt,At);return Q(),ee})(lt.setTargetAtTime),lt.setValueAtTime=(bt=>M?()=>{throw o()}:(...At)=>{const ee=bt.apply(lt,At);return Q(),ee})(lt.setValueAtTime),lt.setValueCurveAtTime=(bt=>M?()=>{throw o()}:(...At)=>{const ee=bt.apply(lt,At);return Q(),ee})(lt.setValueCurveAtTime),lt;var bt};return{forwardX:rt(0,0,W(0)),forwardY:rt(1,0,W(1)),forwardZ:rt(2,-1,W(2)),positionX:rt(6,0,et(0)),positionY:rt(7,0,et(1)),positionZ:rt(8,0,et(2)),upX:rt(3,0,W(3)),upY:rt(4,1,W(4)),upZ:rt(5,0,W(5))}})():m;return{get forwardX(){return y},get forwardY(){return b},get forwardZ(){return w},get positionX(){return S},get positionY(){return F},get positionZ(){return C},get upX(){return q},get upY(){return L},get upZ(){return z}}})(zn,ls,Ai,Rt,$t,$u,Qt,le),Ra=new WeakMap,Cn=((r,t,e,i,o,c)=>class extends e{constructor(d,h){super(d),this._nativeContext=d,Ne.set(this,d),i(d)&&o.set(d,new Set),this._destination=new r(this,h),this._listener=t(this,d),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(d){const h="function"==typeof d?c(this,d):null;this._nativeContext.onstatechange=h;const f=this._nativeContext.onstatechange;this._onstatechange=null!==f&&f===h?d:f}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(kd,Ma,Ss,Qt,Ra,Ti),ro=((r,t,e,i,o,c)=>(u,d)=>{const h=u.createOscillator();return Te(h,d),ue(h,d,"detune"),ue(h,d,"frequency"),void 0!==d.periodicWave?h.setPeriodicWave(d.periodicWave):zt(h,d,"type"),t(e,()=>e(u))||Ji(h),t(i,()=>i(u))||c(h,u),t(o,()=>o(u))||tr(h),r(u,h),h})(so,Le,or,js,Zs,Qs),oo=((r,t,e,i,o)=>()=>{const c=new WeakMap;let u=null,d=null,h=null;const f=function(){var m=Ft(function*(_,y){let b=e(_);const w=Kt(b,y);return w||(b=t(y,{channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,detune:b.detune.value,frequency:b.frequency.value,periodicWave:null===u?void 0:u,type:b.type}),null!==d&&b.start(d),null!==h&&b.stop(h)),c.set(y,b),w?(yield r(y,_.detune,b.detune),yield r(y,_.frequency,b.frequency)):(yield i(y,_.detune,b.detune),yield i(y,_.frequency,b.frequency)),yield o(_,y,b),b});return function(y,b){return m.apply(this,arguments)}}();return{set periodicWave(m){u=m},set start(m){d=m},set stop(m){h=m},render(m,_){const y=c.get(_);return void 0!==y?Promise.resolve(y):f(m,_)}}})(Kn,ro,ne,Ge,xe),$s=((r,t,e,i,o,c,u)=>class extends r{constructor(h,f){const m=o(h),_={...wi,...f},y=e(m,_),b=c(m),w=b?i():null,S=h.sampleRate/2;super(h,!1,y,w),this._detune=t(this,b,y.detune,153600,-153600),this._frequency=t(this,b,y.frequency,S,-S),this._nativeOscillatorNode=y,this._onended=null,this._oscillatorNodeRenderer=w,null!==this._oscillatorNodeRenderer&&void 0!==_.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=_.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(h){const f="function"==typeof h?u(this,h):null;this._nativeOscillatorNode.onended=f;const m=this._nativeOscillatorNode.onended;this._onended=null!==m&&m===f?h:m}get type(){return this._nativeOscillatorNode.type}set type(h){this._nativeOscillatorNode.type=h,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(h){this._nativeOscillatorNode.setPeriodicWave(h),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=h)}start(h=0){if(this._nativeOscillatorNode.start(h),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=h),"closed"!==this.context.state){X(this);const f=()=>{this._nativeOscillatorNode.removeEventListener("ended",f),ie(this)&&Z(this)};this._nativeOscillatorNode.addEventListener("ended",f)}}stop(h=0){this._nativeOscillatorNode.stop(h),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=h)}})(Zt,zn,ro,oo,it,Qt,Ti),Ia=(r=>(t,e)=>{const i=r(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),o=t.createBuffer(1,2,44100);return i.buffer=o,i.loop=!0,i.connect(e),i.start(),()=>{i.stop(),i.disconnect(e)}})(Si),Qe=((r,t,e,i,o)=>(c,{curve:u,oversample:d,...h})=>{const f=c.createWaveShaper(),m=c.createWaveShaper();Te(f,h),Te(m,h);const _=e(c,{...h,gain:1}),y=e(c,{...h,gain:-1}),b=e(c,{...h,gain:1}),w=e(c,{...h,gain:-1});let S=null,F=!1,C=null;const q={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(D){_.channelCount=D,y.channelCount=D,f.channelCount=D,b.channelCount=D,m.channelCount=D,w.channelCount=D},get channelCountMode(){return f.channelCountMode},set channelCountMode(D){_.channelCountMode=D,y.channelCountMode=D,f.channelCountMode=D,b.channelCountMode=D,m.channelCountMode=D,w.channelCountMode=D},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(D){_.channelInterpretation=D,y.channelInterpretation=D,f.channelInterpretation=D,b.channelInterpretation=D,m.channelInterpretation=D,w.channelInterpretation=D},get context(){return f.context},get curve(){return C},set curve(D){if(null!==D&&D.length<2)throw t();if(null===D)f.curve=D,m.curve=D;else{const I=D.length,M=new Float32Array(I+2-I%2),E=new Float32Array(I+2-I%2);M[0]=D[0],E[0]=-D[I-1];const j=Math.ceil((I+1)/2),U=(I+1)/2-1;for(let Q=1;Q<j;Q+=1){const W=Q/j*U,et=Math.floor(W),rt=Math.ceil(W);M[Q]=et===rt?D[et]:(1-(W-et))*D[et]+(1-(rt-W))*D[rt],E[Q]=et===rt?-D[I-1-et]:-(1-(W-et))*D[I-1-et]-(1-(rt-W))*D[I-1-rt]}M[j]=I%2==1?D[j-1]:(D[j-2]+D[j-1])/2,f.curve=M,m.curve=E}C=D,F&&(i(C)&&null===S?S=r(c,_):null!==S&&(S(),S=null))},get inputs(){return[_]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get oversample(){return f.oversample},set oversample(D){f.oversample=D,m.oversample=D},addEventListener:(...D)=>_.addEventListener(D[0],D[1],D[2]),dispatchEvent:(...D)=>_.dispatchEvent(D[0]),removeEventListener:(...D)=>_.removeEventListener(D[0],D[1],D[2])};return null!==u&&(q.curve=u instanceof Float32Array?u:new Float32Array(u)),d!==q.oversample&&(q.oversample=d),o(Us(q,b),()=>{_.connect(f).connect(b),_.connect(y).connect(m).connect(w).connect(b),F=!0,i(C)&&(S=r(c,_))},()=>{_.disconnect(f),f.disconnect(b),_.disconnect(y),y.disconnect(m),m.disconnect(w),w.disconnect(b),F=!1,null!==S&&(S(),S=null)})})(Ia,ye,$e,Ku,As),Ci=((r,t,e,i,o,c,u)=>(d,h)=>{const f=d.createWaveShaper();if(null!==c&&"webkitAudioContext"===c.name&&void 0===d.createGain().gain.automationRate)return e(d,h);Te(f,h);const m=null===h.curve||h.curve instanceof Float32Array?h.curve:new Float32Array(h.curve);if(null!==m&&m.length<2)throw t();zt(f,{curve:m},"curve"),zt(f,h,"oversample");let _=null,y=!1;return u(f,"curve",S=>()=>S.call(f),S=>F=>(S.call(f,F),y&&(i(F)&&null===_?_=r(d,f):!i(F)&&null!==_&&(_(),_=null)),F)),o(f,()=>{y=!0,i(f.curve)&&(_=r(d,f))},()=>{y=!1,null!==_&&(_(),_=null)})})(Ia,ye,Qe,Ku,As,us,le),qd=((r,t,e,i,o,c,u,d,h,f)=>(m,{coneInnerAngle:_,coneOuterAngle:y,coneOuterGain:b,distanceModel:w,maxDistance:S,orientationX:F,orientationY:C,orientationZ:q,panningModel:L,positionX:z,positionY:D,positionZ:I,refDistance:M,rolloffFactor:E,...j})=>{const U=m.createPanner();if(j.channelCount>2||"max"===j.channelCountMode)throw u();Te(U,j);const Q={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},W=e(m,{...Q,channelInterpretation:"speakers",numberOfInputs:6}),et=i(m,{...j,gain:1}),rt=i(m,{...Q,gain:1}),nt=i(m,{...Q,gain:0}),st=i(m,{...Q,gain:0}),at=i(m,{...Q,gain:0}),_t=i(m,{...Q,gain:0}),lt=i(m,{...Q,gain:0}),bt=o(m,256,6,1),At=c(m,{...Q,curve:new Float32Array([1,1]),oversample:"none"});let ee=[F,C,q],Ae=[z,D,I];const Ye=new Float32Array(1);bt.onaudioprocess=({inputBuffer:$})=>{const Ce=[h($,Ye,0),h($,Ye,1),h($,Ye,2)];Ce.some((ui,li)=>ui!==ee[li])&&(U.setOrientation(...Ce),ee=Ce);const os=[h($,Ye,3),h($,Ye,4),h($,Ye,5)];os.some((ui,li)=>ui!==Ae[li])&&(U.setPosition(...os),Ae=os)},Object.defineProperty(nt.gain,"defaultValue",{get:()=>0}),Object.defineProperty(st.gain,"defaultValue",{get:()=>0}),Object.defineProperty(at.gain,"defaultValue",{get:()=>0}),Object.defineProperty(_t.gain,"defaultValue",{get:()=>0}),Object.defineProperty(lt.gain,"defaultValue",{get:()=>0});const Ct={get bufferSize(){},get channelCount(){return U.channelCount},set channelCount($){if($>2)throw u();et.channelCount=$,U.channelCount=$},get channelCountMode(){return U.channelCountMode},set channelCountMode($){if("max"===$)throw u();et.channelCountMode=$,U.channelCountMode=$},get channelInterpretation(){return U.channelInterpretation},set channelInterpretation($){et.channelInterpretation=$,U.channelInterpretation=$},get coneInnerAngle(){return U.coneInnerAngle},set coneInnerAngle($){U.coneInnerAngle=$},get coneOuterAngle(){return U.coneOuterAngle},set coneOuterAngle($){U.coneOuterAngle=$},get coneOuterGain(){return U.coneOuterGain},set coneOuterGain($){if($<0||$>1)throw t();U.coneOuterGain=$},get context(){return U.context},get distanceModel(){return U.distanceModel},set distanceModel($){U.distanceModel=$},get inputs(){return[et]},get maxDistance(){return U.maxDistance},set maxDistance($){if($<0)throw new RangeError;U.maxDistance=$},get numberOfInputs(){return U.numberOfInputs},get numberOfOutputs(){return U.numberOfOutputs},get orientationX(){return rt.gain},get orientationY(){return nt.gain},get orientationZ(){return st.gain},get panningModel(){return U.panningModel},set panningModel($){U.panningModel=$},get positionX(){return at.gain},get positionY(){return _t.gain},get positionZ(){return lt.gain},get refDistance(){return U.refDistance},set refDistance($){if($<0)throw new RangeError;U.refDistance=$},get rolloffFactor(){return U.rolloffFactor},set rolloffFactor($){if($<0)throw new RangeError;U.rolloffFactor=$},addEventListener:(...$)=>et.addEventListener($[0],$[1],$[2]),dispatchEvent:(...$)=>et.dispatchEvent($[0]),removeEventListener:(...$)=>et.removeEventListener($[0],$[1],$[2])};return _!==Ct.coneInnerAngle&&(Ct.coneInnerAngle=_),y!==Ct.coneOuterAngle&&(Ct.coneOuterAngle=y),b!==Ct.coneOuterGain&&(Ct.coneOuterGain=b),w!==Ct.distanceModel&&(Ct.distanceModel=w),S!==Ct.maxDistance&&(Ct.maxDistance=S),F!==Ct.orientationX.value&&(Ct.orientationX.value=F),C!==Ct.orientationY.value&&(Ct.orientationY.value=C),q!==Ct.orientationZ.value&&(Ct.orientationZ.value=q),L!==Ct.panningModel&&(Ct.panningModel=L),z!==Ct.positionX.value&&(Ct.positionX.value=z),D!==Ct.positionY.value&&(Ct.positionY.value=D),I!==Ct.positionZ.value&&(Ct.positionZ.value=I),M!==Ct.refDistance&&(Ct.refDistance=M),E!==Ct.rolloffFactor&&(Ct.rolloffFactor=E),(1!==ee[0]||0!==ee[1]||0!==ee[2])&&U.setOrientation(...ee),(0!==Ae[0]||0!==Ae[1]||0!==Ae[2])&&U.setPosition(...Ae),f(Us(Ct,U),()=>{et.connect(U),r(et,At,0,0),At.connect(rt).connect(W,0,0),At.connect(nt).connect(W,0,1),At.connect(st).connect(W,0,2),At.connect(at).connect(W,0,3),At.connect(_t).connect(W,0,4),At.connect(lt).connect(W,0,5),W.connect(bt).connect(m.destination)},()=>{et.disconnect(U),d(et,At,0,0),At.disconnect(rt),rt.disconnect(W),At.disconnect(nt),nt.disconnect(W),At.disconnect(st),st.disconnect(W),At.disconnect(at),at.disconnect(W),At.disconnect(_t),_t.disconnect(W),At.disconnect(lt),lt.disconnect(W),W.disconnect(bt),bt.disconnect(m.destination)})})(ji,ye,ls,$e,Rt,Ci,$t,Zi,$u,As),ll=(r=>(t,e)=>{const i=t.createPanner();return void 0===i.orientationX?r(t,e):(Te(i,e),ue(i,e,"orientationX"),ue(i,e,"orientationY"),ue(i,e,"orientationZ"),ue(i,e,"positionX"),ue(i,e,"positionY"),ue(i,e,"positionZ"),zt(i,e,"coneInnerAngle"),zt(i,e,"coneOuterAngle"),zt(i,e,"coneOuterGain"),zt(i,e,"distanceModel"),zt(i,e,"maxDistance"),zt(i,e,"panningModel"),zt(i,e,"refDistance"),zt(i,e,"rolloffFactor"),i)})(qd),Pd=((r,t,e,i,o,c,u,d,h,f)=>()=>{const m=new WeakMap;let _=null;const y=function(){var b=Ft(function*(w,S){let F=null,C=c(w);const q={channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation},L={...q,coneInnerAngle:C.coneInnerAngle,coneOuterAngle:C.coneOuterAngle,coneOuterGain:C.coneOuterGain,distanceModel:C.distanceModel,maxDistance:C.maxDistance,panningModel:C.panningModel,refDistance:C.refDistance,rolloffFactor:C.rolloffFactor},z=Kt(C,S);if("bufferSize"in C)F=i(S,{...q,gain:1});else if(!z){const D={...L,orientationX:C.orientationX.value,orientationY:C.orientationY.value,orientationZ:C.orientationZ.value,positionX:C.positionX.value,positionY:C.positionY.value,positionZ:C.positionZ.value};C=o(S,D)}if(m.set(S,null===F?C:F),null!==F){if(null===_){if(null===u)throw new Error("Missing the native OfflineAudioContext constructor.");const W=new u(6,w.context.length,S.sampleRate),et=t(W,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});et.connect(W.destination),_=Ft(function*(){const rt=yield Promise.all([w.orientationX,w.orientationY,w.orientationZ,w.positionX,w.positionY,w.positionZ].map(function(){var nt=Ft(function*(st,at){const _t=e(W,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===at?1:0});return yield d(W,st,_t.offset),_t});return function(st,at){return nt.apply(this,arguments)}}()));for(let nt=0;nt<6;nt+=1)rt[nt].connect(et,0,nt),rt[nt].start(0);return f(W)})()}const D=yield _,I=i(S,{...q,gain:1});yield h(w,S,I);const M=[];for(let W=0;W<D.numberOfChannels;W+=1)M.push(D.getChannelData(W));let E=[M[0][0],M[1][0],M[2][0]],j=[M[3][0],M[4][0],M[5][0]],U=i(S,{...q,gain:1}),Q=o(S,{...L,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:j[0],positionY:j[1],positionZ:j[2]});I.connect(U).connect(Q.inputs[0]),Q.connect(F);for(let W=128;W<D.length;W+=128){const et=[M[0][W],M[1][W],M[2][W]],rt=[M[3][W],M[4][W],M[5][W]];if(et.some((nt,st)=>nt!==E[st])||rt.some((nt,st)=>nt!==j[st])){E=et,j=rt;const nt=W/S.sampleRate;U.gain.setValueAtTime(0,nt),U=i(S,{...q,gain:0}),Q=o(S,{...L,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:j[0],positionY:j[1],positionZ:j[2]}),U.gain.setValueAtTime(1,nt),I.connect(U).connect(Q.inputs[0]),Q.connect(F)}}return F}return z?(yield r(S,w.orientationX,C.orientationX),yield r(S,w.orientationY,C.orientationY),yield r(S,w.orientationZ,C.orientationZ),yield r(S,w.positionX,C.positionX),yield r(S,w.positionY,C.positionY),yield r(S,w.positionZ,C.positionZ)):(yield d(S,w.orientationX,C.orientationX),yield d(S,w.orientationY,C.orientationY),yield d(S,w.orientationZ,C.orientationZ),yield d(S,w.positionX,C.positionX),yield d(S,w.positionY,C.positionY),yield d(S,w.positionZ,C.positionZ)),Ws(C)?yield h(w,S,C.inputs[0]):yield h(w,S,C),C});return function(S,F){return b.apply(this,arguments)}}();return{render(b,w){const S=m.get(w);return void 0!==S?Promise.resolve(S):y(b,w)}}})(Kn,ls,Ai,$e,ll,ne,Me,Ge,xe,Xs),qa=((r,t,e,i,o,c,u)=>class extends r{constructor(h,f){const m=o(h),_={...jt,...f},y=e(m,_),b=c(m);super(h,!1,y,b?i():null),this._nativePannerNode=y,this._orientationX=t(this,b,y.orientationX,Fe,ce),this._orientationY=t(this,b,y.orientationY,Fe,ce),this._orientationZ=t(this,b,y.orientationZ,Fe,ce),this._positionX=t(this,b,y.positionX,Fe,ce),this._positionY=t(this,b,y.positionY,Fe,ce),this._positionZ=t(this,b,y.positionZ,Fe,ce),u(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(h){this._nativePannerNode.coneInnerAngle=h}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(h){this._nativePannerNode.coneOuterAngle=h}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(h){this._nativePannerNode.coneOuterGain=h}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(h){this._nativePannerNode.distanceModel=h}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(h){this._nativePannerNode.maxDistance=h}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(h){this._nativePannerNode.panningModel=h}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(h){this._nativePannerNode.refDistance=h}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(h){this._nativePannerNode.rolloffFactor=h}})(Zt,zn,ll,Pd,it,Qt,Hs),Ld=(r=>(t,{disableNormalization:e,imag:i,real:o})=>{const c=i instanceof Float32Array?i:new Float32Array(i),u=o instanceof Float32Array?o:new Float32Array(o),d=t.createPeriodicWave(u,c,{disableNormalization:e});if(Array.from(i).length<2)throw r();return d})(Ee),lr=((r,t,e,i)=>class cp{constructor(c,u){const d=t(c),h=(r=>{const{imag:t,real:e}=r;return void 0===t?void 0===e?{...r,imag:[0,0],real:[0,0]}:{...r,imag:Array.from(e,()=>0),real:e}:void 0===e?{...r,imag:t,real:Array.from(t,()=>0)}:{...r,imag:t,real:e}})({...Hr,...u}),f=r(d,h);return e.add(f),f}static[Symbol.hasInstance](c){return null!==c&&"object"==typeof c&&Object.getPrototypeOf(c)===cp.prototype||e.has(c)}})(Ld,it,new WeakSet),hl=((r,t,e,i,o,c)=>{const d=new Float32Array([1,1]),h=Math.PI/2,f={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},m={...f,oversample:"none"},b=(w,S,F,C,q)=>{if(1===S)return((w,S,F,C)=>{const q=new Float32Array(16385),L=new Float32Array(16385);for(let j=0;j<16385;j+=1){const U=j/16384*h;q[j]=Math.cos(U),L[j]=Math.sin(U)}const z=e(w,{...f,gain:0}),D=i(w,{...m,curve:q}),I=i(w,{...m,curve:d}),M=e(w,{...f,gain:0}),E=i(w,{...m,curve:L});return{connectGraph(){S.connect(z),S.connect(void 0===I.inputs?I:I.inputs[0]),S.connect(M),I.connect(F),F.connect(void 0===D.inputs?D:D.inputs[0]),F.connect(void 0===E.inputs?E:E.inputs[0]),D.connect(z.gain),E.connect(M.gain),z.connect(C,0,0),M.connect(C,0,1)},disconnectGraph(){S.disconnect(z),S.disconnect(void 0===I.inputs?I:I.inputs[0]),S.disconnect(M),I.disconnect(F),F.disconnect(void 0===D.inputs?D:D.inputs[0]),F.disconnect(void 0===E.inputs?E:E.inputs[0]),D.disconnect(z.gain),E.disconnect(M.gain),z.disconnect(C,0,0),M.disconnect(C,0,1)}}})(w,F,C,q);if(2===S)return((w,S,F,C)=>{const q=new Float32Array(16385),L=new Float32Array(16385),z=new Float32Array(16385),D=new Float32Array(16385),I=Math.floor(8192.5);for(let at=0;at<16385;at+=1)if(at>I){const _t=(at-I)/(16384-I)*h;q[at]=Math.cos(_t),L[at]=Math.sin(_t),z[at]=0,D[at]=1}else{const _t=at/(16384-I)*h;q[at]=1,L[at]=0,z[at]=Math.cos(_t),D[at]=Math.sin(_t)}const M=t(w,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),E=e(w,{...f,gain:0}),j=i(w,{...m,curve:q}),U=e(w,{...f,gain:0}),Q=i(w,{...m,curve:L}),W=i(w,{...m,curve:d}),et=e(w,{...f,gain:0}),rt=i(w,{...m,curve:z}),nt=e(w,{...f,gain:0}),st=i(w,{...m,curve:D});return{connectGraph(){S.connect(M),S.connect(void 0===W.inputs?W:W.inputs[0]),M.connect(E,0),M.connect(U,0),M.connect(et,1),M.connect(nt,1),W.connect(F),F.connect(void 0===j.inputs?j:j.inputs[0]),F.connect(void 0===Q.inputs?Q:Q.inputs[0]),F.connect(void 0===rt.inputs?rt:rt.inputs[0]),F.connect(void 0===st.inputs?st:st.inputs[0]),j.connect(E.gain),Q.connect(U.gain),rt.connect(et.gain),st.connect(nt.gain),E.connect(C,0,0),et.connect(C,0,0),U.connect(C,0,1),nt.connect(C,0,1)},disconnectGraph(){S.disconnect(M),S.disconnect(void 0===W.inputs?W:W.inputs[0]),M.disconnect(E,0),M.disconnect(U,0),M.disconnect(et,1),M.disconnect(nt,1),W.disconnect(F),F.disconnect(void 0===j.inputs?j:j.inputs[0]),F.disconnect(void 0===Q.inputs?Q:Q.inputs[0]),F.disconnect(void 0===rt.inputs?rt:rt.inputs[0]),F.disconnect(void 0===st.inputs?st:st.inputs[0]),j.disconnect(E.gain),Q.disconnect(U.gain),rt.disconnect(et.gain),st.disconnect(nt.gain),E.disconnect(C,0,0),et.disconnect(C,0,0),U.disconnect(C,0,1),nt.disconnect(C,0,1)}}})(w,F,C,q);throw o()};return(w,{channelCount:S,channelCountMode:F,pan:C,...q})=>{if("max"===F)throw o();const L=r(w,{...q,channelCount:1,channelCountMode:F,numberOfInputs:2}),z=e(w,{...q,channelCount:S,channelCountMode:F,gain:1}),D=e(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:C});let{connectGraph:I,disconnectGraph:M}=b(w,S,z,D,L);Object.defineProperty(D.gain,"defaultValue",{get:()=>0}),Object.defineProperty(D.gain,"maxValue",{get:()=>1}),Object.defineProperty(D.gain,"minValue",{get:()=>-1});const E={get bufferSize(){},get channelCount(){return z.channelCount},set channelCount(W){z.channelCount!==W&&(j&&M(),({connectGraph:I,disconnectGraph:M}=b(w,W,z,D,L)),j&&I()),z.channelCount=W},get channelCountMode(){return z.channelCountMode},set channelCountMode(W){if("clamped-max"===W||"max"===W)throw o();z.channelCountMode=W},get channelInterpretation(){return z.channelInterpretation},set channelInterpretation(W){z.channelInterpretation=W},get context(){return z.context},get inputs(){return[z]},get numberOfInputs(){return z.numberOfInputs},get numberOfOutputs(){return z.numberOfOutputs},get pan(){return D.gain},addEventListener:(...W)=>z.addEventListener(W[0],W[1],W[2]),dispatchEvent:(...W)=>z.dispatchEvent(W[0]),removeEventListener:(...W)=>z.removeEventListener(W[0],W[1],W[2])};let j=!1;return c(Us(E,L),()=>{I(),j=!0},()=>{M(),j=!1})}})(ls,nr,$e,Ci,$t,As),dl=((r,t)=>(e,i)=>{const o=i.channelCountMode;if("clamped-max"===o)throw t();if(void 0===e.createStereoPanner)return r(e,i);const c=e.createStereoPanner();return Te(c,i),ue(c,i,"pan"),Object.defineProperty(c,"channelCountMode",{get:()=>o,set:u=>{if(u!==o)throw t()}}),c})(hl,$t),Vd=((r,t,e,i,o)=>()=>{const c=new WeakMap,u=function(){var d=Ft(function*(h,f){let m=e(h);const _=Kt(m,f);return _||(m=t(f,{channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,pan:m.pan.value})),c.set(f,m),_?yield r(f,h.pan,m.pan):yield i(f,h.pan,m.pan),Ws(m)?yield o(h,f,m.inputs[0]):yield o(h,f,m),m});return function(f,m){return d.apply(this,arguments)}}();return{render(d,h){const f=c.get(h);return void 0!==f?Promise.resolve(f):u(d,h)}}})(Kn,dl,ne,Ge,xe),hr=((r,t,e,i,o,c)=>class extends r{constructor(d,h){const f=o(d),m={...Qu,...h},_=e(f,m),y=c(f);super(d,!1,_,y?i():null),this._pan=t(this,y,_.pan)}get pan(){return this._pan}})(Zt,zn,dl,Vd,it,Qt),Wd=((r,t,e)=>()=>{const i=new WeakMap,o=function(){var c=Ft(function*(u,d){let h=t(u);return Kt(h,d)||(h=r(d,{channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,curve:h.curve,oversample:h.oversample})),i.set(d,h),Ws(h)?yield e(u,d,h.inputs[0]):yield e(u,d,h),h});return function(d,h){return c.apply(this,arguments)}}();return{render(c,u){const d=i.get(u);return void 0!==d?Promise.resolve(d):o(c,u)}}})(Ci,ne,xe),Bd=((r,t,e,i,o,c,u)=>class extends r{constructor(h,f){const m=o(h),_={...pd,...f},y=e(m,_);super(h,!0,y,c(m)?i():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=y,u(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(h){if(null===h)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(h.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=h}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(h){this._nativeWaveShaperNode.oversample=h}})(Zt,ye,Ci,Wd,it,Qt,Hs),ao=(r=>null!==r&&r.isSecureContext)(bn),co=(r=>(t,e,i)=>{Object.defineProperties(r,{currentFrame:{configurable:!0,get:()=>Math.round(t*e)},currentTime:{configurable:!0,get:()=>t}});try{return i()}finally{null!==r&&(delete r.currentFrame,delete r.currentTime)}})(bn),fl=new WeakMap,Gd=((r,t)=>e=>{let i=r.get(e);if(void 0!==i)return i;if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");return i=new t(1,1,44100),r.set(e,i),i})(fl,Me),Ud=ao?((r,t,e,i,o,c,u,d,h,f,m,_,y)=>{let b=0;return(w,S,F={credentials:"omit"})=>{const C=m.get(w);if(void 0!==C&&C.has(S))return Promise.resolve();const q=f.get(w);if(void 0!==q){const D=q.get(S);if(void 0!==D)return D}const L=c(w),z=void 0===L.audioWorklet?o(S).then(([D,I])=>{const[M,E]=Ln(D,I);return e(`${M};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${E}\n})})(window,'_AWGS')`)}).then(()=>{const D=y._AWGS.pop();if(void 0===D)throw new SyntaxError;i(L.currentTime,L.sampleRate,()=>D(class{},void 0,(I,M)=>{if(""===I.trim())throw t();const E=me.get(L);if(void 0!==E){if(E.has(I))throw t();Mr(M),di(M.parameterDescriptors),E.set(I,M)}else Mr(M),di(M.parameterDescriptors),me.set(L,new Map([[I,M]]))},L.sampleRate,void 0,void 0))}):Promise.all([o(S),Promise.resolve(r(_,_))]).then(([[D,I],M])=>{const E=b+1;b=E;const[j,U]=Ln(D,I),nt=new Blob([`${j};((AudioWorkletProcessor,registerProcessor)=>{${U}\n})(${M?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${M?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${M?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${E}',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),st=URL.createObjectURL(nt);return L.audioWorklet.addModule(st,F).then(()=>{if(d(L))return L;const at=u(L);return at.audioWorklet.addModule(st,F).then(()=>at)}).then(at=>{if(null===h)throw new SyntaxError;try{new h(at,`__sac${E}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(st))});return void 0===q?f.set(w,new Map([[S,z]])):q.set(S,z),z.then(()=>{const D=m.get(w);void 0===D?m.set(w,new Set([S])):D.add(S)}).finally(()=>{const D=f.get(w);void 0!==D&&D.delete(S)}),z}})(Le,$t,(r=>t=>new Promise((e,i)=>{if(null===r)return void i(new SyntaxError);const o=r.document.head;if(null===o)i(new SyntaxError);else{const c=r.document.createElement("script"),u=new Blob([t],{type:"application/javascript"}),d=URL.createObjectURL(u),h=r.onerror,f=()=>{r.onerror=h,URL.revokeObjectURL(d)};r.onerror=(m,_,y,b,w)=>_===d||_===r.location.href&&1===y&&1===b?(f(),i(w),!1):null!==h?h(m,_,y,b,w):void 0,c.onerror=()=>{f(),i(new SyntaxError)},c.onload=()=>{f(),e()},c.src=d,c.type="module",o.appendChild(c)}}))(bn),co,function(){var t=Ft(function*(e){try{const i=yield fetch(e);if(i.ok)return[yield i.text(),i.url]}catch{}throw new DOMException("","AbortError")});return function(e){return t.apply(this,arguments)}}(),it,Gd,Qt,bi,new WeakMap,new WeakMap,((r,t)=>Ft(function*(){if(null===r)return!0;if(null===t)return!1;const e=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),i=new t(1,128,44100),o=URL.createObjectURL(e);let c=!1,u=!1;try{yield i.audioWorklet.addModule(o);const d=new r(i,"a",{numberOfOutputs:0}),h=i.createOscillator();d.port.onmessage=()=>c=!0,d.onprocessorerror=()=>u=!0,h.connect(d),h.start(0),yield i.startRendering()}catch{}finally{URL.revokeObjectURL(o)}return c&&!u}))(bi,Me),bn):void 0,pl=((r,t)=>e=>r(e)||t(e))(Ca,Qt),Pa=((r,t,e,i,o,c,u,d,h,f,m)=>(_,y)=>{const b=u(_)?_:c(_);if(o.has(y)){const w=new DOMException("","DataCloneError");return Promise.reject(w)}try{o.add(y)}catch{}return t(h,()=>h(b))?b.decodeAudioData(y).then(w=>(la(y).catch(()=>{}),t(d,()=>d(w))||m(w),r.add(w),w)):new Promise((w,S)=>{const F=function(){var q=Ft(function*(){try{yield la(y)}catch{}});return function(){return q.apply(this,arguments)}}(),C=q=>{S(q),F()};try{b.decodeAudioData(y,q=>{"function"!=typeof q.copyFromChannel&&(f(q),rn(q)),r.add(q),F().then(()=>w(q))},q=>{C(null===q?new DOMException("","EncodingError"):q)})}catch(q){C(q)}})})(Oa,Le,0,0,new WeakSet,it,pl,cs,Gs,Da,Un),ml=((r,t,e,i,o,c,u,d,h,f,m,_,y,b,w,S,F,C,q,L)=>class extends w{constructor(D,I){super(D,I),this._nativeContext=D,this._audioWorklet=void 0===r?void 0:{addModule:(M,E)=>r(this,M,E)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new o(this)}createBuffer(D,I,M){return new e({length:I,numberOfChannels:D,sampleRate:M})}createBufferSource(){return new i(this)}createChannelMerger(D=6){return new c(this,{numberOfInputs:D})}createChannelSplitter(D=6){return new u(this,{numberOfOutputs:D})}createConstantSource(){return new d(this)}createConvolver(){return new h(this)}createDelay(D=1){return new m(this,{maxDelayTime:D})}createDynamicsCompressor(){return new _(this)}createGain(){return new y(this)}createIIRFilter(D,I){return new b(this,{feedback:I,feedforward:D})}createOscillator(){return new S(this)}createPanner(){return new F(this)}createPeriodicWave(D,I,M={disableNormalization:!1}){return new C(this,{...M,imag:I,real:D})}createStereoPanner(){return new q(this)}createWaveShaper(){return new L(this)}decodeAudioData(D,I,M){return f(this._nativeContext,D).then(E=>("function"==typeof I&&I(E),E),E=>{throw"function"==typeof M&&M(E),E})}})(Ud,Sd,Ad,jn,Dd,Ed,cr,Fd,Ys,Pa,Md,ur,cl,Ve,Cn,$s,qa,lr,hr,Bd),La=((r,t,e,i)=>class extends r{constructor(c,u){const d=e(c),h=((r,t)=>r.createMediaElementSource(t.mediaElement))(d,u);if(i(d))throw TypeError();super(c,!0,h,null),this._nativeMediaElementAudioSourceNode=h}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})(Zt,0,it,Qt),gl=((r,t,e,i)=>class extends r{constructor(c,u){const d=e(c);if(i(d))throw new TypeError;const f=((r,t)=>{const e=r.createMediaStreamDestination();return Te(e,t),1===e.numberOfOutputs&&Object.defineProperty(e,"numberOfOutputs",{get:()=>0}),e})(d,{...re,...u});super(c,!1,f,null),this._nativeMediaStreamAudioDestinationNode=f}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(Zt,0,it,Qt),_l=((r,t,e,i)=>class extends r{constructor(c,u){const d=e(c),h=((r,{mediaStream:t})=>{const e=t.getAudioTracks();e.sort((c,u)=>c.id<u.id?-1:c.id>u.id?1:0);const i=e.slice(0,1),o=r.createMediaStreamSource(new MediaStream(i));return Object.defineProperty(o,"mediaStream",{value:t}),o})(d,u);if(i(d))throw new TypeError;super(c,!0,h,null),this._nativeMediaStreamAudioSourceNode=h}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(Zt,0,it,Qt),vl=((r,t)=>(e,{mediaStreamTrack:i})=>{if("function"==typeof e.createMediaStreamTrackSource)return e.createMediaStreamTrackSource(i);const o=new MediaStream([i]),c=e.createMediaStreamSource(o);if("audio"!==i.kind)throw r();if(t(e))throw new TypeError;return c})(ye,Qt),uo=((r,t,e)=>class extends r{constructor(o,c){const u=e(o);super(o,!0,t(u,c),null)}})(Zt,vl,it),zd=((r,t,e,i,o,c,u,d,h)=>class extends r{constructor(m={}){if(null===h)throw new Error("Missing the native AudioContext constructor.");let _;try{_=new h(m)}catch(w){throw 12===w.code&&"sampleRate is not in range"===w.message?e():w}if(null===_)throw i();if(!(r=>void 0===r||"number"==typeof r||"string"==typeof r&&("balanced"===r||"interactive"===r||"playback"===r))(m.latencyHint))throw new TypeError(`The provided value '${m.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==m.sampleRate&&_.sampleRate!==m.sampleRate)throw e();super(_,2);const{latencyHint:y}=m,{sampleRate:b}=_;if(this._baseLatency="number"==typeof _.baseLatency?_.baseLatency:"balanced"===y?512/b:"interactive"===y||void 0===y?256/b:"playback"===y?1024/b:128*Math.max(2,Math.min(128,Math.round(y*b/128)))/b,this._nativeAudioContext=_,"webkitAudioContext"===h.name?(this._nativeGainNode=_.createGain(),this._nativeOscillatorNode=_.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(_.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===_.state){this._state="suspended";const w=()=>{"suspended"===this._state&&(this._state=null),_.removeEventListener("statechange",w)};_.addEventListener("statechange",w)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then(()=>{throw t()}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then(()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),mi(this)}))}createMediaElementSource(m){return new o(this,{mediaElement:m})}createMediaStreamDestination(){return new c(this)}createMediaStreamSource(m){return new u(this,{mediaStream:m})}createMediaStreamTrackSource(m){return new d(this,{mediaStreamTrack:m})}resume(){return"suspended"===this._state?new Promise((m,_)=>{const y=()=>{this._nativeAudioContext.removeEventListener("statechange",y),"running"===this._nativeAudioContext.state?m():this.resume().then(m,_)};this._nativeAudioContext.addEventListener("statechange",y)}):this._nativeAudioContext.resume().catch(m=>{throw void 0===m||15===m.code?t():m})}suspend(){return this._nativeAudioContext.suspend().catch(m=>{throw void 0===m?t():m})}})(ml,ye,$t,ir,La,gl,_l,uo,us),lo=(r=>t=>{const e=r.get(t);if(void 0===e)throw new Error("The context has no set of AudioWorkletNodes.");return e})(Ra),yl=(r=>(t,e)=>{r(t).add(e)})(lo),xl=(r=>(t,e,i=0,o=0)=>{const c=t[i];if(void 0===c)throw r();return qr(e)?c.connect(e,0,o):c.connect(e,0)})(Ee),wl=(r=>(t,e)=>{r(t).delete(e)})(lo),Tl=(r=>(t,e=void 0,i=void 0,o=0)=>void 0===e?t.forEach(c=>c.disconnect()):"number"==typeof e?Xi(r,t,e).disconnect():qr(e)?void 0===i?t.forEach(c=>c.disconnect(e)):void 0===o?Xi(r,t,i).disconnect(e,0):Xi(r,t,i).disconnect(e,0,o):void 0===i?t.forEach(c=>c.disconnect(e)):Xi(r,t,i).disconnect(e,0))(Ee),ho=new WeakMap,bl=((r,t)=>e=>t(r,e))(ho,sn),Va=((r,t,e,i,o,c,u,d,h,f,m,_,y)=>(b,w,S,F)=>{if(0===F.numberOfInputs&&0===F.numberOfOutputs)throw h();const C=Array.isArray(F.outputChannelCount)?F.outputChannelCount:Array.from(F.outputChannelCount);if(C.some(K=>K<1))throw h();if(C.length!==F.numberOfOutputs)throw t();if("explicit"!==F.channelCountMode)throw h();const q=F.channelCount*F.numberOfInputs,L=C.reduce((K,vt)=>K+vt,0),z=void 0===S.parameterDescriptors?0:S.parameterDescriptors.length;if(q+z>6||L>6)throw h();const D=new MessageChannel,I=[],M=[];for(let K=0;K<F.numberOfInputs;K+=1)I.push(u(b,{channelCount:F.channelCount,channelCountMode:F.channelCountMode,channelInterpretation:F.channelInterpretation,gain:1})),M.push(o(b,{channelCount:F.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:F.channelCount}));const E=[];if(void 0!==S.parameterDescriptors)for(const{defaultValue:K,maxValue:vt,minValue:ke,name:de}of S.parameterDescriptors){const Bt=c(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==F.parameterData[de]?F.parameterData[de]:void 0===K?0:K});Object.defineProperties(Bt.offset,{defaultValue:{get:()=>void 0===K?0:K},maxValue:{get:()=>void 0===vt?Fe:vt},minValue:{get:()=>void 0===ke?ce:ke}}),E.push(Bt)}const j=i(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,q+z)}),U=xa(w,b.sampleRate),Q=d(b,U,q+z,Math.max(1,L)),W=o(b,{channelCount:Math.max(1,L),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,L)}),et=[];for(let K=0;K<F.numberOfOutputs;K+=1)et.push(i(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:C[K]}));for(let K=0;K<F.numberOfInputs;K+=1){I[K].connect(M[K]);for(let vt=0;vt<F.channelCount;vt+=1)M[K].connect(j,vt,K*F.channelCount+vt)}const rt=new hu(void 0===S.parameterDescriptors?[]:S.parameterDescriptors.map(({name:K},vt)=>{const ke=E[vt];return ke.connect(j,0,q+vt),ke.start(0),[K,ke.offset]}));j.connect(Q);let nt=F.channelInterpretation,st=null;const at=0===F.numberOfOutputs?[Q]:et,_t={get bufferSize(){return U},get channelCount(){return F.channelCount},set channelCount(K){throw e()},get channelCountMode(){return F.channelCountMode},set channelCountMode(K){throw e()},get channelInterpretation(){return nt},set channelInterpretation(K){for(const vt of I)vt.channelInterpretation=K;nt=K},get context(){return Q.context},get inputs(){return I},get numberOfInputs(){return F.numberOfInputs},get numberOfOutputs(){return F.numberOfOutputs},get onprocessorerror(){return st},set onprocessorerror(K){"function"==typeof st&&_t.removeEventListener("processorerror",st),st="function"==typeof K?K:null,"function"==typeof st&&_t.addEventListener("processorerror",st)},get parameters(){return rt},get port(){return D.port2},addEventListener:(...K)=>Q.addEventListener(K[0],K[1],K[2]),connect:r.bind(null,at),disconnect:f.bind(null,at),dispatchEvent:(...K)=>Q.dispatchEvent(K[0]),removeEventListener:(...K)=>Q.removeEventListener(K[0],K[1],K[2])},lt=new Map;var K;D.port1.addEventListener=(K=D.port1.addEventListener,(...vt)=>{if("message"===vt[0]){const ke="function"==typeof vt[1]?vt[1]:"object"==typeof vt[1]&&null!==vt[1]&&"function"==typeof vt[1].handleEvent?vt[1].handleEvent:null;if(null!==ke){const de=lt.get(vt[1]);void 0!==de?vt[1]=de:(vt[1]=Bt=>{m(b.currentTime,b.sampleRate,()=>ke(Bt))},lt.set(ke,vt[1]))}}return K.call(D.port1,vt[0],vt[1],vt[2])}),D.port1.removeEventListener=(K=>(...vt)=>{if("message"===vt[0]){const ke=lt.get(vt[1]);void 0!==ke&&(lt.delete(vt[1]),vt[1]=ke)}return K.call(D.port1,vt[0],vt[1],vt[2])})(D.port1.removeEventListener);let bt=null;Object.defineProperty(D.port1,"onmessage",{get:()=>bt,set:K=>{"function"==typeof bt&&D.port1.removeEventListener("message",bt),bt="function"==typeof K?K:null,"function"==typeof bt&&(D.port1.addEventListener("message",bt),D.port1.start())}}),S.prototype.port=D.port1;let At=null;((r,t,e,i)=>{let o=Pn.get(r);void 0===o&&(o=new WeakMap,Pn.set(r,o));const c=Jh(e,i);return o.set(t,c),c})(b,_t,S,F).then(K=>At=K);const Ae=Vr(F.numberOfInputs,F.channelCount),Ye=Vr(F.numberOfOutputs,C),Ct=void 0===S.parameterDescriptors?[]:S.parameterDescriptors.reduce((K,{name:vt})=>({...K,[vt]:new Float32Array(128)}),{});let ms=!0;const Rs=()=>{F.numberOfOutputs>0&&Q.disconnect(W);for(let K=0,vt=0;K<F.numberOfOutputs;K+=1){const ke=et[K];for(let de=0;de<C[K];de+=1)W.disconnect(ke,vt+de,de);vt+=C[K]}},$=new Map;Q.onaudioprocess=({inputBuffer:K,outputBuffer:vt})=>{if(null!==At){const ke=_(_t);for(let de=0;de<U;de+=128){for(let Bt=0;Bt<F.numberOfInputs;Bt+=1)for(let pe=0;pe<F.channelCount;pe+=1)Lr(K,Ae[Bt],pe,pe,de);void 0!==S.parameterDescriptors&&S.parameterDescriptors.forEach(({name:Bt},pe)=>{Lr(K,Ct,Bt,q+pe,de)});for(let Bt=0;Bt<F.numberOfInputs;Bt+=1)for(let pe=0;pe<C[Bt];pe+=1)0===Ye[Bt][pe].byteLength&&(Ye[Bt][pe]=new Float32Array(128));try{const Bt=Ae.map((Rn,Is)=>{if(ke[Is].size>0)return $.set(Is,U/128),Rn;const nu=$.get(Is);return void 0===nu?[]:(Rn.every(bf=>bf.every(Sf=>0===Sf))&&(1===nu?$.delete(Is):$.set(Is,nu-1)),Rn)});ms=m(b.currentTime+de/b.sampleRate,b.sampleRate,()=>At.process(Bt,Ye,Ct));for(let Rn=0,Is=0;Rn<F.numberOfOutputs;Rn+=1){for(let Fr=0;Fr<C[Rn];Fr+=1)Yi(vt,Ye[Rn],Fr,Is+Fr,de);Is+=C[Rn]}}catch(Bt){ms=!1,_t.dispatchEvent(new ErrorEvent("processorerror",{colno:Bt.colno,filename:Bt.filename,lineno:Bt.lineno,message:Bt.message}))}if(!ms){for(let Bt=0;Bt<F.numberOfInputs;Bt+=1){I[Bt].disconnect(M[Bt]);for(let pe=0;pe<F.channelCount;pe+=1)M[de].disconnect(j,pe,Bt*F.channelCount+pe)}if(void 0!==S.parameterDescriptors){const Bt=S.parameterDescriptors.length;for(let pe=0;pe<Bt;pe+=1){const Rn=E[pe];Rn.disconnect(j,0,q+pe),Rn.stop()}}j.disconnect(Q),Q.onaudioprocess=null,Ce?Rs():li();break}}}};let Ce=!1;const os=u(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),ui=()=>Q.connect(os).connect(b.destination),li=()=>{Q.disconnect(os),os.disconnect()};return ui(),y(_t,()=>{if(ms){li(),F.numberOfOutputs>0&&Q.connect(W);for(let K=0,vt=0;K<F.numberOfOutputs;K+=1){const ke=et[K];for(let de=0;de<C[K];de+=1)W.connect(ke,vt+de,de);vt+=C[K]}}Ce=!0},()=>{ms&&(ui(),Rs()),Ce=!1})})(xl,Ee,ye,ls,nr,Ai,$e,Rt,$t,Tl,co,bl,As),jd=((r,t,e,i,o)=>(c,u,d,h,f,m)=>{if(null!==d)try{const _=new d(c,h,m),y=new Map;let b=null;if(Object.defineProperties(_,{channelCount:{get:()=>m.channelCount,set:()=>{throw r()}},channelCountMode:{get:()=>"explicit",set:()=>{throw r()}},onprocessorerror:{get:()=>b,set:w=>{"function"==typeof b&&_.removeEventListener("processorerror",b),b="function"==typeof w?w:null,"function"==typeof b&&_.addEventListener("processorerror",b)}}}),_.addEventListener=(w=_.addEventListener,(...S)=>{if("processorerror"===S[0]){const F="function"==typeof S[1]?S[1]:"object"==typeof S[1]&&null!==S[1]&&"function"==typeof S[1].handleEvent?S[1].handleEvent:null;if(null!==F){const C=y.get(S[1]);void 0!==C?S[1]=C:(S[1]=q=>{"error"===q.type?(Object.defineProperties(q,{type:{value:"processorerror"}}),F(q)):F(new ErrorEvent(S[0],{...q}))},y.set(F,S[1]))}}return w.call(_,"error",S[1],S[2]),w.call(_,...S)}),_.removeEventListener=(w=>(...S)=>{if("processorerror"===S[0]){const F=y.get(S[1]);void 0!==F&&(y.delete(S[1]),S[1]=F)}return w.call(_,"error",S[1],S[2]),w.call(_,S[0],S[1],S[2])})(_.removeEventListener),0!==m.numberOfOutputs){const w=e(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return _.connect(w).connect(c.destination),o(_,()=>w.disconnect(),()=>w.connect(c.destination))}return _}catch(_){throw 11===_.code?i():_}var w;if(void 0===f)throw i();return(r=>{const{port1:t}=new MessageChannel;try{t.postMessage(r)}finally{t.close()}})(m),t(c,u,f,m)})(ye,Va,$e,$t,As),Wa=((r,t,e,i,o,c,u,d,h,f,m,_,y,b,w,S)=>(F,C,q)=>{const L=new WeakMap;let z=null;const D=function(){var I=Ft(function*(M,E){let j=m(M),U=null;const Q=Kt(j,E),W=Array.isArray(C.outputChannelCount)?C.outputChannelCount:Array.from(C.outputChannelCount);if(null===_){const et=W.reduce((at,_t)=>at+_t,0),rt=o(E,{channelCount:Math.max(1,et),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,et)}),nt=[];for(let at=0;at<M.numberOfOutputs;at+=1)nt.push(i(E,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:W[at]}));const st=u(E,{channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation,gain:1});st.connect=t.bind(null,nt),st.disconnect=h.bind(null,nt),U=[rt,nt,st]}else Q||(j=new _(E,F));if(L.set(E,null===U?j:U[2]),null!==U){if(null===z){if(void 0===q)throw new Error("Missing the processor constructor.");if(null===y)throw new Error("Missing the native OfflineAudioContext constructor.");const _t=M.channelCount*M.numberOfInputs,lt=void 0===q.parameterDescriptors?0:q.parameterDescriptors.length,bt=_t+lt;z=vh(M,0===bt?null:yield function(){var ee=Ft(function*(){const Ae=new y(bt,128*Math.ceil(M.context.length/128),E.sampleRate),Ye=[],Ct=[];for(let $=0;$<C.numberOfInputs;$+=1)Ye.push(u(Ae,{channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation,gain:1})),Ct.push(o(Ae,{channelCount:C.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:C.channelCount}));const ms=yield Promise.all(Array.from(M.parameters.values()).map(function(){var $=Ft(function*(Ce){const os=c(Ae,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Ce.value});return yield b(Ae,Ce,os.offset),os});return function(Ce){return $.apply(this,arguments)}}())),Rs=i(Ae,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,_t+lt)});for(let $=0;$<C.numberOfInputs;$+=1){Ye[$].connect(Ct[$]);for(let Ce=0;Ce<C.channelCount;Ce+=1)Ct[$].connect(Rs,Ce,$*C.channelCount+Ce)}for(const[$,Ce]of ms.entries())Ce.connect(Rs,0,_t+$),Ce.start(0);return Rs.connect(Ae.destination),yield Promise.all(Ye.map($=>w(M,Ae,$))),S(Ae)});return function(){return ee.apply(this,arguments)}}()(),E,C,W,q,f)}const et=yield z,rt=e(E,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[nt,st,at]=U;null!==et&&(rt.buffer=et,rt.start(0)),rt.connect(nt);for(let _t=0,lt=0;_t<M.numberOfOutputs;_t+=1){const bt=st[_t];for(let At=0;At<W[_t];At+=1)nt.connect(bt,lt+At,At);lt+=W[_t]}return at}if(Q)for(const[et,rt]of M.parameters.entries())yield r(E,rt,j.parameters.get(et));else for(const[et,rt]of M.parameters.entries())yield b(E,rt,j.parameters.get(et));return yield w(M,E,j),j});return function(E,j){return I.apply(this,arguments)}}();return{render(I,M){d(M,I);const E=L.get(M);return void 0!==E?Promise.resolve(E):D(I,M)}}})(Kn,xl,Si,ls,nr,Ai,$e,wl,Tl,co,ne,bi,Me,Ge,xe,Xs),Dt=(r=>t=>r.get(t))(fl),Zd=(r=>(t,e)=>{r.set(t,e)})(ho),Sl=ao?((r,t,e,i,o,c,u,d,h,f,m,_,y,b)=>class extends t{constructor(S,F,C){var q;const L=d(S),z=h(L),D=(r=>({...r,outputChannelCount:void 0!==r.outputChannelCount?r.outputChannelCount:1===r.numberOfInputs&&1===r.numberOfOutputs?[r.channelCount]:Array.from({length:r.numberOfOutputs},()=>1)}))({...gh,...C});(r=>{const{port1:t,port2:e}=new MessageChannel;try{t.postMessage(r)}finally{t.close(),e.close()}})(D);const I=me.get(L),M=I?.get(F),E=z||"closed"!==L.state?L:null!==(q=u(L))&&void 0!==q?q:L,j=o(E,z?null:S.baseLatency,f,F,M,D);super(S,!0,j,z?i(F,D,M):null);const Q=[];j.parameters.forEach((et,rt)=>{const nt=e(this,z,et);Q.push([rt,nt])}),this._nativeAudioWorkletNode=j,this._onprocessorerror=null,this._parameters=new hu(Q),z&&r(L,this);const{activeInputs:W}=c(this);_(j,W)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(S){const F="function"==typeof S?b(this,S):null;this._nativeAudioWorkletNode.onprocessorerror=F;const C=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==C&&C===F?S:C}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(yl,Zt,zn,Wa,jd,we,Dt,it,Qt,bi,0,Zd,0,Ti):void 0,Ba=((r,t)=>(e,i,o)=>{if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(e,i,o)}catch(c){throw"SyntaxError"===c.name?r():c}})($t,Me),Al=((r,t,e,i,o,c,u,d)=>(h,f)=>e(h).render(h,f).then(()=>Promise.all(Array.from(i(f)).map(m=>e(m).render(m,f)))).then(()=>o(f)).then(m=>("function"!=typeof m.copyFromChannel?(u(m),rn(m)):t(c,()=>c(m))||d(m),r.add(m),m)))(Oa,Le,bs,lo,Xs,cs,Da,Un),kn=((r,t,e,i,o)=>class extends r{constructor(u,d,h){let f;if("number"==typeof u&&void 0!==d&&void 0!==h)f={length:d,numberOfChannels:u,sampleRate:h};else{if("object"!=typeof u)throw new Error("The given parameters are not valid.");f=u}const{length:m,numberOfChannels:_,sampleRate:y}={...jr,...f},b=i(_,m,y);t(Gs,()=>Gs(b))||b.addEventListener("statechange",(()=>{let w=0;const S=F=>{"running"===this._state&&(w>0?(b.removeEventListener("statechange",S),F.stopImmediatePropagation(),this._waitForThePromiseToSettle(F)):w+=1)};return S})()),super(b,_),this._length=m,this._nativeOfflineAudioContext=b,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(e()):(this._state="running",o(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,mi(this)}))}_waitForThePromiseToSettle(u){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(u):setTimeout(()=>this._waitForThePromiseToSettle(u))}})(ml,Le,ye,Ba,Al),Qd=((r,t)=>e=>{const i=r.get(e);return t(i)||t(e)})(Ne,Ca),po=((r,t)=>e=>r.has(e)||t(e))(yn,ka),Ga=((r,t)=>e=>r.has(e)||t(e))(Xn,el),Cl=((r,t)=>e=>{const i=r.get(e);return t(i)||t(e)})(Ne,Qt);var r;function ut(r,t){if(!r)throw new Error(t)}function He(r,t,e=1/0){if(!(t<=r&&r<=e))throw new RangeError(`Value must be within [${t}, ${e}], got: ${r}`)}function mo(r){!r.isOffline&&"running"!==r.state&&_o('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let go=console;function _o(...r){go.warn(...r)}function un(r){return typeof r>"u"}function Nt(r){return!un(r)}function Ke(r){return"number"==typeof r}function Ks(r){return"[object Object]"===Object.prototype.toString.call(r)&&r.constructor===Object}function On(r){return Array.isArray(r)}function Zn(r){return"string"==typeof r}function ki(r){return Zn(r)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(r)}function Xd(r,t,e){return new kn(r,t,e)}const Js="object"==typeof self?self:null,Ol=Js&&(Js.hasOwnProperty("AudioContext")||Js.hasOwnProperty("webkitAudioContext"));var Vt=Tt(7582);class Nl{constructor(t,e,i){this._callback=t,this._type=e,this._updateInterval=i,this._createClock()}_createWorker(){const t=new Blob([`\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t`],{type:"text/javascript"}),e=URL.createObjectURL(t),i=new Worker(e);i.onmessage=this._callback.bind(this),this._worker=i}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch{this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){this._updateInterval=Math.max(t,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*t,1))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function Os(r){return Ga(r)}function ge(r){return po(r)}function ln(r){return Cl(r)}function Oi(r){return Qd(r)}function El(r){return r instanceof AudioBuffer}function vo(r,t){return"value"===r||Os(t)||ge(t)||El(t)}function Qn(r,...t){if(!t.length)return r;const e=t.shift();if(Ks(r)&&Ks(e))for(const i in e)vo(i,e[i])?r[i]=e[i]:Ks(e[i])?(r[i]||Object.assign(r,{[i]:{}}),Qn(r[i],e[i])):Object.assign(r,{[i]:e[i]});return Qn(r,...t)}function H(r,t,e=[],i){const o={},c=Array.from(t);if(Ks(c[0])&&i&&!Reflect.has(c[0],i)&&(Object.keys(c[0]).some(d=>Reflect.has(r,d))||(Qn(o,{[i]:c[0]}),e.splice(e.indexOf(i),1),c.shift())),1===c.length&&Ks(c[0]))Qn(o,c[0]);else for(let u=0;u<e.length;u++)Nt(c[u])&&(o[e[u]]=c[u]);return Qn(r,o)}function ti(r,t){return un(r)?t:r}function ei(r,t){return t.forEach(e=>{Reflect.has(r,e)&&delete r[e]}),r}let Dn=(()=>{class r{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||Js&&this.toString()===Js.TONE_DEBUG_CLASS)&&function kl(...r){go.log(...r)}(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}return r.version=Lt,r})();const ja=1e-6;function dr(r,t){return r>t+ja}function yo(r,t){return dr(r,t)||Nn(r,t)}function fr(r,t){return r+ja<t}function Nn(r,t){return Math.abs(r-t)<ja}class En extends Dn{constructor(){super(),this.name="Timeline",this._timeline=[];const t=H(En.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(ut(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length)ut(yo(t.time,this._timeline[this.length-1].time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t);else{const e=this._search(t.time);this._timeline.splice(e+1,0,t)}return this.length>this.memory&&this._timeline.splice(0,this.length-this.memory),this}remove(t){const e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this}get(t,e="time"){const i=this._search(t,e);return-1!==i?this._timeline[i]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){const i=this._search(t,e);return i+1<this._timeline.length?this._timeline[i+1]:null}getBefore(t){const e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];const i=this._search(t);return i-1>=0?this._timeline[i-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(Nn(this._timeline[e].time,t)){for(let i=e;i>=0&&Nn(this._timeline[i].time,t);i--)e=i;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&yo(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){const e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(0===this._timeline.length)return-1;let i=0;const o=this._timeline.length;let c=o;if(o>0&&this._timeline[o-1][e]<=t)return o-1;for(;i<c;){let u=Math.floor(i+(c-i)/2);const d=this._timeline[u],h=this._timeline[u+1];if(Nn(d[e],t)){for(let f=u;f<this._timeline.length&&Nn(this._timeline[f][e],t);f++)u=f;return u}if(fr(d[e],t)&&dr(h[e],t))return u;dr(d[e],t)?c=u:i=u+1}return-1}_iterate(t,e=0,i=this._timeline.length-1){this._timeline.slice(e,i+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){const i=this._search(t);return-1!==i&&this._iterate(e,0,i),this}forEachAfter(t,e){const i=this._search(t);return this._iterate(e,i+1),this}forEachBetween(t,e,i){let o=this._search(t),c=this._search(e);return-1!==o&&-1!==c?(this._timeline[o].time!==t&&(o+=1),this._timeline[c].time===e&&(c-=1),this._iterate(i,o,c)):-1===o&&this._iterate(i,0,c),this}forEachFrom(t,e){let i=this._search(t);for(;i>=0&&this._timeline[i].time>=t;)i--;return this._iterate(e,i+1),this}forEachAtTime(t,e){const i=this._search(t);if(-1!==i&&Nn(this._timeline[i].time,t)){let o=i;for(let c=i;c>=0&&Nn(this._timeline[c].time,t);c--)o=c;this._iterate(c=>{e(c)},o,i)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const pr=[];function wo(r){pr.push(r)}const mr=[];function gr(r){mr.push(r)}class _r extends Dn{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach(o=>{un(this._events)&&(this._events={}),this._events.hasOwnProperty(o)||(this._events[o]=[]),this._events[o].push(e)}),this}once(t,e){const i=(...o)=>{e(...o),this.off(t,i)};return this.on(t,i),this}off(t,e){return t.split(/\W+/).forEach(o=>{if(un(this._events)&&(this._events={}),this._events.hasOwnProperty(t))if(un(e))this._events[t]=[];else{const c=this._events[t];for(let u=c.length-1;u>=0;u--)c[u]===e&&c.splice(u,1)}}),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){const i=this._events[t].slice(0);for(let o=0,c=i.length;o<c;o++)i[o].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach(e=>{const i=Object.getOwnPropertyDescriptor(_r.prototype,e);Object.defineProperty(t.prototype,e,i)})}dispose(){return super.dispose(),this._events=void 0,this}}class Qa extends _r{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class hn extends Qa{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new En,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const t=H(hn.getDefaults(),arguments,["context"]);this._context=t.context?t.context:function Yd(r){return new zd(r)}({latencyHint:t.latencyHint}),this._ticker=new Nl(this.emit.bind(this,"tick"),t.clockSource,t.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(t.latencyHint),this.lookAhead=t.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(function Ml(r){pr.forEach(t=>t(r))}(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,i){return this._context.createBuffer(t,e,i)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,i){return this._context.createPeriodicWave(t,e,i)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return ut(Oi(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return ut(Oi(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return ut(Oi(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){ut(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){ut(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){ut(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){ut(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return function Dl(r,t,e){return ut(Nt(Sl),"This node only works in a secure context (https or localhost)"),new Sl(r,t,e)}(this.rawContext,t,e)}addAudioWorkletModule(t,e){return(0,Vt.mG)(this,void 0,void 0,function*(){ut(Nt(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(e)||this._workletModules.set(e,this.rawContext.audioWorklet.addModule(t)),yield this._workletModules.get(e)})}workletsAreReady(){return(0,Vt.mG)(this,void 0,void 0,function*(){const t=[];this._workletModules.forEach(e=>t.push(e)),yield Promise.all(t)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get latencyHint(){return this._latencyHint}_setLatencyHint(t){let e=0;if(this._latencyHint=t,Zn(t))switch(t){case"interactive":e=.1;break;case"playback":e=.5;break;case"balanced":e=.25}this.lookAhead=e,this.updateInterval=e/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return Oi(this._context)?this._context.resume():Promise.resolve()}close(){return(0,Vt.mG)(this,void 0,void 0,function*(){Oi(this._context)&&(yield this._context.close()),this._initialized&&function Za(r){mr.forEach(t=>t(r))}(this)})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const e=this._context.createBuffer(1,128,this._context.sampleRate),i=e.getChannelData(0);for(let c=0;c<i.length;c++)i[c]=t;const o=this._context.createBufferSource();return o.channelCount=1,o.channelCountMode="explicit",o.buffer=e,o.loop=!0,o.start(0),this._constants.set(t,o),o}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this}_timeoutLoop(){const t=this.now();let e=this._timeouts.peek();for(;this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()}setTimeout(t,e){this._timeoutIds++;const i=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:i+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(e=>{e.id===t&&this._timeouts.remove(e)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){const i=++this._timeoutIds,o=()=>{const c=this.now();this._timeouts.add({callback:()=>{t(),o()},id:i,time:c+e})};return o(),i}}function he(r,t){On(t)?t.forEach(e=>he(r,e)):Object.defineProperty(r,t,{enumerable:!0,writable:!1})}function Il(r,t){On(t)?t.forEach(e=>Il(r,e)):Object.defineProperty(r,t,{writable:!0})}const Ht=()=>{};let ts=(()=>{class r extends Dn{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Ht;const e=H(r.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,e.url&&El(e.url)||e.url instanceof r?this.set(e.url):Zn(e.url)&&this.load(e.url).catch(e.onerror)}static getDefaults(){return{onerror:Ht,onload:Ht,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:dn().sampleRate}set(e){return e instanceof r?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return(0,Vt.mG)(this,void 0,void 0,function*(){const i=r.load(e).then(o=>{this.set(o),this.onload(this)});r.downloads.push(i);try{yield i}finally{const o=r.downloads.indexOf(i);r.downloads.splice(o,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const i=On(e)&&e[0].length>0,o=i?e.length:1,c=i?e[0].length:e.length,u=dn(),d=u.createBuffer(o,c,u.sampleRate),h=i||1!==o?e:[e];for(let f=0;f<o;f++)d.copyToChannel(h[f],f);return this._buffer=d,this}toMono(e){if(Ke(e))this.fromArray(this.toArray(e));else{let i=new Float32Array(this.length);const o=this.numberOfChannels;for(let c=0;c<o;c++){const u=this.toArray(c);for(let d=0;d<u.length;d++)i[d]+=u[d]}i=i.map(c=>c/o),this.fromArray(i)}return this}toArray(e){if(Ke(e))return this.getChannelData(e);if(1===this.numberOfChannels)return this.toArray(0);{const i=[];for(let o=0;o<this.numberOfChannels;o++)i[o]=this.getChannelData(o);return i}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,i=this.duration){const o=Math.floor(e*this.sampleRate),c=Math.floor(i*this.sampleRate);ut(o<c,"The start time must be less than the end time");const u=c-o,d=dn().createBuffer(this.numberOfChannels,u,this.sampleRate);for(let h=0;h<this.numberOfChannels;h++)d.copyToChannel(this.getChannelData(h).subarray(o,c),h);return new r(d)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return(new r).fromArray(e)}static fromUrl(e){return(0,Vt.mG)(this,void 0,void 0,function*(){return yield(new r).load(e)})}static load(e){return(0,Vt.mG)(this,void 0,void 0,function*(){const i=e.match(/\[([^\]\[]+\|.+)\]$/);if(i){const h=i[1].split("|");let f=h[0];for(const m of h)if(r.supportsType(m)){f=m;break}e=e.replace(i[0],f)}const o=""===r.baseUrl||r.baseUrl.endsWith("/")?r.baseUrl:r.baseUrl+"/",c=yield fetch(o+e);if(!c.ok)throw new Error(`could not load url: ${e}`);const u=yield c.arrayBuffer();return yield dn().decodeAudioData(u)})}static supportsType(e){const i=e.split("."),o=i[i.length-1];return""!==document.createElement("audio").canPlayType("audio/"+o)}static loaded(){return(0,Vt.mG)(this,void 0,void 0,function*(){for(yield Promise.resolve();r.downloads.length;)yield r.downloads[0]})}}return r.baseUrl="",r.downloads=[],r})();class Ha extends hn{constructor(){super({clockSource:"offline",context:ln(arguments[0])?arguments[0]:Xd(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:ln(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=ln(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return(0,Vt.mG)(this,void 0,void 0,function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;const i=Math.floor(this.sampleRate/128);t&&e%i==0&&(yield new Promise(o=>setTimeout(o,1)))}})}render(t=!0){return(0,Vt.mG)(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(t);const e=yield this._context.startRendering();return new ts(e)})}close(){return Promise.resolve()}}const es=new class Rl extends Qa{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,i){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,i){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t,e){return(0,Vt.mG)(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}};let Ds=es;function dn(){return Ds===es&&Ol&&function Ya(r){Ds=Oi(r)?new hn(r):ln(r)?new Ha(r):r}(new hn),Ds}if(Js&&!Js.TONE_SILENCE_LOGGING){console.log(`%c * Tone.js ${"v"}${Lt} * `,"background: #000; color: #fff")}function So(r){return Math.pow(2,r/12)}let ns=440;function Ao(r){return Math.round(We(r))}function We(r){return 69+12*Math.log2(r/ns)}class $a extends Dn{constructor(t,e,i){super(),this.defaultUnits="s",this._val=e,this._units=i,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{const i=parseInt(t,10),o="."===e?1.5:1;return 1===i?this._beatsToUnits(this._getTimeSignature())*o:this._beatsToUnits(4/i)*o},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const e=parseInt(t,10);return this._beatsToUnits(8/(3*Math.floor(e)))},regexp:/^(\d+)t$/i},tr:{method:(t,e,i)=>{let o=0;return t&&"0"!==t&&(o+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(o+=this._beatsToUnits(parseFloat(e))),i&&"0"!==i&&(o+=this._beatsToUnits(parseFloat(i)/4)),o},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof $a&&this.fromType(this._val),un(this._val))return this._noArg();if(Zn(this._val)&&un(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(Ks(this._val)){let t=0;for(const e in this._val)if(Nt(this._val[e])){const i=this._val[e];t+=new this.constructor(this.context,e).valueOf()*i}return t}if(Nt(this._units)){const t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}return Zn(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class fn extends $a{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const e=new fn(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){const i=new this.constructor(this.context,t).valueOf(),o=this.valueOf();return o+(Math.round(o/i)*i-o)*e}toNotation(){const t=this.toSeconds(),e=["1m"];for(let c=1;c<9;c++){const u=Math.pow(2,c);e.push(u+"n."),e.push(u+"n"),e.push(u+"t")}e.push("0");let i=e[0],o=new fn(this.context,e[0]).toSeconds();return e.forEach(c=>{const u=new fn(this.context,c).toSeconds();Math.abs(u-t)<Math.abs(o-t)&&(i=c,o=u)}),i}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let e=this.valueOf()/t;e=parseFloat(e.toFixed(4));const i=Math.floor(e/this._getTimeSignature());let o=e%1*4;e=Math.floor(e)%this._getTimeSignature();const c=o.toString();return c.length>3&&(o=parseFloat(parseFloat(c).toFixed(3))),[i,e,o].join(":")}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return Ao(this.toFrequency())}_now(){return this.context.now()}}class Je extends fn{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return function Kd(){return ns}()}static set A4(t){!function Xa(r){ns=r}(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return"midi"===this.defaultUnits?t:Je.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(t,e){const o=tf[t.toLowerCase()]+12*(parseInt(e,10)+1);return"midi"===this.defaultUnits?o:Je.mtof(o)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,i){let o=1;return t&&"0"!==t&&(o*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(o*=this._beatsToUnits(parseFloat(e))),i&&"0"!==i&&(o*=this._beatsToUnits(parseFloat(i)/4)),o}}})}transpose(t){return new Je(this.context,this.valueOf()*So(t))}harmonize(t){return t.map(e=>this.transpose(e))}toMidi(){return Ao(this.valueOf())}toNote(){const t=this.toFrequency(),e=Math.log2(t/Je.A4);let i=Math.round(12*e)+57;const o=Math.floor(i/12);return o<0&&(i+=-12*o),ef[i%12]+o.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return function Jd(r){return ns*Math.pow(2,(r-69)/12)}(t)}static ftom(t){return Ao(t)}}const tf={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},ef=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class tn extends fn{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Ue extends Dn{constructor(){super();const t=H(Ue.getDefaults(),arguments,["context"]);this.context=this.defaultContext?this.defaultContext:t.context}static getDefaults(){return{context:dn()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return new fn(this.context,t).toSeconds()}toFrequency(t){return new Je(this.context,t).toFrequency()}toTicks(t){return new tn(this.context,t).toTicks()}_getPartialProperties(t){const e=this.get();return Object.keys(e).forEach(i=>{un(t[i])&&delete e[i]}),e}get(){const t=function $d(r){return r.constructor.getDefaults()}(this);return Object.keys(t).forEach(e=>{if(Reflect.has(this,e)){const i=this[e];Nt(i)&&Nt(i.value)&&Nt(i.setValueAtTime)?t[e]=i.value:i instanceof Ue?t[e]=i._getPartialProperties(t[e]):On(i)||Ke(i)||Zn(i)||function ks(r){return"boolean"==typeof r}(i)?t[e]=i:delete t[e]}}),t}set(t){return Object.keys(t).forEach(e=>{Reflect.has(this,e)&&Nt(this[e])&&(this[e]&&Nt(this[e].value)&&Nt(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof Ue?this[e].set(t[e]):this[e]=t[e])}),this}}class Ka extends En{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const e=this.get(t);return null!==e?e.state:this._initial}setStateAtTime(t,e,i){return He(e,0),this.add(Object.assign({},i,{state:t,time:e})),this}getLastState(t,e){for(let o=this._search(e);o>=0;o--){const c=this._timeline[o];if(c.state===t)return c}}getNextState(t,e){const i=this._search(e);if(-1!==i)for(let o=i;o<this._timeline.length;o++){const c=this._timeline[o];if(c.state===t)return c}}}class te extends Ue{constructor(){super(H(te.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const t=H(te.getDefaults(),arguments,["param","units","convert"]);for(ut(Nt(t.param)&&(Os(t.param)||t.param instanceof te),"param must be an AudioParam");!Os(t.param);)t.param=t.param._param;this._swappable=!!Nt(t.swappable)&&t.swappable,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new En(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,Nt(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Ue.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return Nt(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return Nt(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return Nt(this.maxValue)&&Nt(this.minValue)&&He(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?function dt(r){return Math.pow(10,r/20)}(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&"decibels"===this.units?function bo(r){return Math.log(r)/Math.LN10*20}(t):t}setValueAtTime(t,e){const i=this.toSeconds(e),o=this._fromType(t);return ut(isFinite(o)&&isFinite(i),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(o),this.log(this.units,"setValueAtTime",t,i),this._events.add({time:i,type:"setValueAtTime",value:o}),this._param.setValueAtTime(o,i),this}getValueAtTime(t){const e=Math.max(this.toSeconds(t),0),i=this._events.getAfter(e),o=this._events.get(e);let c=this._initialValue;if(null===o)c=this._initialValue;else if("setTargetAtTime"!==o.type||null!==i&&"setValueAtTime"!==i.type)if(null===i)c=o.value;else if("linearRampToValueAtTime"===i.type||"exponentialRampToValueAtTime"===i.type){let u=o.value;if("setTargetAtTime"===o.type){const d=this._events.getBefore(o.time);u=null===d?this._initialValue:d.value}c="linearRampToValueAtTime"===i.type?this._linearInterpolate(o.time,u,i.time,i.value,e):this._exponentialInterpolate(o.time,u,i.time,i.value,e)}else c=o.value;else{const u=this._events.getBefore(o.time);let d;d=null===u?this._initialValue:u.value,"setTargetAtTime"===o.type&&(c=this._exponentialApproach(o.time,d,o.value,o.constant,e))}return this._toType(c)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){const i=this._fromType(t),o=this.toSeconds(e);return ut(isFinite(i)&&isFinite(o),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(i),this._events.add({time:o,type:"linearRampToValueAtTime",value:i}),this.log(this.units,"linearRampToValueAtTime",t,o),this._param.linearRampToValueAtTime(i,o),this}exponentialRampToValueAtTime(t,e){let i=this._fromType(t);i=Nn(i,0)?this._minOutput:i,this._assertRange(i);const o=this.toSeconds(e);return ut(isFinite(i)&&isFinite(o),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:o,type:"exponentialRampToValueAtTime",value:i}),this.log(this.units,"exponentialRampToValueAtTime",t,o),this._param.exponentialRampToValueAtTime(i,o),this}exponentialRampTo(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialRampToValueAtTime(t,i+this.toSeconds(e)),this}linearRampTo(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.linearRampToValueAtTime(t,i+this.toSeconds(e)),this}targetRampTo(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialApproachValueAtTime(t,i,e),this}exponentialApproachValueAtTime(t,e,i){e=this.toSeconds(e),i=this.toSeconds(i);const o=Math.log(i+1)/Math.log(200);return this.setTargetAtTime(t,e,o),this.cancelAndHoldAtTime(e+.9*i),this.linearRampToValueAtTime(t,e+i),this}setTargetAtTime(t,e,i){const o=this._fromType(t);ut(isFinite(i)&&i>0,"timeConstant must be a number greater than 0");const c=this.toSeconds(e);return this._assertRange(o),ut(isFinite(o)&&isFinite(c),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:i,time:c,type:"setTargetAtTime",value:o}),this.log(this.units,"setTargetAtTime",t,c,i),this._param.setTargetAtTime(o,c,i),this}setValueCurveAtTime(t,e,i,o=1){i=this.toSeconds(i),e=this.toSeconds(e);const c=this._fromType(t[0])*o;this.setValueAtTime(this._toType(c),e);const u=i/(t.length-1);for(let d=1;d<t.length;d++){const h=this._fromType(t[d])*o;this.linearRampToValueAtTime(this._toType(h),e+d*u)}return this}cancelScheduledValues(t){const e=this.toSeconds(t);return ut(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){const e=this.toSeconds(t),i=this._fromType(this.getValueAtTime(e));ut(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+i);const o=this._events.get(e),c=this._events.getAfter(e);return o&&Nn(o.time,e)?c?(this._param.cancelScheduledValues(c.time),this._events.cancel(c.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):c&&(this._param.cancelScheduledValues(c.time),this._events.cancel(c.time),"linearRampToValueAtTime"===c.type?this.linearRampToValueAtTime(this._toType(i),e):"exponentialRampToValueAtTime"===c.type&&this.exponentialRampToValueAtTime(this._toType(i),e)),this._events.add({time:e,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,e),this}rampTo(t,e=.1,i){return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,i):this.linearRampTo(t,e,i),this}apply(t){const e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);const i=this._events.get(e);if(i&&"setTargetAtTime"===i.type){const o=this._events.getAfter(i.time),c=o?o.time:e+2,u=(c-e)/10;for(let d=e;d<c;d+=u)t.linearRampToValueAtTime(this.getValueAtTime(d),d)}return this._events.forEachAfter(this.context.currentTime,o=>{"cancelScheduledValues"===o.type?t.cancelScheduledValues(o.time):"setTargetAtTime"===o.type?t.setTargetAtTime(o.value,o.time,o.constant):t[o.type](o.value,o.time)}),this}setParam(t){ut(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,i,o,c){return i+(e-i)*Math.exp(-(c-t)/o)}_linearInterpolate(t,e,i,o,c){return e+(c-t)/(i-t)*(o-e)}_exponentialInterpolate(t,e,i,o,c){return e*Math.pow(o/e,(c-t)/(i-t))}}class Mt extends Ue{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return Nt(this.input)?Os(this.input)||this.input instanceof te?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Nt(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return Nt(t)&&(t instanceof Mt||ge(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(i=>{i.channelCount=t.channelCount,i.channelCountMode=t.channelCountMode,i.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){const t=this._getInternalNodes();ut(t.length>0,"ToneAudioNode does not have any internal nodes");const e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,i=0){return ss(this,t,e,i),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return _o("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,i=0){return function ql(r,t,e=0,i=0){if(Nt(t))for(;t instanceof Mt;)t=t.input;for(;!ge(r);)Nt(r.output)&&(r=r.output);Os(t)?r.disconnect(t,e):ge(t)?r.disconnect(t,e,i):r.disconnect()}(this,t,e,i),this}chain(...t){return Ja(this,...t),this}fan(...t){return t.forEach(e=>this.connect(e)),this}dispose(){return super.dispose(),Nt(this.input)&&(this.input instanceof Mt?this.input.dispose():ge(this.input)&&this.input.disconnect()),Nt(this.output)&&(this.output instanceof Mt?this.output.dispose():ge(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Ja(...r){const t=r.shift();r.reduce((e,i)=>(e instanceof Mt?e.connect(i):ge(e)&&ss(e,i),i),t)}function ss(r,t,e=0,i=0){for(ut(Nt(r),"Cannot connect from undefined node"),ut(Nt(t),"Cannot connect to undefined node"),(t instanceof Mt||ge(t))&&ut(t.numberOfInputs>0,"Cannot connect to node with no inputs"),ut(r.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof Mt||t instanceof te;)Nt(t.input)&&(t=t.input);for(;r instanceof Mt;)Nt(r.output)&&(r=r.output);Os(t)?r.connect(t,e):r.connect(t,e,i)}class ze extends Mt{constructor(){super(H(ze.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const t=H(ze.getDefaults(),arguments,["gain","units"]);this.gain=new te({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),he(this,"gain")}static getDefaults(){return Object.assign(Mt.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Di extends Mt{constructor(t){super(t),this.onended=Ht,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new ze({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(e){const i=this.toSeconds(e);return-1!==this._startTime&&i>=this._startTime&&(-1===this._stopTime||i<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(Mt.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Ht})}_startGain(t,e=1){ut(-1===this._startTime,"Source cannot be started more than once");const i=this.toSeconds(this._fadeIn);return this._startTime=t+i,this._startTime=Math.max(this._startTime,this.context.currentTime),i>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+i):this._gainNode.gain.exponentialApproachValueAtTime(e,t,i)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){ut(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();const e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.context.currentTime),e>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const i="exponential"===this._curve?2*e:0;this._stopSource(this.now()+i),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Ht&&(this.onended(this),this.onended=Ht,!this.context.isOffline)){const t=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(t):setTimeout(t,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),ut(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class Co extends Di{constructor(){super(H(Co.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const t=H(Co.getDefaults(),arguments,["offset"]);ss(this._source,this._gainNode),this.offset=new te({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(Di.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Se extends Mt{constructor(){super(H(Se.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const t=H(Se.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Co({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(Mt.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,i=0){return tc(this,t,e,i),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,i){return this._param.exponentialRampTo(t,e,i),this}linearRampTo(t,e,i){return this._param.linearRampTo(t,e,i),this}targetRampTo(t,e,i){return this._param.targetRampTo(t,e,i),this}exponentialApproachValueAtTime(t,e,i){return this._param.exponentialApproachValueAtTime(t,e,i),this}setTargetAtTime(t,e,i){return this._param.setTargetAtTime(t,e,i),this}setValueCurveAtTime(t,e,i,o){return this._param.setValueCurveAtTime(t,e,i,o),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,i){return this._param.rampTo(t,e,i),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function tc(r,t,e,i){(t instanceof te||Os(t)||t instanceof Se&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof Se&&(t.overridden=!0)),ss(r,t,e,i)}class yr extends te{constructor(){super(H(yr.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new En(1/0),this._multiplier=1;const t=H(yr.getDefaults(),arguments,["value"]);this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(te.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,i){e=this.toSeconds(e),this.setRampPoint(e);const o=this._fromType(t),c=this._events.get(e),u=Math.round(Math.max(1/i,1));for(let d=0;d<=u;d++){const h=i*d+e,f=this._exponentialApproach(c.time,c.value,o,i,h);this.linearRampToValueAtTime(this._toType(f),h)}return this}setValueAtTime(t,e){const i=this.toSeconds(e);super.setValueAtTime(t,e);const o=this._events.get(i),c=this._events.previousEvent(o),u=this._getTicksUntilEvent(c,i);return o.ticks=Math.max(u,0),this}linearRampToValueAtTime(t,e){const i=this.toSeconds(e);super.linearRampToValueAtTime(t,e);const o=this._events.get(i),c=this._events.previousEvent(o),u=this._getTicksUntilEvent(c,i);return o.ticks=Math.max(u,0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);const i=this._fromType(t),o=this._events.get(e),c=Math.round(Math.max(10*(e-o.time),1)),u=(e-o.time)/c;for(let d=0;d<=c;d++){const h=u*d+o.time,f=this._exponentialInterpolate(o.time,o.value,e,i,h);this.linearRampToValueAtTime(this._toType(f),h)}return this}_getTicksUntilEvent(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(un(t.ticks)){const u=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(u,t.time)}const i=this._fromType(this.getValueAtTime(t.time));let o=this._fromType(this.getValueAtTime(e));const c=this._events.get(e);return c&&c.time===e&&"setValueAtTime"===c.type&&(o=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(i+o)+t.ticks}getTicksAtTime(t){const e=this.toSeconds(t),i=this._events.get(e);return Math.max(this._getTicksUntilEvent(i,e),0)}getDurationOfTicks(t,e){const i=this.toSeconds(e),o=this.getTicksAtTime(e);return this.getTimeOfTick(o+t)-i}getTimeOfTick(t){const e=this._events.get(t,"ticks"),i=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&i&&"linearRampToValueAtTime"===i.type&&e.value!==i.value){const o=this._fromType(this.getValueAtTime(e.time)),u=(this._fromType(this.getValueAtTime(i.time))-o)/(i.time-e.time),d=Math.sqrt(Math.pow(o,2)-2*u*(e.ticks-t)),h=(-o+d)/u;return(h>0?h:(-o-d)/u)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){const i=this.toSeconds(e),o=this.toSeconds(t),c=this.getTicksAtTime(i);return this.getTicksAtTime(i+o)-c}_fromType(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class xr extends Se{constructor(){super(H(xr.getDefaults(),arguments,["value"])),this.name="TickSignal";const t=H(xr.getDefaults(),arguments,["value"]);this.input=this._param=new yr({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(Se.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class ko extends Ue{constructor(){super(H(ko.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new Ka,this._tickOffset=new En;const t=H(ko.getDefaults(),arguments,["frequency"]);this.frequency=new xr({context:this.context,units:t.units,value:t.frequency}),he(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Ue.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){const i=this.toSeconds(t);return"started"!==this._state.getValueAtTime(i)&&(this._state.setStateAtTime("started",i),Nt(e)&&this.setTicksAtTime(e,i)),this}stop(t){const e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){const i=this._state.get(e);i&&i.time>0&&(this._tickOffset.cancel(i.time),this._state.cancel(i.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&this._state.setStateAtTime("paused",e),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this}getTicksAtTime(t){const e=this.toSeconds(t),i=this._state.getLastState("stopped",e),o={state:"paused",time:e};this._state.add(o);let c=i,u=0;return this._state.forEachBetween(i.time,e+this.sampleTime,d=>{let h=c.time;const f=this._tickOffset.get(d.time);f&&f.time>=c.time&&(u=f.ticks,h=f.time),"started"===c.state&&"started"!==d.state&&(u+=this.frequency.getTicksAtTime(d.time)-this.frequency.getTicksAtTime(h)),c=d}),this._state.remove(o),u}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const e=this.now(),i=this.frequency.timeToTicks(t,e);this.setTicksAtTime(i,e)}getSecondsAtTime(t){t=this.toSeconds(t);const e=this._state.getLastState("stopped",t),i={state:"paused",time:t};this._state.add(i);let o=e,c=0;return this._state.forEachBetween(e.time,t+this.sampleTime,u=>{let d=o.time;const h=this._tickOffset.get(u.time);h&&h.time>=o.time&&(c=h.seconds,d=h.time),"started"===o.state&&"started"!==u.state&&(c+=u.time-d),o=u}),this._state.remove(i),c}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){const i=this._tickOffset.get(e),o=this._state.get(e),c=Math.max(i.time,o.time),u=this.frequency.getTicksAtTime(c)+t-i.ticks;return this.frequency.getTimeOfTick(u)}forEachTickBetween(t,e,i){let o=this._state.get(t);this._state.forEachBetween(t,e,u=>{o&&"started"===o.state&&"started"!==u.state&&this.forEachTickBetween(Math.max(o.time,t),u.time-this.sampleTime,i),o=u});let c=null;if(o&&"started"===o.state){const u=Math.max(o.time,t),d=this.frequency.getTicksAtTime(u),f=d-this.frequency.getTicksAtTime(o.time);let m=Math.ceil(f)-f;m=Nn(m,1)?0:m;let _=this.frequency.getTimeOfTick(d+m);for(;_<e;){try{i(_,Math.round(this.getTicksAtTime(_)))}catch(y){c=y;break}_+=this.frequency.getDurationOfTicks(1,_)}}if(c)throw c;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class ni extends Ue{constructor(){super(H(ni.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=Ht,this._lastUpdate=0,this._state=new Ka("stopped"),this._boundLoop=this._loop.bind(this);const t=H(ni.getDefaults(),arguments,["callback","frequency"]);this.callback=t.callback,this._tickSource=new ko({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,he(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Ue.getDefaults(),{callback:Ht,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){mo(this.context);const i=this.toSeconds(t);return this.log("start",i),"started"!==this._state.getValueAtTime(i)&&(this._state.setStateAtTime("started",i),this._tickSource.start(i,e),i<this._lastUpdate&&this.emit("start",i,e)),this}stop(t){const e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){const i=this.toSeconds(e),o=this.getTicksAtTime(i);return this._tickSource.getTimeOfTick(o+t,i)}_loop(){const t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,i=>{switch(i.state){case"started":const o=this._tickSource.getTicksAtTime(i.time);this.emit("start",i.time,o);break;case"stopped":0!==i.time&&this.emit("stop",i.time);break;case"paused":this.emit("pause",i.time)}}),this._tickSource.forEachTickBetween(t,e,(i,o)=>{this.callback(i,o)}))}getStateAtTime(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}_r.mixin(ni);class wr extends Dn{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=H(wr.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(e=>{this._loadingCount++,this.add(e,t.urls[e],this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Ht,onload:Ht,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return ut(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,0===this._loadingCount&&t&&t()}get loaded(){return Array.from(this._buffers).every(([t,e])=>e.loaded)}add(t,e,i=Ht,o=Ht){return Zn(e)?this._buffers.set(t.toString(),new ts(this.baseUrl+e,i,o)):this._buffers.set(t.toString(),new ts(e,i,o)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}}class pn extends tn{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class is extends Ue{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new En,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=t;){const e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}wo(r=>{r.draw=new is({context:r})}),gr(r=>{r.draw.dispose()});class si extends Dn{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){ut(Nt(t.time),"Events must have a time property"),ut(Nt(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new rf(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(null!==this._root){const e=[];this._root.search(t.time,e);for(const i of e)if(i.event===t){this._removeNode(i),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,e=>this.remove(e)),this}_setRoot(t){this._root=t,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{let i,o=null;if(t.getBalance()>0)if(null===t.left.right)i=t.left,i.right=t.right,o=i;else{for(i=t.left.right;null!==i.right;)i=i.right;i.parent&&(i.parent.right=i.left,o=i.parent,i.left=t.left,i.right=t.right)}else if(null===t.right.left)i=t.right,i.left=t.left,o=i;else{for(i=t.right.left;null!==i.left;)i=i.left;i.parent&&(i.parent.left=i.right,o=i.parent,i.left=t.left,i.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=i:t.parent.right=i:this._setRoot(i),o&&this._rebalance(o)}t.dispose()}_rotateLeft(t){const e=t.parent,i=t.isLeftChild(),o=t.right;o&&(t.right=o.left,o.left=t),null!==e?i?e.left=o:e.right=o:this._setRoot(o)}_rotateRight(t){const e=t.parent,i=t.isLeftChild(),o=t.left;o&&(t.left=o.right,o.right=t),null!==e?i?e.left=o:e.right=o:this._setRoot(o)}_rebalance(t){const e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(null!==this._root){const e=[];if(this._root.search(t,e),e.length>0){let i=e[0];for(let o=1;o<e.length;o++)e[o].low>i.low&&(i=e[o]);return i.event}}return null}forEach(t){if(null!==this._root){const e=[];this._root.traverse(i=>e.push(i)),e.forEach(i=>{i.event&&t(i.event)})}return this}forEachAtTime(t,e){if(null!==this._root){const i=[];this._root.search(t,i),i.forEach(o=>{o.event&&e(o.event)})}return this}forEachFrom(t,e){if(null!==this._root){const i=[];this._root.searchAfter(t,i),i.forEach(o=>{o.event&&e(o.event)})}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse(t=>t.dispose()),this._root=null,this}}class rf{constructor(t,e,i){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=i,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),!(this.low>t)&&null!==this.right&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)}traverse(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)}updateHeight(){this.height=null!==this.left&&null!==this.right?Math.max(this.left.height,this.right.height)+1:null!==this.right?this.right.height+1:null!==this.left?this.left.height+1:0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Ns extends Mt{constructor(){super(H(Ns.getDefaults(),arguments,["volume"])),this.name="Volume";const t=H(Ns.getDefaults(),arguments,["volume"]);this.input=this.output=new ze({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,he(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(Mt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Eo extends Mt{constructor(){super(H(Eo.getDefaults(),arguments)),this.name="Destination",this.input=new Ns({context:this.context}),this.output=new ze({context:this.context}),this.volume=this.input.volume;const t=H(Eo.getDefaults(),arguments);Ja(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(Mt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),Ja(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}wo(r=>{r.destination=new Eo({context:r})}),gr(r=>{r.destination.dispose()});class of extends Dn{constructor(t){super(),this.name="TimelineValue",this._timeline=new En({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){const e=this._timeline.get(t);return e?e.value:this._initialValue}}let Fo=(()=>{class r{constructor(e,i){this.id=r._eventId++;const o=Object.assign(r.getDefaults(),i);this.transport=e,this.callback=o.callback,this._once=o.once,this.time=o.time}static getDefaults(){return{callback:Ht,once:!1,time:0}}invoke(e){this.callback&&(this.callback(e),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}return r._eventId=0,r})();class ec extends Fo{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const i=Object.assign(ec.getDefaults(),e);this.duration=new pn(t.context,i.duration).valueOf(),this._interval=new pn(t.context,i.interval).valueOf(),this._nextTick=i.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Fo.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvents(t){const e=this.transport.getTicksAtTime(t);e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new pn(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const e=this.transport.getTicksAtTime(t);e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new pn(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new pn(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class Tr extends Ue{constructor(){super(H(Tr.getDefaults(),arguments)),this.name="Transport",this._loop=new of(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new En,this._repeatedEvents=new si,this._syncedSignals=[],this._swingAmount=0;const t=H(Tr.getDefaults(),arguments);this._ppq=t.ppq,this._clock=new ni({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),he(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(Ue.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!=0&&e%(2*this._swingTicks)!=0){const o=Math.sin(e%(2*this._swingTicks)/(2*this._swingTicks)*Math.PI)*this._swingAmount;t+=new pn(this.context,2*this._swingTicks/3).toSeconds()*o}this._timeline.forEachAtTime(e,i=>i.invoke(t))}schedule(t,e){const i=new Fo(this,{callback:t,time:new tn(this.context,e).toTicks()});return this._addEvent(i,this._timeline)}scheduleRepeat(t,e,i,o=1/0){const c=new ec(this,{callback:t,duration:new fn(this.context,o).toTicks(),interval:new fn(this.context,e).toTicks(),time:new tn(this.context,i).toTicks()});return this._addEvent(c,this._repeatedEvents)}scheduleOnce(t,e){const i=new Fo(this,{callback:t,once:!0,time:new tn(this.context,e).toTicks()});return this._addEvent(i,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){const e=this.toTicks(t);return this._timeline.forEachFrom(e,i=>this.clear(i.id)),this._repeatedEvents.forEachFrom(e,i=>this.clear(i.id)),this}_bindClockEvents(){this._clock.on("start",(t,e)=>{e=new pn(this.context,e).toSeconds(),this.emit("start",t,e)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){let i;return Nt(e)&&(i=this.toTicks(e)),this._clock.start(t,i),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){On(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new fn(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new fn(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new pn(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),e=this._clock.getTicksAtTime(t);return new pn(this.context,e).toBarsBeatsSixteenths()}set position(t){const e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){const e=this.now(),i=this._clock.frequency.timeToTicks(t,e);this.ticks=i}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const e=this.now();if("started"===this.state){const i=this._clock.getTicksAtTime(e),c=e+this._clock.frequency.getDurationOfTicks(Math.ceil(i)-i,e);this.emit("stop",c),this._clock.setTicksAtTime(t,c),this.emit("start",c,this._clock.getSecondsAtTime(c))}else this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return Math.round(this._clock.getTicksAtTime(t))}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),"started"!==this.state)return 0;{const e=this.now(),i=this.getTicksAtTime(e);return this._clock.nextTickTime(t-i%t,e)}}syncSignal(t,e){if(!e){const o=this.now();if(0!==t.getValueAtTime(o)){const u=1/(60/this.bpm.getValueAtTime(o)/this.PPQ);e=t.getValueAtTime(o)/u}else e=0}const i=new ze(e);return this.bpm.connect(i),i.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:i,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){const i=this._syncedSignals[e];i.signal===t&&(i.ratio.dispose(),i.signal.value=i.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Il(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}_r.mixin(Tr),wo(r=>{r.transport=new Tr({context:r})}),gr(r=>{r.transport.dispose()});class mn extends Mt{constructor(t){super(t),this.input=void 0,this._state=new Ka("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Ht,this._syncedStop=Ht,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Ns({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,he(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(Mt.getDefaults(),{mute:!1,onstop:Ht,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,i){let o=un(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(o=this._clampToCurrentTime(o),this._synced||"started"!==this._state.getValueAtTime(o))if(this.log("start",o),this._state.setStateAtTime("started",o),this._synced){const c=this._state.get(o);c&&(c.offset=this.toSeconds(ti(e,0)),c.duration=i?this.toSeconds(i):void 0);const u=this.context.transport.schedule(d=>{this._start(d,e,i)},o);this._scheduled.push(u),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>o&&this._syncedStart(this.now(),this.context.transport.seconds)}else mo(this.context),this._start(o,e,i);else ut(dr(o,this._state.get(o).time),"Start time must be strictly greater than previous start time"),this._state.cancel(o),this._state.setStateAtTime("started",o),this.log("restart",o),this.restart(o,e,i);return this}stop(t){let e=un(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),"started"===this._state.getValueAtTime(e)||Nt(this._state.getNextState("started",e))){if(this.log("stop",e),this._synced){const i=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(i)}else this._stop(e);this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,i){return t=this.toSeconds(t),"started"===this._state.getValueAtTime(t)&&(this._state.cancel(t),this._restart(t,e,i)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(e>0){const i=this._state.get(e);if(i&&"started"===i.state&&i.time!==e){const o=e-this.toSeconds(i.time);let c;i.duration&&(c=this.toSeconds(i.duration)-o),this._start(t,this.toSeconds(i.offset)+o,c)}}},this._syncedStop=t=>{const e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));"started"===this._state.getValueAtTime(e)&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Ht,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class br extends Di{constructor(){super(H(br.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const t=H(br.getDefaults(),arguments,["url","onload"]);ss(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new te({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new ts(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Di.getDefaults(),{url:new ts,loop:!1,loopEnd:0,loopStart:0,onload:Ht,onerror:Ht,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,i,o=1){ut(this.buffer.loaded,"buffer is either not set or not loaded");const c=this.toSeconds(t);this._startGain(c,o),e=ti(e,this.loop?this.loopStart:0);let u=Math.max(this.toSeconds(e),0);if(this.loop){const d=this.toSeconds(this.loopEnd)||this.buffer.duration,h=this.toSeconds(this.loopStart),f=d-h;yo(u,d)&&(u=(u-h)%f+h),Nn(u,this.buffer.duration)&&(u=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,fr(u,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(c,u)),Nt(i)){let d=this.toSeconds(i);d=Math.max(d,0),this.stop(c+d)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function Es(r,t){return(0,Vt.mG)(this,void 0,void 0,function*(){const e=t/r.context.sampleRate,i=new Ha(1,e,r.context.sampleRate);return new r.constructor(Object.assign(r.get(),{frequency:2/e,detune:0,context:i})).toDestination().start(0),(yield i.render()).getChannelData(0)})}class Mo extends Di{constructor(){super(H(Mo.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const t=H(Mo.getDefaults(),arguments,["frequency","type"]);ss(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new te({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new te({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),he(this,["frequency","detune"])}static getDefaults(){return Object.assign(Di.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}let Fn=(()=>{class r extends mn{constructor(){super(H(r.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=H(r.getDefaults(),arguments,["frequency","type"]);this.frequency=new Se({context:this.context,units:"frequency",value:e.frequency}),he(this,"frequency"),this.detune=new Se({context:this.context,units:"cents",value:e.detune}),he(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&"custom"!==e.type&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(mn.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const i=this.toSeconds(e),o=new Mo({context:this.context,onended:()=>this.onstop(this)});this._oscillator=o,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(i)}_stop(e){const i=this.toSeconds(e);this._oscillator&&this._oscillator.stop(i)}_restart(e){const i=this.toSeconds(e);return this.log("restart",i),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(i),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type)return r._periodicWaveCache.find(i=>i.phase===this._phase&&function Fl(r,t){return r.length===t.length&&r.every((e,i)=>t[i]===e)}(i.partials,this._partials));{const e=r._periodicWaveCache.find(i=>i.type===this._type&&i.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const i=-1!==["sine","square","sawtooth","triangle"].indexOf(e);if(0===this._phase&&i)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=e);else{const o=this._getCachedPeriodicWave();if(Nt(o)){const{partials:c,wave:u}=o;this._wave=u,this._partials=c,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{const[c,u]=this._getRealImaginary(e,this._phase),d=this.context.createPeriodicWave(c,u);this._wave=d,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),r._periodicWaveCache.push({imag:u,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:c,type:this._type,wave:this._wave}),r._periodicWaveCache.length>100&&r._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.type=this.partialCount&&"custom"!==this._type&&"custom"!==e?e+this.partialCount:e}get partialCount(){return this._partialCount}set partialCount(e){He(e,0);let i=this._type;const o=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(o&&(i=o[1]),"custom"!==this._type)this.type=0===e?i:i+e.toString();else{const c=new Float32Array(e);this._partials.forEach((u,d)=>c[d]=u),this._partials=Array.from(c),this.type=this._type}}_getRealImaginary(e,i){let c=2048;const u=new Float32Array(c),d=new Float32Array(c);let h=1;if("custom"===e){if(h=this._partials.length+1,this._partialCount=this._partials.length,c=h,0===this._partials.length)return[u,d]}else{const f=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);f?(h=parseInt(f[2],10)+1,this._partialCount=parseInt(f[2],10),e=f[1],h=Math.max(h,2),c=h):this._partialCount=0,this._partials=[]}for(let f=1;f<c;++f){const m=2/(f*Math.PI);let _;switch(e){case"sine":_=f<=h?1:0,this._partials[f-1]=_;break;case"square":_=1&f?2*m:0,this._partials[f-1]=_;break;case"sawtooth":_=m*(1&f?1:-1),this._partials[f-1]=_;break;case"triangle":_=1&f?m*m*2*(f-1>>1&1?-1:1):0,this._partials[f-1]=_;break;case"custom":_=this._partials[f-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}0!==_?(u[f]=-_*Math.sin(i*f),d[f]=_*Math.cos(i*f)):(u[f]=0,d[f]=0)}return[u,d]}_inverseFFT(e,i,o){let c=0;const u=e.length;for(let d=0;d<u;d++)c+=e[d]*Math.cos(d*o)+i[d]*Math.sin(d*o);return c}getInitialValue(){const[e,i]=this._getRealImaginary(this._type,0);let o=0;const c=2*Math.PI;for(let d=0;d<32;d++)o=Math.max(this._inverseFFT(e,i,d/32*c),o);return function xo(r,t,e){return Math.max(Math.min(r,e),t)}(-this._inverseFFT(e,i,this._phase)/o,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return(0,Vt.mG)(this,void 0,void 0,function*(){return Es(this,e)})}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}return r._periodicWaveCache=[],r})();class Ro extends Mt{constructor(){super(Object.assign(H(Ro.getDefaults(),arguments,["context"])))}connect(t,e=0,i=0){return tc(this,t,e,i),this}}class Fi extends Ro{constructor(){super(Object.assign(H(Fi.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const t=H(Fi.getDefaults(),arguments,["mapping","length"]);On(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):function za(r){return"function"==typeof r}(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(Se.getDefaults(),{length:1024})}setMap(t,e=1024){const i=new Float32Array(e);for(let o=0,c=e;o<c;o++)i[o]=t(o/(c-1)*2-1,o);return this.curve=i,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){ut(["none","2x","4x"].some(i=>i.includes(t)),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class af extends Ro{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Fi({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class ii extends Se{constructor(){super(Object.assign(H(ii.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const t=H(ii.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new ze({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Se.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Sr extends mn{constructor(){super(H(Sr.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new af({context:this.context}),this._modulationNode=new ze({context:this.context});const t=H(Sr.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Fn({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Fn({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new ii({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),he(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Fn.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return(0,Vt.mG)(this,void 0,void 0,function*(){return Es(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Ar extends mn{constructor(){super(H(Ar.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new ze({context:this.context,gain:0});const t=H(Ar.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Fn({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new Se({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new Fn({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new ii({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new ii({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),he(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Fn.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return(0,Vt.mG)(this,void 0,void 0,function*(){return Es(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Mi extends mn{constructor(){super(H(Mi.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new ze({context:this.context,gain:0}),this._thresh=new Fi({context:this.context,mapping:e=>e<=0?-1:1});const t=H(Mi.getDefaults(),arguments,["frequency","width"]);this.width=new Se({context:this.context,units:"audioRange",value:t.width}),this._triangle=new Fn({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),he(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(mn.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(t=1024){return(0,Vt.mG)(this,void 0,void 0,function*(){return Es(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Cr extends mn{constructor(){super(H(Cr.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const t=H(Cr.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new Se({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Se({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,he(this,["frequency","detune"])}static getDefaults(){return Object.assign(Fn.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(e=>e.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(e=>e.stop(t))}_restart(t){this._forEach(e=>e.restart(t))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach(e=>e.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const e=-t/2,i=t/(this._oscillators.length-1);this._forEach((o,c)=>o.detune.value=e+i*c)}}get count(){return this._oscillators.length}set count(t){if(He(t,1),this._oscillators.length!==t){this._forEach(e=>e.dispose()),this._oscillators=[];for(let e=0;e<t;e++){const i=new Fn({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:0===e?()=>this.onstop(this):Ht});"custom"===this.type&&(i.partials=this._partials),this.frequency.connect(i.frequency),this.detune.connect(i.detune),i.detune.overridden=!1,i.connect(this.output),this._oscillators[e]=i}this.spread=this._spread,"started"===this.state&&this._forEach(e=>e.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((e,i)=>e.phase=this._phase+i/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(e=>e.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(e=>e.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(e=>e.partialCount=t),this._type=this._oscillators[0].type}asArray(t=1024){return(0,Vt.mG)(this,void 0,void 0,function*(){return Es(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}class je extends mn{constructor(){super(H(je.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new ii({context:this.context,value:2});const t=H(je.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new Mi({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Fn({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),he(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(mn.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(t=1024){return(0,Vt.mG)(this,void 0,void 0,function*(){return Es(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Pl={am:Sr,fat:Cr,fm:Ar,oscillator:Fn,pulse:Mi,pwm:je};class kr extends mn{constructor(){super(H(kr.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const t=H(kr.getDefaults(),arguments,["frequency","type"]);this.frequency=new Se({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Se({context:this.context,units:"cents",value:t.detune}),he(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(Fn.getDefaults(),Ar.getDefaults(),Sr.getDefaults(),Cr.getDefaults(),Mi.getDefaults(),je.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(e=>this._sourceType===e)&&(t=this._sourceType),t+this._oscillator.type}set type(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const e=Pl[t],i=this.now();if(this._oscillator){const o=this._oscillator;o.stop(i),this.context.setTimeout(()=>o.dispose(),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(i)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")}_getOscType(t,e){return t instanceof Pl[e]}get baseType(){return this._oscillator.baseType}set baseType(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&"pulse"!==t&&"pwm"!==t&&(this._oscillator.baseType=t)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(t){this._getOscType(this._oscillator,"fat")&&Ke(t)&&(this._oscillator.count=t)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(t){this._getOscType(this._oscillator,"fat")&&Ke(t)&&(this._oscillator.spread=t)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Zn(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(t=1024){return(0,Vt.mG)(this,void 0,void 0,function*(){return Es(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function Wl(r,t=1/0){const e=new WeakMap;return function(i,o){Reflect.defineProperty(i,o,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(c){He(c,r,t),e.set(this,c)}})}}function ds(r,t=1/0){const e=new WeakMap;return function(i,o){Reflect.defineProperty(i,o,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(c){He(this.toSeconds(c),r,t),e.set(this,c)}})}}class ri extends mn{constructor(){super(H(ri.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const t=H(ri.getDefaults(),arguments,["url","onload"]);this._buffer=new ts({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(mn.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Ht,onerror:Ht,playbackRate:1,reverse:!1})}load(t){return(0,Vt.mG)(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}_onload(t=Ht){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),0===this._activeSources.size&&!this._synced&&"started"===this._state.getValueAtTime(this.now())&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,i){return super.start(t,e,i),this}_start(t,e,i){e=ti(e,this._loop?this._loopStart:0);const o=this.toSeconds(e),c=i;i=ti(i,Math.max(this._buffer.duration-o,0));let u=this.toSeconds(i);u/=this._playbackRate,t=this.toSeconds(t);const d=new br({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(t+u),this._state.setStateAtTime("stopped",t+u,{implicitEnd:!0})),this._activeSources.add(d),this._loop&&un(c)?d.start(t,o):d.start(t,o,u-this.toSeconds(this.fadeOut))}_stop(t){const e=this.toSeconds(t);this._activeSources.forEach(i=>i.stop(e))}restart(t,e,i){return super.restart(t,e,i),this}_restart(t,e,i){this._stop(t),this._start(t,e,i)}seek(t,e){const i=this.toSeconds(e);if("started"===this._state.getValueAtTime(i)){const o=this.toSeconds(t);this._stop(i),this._start(i,o)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&He(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&He(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(e=>{e.loop=t}),t)){const e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const e=this.now(),i=this._state.getNextState("stopped",e);i&&i.implicitEnd&&(this._state.cancel(i.time),this._activeSources.forEach(o=>o.cancelStop())),this._activeSources.forEach(o=>{o.playbackRate.setValueAtTime(t,e)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}(0,Vt.gn)([ds(0)],ri.prototype,"fadeIn",void 0),(0,Vt.gn)([ds(0)],ri.prototype,"fadeOut",void 0);class fs extends Mt{constructor(){super(H(fs.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new Se({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const t=H(fs.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(Mt.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(Zn(t))return t;{let i;for(i in qo)if(qo[i][e]===t)return i;return t}}_setCurve(t,e,i){if(Zn(i)&&Reflect.has(qo,i)){const o=qo[i];Ks(o)?"_decayCurve"!==t&&(this[t]=o[e]):this[t]=o}else{if(!On(i)||"_decayCurve"===t)throw new Error("Envelope: invalid curve: "+i);this[t]=i}}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._decayCurve}set decayCurve(t){ut(["linear","exponential"].some(e=>e===t),`Invalid envelope curve: ${t}`),this._decayCurve=t}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);let o=this.toSeconds(this.attack);const c=this.toSeconds(this.decay),u=this.getValueAtTime(t);if(u>0&&(o=(1-u)/(1/o)),o<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,o,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,o,t);else{this._sig.cancelAndHoldAtTime(t);let d=this._attackCurve;for(let h=1;h<d.length;h++)if(d[h-1]<=u&&u<=d[h]){d=this._attackCurve.slice(h),d[0]=u;break}this._sig.setValueCurveAtTime(d,t,o,e)}if(c&&this.sustain<1){const d=e*this.sustain,h=t+o;this.log("decay",h),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(d,c+h):this._sig.exponentialApproachValueAtTime(d,h,c)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const e=this.getValueAtTime(t);if(e>0){const i=this.toSeconds(this.release);i<this.sampleTime?this._sig.setValueAtTime(0,t):"linear"===this._releaseCurve?this._sig.linearRampTo(0,i,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,i,t):(ut(On(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,i,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,i=1){return e=this.toSeconds(e),this.triggerAttack(e,i),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,i=0){return tc(this,t,e,i),this}asArray(t=1024){return(0,Vt.mG)(this,void 0,void 0,function*(){const e=t/this.context.sampleRate,i=new Ha(1,e,this.context.sampleRate),o=this.toSeconds(this.attack)+this.toSeconds(this.decay),c=o+this.toSeconds(this.release),u=.1*c,d=c+u,h=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/d,decay:e*this.toSeconds(this.decay)/d,release:e*this.toSeconds(this.release)/d,context:i}));return h._sig.toDestination(),h.triggerAttackRelease(e*(o+u)/d,0),(yield i.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}(0,Vt.gn)([ds(0)],fs.prototype,"attack",void 0),(0,Vt.gn)([ds(0)],fs.prototype,"decay",void 0),(0,Vt.gn)([Wl(0,1)],fs.prototype,"sustain",void 0),(0,Vt.gn)([ds(0)],fs.prototype,"release",void 0);const qo=(()=>{let t,e;const i=[];for(t=0;t<128;t++)i[t]=Math.sin(t/127*(Math.PI/2));const o=[];for(t=0;t<127;t++){e=t/127;const y=Math.sin(e*(2*Math.PI)*6.4-Math.PI/2)+1;o[t]=y/10+.83*e}o[127]=1;const u=[];for(t=0;t<128;t++)u[t]=Math.ceil(t/127*5)/5;const h=[];for(t=0;t<128;t++)e=t/127,h[t]=.5*(1-Math.cos(Math.PI*e));const f=[];for(t=0;t<128;t++){e=t/127;const y=4*Math.pow(e,3)+.2,b=Math.cos(y*Math.PI*2*e);f[t]=Math.abs(b*(1-e))}function m(y){const b=new Array(y.length);for(let w=0;w<y.length;w++)b[w]=1-y[w];return b}return{bounce:{In:m(f),Out:f},cosine:{In:i,Out:function _(y){return y.slice(0).reverse()}(i)},exponential:"exponential",linear:"linear",ripple:{In:o,Out:m(o)},sine:{In:h,Out:m(h)},step:{In:u,Out:m(u)}}})();class oi extends Mt{constructor(){super(H(oi.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const t=H(oi.getDefaults(),arguments);this._volume=this.output=new Ns({context:this.context,volume:t.volume}),this.volume=this._volume.volume,he(this,"volume")}static getDefaults(){return Object.assign(Mt.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){const i=this["_original_"+t]=this[t];this[t]=(...o)=>{const u=this.context.transport.schedule(d=>{o[e]=d,i.apply(this,o)},o[e]);this._scheduledEvents.push(u)}}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(t,e,i,o){const c=this.toSeconds(i),u=this.toSeconds(e);return this.triggerAttack(t,c,o),this.triggerRelease(c+u),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class ai extends oi{constructor(){super(H(ai.getDefaults(),arguments));const t=H(ai.getDefaults(),arguments);this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(oi.getDefaults(),{detune:0,onsilence:Ht,portamento:0})}triggerAttack(t,e,i=1){this.log("triggerAttack",t,e,i);const o=this.toSeconds(e);return this._triggerEnvelopeAttack(o,i),this.setNote(t,o),this}triggerRelease(t){this.log("triggerRelease",t);const e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){const i=this.toSeconds(e),o=t instanceof Je?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(i)>.05){const c=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(o,c,i)}else this.frequency.setValueAtTime(o,i);return this}}(0,Vt.gn)([ds(0)],ai.prototype,"portamento",void 0);class hc extends fs{constructor(){super(H(hc.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new ze({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Or extends ai{constructor(){super(H(Or.getDefaults(),arguments)),this.name="Synth";const t=H(Or.getDefaults(),arguments);this.oscillator=new kr(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new hc(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),he(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(ai.getDefaults(),{envelope:Object.assign(ei(fs.getDefaults(),Object.keys(Mt.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(ei(kr.getDefaults(),[...Object.keys(mn.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain){const i=this.toSeconds(this.envelope.attack),o=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+i+o)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Nr extends Or{constructor(){super(H(Nr.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const t=H(Nr.getDefaults(),arguments);this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,he(this,["oscillator","envelope"])}static getDefaults(){return Qn(ai.getDefaults(),Or.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){const i=this.toSeconds(e),o=this.toFrequency(t instanceof Je?t.toFrequency():t);return this.oscillator.frequency.setValueAtTime(o*this.octaves,i),this.oscillator.frequency.exponentialRampToValueAtTime(o,i+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}(0,Vt.gn)([Wl(0)],Nr.prototype,"octaves",void 0),(0,Vt.gn)([ds(0)],Nr.prototype,"pitchDecay",void 0);const yc=new Set;function Lo(r){yc.add(r)}function jl(r,t){yc.add(`registerProcessor("${r}", ${t})`)}Lo('\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n'),Lo("\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n"),Lo("\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n"),jl("feedback-comb-filter",'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');class Ri extends oi{constructor(){super(H(Ri.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const t=H(Ri.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),e={};Object.keys(t.urls).forEach(i=>{const o=parseInt(i,10);if(ut(ki(i)||Ke(o)&&isFinite(o),`url key is neither a note or midi pitch: ${i}`),ki(i)){const c=new Je(this.context,i).toMidi();e[c]=t.urls[i]}else Ke(o)&&isFinite(o)&&(e[o]=t.urls[o])}),this._buffers=new wr({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(oi.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Ht,onerror:Ht,release:.1,urls:{}})}_findClosest(t){let i=0;for(;i<96;){if(this._buffers.has(t+i))return-i;if(this._buffers.has(t-i))return i;i++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,i=1){return this.log("triggerAttack",t,e,i),Array.isArray(t)||(t=[t]),t.forEach(o=>{const c=We(new Je(this.context,o).toFrequency()),u=Math.round(c),d=c-u,h=this._findClosest(u),m=this._buffers.get(u-h),_=So(h+d),y=new br({url:m,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:_}).connect(this.output);y.start(e,0,m.duration/_,i),On(this._activeSources.get(u))||this._activeSources.set(u,[]),this._activeSources.get(u).push(y),y.onended=()=>{if(this._activeSources&&this._activeSources.has(u)){const b=this._activeSources.get(u),w=b.indexOf(y);-1!==w&&b.splice(w,1)}}}),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach(i=>{const o=new Je(this.context,i).toMidi();if(this._activeSources.has(o)&&this._activeSources.get(o).length){const c=this._activeSources.get(o);e=this.toSeconds(e),c.forEach(u=>{u.stop(e)}),this._activeSources.set(o,[])}}),this}releaseAll(t){const e=this.toSeconds(t);return this._activeSources.forEach(i=>{for(;i.length;)i.shift().stop(e)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,i,o=1){const c=this.toSeconds(i);return this.triggerAttack(t,c,o),On(e)?(ut(On(t),"notes must be an array when duration is array"),t.forEach((u,d)=>{const h=e[Math.min(d,e.length-1)];this.triggerRelease(u,c+this.toSeconds(h))})):this.triggerRelease(t,c+this.toSeconds(e)),this}add(t,e,i){if(ut(ki(t)||isFinite(t),`note must be a pitch or midi: ${t}`),ki(t)){const o=new Je(this.context,t).toMidi();this._buffers.add(o,e,i)}else this._buffers.add(t,e,i);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(e=>e.dispose())}),this._activeSources.clear(),this}}(0,Vt.gn)([ds(0)],Ri.prototype,"attack",void 0),(0,Vt.gn)([ds(0)],Ri.prototype,"release",void 0);class Go extends Mt{constructor(){super(Object.assign(H(Go.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const t=H(Go.getDefaults(),arguments,["pan"]);this.pan=new te({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",he(this,"pan")}static getDefaults(){return Object.assign(Mt.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}jl("bit-crusher","\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n");class Wt extends Mt{constructor(){super(H(Wt.getDefaults(),arguments,["solo"])),this.name="Solo";const t=H(Wt.getDefaults(),arguments,["solo"]);this.input=this.output=new ze({context:this.context}),Wt._allSolos.has(this.context)||Wt._allSolos.set(this.context,new Set),Wt._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(Mt.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),Wt._allSolos.get(this.context).forEach(e=>e._updateSolo())}get muted(){return 0===this.input.gain.value}_addSolo(){Wt._soloed.has(this.context)||Wt._soloed.set(this.context,new Set),Wt._soloed.get(this.context).add(this)}_removeSolo(){Wt._soloed.has(this.context)&&Wt._soloed.get(this.context).delete(this)}_isSoloed(){return Wt._soloed.has(this.context)&&Wt._soloed.get(this.context).has(this)}_noSolos(){return!Wt._soloed.has(this.context)||Wt._soloed.has(this.context)&&0===Wt._soloed.get(this.context).size}_updateSolo(){this.input.gain.value=this._isSoloed()||this._noSolos()?1:0}dispose(){return super.dispose(),Wt._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Wt._allSolos=new Map,Wt._soloed=new Map;class Ho extends Mt{constructor(){super(H(Ho.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const t=H(Ho.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Go({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Ns({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,he(this,["pan","volume"])}static getDefaults(){return Object.assign(Mt.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class ci extends Mt{constructor(){super(H(ci.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const t=H(ci.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Wt({solo:t.solo,context:this.context}),this._panVol=this.output=new Ho({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),he(this,["pan","volume"])}static getDefaults(){return Object.assign(Mt.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return ci.buses.has(t)||ci.buses.set(t,new ze({context:this.context})),ci.buses.get(t)}send(t,e=0){const i=this._getBus(t),o=new ze({context:this.context,units:"decibels",gain:e});return this.connect(o),o.connect(i),o}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}ci.buses=new Map;class hf extends Mt{constructor(){super(...arguments),this.name="Listener",this.positionX=new te({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new te({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new te({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new te({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new te({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new te({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new te({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new te({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new te({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(Mt.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}wo(r=>{r.listener=new hf({context:r})}),gr(r=>{r.listener.dispose()}),dn();const Yo=dn().destination;dn(),dn(),dn();const Xo=dn();function Jl(){return ts.loaded()}let Ko=(()=>{class r{constructor(){this.chordProgressionActive=(0,k.tdS)(!1),this.melodyActive=(0,k.tdS)(!1)}start(){(function To(){Ds.resume()})(),Yo.volume.value=-5,this.sampler=new Ri({urls:{C6:"C6.mp3","D#6":"Ds6.mp3","F#6":"Fs6.mp3",A6:"A6.mp3",C5:"C5.mp3","D#5":"Ds5.mp3","F#5":"Fs5.mp3",A5:"A5.mp3",C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3",C3:"C3.mp3","D#3":"Ds3.mp3","F#3":"Fs3.mp3",A3:"A3.mp3",C2:"C2.mp3","D#2":"Ds2.mp3","F#2":"Fs2.mp3",A2:"A2.mp3",C1:"C1.mp3","D#1":"Ds1.mp3","F#1":"Fs1.mp3",A1:"A1.mp3",A0:"A0.mp3"},release:.5,baseUrl:"https://tonejs.github.io/audio/salamander/"}).toDestination()}setProgressionActive(){this.chordProgressionActive.set(!0)}setProgressionPassive(){this.chordProgressionActive.set(!1)}setMelodyActive(){this.melodyActive.set(!0)}setMelodyPassive(){this.melodyActive.set(!1)}playNote(e,i=0,o=.3){"suspended"!==Xo.state&&Jl().then(()=>{this.sampler.triggerAttackRelease(e,o,Xo.currentTime+i)})}playMelody(e,i=.3,o=.3){this.melodyActive()||(this.setMelodyActive(),e.forEach((c,u)=>{this.playNote(c,u*i,o)}),setTimeout(()=>{this.setMelodyPassive()},1e3*i*(e.length-1)+1e3*o))}playChord(e,i=0,o=.5){"suspended"!==Xo.state&&Jl().then(()=>{this.sampler.triggerAttackRelease(e,o,Xo.currentTime+i)})}playProgression(e,i=.3,o=.3){this.chordProgressionActive()||(this.setProgressionActive(),e.forEach((c,u)=>{this.playChord(c,u*i,o)},(e.length-1)*i+o),setTimeout(()=>{this.setProgressionPassive()},1e3*i*(e.length-1)+1e3*o))}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=k.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),th=(()=>{class r{constructor(e){this.audioSrv=e,this.notes=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],this.solfegeList=["Do","Ra","Re","Me","Mi","Fa","Se","So","Le","La","Te","Ti"],this.octaves=["0","1","2","3","4","5","6"],this.selectedNoteList=(0,k.tdS)(["C4","D4","E4","F4","G4","A4","B4"]),this.selectedSolfegeList=(0,k.tdS)(["Do","Re","Mi","Fa","So","La","Ti"]),this.selectedRandomNote=(0,k.tdS)("C"),this.selectedRootNote=(0,k.tdS)("C"),this.possibleRandomNoteIndices=(0,k.tdS)(Ut.range(this.selectedNoteList().length)),this.randomizerWorkingOctave=3,this.randomizeWorkingKey()}randomizeWorkingKey(e=Ut.range(this.selectedNoteList().length)){const i=this.notes[Math.floor(Math.random()*this.notes.length)];this.selectedRootNote.set(i),this.selectedNoteList.set(this.getKeyNotesForOctave(i,this.randomizerWorkingOctave)),this.setRandomNote(i,{low:2,high:this.octaves.length-1},e)}setRandomNote(e,i,o=Ut.range(this.selectedNoteList().length)){if(i.low>i.high||i.low<0||i.low>this.octaves.length-1||i.high<0||i.high>this.octaves.length-1)throw new Error("Invalid octave range!");this.possibleRandomNoteIndices.set(o);const c=this.getKey(e),u=c[o[Math.floor(Math.random()*c.length)%o.length]];this.selectedRandomNote.set(u+this.octaves[i.low+Math.floor(Math.random()*Math.min(this.octaves.length,i.high-i.low))])}getKeyNotesForOctave(e,i){const o=this.getKey(e).map(c=>{const u=this.getKey(e);var d=this.notes.length;return u.forEach(h=>{this.notes.indexOf(h)<d&&(d=this.notes.indexOf(h))}),u.indexOf(c)<u.indexOf(this.notes[d])?c+this.octaves[i]:c+this.octaves[i+1]});return o.push(o[0].slice(0,-1)+this.octaves[this.octaves.indexOf(o[0].slice(-1))+1]),o}getKey(e,i=[0,2,4,5,7,9,11]){this.notes.indexOf(e);var o=[],c=[];return i.forEach(u=>{o.push(this.notes[(this.notes.indexOf(e)+u)%this.notes.length]),c.push(this.solfegeList[u]),this.selectedSolfegeList.set(c)}),o}}return r.\u0275fac=function(e){return new(e||r)(k.LFG(Ko))},r.\u0275prov=k.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),eu=(()=>{class r{constructor(e){this.keySrv=e,this.questions=(0,k.tdS)([]),this.state=(0,k.tdS)(Re.FirstInit),this.questionCount=20,this.activeQuestion=0,this.SessionState=Re,this.selectedKey=(0,k.Flj)(()=>this.keySrv.selectedNoteList().map(i=>i.slice(0,-1))),this.activeQuestionState={},this.canProceedToTheNextQuestion=!1,this.results={},this.correctGuess=!1}startSession(e=20){if(this.state()===Re.Active)throw new Error("Session already active");this.state.set(Re.Active),this.questionCount=e}resetSession(){this.state.set(Re.FirstInit),this.activeQuestionState={},this.canProceedToTheNextQuestion=!1,this.activeQuestion=0,this.questions.set([])}goToNextQuestion(){this.activeQuestionState.isCorrect=!this.activeQuestionState.wrongNoteIndexList,this.questions.mutate(e=>e.push(this.activeQuestionState)),this.questionCount-1>this.activeQuestion?(console.log("Active Question: ",this.activeQuestion,"\nQuestions Array: ",this.questions()),this.activeQuestionState={},this.activeQuestion=this.activeQuestion+1,this.canProceedToTheNextQuestion=!1,this.correctGuess=!1):(console.log("Active Question: ",this.activeQuestion,"\nQuestions Array: ",this.questions()),this.endSession())}endSession(){if(this.state()!==Re.Active)throw new Error("No active session to end");this.state.set(Re.AfterSession);let e=0;this.correctGuess=!1,this.questions().forEach(i=>{i.isCorrect&&e++}),this.results={correctCount:e,questionCount:this.questionCount}}guess(e,i){const o=this.selectedKey().indexOf(i),c=this.selectedKey().indexOf(e);this.activeQuestionState.correctNoteIndex||(this.activeQuestionState.correctNoteIndex=c),o===c&&(this.activeQuestionState.wrongNoteIndexList||(this.correctGuess=!0),this.canProceedToTheNextQuestion=!0),!this.canProceedToTheNextQuestion&&(this.activeQuestionState.wrongNoteIndexList?this.activeQuestionState.wrongNoteIndexList.includes(o)||this.activeQuestionState.wrongNoteIndexList.push(o):this.activeQuestionState.wrongNoteIndexList=[o])}}return r.\u0275fac=function(e){return new(e||r)(k.LFG(th))},r.\u0275prov=k.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var Re=(()=>((Re=Re||{}).FirstInit="firstInit",Re.Active="active",Re.AfterSession="afterSession",Re))();function gn(r,t){if(1&r&&k._UZ(0,"div",7),2&r){const e=t.$implicit;k.ekj("correct",e.isCorrect)("incorrect",!e.isCorrect)("default",void 0===e.isCorrect)}}function Li(r,t){1&r&&k._UZ(0,"div",8)}function mf(r,t){1&r&&(k.TgZ(0,"p",9),k._uU(1,"Incorrect"),k.qZA())}function gf(r,t){1&r&&(k.TgZ(0,"p",10),k._uU(1,"Correct"),k.qZA())}let _f=(()=>{class r{constructor(e){this.sessionSrv=e,this.remainingBoxes=(0,k.tdS)([]),this.remainingBoxes=(0,k.Flj)(()=>Array(this.sessionSrv.questionCount-this.sessionSrv.questions().length))}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)(k.Y36(eu))},r.\u0275cmp=k.Xpm({type:r,selectors:[["app-progress-info"]],decls:7,vars:4,consts:[[1,"cet-progress-info"],[1,"container"],["class","box",3,"correct","incorrect","default",4,"ngFor","ngForOf"],["class","box default",4,"ngFor","ngForOf"],[1,"cet-current-info"],["class","cet-incorrect-text",4,"ngIf"],["class","cet-correct-text",4,"ngIf"],[1,"box"],[1,"box","default"],[1,"cet-incorrect-text"],[1,"cet-correct-text"]],template:function(e,i){1&e&&(k.TgZ(0,"div",0)(1,"div",1),k.YNc(2,gn,1,6,"div",2),k.YNc(3,Li,1,0,"div",3),k.qZA(),k.TgZ(4,"div",4),k.YNc(5,mf,2,0,"p",5),k.YNc(6,gf,2,0,"p",6),k.qZA()()),2&e&&(k.xp6(2),k.Q6J("ngForOf",i.sessionSrv.questions()),k.xp6(1),k.Q6J("ngForOf",i.remainingBoxes()),k.xp6(2),k.Q6J("ngIf",i.sessionSrv.activeQuestionState.wrongNoteIndexList),k.xp6(1),k.Q6J("ngIf",i.sessionSrv.correctGuess))},dependencies:[gt.sg,gt.O5],styles:[".cet-progress-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px}.box[_ngcontent-%COMP%]{width:30px;height:15px;background-color:#fff;border-radius:5px}.box.correct[_ngcontent-%COMP%]{background-color:green}.box.incorrect[_ngcontent-%COMP%]{background-color:red}.box.default[_ngcontent-%COMP%]{background-color:#fff}.cet-current-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:30px}.cet-current-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:30px}.cet-current-info[_ngcontent-%COMP%]   .cet-incorrect-text[_ngcontent-%COMP%]{color:red}.cet-current-info[_ngcontent-%COMP%]   .cet-correct-text[_ngcontent-%COMP%]{color:green}"]}),r})();function vf(r,t){if(1&r){const e=k.EpF();k.TgZ(0,"button",3),k.NdJ("click",function(){k.CHM(e);const o=k.oxw();return k.KtG(o.initialize())}),k._uU(1,"Start"),k.qZA()}}function yf(r,t){if(1&r){const e=k.EpF();k.TgZ(0,"button",10),k.NdJ("click",function(){const c=k.CHM(e).$implicit,u=k.oxw(2);return k.KtG(u.userGuess(c))}),k._uU(1),k.qZA()}if(2&r){const e=t.index,i=k.oxw(2);k.s9C("id","note-"+e),k.Q6J("disabled",!i.keySrv.possibleRandomNoteIndices().includes(e)),k.xp6(1),k.hij(" ",i.keySrv.selectedSolfegeList()[e%i.keySrv.selectedSolfegeList().length]," ")}}function eh(r,t){if(1&r){const e=k.EpF();k.ynx(0),k._UZ(1,"app-progress-info"),k.TgZ(2,"p"),k._uU(3),k.qZA(),k.TgZ(4,"div",4)(5,"div",5),k.YNc(6,yf,2,3,"button",6),k.qZA(),k.TgZ(7,"div",7)(8,"button",3),k.NdJ("click",function(){k.CHM(e);const o=k.oxw();return k.KtG(o.audioSrv.playNote(o.keySrv.selectedRandomNote()))}),k._uU(9," Note "),k.qZA(),k.TgZ(10,"button",3),k.NdJ("click",function(){k.CHM(e);const o=k.oxw();return k.KtG(o.audioSrv.playProgression([[o.keySrv.selectedNoteList()[0],o.keySrv.selectedNoteList()[2],o.keySrv.selectedNoteList()[4]],[o.keySrv.selectedNoteList()[3],o.keySrv.selectedNoteList()[5],o.keySrv.selectedNoteList()[0]],[o.keySrv.selectedNoteList()[4],o.keySrv.selectedNoteList()[6],o.keySrv.selectedNoteList()[1]],[o.keySrv.selectedNoteList()[0],o.keySrv.selectedNoteList()[2],o.keySrv.selectedNoteList()[4]]]))}),k._uU(11," Play Progression "),k.qZA(),k.TgZ(12,"button",8),k.NdJ("click",function(){k.CHM(e);const o=k.oxw();return k.KtG(o.setNewKey())}),k._uU(13,"Next"),k.qZA()(),k.TgZ(14,"button",9),k.NdJ("click",function(){k.CHM(e);const o=k.oxw();return k.KtG(o.sessionSrv.endSession())}),k._uU(15,"End Session"),k.qZA()(),k.BQk()}if(2&r){const e=k.oxw();k.xp6(3),k.AsE("Question ",e.sessionSrv.activeQuestion+1," of ",e.sessionSrv.questionCount,""),k.xp6(3),k.Q6J("ngForOf",e.keySrv.selectedNoteList()),k.xp6(6),k.Q6J("disabled",!e.sessionSrv.canProceedToTheNextQuestion||e.audioSrv.melodyActive()||e.audioSrv.chordProgressionActive())}}function ps(r,t){if(1&r){const e=k.EpF();k.ynx(0),k.TgZ(1,"p"),k._uU(2,"Fin"),k.qZA(),k._UZ(3,"app-progress-info"),k.TgZ(4,"p"),k._uU(5),k.qZA(),k.TgZ(6,"button",3),k.NdJ("click",function(){k.CHM(e);const o=k.oxw();return k.KtG(o.sessionSrv.resetSession())}),k._uU(7,"Restart"),k.qZA(),k.TgZ(8,"button",9),k.NdJ("click",function(){k.CHM(e);const o=k.oxw();return k.KtG(o.sessionSrv.resetSession())}),k._uU(9,"To Main Menu"),k.qZA(),k.BQk()}if(2&r){const e=k.oxw();k.xp6(5),k.AsE(" ",e.sessionSrv.results.correctCount," / ",e.sessionSrv.results.questionCount,"")}}let St=(()=>{class r{constructor(e,i,o){this.audioSrv=e,this.keySrv=i,this.sessionSrv=o,this.trainerStarted=(0,k.tdS)(!1),this.coloringActive=(0,k.tdS)(!1),this.guessFeedback=(0,k.tdS)(Mn.default),this.GuessState=Mn,this.msMelodySpeed=400,this.msAfterUserIsAllowedToClick=this.msMelodySpeed,this.SessionState=Re}ngOnInit(){this.sessionSrv.resetSession()}setNewKey(){this.keySrv.randomizeWorkingKey(),this.guessFeedback.set(Mn.default),this.sessionSrv.goToNextQuestion(),this.sessionSrv.state()===Re.Active&&(this.audioSrv.playProgression([[this.keySrv.selectedNoteList()[0],this.keySrv.selectedNoteList()[2],this.keySrv.selectedNoteList()[4]],[this.keySrv.selectedNoteList()[3],this.keySrv.selectedNoteList()[5],this.keySrv.selectedNoteList()[0]],[this.keySrv.selectedNoteList()[4],this.keySrv.selectedNoteList()[6],this.keySrv.selectedNoteList()[1]],[this.keySrv.selectedNoteList()[0],this.keySrv.selectedNoteList()[2],this.keySrv.selectedNoteList()[4]]]),this.audioSrv.playNote(this.keySrv.selectedRandomNote(),1.5))}userGuess(e){if(this.coloringActive())return;const i=e.slice(0,-1),o=this.keySrv.selectedRandomNote().slice(0,-1);if(this.sessionSrv.guess(o,i),i===o){this.guessFeedback.set(Mn.success);const c=this.changeOctave(Number(e.slice(-1))-Number(this.keySrv.selectedRandomNote().slice(-1))),u=this.getNotesIndicesToWalkOn(c,ae.ToRoot),d=this.getNotesToWalkOn(c,ae.ToRoot);this.audioSrv.playMelody(d,.001*this.msMelodySpeed,.001*this.msMelodySpeed),this.colorPlaying(u,this.msMelodySpeed)}else{this.guessFeedback.set(Mn.failure);let c=document.getElementById("note-"+this.keySrv.selectedNoteList().indexOf(e));c&&(c.classList.add("cet-failure"),setTimeout(()=>{c?.classList.remove("cet-failure")},this.msMelodySpeed))}}getNotesToWalkOn(e,i){let o;return o=e.indexOf(this.keySrv.selectedRandomNote())<e.length/2?e.slice(0,e.indexOf(this.keySrv.selectedRandomNote())+1).reverse():e.slice(e.indexOf(this.keySrv.selectedRandomNote()),e.length),this.transformResultForSelectedWalkMode(o,i)}getNotesIndicesToWalkOn(e,i){let o;return o=e.indexOf(this.keySrv.selectedRandomNote())<e.length/2?Ut.range(e.indexOf(this.keySrv.selectedRandomNote()),-1):Ut.range(e.indexOf(this.keySrv.selectedRandomNote()),e.length),this.transformResultForSelectedWalkMode(o,i)}transformResultForSelectedWalkMode(e,i){switch(i){case ae.ToRoot:return e;case ae.FromRoot:return e.reverse();case ae.JumpToRoot:let o=[];return o.push(e[0]),e[0]!==e[e.length-1]&&o.push(e[e.length-1]),o;case ae.NoWalk:return[e[0]];default:return e}}colorPlaying(e,i){this.coloringActive()||(this.coloringActive.set(!0),e.forEach((o,c)=>{let u=document.getElementById("note-"+o);u&&setTimeout(()=>{u?.classList.add("cet-playing"),setTimeout(()=>{u?.classList.remove("cet-playing")},i)},i*c)}),setTimeout(()=>{this.coloringActive.set(!1)},e.length*i+this.msAfterUserIsAllowedToClick))}changeOctave(e){return this.keySrv.selectedNoteList().map(c=>{const d=Number(c.slice(-1))-e;return c.slice(0,-1)+d})}initialize(){this.audioSrv.start(),this.trainerStarted.set(!0),this.keySrv.randomizeWorkingKey(),this.sessionSrv.startSession(5),setTimeout(()=>{this.audioSrv.playProgression([[this.keySrv.selectedNoteList()[0],this.keySrv.selectedNoteList()[2],this.keySrv.selectedNoteList()[4]],[this.keySrv.selectedNoteList()[3],this.keySrv.selectedNoteList()[5],this.keySrv.selectedNoteList()[0]],[this.keySrv.selectedNoteList()[4],this.keySrv.selectedNoteList()[6],this.keySrv.selectedNoteList()[1]],[this.keySrv.selectedNoteList()[0],this.keySrv.selectedNoteList()[2],this.keySrv.selectedNoteList()[4]]]),this.audioSrv.playNote(this.keySrv.selectedRandomNote(),1.5)},500)}}return r.\u0275fac=function(e){return new(e||r)(k.Y36(Ko),k.Y36(th),k.Y36(eu))},r.\u0275cmp=k.Xpm({type:r,selectors:[["app-functional-trainer"]],decls:7,vars:3,consts:[[1,"cet-functional-wrapper"],[3,"click",4,"ngIf"],[4,"ngIf"],[3,"click"],[1,"cet-controls-wrapper"],[1,"cet-scale"],["class","cet-note",3,"disabled","id","click",4,"ngFor","ngForOf"],[1,"cet-controls"],[3,"disabled","click"],["routerLink","/home",3,"click"],[1,"cet-note",3,"disabled","id","click"]],template:function(e,i){1&e&&(k.TgZ(0,"div",0)(1,"h2"),k._uU(2,"Functional Trainer"),k.qZA(),k.ynx(3),k.YNc(4,vf,2,0,"button",1),k.BQk(),k.YNc(5,eh,16,4,"ng-container",2),k.YNc(6,ps,10,2,"ng-container",2),k.qZA()),2&e&&(k.xp6(4),k.Q6J("ngIf",i.sessionSrv.state()===i.SessionState.FirstInit),k.xp6(1),k.Q6J("ngIf",i.sessionSrv.state()===i.SessionState.Active),k.xp6(1),k.Q6J("ngIf",i.sessionSrv.state()===i.SessionState.AfterSession))},dependencies:[gt.sg,gt.O5,x.rH,_f],styles:[".cet-playing[_ngcontent-%COMP%], .cet-playing[_ngcontent-%COMP%]:hover{background-color:green}.cet-failure[_ngcontent-%COMP%], .cet-failure[_ngcontent-%COMP%]:hover{background-color:red}.cet-functional-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:calc(100vh - 16px);gap:30px;position:relative}.cet-functional-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{position:absolute;top:120px}.cet-functional-wrapper[_ngcontent-%COMP%]   .cet-controls-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:20px}.cet-scale[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:3px}.cet-scale[_ngcontent-%COMP%]   .cet-note[_ngcontent-%COMP%]{width:40px;height:40px;min-width:unset}.cet-controls[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:3px}"]}),r})();var Mn=(()=>((Mn=Mn||{}).default="def",Mn.success="success",Mn.failure="fail",Mn))(),ae=(()=>((ae=ae||{}).ToRoot="toRoot",ae.FromRoot="fromRoot",ae.JumpToRoot="jumpToRoot",ae.NoWalk="noWalk",ae))();const nh=[{path:"",component:St}];let xf=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=k.oAB({type:r}),r.\u0275inj=k.cJS({imports:[x.Bz.forChild(nh),x.Bz]}),r})(),Gt=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=k.oAB({type:r}),r.\u0275inj=k.cJS({imports:[gt.ez,xf]}),r})()},9884:function(tt,Yt,Tt){!function(gt,x,k,Ut){"use strict";var Lt=function(X,ft,Z){return{endTime:ft,insertTime:Z,type:"exponentialRampToValue",value:X}},kt=function(X,ft,Z){return{endTime:ft,insertTime:Z,type:"linearRampToValue",value:X}},ve=function(X,ft){return{startTime:ft,type:"setValue",value:X}},qn=function(X,ft,Z){return{duration:Z,startTime:ft,type:"setValueCurve",values:X}},qs=function(X,ft,Z){var ct=Z.target;return ct+(ft-ct)*Math.exp((Z.startTime-X)/Z.timeConstant)},nn=function(X){return"exponentialRampToValue"===X.type},De=function(X){return"linearRampToValue"===X.type},vn=function(X){return nn(X)||De(X)},yn=function(X){return"setValue"===X.type},Ie=function(X){return"setValueCurve"===X.type},Xn=function qt(X,ft,Z,yt){var ct=X[ft];return void 0===ct?yt:vn(ct)||yn(ct)?ct.value:Ie(ct)?ct.values[ct.values.length-1]:qs(Z,qt(X,ft-1,ct.startTime,yt),ct)},Ne=function(X,ft,Z,yt,ct){return void 0===Z?[yt.insertTime,ct]:vn(Z)?[Z.endTime,Z.value]:yn(Z)?[Z.startTime,Z.value]:Ie(Z)?[Z.startTime+Z.duration,Z.values[Z.values.length-1]]:[Z.startTime,Xn(X,ft-1,Z.startTime,ct)]},xn=function(X){return"cancelAndHold"===X.type},_s=function(X){return"cancelScheduledValues"===X.type},me=function(X){return xn(X)||_s(X)?X.cancelTime:nn(X)||De(X)?X.endTime:X.startTime},Pn=function(X,ft,Z,yt){var Ot=yt.value;return Z===Ot?Ot:0<Z&&0<Ot||Z<0&&Ot<0?Z*Math.pow(Ot/Z,(X-ft)/(yt.endTime-ft)):0},Xe=function(X,ft,Z,yt){return Z+(X-ft)/(yt.endTime-ft)*(yt.value-Z)},wn=function(X,ft){var ct=ft.values;return function(X,ft){var Z=Math.floor(ft),yt=Math.ceil(ft);return Z===yt?X[Z]:(1-(ft-Z))*X[Z]+(1-(yt-ft))*X[yt]}(ct,(X-ft.startTime)/ft.duration*(ct.length-1))},Ln=function(X){return"setTarget"===X.type},di=function(qt){function X(ft){k(this,X),this._automationEvents=[],this._currenTime=0,this._defaultValue=ft}return Ut(X,[{key:qt,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(Z){var yt=me(Z);if(xn(Z)||_s(Z)){var ct=this._automationEvents.findIndex(function(ie){return _s(Z)&&Ie(ie)?ie.startTime+ie.duration>=yt:me(ie)>=yt}),Ot=this._automationEvents[ct];if(-1!==ct&&(this._automationEvents=this._automationEvents.slice(0,ct)),xn(Z)){var ht=this._automationEvents[this._automationEvents.length-1];if(void 0!==Ot&&vn(Ot)){if(void 0!==ht&&Ln(ht))throw new Error("The internal list is malformed.");var pi=void 0===ht?Ot.insertTime:Ie(ht)?ht.startTime+ht.duration:me(ht),Ps=void 0===ht?this._defaultValue:Ie(ht)?ht.values[ht.values.length-1]:ht.value,Vn=nn(Ot)?Pn(yt,pi,Ps,Ot):Xe(yt,pi,Ps,Ot),as=nn(Ot)?Lt(Vn,yt,this._currenTime):kt(Vn,yt,this._currenTime);this._automationEvents.push(as)}if(void 0!==ht&&Ln(ht)&&this._automationEvents.push(ve(this.getValue(yt),yt)),void 0!==ht&&Ie(ht)&&ht.startTime+ht.duration>yt){var Ft=yt-ht.startTime,Kt=(ht.values.length-1)/ht.duration,Wn=Math.max(2,1+Math.ceil(Ft*Kt)),cs=Ft/(Wn-1)*Kt,Ee=ht.values.slice(0,Wn);if(cs<1)for(var rn=1;rn<Wn;rn+=1){var Wi=cs*rn%1;Ee[rn]=ht.values[rn-1]*(1-Wi)+ht.values[rn]*Wi}this._automationEvents[this._automationEvents.length-1]=qn(Ee,ht.startTime,Ft)}}}else{var qe=this._automationEvents.findIndex(function(ie){return me(ie)>yt}),ce=-1===qe?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[qe-1];if(void 0!==ce&&Ie(ce)&&me(ce)+ce.duration>yt)return!1;var Fe=nn(Z)?Lt(Z.value,Z.endTime,this._currenTime):De(Z)?kt(Z.value,yt,this._currenTime):Z;if(-1===qe)this._automationEvents.push(Fe);else{if(Ie(Z)&&yt+Z.duration>me(this._automationEvents[qe]))return!1;this._automationEvents.splice(qe,0,Fe)}}return!0}},{key:"flush",value:function(Z){var yt=this._automationEvents.findIndex(function(ht){return me(ht)>Z});if(yt>1){var ct=this._automationEvents.slice(yt-1),Ot=ct[0];Ln(Ot)&&ct.unshift(ve(Xn(this._automationEvents,yt-2,Ot.startTime,this._defaultValue),Ot.startTime)),this._automationEvents=ct}}},{key:"getValue",value:function(Z){if(0===this._automationEvents.length)return this._defaultValue;var yt=this._automationEvents.findIndex(function(Ee){return me(Ee)>Z}),ct=this._automationEvents[yt],Ot=(-1===yt?this._automationEvents.length:yt)-1,ht=this._automationEvents[Ot];if(void 0!==ht&&Ln(ht)&&(void 0===ct||!vn(ct)||ct.insertTime>Z))return qs(Z,Xn(this._automationEvents,Ot-1,ht.startTime,this._defaultValue),ht);if(void 0!==ht&&yn(ht)&&(void 0===ct||!vn(ct)))return ht.value;if(void 0!==ht&&Ie(ht)&&(void 0===ct||!vn(ct)||ht.startTime+ht.duration>Z))return Z<ht.startTime+ht.duration?wn(Z,ht):ht.values[ht.values.length-1];if(void 0!==ht&&vn(ht)&&(void 0===ct||!vn(ct)))return ht.value;if(void 0!==ct&&nn(ct)){var pi=Ne(this._automationEvents,Ot,ht,ct,this._defaultValue),Ps=x(pi,2);return Pn(Z,Ps[0],Ps[1],ct)}if(void 0!==ct&&De(ct)){var Ft=Ne(this._automationEvents,Ot,ht,ct,this._defaultValue),Kt=x(Ft,2);return Xe(Z,Kt[0],Kt[1],ct)}return this._defaultValue}}]),X}(Symbol.iterator);gt.AutomationEventList=di,gt.createCancelAndHoldAutomationEvent=function(X){return{cancelTime:X,type:"cancelAndHold"}},gt.createCancelScheduledValuesAutomationEvent=function(X){return{cancelTime:X,type:"cancelScheduledValues"}},gt.createExponentialRampToValueAutomationEvent=function(X,ft){return{endTime:ft,type:"exponentialRampToValue",value:X}},gt.createLinearRampToValueAutomationEvent=function(X,ft){return{endTime:ft,type:"linearRampToValue",value:X}},gt.createSetTargetAutomationEvent=function(X,ft,Z){return{startTime:ft,target:X,timeConstant:Z,type:"setTarget"}},gt.createSetValueAutomationEvent=ve,gt.createSetValueCurveAutomationEvent=qn}(Yt,Tt(7424),Tt(6690),Tt(9728))},6990:function(tt,Yt,Tt){var gt;tt=Tt.nmd(tt),function(){var x,kt="Expected a function",qn="__lodash_hash_undefined__",nn="__lodash_placeholder__",ft=1/0,Z=9007199254740991,Ot=4294967295,Ps=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Vn="[object Arguments]",as="[object Array]",Kt="[object Boolean]",Wn="[object Date]",Ee="[object Error]",rn="[object Function]",Wi="[object GeneratorFunction]",qe="[object Map]",ce="[object Number]",ie="[object Object]",su="[object Promise]",Bi="[object RegExp]",Bn="[object Set]",Gi="[object String]",Rr="[object Symbol]",Ui="[object WeakMap]",we="[object ArrayBuffer]",$n="[object DataView]",zi="[object Float32Array]",mi="[object Float64Array]",Ir="[object Int8Array]",ta="[object Int16Array]",ea="[object Int32Array]",na="[object Uint8Array]",sa="[object Uint8ClampedArray]",gi="[object Uint16Array]",Ls="[object Uint32Array]",Vs=/\b__p \+= '';/g,iu=/\b(__p \+=) '' \+/g,ru=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ws=/&(?:amp|lt|gt|quot|#39);/g,ji=/[&<>"']/g,ou=RegExp(Ws.source),oh=RegExp(ji.source),au=/<%-([\s\S]+?)%>/g,cu=/<%([\s\S]+?)%>/g,Zi=/<%=([\s\S]+?)%>/g,ne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Qi=/^\w*$/,Bs=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_i=/[\\^$.*+?()[\]{}|]/g,uu=RegExp(_i.source),Hi=/^\s+/,qr=/\s/,ah=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ch=/\{\n\/\* \[wrapped with (.+)\] \*/,uh=/,? & /,lh=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ia=/[()=,{}\[\]\/\s]/,ra=/\\(\\)?/g,hh=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,lu=/\w*$/,dh=/^[-+]0x[0-9a-f]+$/i,fh=/^0b[01]+$/i,ph=/^\[object .+?Constructor\]$/,mh=/^0o[0-7]+$/i,hu=/^(?:0|[1-9]\d*)$/,gh=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Pr=/($^)/,Lr=/['\n\r\u2028\u2029\\]/g,Yi="\\ud800-\\udfff",du="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",fu="\\u2700-\\u27bf",pu="a-z\\xdf-\\xf6\\xf8-\\xff",mu="A-Z\\xc0-\\xd6\\xd8-\\xde",gu="\\ufe0e\\ufe0f",_u="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",bh="["+Yi+"]",vu="["+_u+"]",Wr="["+du+"]",yu="\\d+",Sh="["+fu+"]",xu="["+pu+"]",wu="[^"+Yi+_u+yu+fu+pu+mu+"]",aa="\\ud83c[\\udffb-\\udfff]",Tu="[^"+Yi+"]",ca="(?:\\ud83c[\\udde6-\\uddff]){2}",ua="[\\ud800-\\udbff][\\udc00-\\udfff]",vi="["+mu+"]",bu="(?:"+xu+"|"+wu+")",Ch="(?:"+vi+"|"+wu+")",Su="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Au="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Cu="(?:"+Wr+"|"+aa+")?",ku="["+gu+"]?",Xi=ku+Cu+"(?:\\u200d(?:"+[Tu,ca,ua].join("|")+")"+ku+Cu+")*",Nh="(?:"+[Sh,ca,ua].join("|")+")"+Xi,Eh="(?:"+[Tu+Wr+"?",Wr,ca,ua,bh].join("|")+")",Fh=RegExp("['\u2019]","g"),Mh=RegExp(Wr,"g"),ha=RegExp(aa+"(?="+aa+")|"+Eh+Xi,"g"),Rh=RegExp([vi+"?"+xu+"+"+Su+"(?="+[vu,vi,"$"].join("|")+")",Ch+"+"+Au+"(?="+[vu,vi+bu,"$"].join("|")+")",vi+"?"+bu+"+"+Su,vi+"+"+Au,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",yu,Nh].join("|"),"g"),Ih=RegExp("[\\u200d"+Yi+du+gu+"]"),qh=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ph=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Lh=-1,se={};se[zi]=se[mi]=se[Ir]=se[ta]=se[ea]=se[na]=se[sa]=se[gi]=se[Ls]=!0,se[Vn]=se[as]=se[we]=se[Kt]=se[$n]=se[Wn]=se[Ee]=se[rn]=se[qe]=se[ce]=se[ie]=se[Bi]=se[Bn]=se[Gi]=se[Ui]=!1;var Jt={};Jt[Vn]=Jt[as]=Jt[we]=Jt[$n]=Jt[Kt]=Jt[Wn]=Jt[zi]=Jt[mi]=Jt[Ir]=Jt[ta]=Jt[ea]=Jt[qe]=Jt[ce]=Jt[ie]=Jt[Bi]=Jt[Bn]=Jt[Gi]=Jt[Rr]=Jt[na]=Jt[sa]=Jt[gi]=Jt[Ls]=!0,Jt[Ee]=Jt[rn]=Jt[Ui]=!1;var Gh={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Uh=parseFloat,ye=parseInt,Ou="object"==typeof global&&global&&global.Object===Object&&global,zh="object"==typeof self&&self&&self.Object===Object&&self,Pe=Ou||zh||Function("return this")(),$i=Yt&&!Yt.nodeType&&Yt,Ki=$i&&tt&&!tt.nodeType&&tt,Du=Ki&&Ki.exports===$i,da=Du&&Ou.process,on=function(){try{return Ki&&Ki.require&&Ki.require("util").types||da&&da.binding&&da.binding("util")}catch{}}(),Nu=on&&on.isArrayBuffer,Eu=on&&on.isDate,Fu=on&&on.isMap,Mu=on&&on.isRegExp,Ru=on&&on.isSet,Iu=on&&on.isTypedArray;function an(O,P,R){switch(R.length){case 0:return O.call(P);case 1:return O.call(P,R[0]);case 2:return O.call(P,R[0],R[1]);case 3:return O.call(P,R[0],R[1],R[2])}return O.apply(P,R)}function jh(O,P,R,J){for(var wt=-1,Rt=null==O?0:O.length;++wt<Rt;){var be=O[wt];P(J,be,R(be),O)}return J}function Tn(O,P){for(var R=-1,J=null==O?0:O.length;++R<J&&!1!==P(O[R],R,O););return O}function Zh(O,P){for(var R=null==O?0:O.length;R--&&!1!==P(O[R],R,O););return O}function qu(O,P){for(var R=-1,J=null==O?0:O.length;++R<J;)if(!P(O[R],R,O))return!1;return!0}function ys(O,P){for(var R=-1,J=null==O?0:O.length,wt=0,Rt=[];++R<J;){var be=O[R];P(be,R,O)&&(Rt[wt++]=be)}return Rt}function Br(O,P){return!(null==O||!O.length)&&zt(O,P,0)>-1}function fa(O,P,R){for(var J=-1,wt=null==O?0:O.length;++J<wt;)if(R(P,O[J]))return!0;return!1}function re(O,P){for(var R=-1,J=null==O?0:O.length,wt=Array(J);++R<J;)wt[R]=P(O[R],R,O);return wt}function xs(O,P){for(var R=-1,J=P.length,wt=O.length;++R<J;)O[wt+R]=P[R];return O}function pa(O,P,R,J){var wt=-1,Rt=null==O?0:O.length;for(J&&Rt&&(R=O[++wt]);++wt<Rt;)R=P(R,O[wt],wt,O);return R}function Qh(O,P,R,J){var wt=null==O?0:O.length;for(J&&wt&&(R=O[--wt]);wt--;)R=P(R,O[wt],wt,O);return R}function ma(O,P){for(var R=-1,J=null==O?0:O.length;++R<J;)if(P(O[R],R,O))return!0;return!1}var Hh=_a("length");function Pu(O,P,R){var J;return R(O,function(wt,Rt,be){if(P(wt,Rt,be))return J=Rt,!1}),J}function Gr(O,P,R,J){for(var wt=O.length,Rt=R+(J?1:-1);J?Rt--:++Rt<wt;)if(P(O[Rt],Rt,O))return Rt;return-1}function zt(O,P,R){return P==P?function sd(O,P,R){for(var J=R-1,wt=O.length;++J<wt;)if(O[J]===P)return J;return-1}(O,P,R):Gr(O,ga,R)}function Te(O,P,R,J){for(var wt=R-1,Rt=O.length;++wt<Rt;)if(J(O[wt],P))return wt;return-1}function ga(O){return O!=O}function Lu(O,P){var R=null==O?0:O.length;return R?Ji(O,P)/R:NaN}function _a(O){return function(P){return null==P?x:P[O]}}function va(O){return function(P){return null==O?x:O[P]}}function ue(O,P,R,J,wt){return wt(O,function(Rt,be,Xt){R=J?(J=!1,Rt):P(R,Rt,be,Xt)}),R}function Ji(O,P){for(var R,J=-1,wt=O.length;++J<wt;){var Rt=P(O[J]);Rt!==x&&(R=R===x?Rt:R+Rt)}return R}function tr(O,P){for(var R=-1,J=Array(O);++R<O;)J[R]=P(R);return J}function Vu(O){return O&&O.slice(0,Uu(O)+1).replace(Hi,"")}function cn(O){return function(P){return O(P)}}function ya(O,P){return re(P,function(R){return O[R]})}function er(O,P){return O.has(P)}function Wu(O,P){for(var R=-1,J=O.length;++R<J&&zt(P,O[R],0)>-1;);return R}function xa(O,P){for(var R=O.length;R--&&zt(P,O[R],0)>-1;);return R}var Jh=va({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),td=va({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ed(O){return"\\"+Gh[O]}function yi(O){return Ih.test(O)}function wa(O){var P=-1,R=Array(O.size);return O.forEach(function(J,wt){R[++P]=[wt,J]}),R}function Us(O,P){return function(R){return O(P(R))}}function ws(O,P){for(var R=-1,J=O.length,wt=0,Rt=[];++R<J;){var be=O[R];(be===P||be===nn)&&(O[R]=nn,Rt[wt++]=R)}return Rt}function Ur(O){var P=-1,R=Array(O.size);return O.forEach(function(J){R[++P]=J}),R}function xi(O){return yi(O)?function id(O){for(var P=ha.lastIndex=0;ha.test(O);)++P;return P}(O):Hh(O)}function Gn(O){return yi(O)?function rd(O){return O.match(ha)||[]}(O):function Gs(O){return O.split("")}(O)}function Uu(O){for(var P=O.length;P--&&qr.test(O.charAt(P)););return P}var zu=va({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),zr=function O(P){var n,R=(P=null==P?Pe:zr.defaults(Pe.Object(),P,zr.pick(Pe,Ph))).Array,J=P.Date,wt=P.Error,Rt=P.Function,be=P.Math,Xt=P.Object,Ta=P.RegExp,cd=P.String,$t=P.TypeError,jr=R.prototype,wi=Xt.prototype,Zr=P["__core-js_shared__"],Qr=Rt.prototype.toString,jt=wi.hasOwnProperty,ld=0,ju=(n=/[^.]+$/.exec(Zr&&Zr.keys&&Zr.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Hr=wi.toString,hd=Qr.call(Xt),dd=Pe._,fd=Ta("^"+Qr.call(jt).replace(_i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Yr=Du?P.Buffer:x,Ts=P.Symbol,Xr=P.Uint8Array,Zu=Yr?Yr.allocUnsafe:x,$r=Us(Xt.getPrototypeOf,Xt),Qu=Xt.create,Hu=wi.propertyIsEnumerable,Kr=jr.splice,Yu=Ts?Ts.isConcatSpreadable:x,sr=Ts?Ts.iterator:x,zs=Ts?Ts.toStringTag:x,ir=function(){try{var n=ns(Xt,"defineProperty");return n({},"",{}),n}catch{}}(),pd=P.clearTimeout!==Pe.clearTimeout&&P.clearTimeout,md=J&&J.now!==Pe.Date.now&&J.now,gd=P.setTimeout!==Pe.setTimeout&&P.setTimeout,Jr=be.ceil,to=be.floor,ba=Xt.getOwnPropertySymbols,_d=Yr?Yr.isBuffer:x,Xu=P.isFinite,$u=jr.join,Ku=Us(Xt.keys,Xt),le=be.max,Be=be.min,vd=J.now,yd=P.parseInt,Sa=be.random,xd=jr.reverse,Aa=ns(P,"DataView"),rr=ns(P,"Map"),or=ns(P,"Promise"),js=ns(P,"Set"),Zs=ns(P,"WeakMap"),ar=ns(Xt,"create"),eo=Zs&&new Zs,Qs={},Ti=si(Aa),wd=si(rr),Td=si(or),bd=si(js),Ju=si(Zs),no=Ts?Ts.prototype:x,Le=no?no.valueOf:x,bn=no?no.toString:x;function g(n){if(_e(n)&&!xt(n)&&!(n instanceof it)){if(n instanceof Sn)return n;if(jt.call(n,"__wrapped__"))return Ns(n)}return new Sn(n)}var bs=function(){function n(){}return function(s){if(!fe(s))return{};if(Qu)return Qu(s);n.prototype=s;var a=new n;return n.prototype=x,a}}();function xe(){}function Sn(n,s){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=x}function it(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ot,this.__views__=[]}function Ss(n){var s=-1,a=null==n?0:n.length;for(this.clear();++s<a;){var l=n[s];this.set(l[0],l[1])}}function Zt(n){var s=-1,a=null==n?0:n.length;for(this.clear();++s<a;){var l=n[s];this.set(l[0],l[1])}}function Un(n){var s=-1,a=null==n?0:n.length;for(this.clear();++s<a;){var l=n[s];this.set(l[0],l[1])}}function Ge(n){var s=-1,a=null==n?0:n.length;for(this.__data__=new Un;++s<a;)this.add(n[s])}function jn(n){var s=this.__data__=new Zt(n);this.size=s.size}function rl(n,s){var a=xt(n),l=!a&&Fs(n),p=!a&&!l&&rs(n),v=!a&&!l&&!p&&Li(n),T=a||l||p||v,A=T?tr(n.length,cd):[],N=A.length;for(var V in n)(s||jt.call(n,V))&&(!T||!("length"==V||p&&("offset"==V||"parent"==V)||v&&("buffer"==V||"byteLength"==V||"byteOffset"==V)||tn(V,N)))&&A.push(V);return A}function ls(n){var s=n.length;return s?n[Va(0,s-1)]:x}function Nd(n,s){return pn(ge(n),Ys(s,0,n.length))}function Ed(n){return pn(ge(n))}function Na(n,s,a){(a!==x&&!Wt(n[s],a)||a===x&&!(s in n))&&Jn(n,s,a)}function cr(n,s,a){var l=n[s];(!jt.call(n,s)||!Wt(l,a)||a===x&&!(s in n))&&Jn(n,s,a)}function io(n,s){for(var a=n.length;a--;)if(Wt(n[a][0],s))return a;return-1}function Ai(n,s,a,l){return Cs(n,function(p,v,T){s(l,p,a(p),T)}),l}function ol(n,s){return n&&ln(s,I(s),n)}function Jn(n,s,a){"__proto__"==s&&ir?ir(n,s,{configurable:!0,enumerable:!0,value:a,writable:!0}):n[s]=a}function Ea(n,s){for(var a=-1,l=s.length,p=R(l),v=null==n;++a<l;)p[a]=v?x:F(n,s[a]);return p}function Ys(n,s,a){return n==n&&(a!==x&&(n=n<=a?n:a),s!==x&&(n=n>=s?n:s)),n}function An(n,s,a,l,p,v){var T,A=1&s,N=2&s,V=4&s;if(a&&(T=p?a(n,l,p,v):a(n)),T!==x)return T;if(!fe(n))return n;var B=xt(n);if(B){if(T=function Mf(n){var s=n.length,a=new n.constructor(s);return s&&"string"==typeof n[0]&&jt.call(n,"index")&&(a.index=n.index,a.input=n.input),a}(n),!A)return ge(n,T)}else{var G=We(n),Y=G==rn||G==Wi;if(rs(n))return Zn(n,A);if(G==ie||G==Vn||Y&&!p){if(T=N||Y?{}:Je(n),!A)return N?function El(n,s){return ln(n,Ao(n),s)}(n,function Fd(n,s){return n&&ln(s,M(s),n)}(T,n)):function Oi(n,s){return ln(n,Xa(n),s)}(n,ol(T,n))}else{if(!Jt[G])return p?n:{};T=function tf(n,s,a){var l=n.constructor;switch(s){case we:return ki(n);case Kt:case Wn:return new l(+n);case $n:return function Yd(n,s){var a=s?ki(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.byteLength)}(n,a);case zi:case mi:case Ir:case ta:case ea:case na:case sa:case gi:case Ls:return Ol(n,a);case qe:return new l;case ce:case Gi:return new l(n);case Bi:return function Xd(n){var s=new n.constructor(n.source,lu.exec(n));return s.lastIndex=n.lastIndex,s}(n);case Bn:return new l;case Rr:return function Js(n){return Le?Xt(Le.call(n)):{}}(n)}}(n,G,A)}}v||(v=new jn);var ot=v.get(n);if(ot)return ot;v.set(n,T),eu(n)?n.forEach(function(mt){T.add(An(mt,s,a,mt,n,v))}):ff(n)&&n.forEach(function(mt,It){T.set(It,An(mt,s,a,It,n,v))});var Et=B?x:(V?N?dn:Ds:N?M:I)(n);return Tn(Et||n,function(mt,It){Et&&(mt=n[It=mt]),cr(T,It,An(mt,s,a,It,n,v))}),T}function Fa(n,s,a){var l=a.length;if(null==n)return!l;for(n=Xt(n);l--;){var p=a[l],T=n[p];if(T===x&&!(p in n)||!(0,s[p])(T))return!1}return!0}function al(n,s,a){if("function"!=typeof n)throw new $t(kt);return Do(function(){n.apply(x,a)},s)}function ur(n,s,a,l){var p=-1,v=Br,T=!0,A=n.length,N=[],V=s.length;if(!A)return N;a&&(s=re(s,cn(a))),l?(v=fa,T=!1):s.length>=200&&(v=er,T=!1,s=new Ge(s));t:for(;++p<A;){var B=n[p],G=null==a?B:a(B);if(B=l||0!==B?B:0,T&&G==G){for(var Y=V;Y--;)if(s[Y]===G)continue t;N.push(B)}else v(s,G,l)||N.push(B)}return N}g.templateSettings={escape:au,evaluate:cu,interpolate:Zi,variable:"",imports:{_:g}},(g.prototype=xe.prototype).constructor=g,(Sn.prototype=bs(xe.prototype)).constructor=Sn,(it.prototype=bs(xe.prototype)).constructor=it,Ss.prototype.clear=function us(){this.__data__=ar?ar(null):{},this.size=0},Ss.prototype.delete=function Ca(n){var s=this.has(n)&&delete this.__data__[n];return this.size-=s?1:0,s},Ss.prototype.get=function ka(n){var s=this.__data__;if(ar){var a=s[n];return a===qn?x:a}return jt.call(s,n)?s[n]:x},Ss.prototype.has=function el(n){var s=this.__data__;return ar?s[n]!==x:jt.call(s,n)},Ss.prototype.set=function bi(n,s){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=ar&&s===x?qn:s,this},Zt.prototype.clear=function Sd(){this.__data__=[],this.size=0},Zt.prototype.delete=function Oa(n){var s=this.__data__,a=io(s,n);return!(a<0||(a==s.length-1?s.pop():Kr.call(s,a,1),--this.size,0))},Zt.prototype.get=function nl(n){var s=this.__data__,a=io(s,n);return a<0?x:s[a][1]},Zt.prototype.has=function sl(n){return io(this.__data__,n)>-1},Zt.prototype.set=function Da(n,s){var a=this.__data__,l=io(a,n);return l<0?(++this.size,a.push([n,s])):a[l][1]=s,this},Un.prototype.clear=function Ad(){this.size=0,this.__data__={hash:new Ss,map:new(rr||Zt),string:new Ss}},Un.prototype.delete=function so(n){var s=bo(this,n).delete(n);return this.size-=s?1:0,s},Un.prototype.get=function il(n){return bo(this,n).get(n)},Un.prototype.has=function Kn(n){return bo(this,n).has(n)},Un.prototype.set=function Si(n,s){var a=bo(this,n),l=a.size;return a.set(n,s),this.size+=a.size==l?0:1,this},Ge.prototype.add=Ge.prototype.push=function Cd(n){return this.__data__.set(n,qn),this},Ge.prototype.has=function zn(n){return this.__data__.has(n)},jn.prototype.clear=function kd(){this.__data__=new Zt,this.size=0},jn.prototype.delete=function Od(n){var s=this.__data__,a=s.delete(n);return this.size=s.size,a},jn.prototype.get=function Hs(n){return this.__data__.get(n)},jn.prototype.has=function Dd(n){return this.__data__.has(n)},jn.prototype.set=function As(n,s){var a=this.__data__;if(a instanceof Zt){var l=a.__data__;if(!rr||l.length<199)return l.push([n,s]),this.size=++a.size,this;a=this.__data__=new Un(l)}return a.set(n,s),this.size=a.size,this};var Cs=Fl(Cn),cl=Fl(ro,!0);function Rd(n,s){var a=!0;return Cs(n,function(l,p,v){return a=!!s(l,p,v)}),a}function Xs(n,s,a){for(var l=-1,p=n.length;++l<p;){var v=n[l],T=s(v);if(null!=T&&(A===x?T==T&&!gn(T):a(T,A)))var A=T,N=v}return N}function ul(n,s){var a=[];return Cs(n,function(l,p,v){s(l,p,v)&&a.push(l)}),a}function Ve(n,s,a,l,p){var v=-1,T=n.length;for(a||(a=Rf),p||(p=[]);++v<T;){var A=n[v];s>0&&a(A)?s>1?Ve(A,s-1,a,l,p):xs(p,A):l||(p[p.length]=A)}return p}var Ma=H(),Ra=H(!0);function Cn(n,s){return n&&Ma(n,s,I)}function ro(n,s){return n&&Ra(n,s,I)}function oo(n,s){return ys(s,function(a){return Ms(n[a])})}function $s(n,s){for(var a=0,l=(s=Ke(s,n)).length;null!=n&&a<l;)n=n[is(s[a++])];return a&&a==l?n:x}function Ia(n,s,a){var l=s(n);return xt(n)?l:xs(l,a(n))}function Qe(n){return null==n?n===x?"[object Undefined]":"[object Null]":zs&&zs in Xt(n)?function Kd(n){var s=jt.call(n,zs),a=n[zs];try{n[zs]=x;var l=!0}catch{}var p=Hr.call(n);return l&&(s?n[zs]=a:delete n[zs]),p}(n):function tc(n){return Hr.call(n)}(n)}function Ci(n,s){return n>s}function qd(n,s){return null!=n&&jt.call(n,s)}function ll(n,s){return null!=n&&s in Xt(n)}function qa(n,s,a){for(var l=a?fa:Br,p=n[0].length,v=n.length,T=v,A=R(v),N=1/0,V=[];T--;){var B=n[T];T&&s&&(B=re(B,cn(s))),N=Be(B.length,N),A[T]=!a&&(s||p>=120&&B.length>=120)?new Ge(T&&B):x}B=n[0];var G=-1,Y=A[0];t:for(;++G<p&&V.length<N;){var ot=B[G],pt=s?s(ot):ot;if(ot=a||0!==ot?ot:0,!(Y?er(Y,pt):l(V,pt,a))){for(T=v;--T;){var Et=A[T];if(!(Et?er(Et,pt):l(n[T],pt,a)))continue t}Y&&Y.push(pt),V.push(ot)}}return V}function lr(n,s,a){var l=null==(n=xr(n,s=Ke(s,n)))?n:n[is(je(s))];return null==l?x:an(l,n,a)}function hl(n){return _e(n)&&Qe(n)==Vn}function hr(n,s,a,l,p){return n===s||(null==n||null==s||!_e(n)&&!_e(s)?n!=n&&s!=s:function Wd(n,s,a,l,p,v){var T=xt(n),A=xt(s),N=T?as:We(n),V=A?as:We(s),B=(N=N==Vn?ie:N)==ie,G=(V=V==Vn?ie:V)==ie,Y=N==V;if(Y&&rs(n)){if(!rs(s))return!1;T=!0,B=!1}if(Y&&!B)return v||(v=new jn),T||Li(n)?Ht(n,s,a,l,p,v):function ts(n,s,a,l,p,v,T){switch(a){case $n:if(n.byteLength!=s.byteLength||n.byteOffset!=s.byteOffset)return!1;n=n.buffer,s=s.buffer;case we:return!(n.byteLength!=s.byteLength||!v(new Xr(n),new Xr(s)));case Kt:case Wn:case ce:return Wt(+n,+s);case Ee:return n.name==s.name&&n.message==s.message;case Bi:case Gi:return n==s+"";case qe:var A=wa;case Bn:if(A||(A=Ur),n.size!=s.size&&!(1&l))return!1;var V=T.get(n);if(V)return V==s;l|=2,T.set(n,s);var B=Ht(A(n),A(s),l,p,v,T);return T.delete(n),B;case Rr:if(Le)return Le.call(n)==Le.call(s)}return!1}(n,s,N,a,l,p,v);if(!(1&a)){var ot=B&&jt.call(n,"__wrapped__"),pt=G&&jt.call(s,"__wrapped__");if(ot||pt){var Et=ot?n.value():n,mt=pt?s.value():s;return v||(v=new jn),p(Et,mt,a,l,v)}}return!!Y&&(v||(v=new jn),function Ha(n,s,a,l,p,v){var T=1&a,A=Ds(n),N=A.length;if(N!=Ds(s).length&&!T)return!1;for(var G=N;G--;){var Y=A[G];if(!(T?Y in s:jt.call(s,Y)))return!1}var ot=v.get(n),pt=v.get(s);if(ot&&pt)return ot==s&&pt==n;var Et=!0;v.set(n,s),v.set(s,n);for(var mt=T;++G<N;){var It=n[Y=A[G]],Pt=s[Y];if(l)var Hn=T?l(Pt,It,Y,s,n,v):l(It,Pt,Y,n,s,v);if(!(Hn===x?It===Pt||p(It,Pt,a,l,v):Hn)){Et=!1;break}mt||(mt="constructor"==Y)}if(Et&&!mt){var _n=n.constructor,Yn=s.constructor;_n!=Yn&&"constructor"in n&&"constructor"in s&&!("function"==typeof _n&&_n instanceof _n&&"function"==typeof Yn&&Yn instanceof Yn)&&(Et=!1)}return v.delete(n),v.delete(s),Et}(n,s,a,l,p,v))}(n,s,a,l,hr,p))}function ao(n,s,a,l){var p=a.length,v=p,T=!l;if(null==n)return!v;for(n=Xt(n);p--;){var A=a[p];if(T&&A[2]?A[1]!==n[A[0]]:!(A[0]in n))return!1}for(;++p<v;){var N=(A=a[p])[0],V=n[N],B=A[1];if(T&&A[2]){if(V===x&&!(N in n))return!1}else{var G=new jn;if(l)var Y=l(V,B,N,n,s,G);if(!(Y===x?hr(B,V,3,l,G):Y))return!1}}return!0}function co(n){return!(!fe(n)||function Mt(n){return!!ju&&ju in n}(n))&&(Ms(n)?fd:ph).test(si(n))}function pl(n){return"function"==typeof n?n:null==n?In:"object"==typeof n?xt(n)?vl(n[0],n[1]):_l(n):rp(n)}function Pa(n){if(!ss(n))return Ku(n);var s=[];for(var a in Xt(n))jt.call(n,a)&&"constructor"!=a&&s.push(a);return s}function La(n,s){return n<s}function gl(n,s){var a=-1,l=Ze(n)?R(n.length):[];return Cs(n,function(p,v,T){l[++a]=s(p,v,T)}),l}function _l(n){var s=So(n);return 1==s.length&&s[0][2]?ze(s[0][0],s[0][1]):function(a){return a===n||ao(a,n,s)}}function vl(n,s){return Ue(n)&&ql(s)?ze(is(n),s):function(a){var l=F(a,n);return l===x&&l===s?q(a,n):hr(s,l,3)}}function uo(n,s,a,l,p){n!==s&&Ma(s,function(v,T){if(p||(p=new jn),fe(v))!function zd(n,s,a,l,p,v,T){var A=ni(n,a),N=ni(s,a),V=T.get(N);if(V)Na(n,a,V);else{var B=v?v(A,N,a+"",n,s,T):x,G=B===x;if(G){var Y=xt(N),ot=!Y&&rs(N),pt=!Y&&!ot&&Li(N);B=N,Y||ot||pt?xt(A)?B=A:oe(A)?B=ge(A):ot?(G=!1,B=Zn(N,!0)):pt?(G=!1,B=Ol(N,!0)):B=[]:$o(N)||Fs(N)?(B=A,Fs(A)?B=nh(A):(!fe(A)||Ms(A))&&(B=Je(N))):G=!1}G&&(T.set(N,B),p(B,N,l,v,T),T.delete(N)),Na(n,a,B)}}(n,s,T,a,uo,l,p);else{var A=l?l(ni(n,T),v,T+"",n,s,p):x;A===x&&(A=v),Na(n,T,A)}},M)}function lo(n,s){var a=n.length;if(a)return tn(s+=s<0?a:0,a)?n[s]:x}function yl(n,s,a){s=s.length?re(s,function(v){return xt(v)?function(T){return $s(T,1===v.length?v[0]:v)}:v}):[In];var l=-1;return s=re(s,cn(dt())),function Xh(O,P){var R=O.length;for(O.sort(P);R--;)O[R]=O[R].value;return O}(gl(n,function(v,T,A){return{criteria:re(s,function(V){return V(v)}),index:++l,value:v}}),function(v,T){return function Vt(n,s,a){for(var l=-1,p=n.criteria,v=s.criteria,T=p.length,A=a.length;++l<T;){var N=Dl(p[l],v[l]);if(N)return l>=A?N:N*("desc"==a[l]?-1:1)}return n.index-s.index}(v,T,a)})}function wl(n,s,a){for(var l=-1,p=s.length,v={};++l<p;){var T=s[l],A=$s(n,T);a(A,T)&&fo(v,Ke(T,n),A)}return v}function ho(n,s,a,l){var p=l?Te:zt,v=-1,T=s.length,A=n;for(n===s&&(s=ge(s)),a&&(A=re(n,cn(a)));++v<T;)for(var N=0,V=s[v],B=a?a(V):V;(N=p(A,B,N,l))>-1;)A!==n&&Kr.call(A,N,1),Kr.call(n,N,1);return n}function bl(n,s){for(var a=n?s.length:0,l=a-1;a--;){var p=s[a];if(a==l||p!==v){var v=p;tn(p)?Kr.call(n,p,1):mo(n,p)}}return n}function Va(n,s){return n+to(Sa()*(s-n+1))}function Wa(n,s){var a="";if(!n||s<1||s>Z)return a;do{s%2&&(a+=n),(s=to(s/2))&&(n+=n)}while(s);return a}function Dt(n,s){return wr(yr(n,s,In),n+"")}function Zd(n){return ls(Ct(n))}function Sl(n,s){var a=Ct(n);return pn(a,Ys(s,0,a.length))}function fo(n,s,a,l){if(!fe(n))return n;for(var p=-1,v=(s=Ke(s,n)).length,T=v-1,A=n;null!=A&&++p<v;){var N=is(s[p]),V=a;if("__proto__"===N||"constructor"===N||"prototype"===N)return n;if(p!=T){var B=A[N];(V=l?l(B,N,A):x)===x&&(V=fe(B)?B:tn(s[p+1])?[]:{})}cr(A,N,V),A=A[N]}return n}var Ba=eo?function(n,s){return eo.set(n,s),n}:In,Al=ir?function(n,s){return ir(n,"toString",{configurable:!0,enumerable:!1,value:Cf(s),writable:!0})}:In;function Ff(n){return pn(Ct(n))}function kn(n,s,a){var l=-1,p=n.length;s<0&&(s=-s>p?0:p+s),(a=a>p?p:a)<0&&(a+=p),p=s>a?0:a-s>>>0,s>>>=0;for(var v=R(p);++l<p;)v[l]=n[l+s];return v}function Qd(n,s){var a;return Cs(n,function(l,p,v){return!(a=s(l,p,v))}),!!a}function po(n,s,a){var l=0,p=null==n?l:n.length;if("number"==typeof s&&s==s&&p<=2147483647){for(;l<p;){var v=l+p>>>1,T=n[v];null!==T&&!gn(T)&&(a?T<=s:T<s)?l=v+1:p=v}return p}return Ga(n,s,In,a)}function Ga(n,s,a,l){var p=0,v=null==n?0:n.length;if(0===v)return 0;for(var T=(s=a(s))!=s,A=null===s,N=gn(s),V=s===x;p<v;){var B=to((p+v)/2),G=a(n[B]),Y=G!==x,ot=null===G,pt=G==G,Et=gn(G);if(T)var mt=l||pt;else mt=V?pt&&(l||Y):A?pt&&Y&&(l||!ot):N?pt&&Y&&!ot&&(l||!Et):!ot&&!Et&&(l?G<=s:G<s);mt?p=B+1:v=B}return Be(v,4294967294)}function Cl(n,s){for(var a=-1,l=n.length,p=0,v=[];++a<l;){var T=n[a],A=s?s(T):T;if(!a||!Wt(A,N)){var N=A;v[p++]=0===T?0:T}}return v}function Hd(n){return"number"==typeof n?n:gn(n)?NaN:+n}function ut(n){if("string"==typeof n)return n;if(xt(n))return re(n,ut)+"";if(gn(n))return bn?bn.call(n):"";var s=n+"";return"0"==s&&1/n==-ft?"-0":s}function He(n,s,a){var l=-1,p=Br,v=n.length,T=!0,A=[],N=A;if(a)T=!1,p=fa;else if(v>=200){var V=s?null:_r(n);if(V)return Ur(V);T=!1,p=er,N=new Ge}else N=s?[]:A;t:for(;++l<v;){var B=n[l],G=s?s(B):B;if(B=a||0!==B?B:0,T&&G==G){for(var Y=N.length;Y--;)if(N[Y]===G)continue t;s&&N.push(G),A.push(B)}else p(N,G,a)||(N!==A&&N.push(G),A.push(B))}return A}function mo(n,s){return null==(n=xr(n,s=Ke(s,n)))||delete n[is(je(s))]}function go(n,s,a,l){return fo(n,s,a($s(n,s)),l)}function Ua(n,s,a,l){for(var p=n.length,v=l?p:-1;(l?v--:++v<p)&&s(n[v],v,n););return a?kn(n,l?0:v,l?v+1:p):kn(n,l?v+1:0,l?p:v)}function kl(n,s){var a=n;return a instanceof it&&(a=a.value()),pa(s,function(l,p){return p.func.apply(p.thisArg,xs([l],p.args))},a)}function _o(n,s,a){var l=n.length;if(l<2)return l?He(n[0]):[];for(var p=-1,v=R(l);++p<l;)for(var T=n[p],A=-1;++A<l;)A!=p&&(v[p]=ur(v[p]||T,n[A],s,a));return He(Ve(v,1),s,a)}function un(n,s,a){for(var l=-1,p=n.length,v=s.length,T={};++l<p;)a(T,n[l],l<v?s[l]:x);return T}function Nt(n){return oe(n)?n:[]}function za(n){return"function"==typeof n?n:In}function Ke(n,s){return xt(n)?n:Ue(n,s)?[n]:sf(Gt(n))}var Ks=Dt;function ks(n,s,a){var l=n.length;return a=a===x?l:a,!s&&a>=l?n:kn(n,s,a)}var On=pd||function(n){return Pe.clearTimeout(n)};function Zn(n,s){if(s)return n.slice();var a=n.length,l=Zu?Zu(a):new n.constructor(a);return n.copy(l),l}function ki(n){var s=new n.constructor(n.byteLength);return new Xr(s).set(new Xr(n)),s}function Ol(n,s){var a=s?ki(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.length)}function Dl(n,s){if(n!==s){var a=n!==x,l=null===n,p=n==n,v=gn(n),T=s!==x,A=null===s,N=s==s,V=gn(s);if(!A&&!V&&!v&&n>s||v&&T&&N&&!A&&!V||l&&T&&N||!a&&N||!p)return 1;if(!l&&!v&&!V&&n<s||V&&a&&p&&!l&&!v||A&&a&&p||!T&&p||!N)return-1}return 0}function Nl(n,s,a,l){for(var p=-1,v=n.length,T=a.length,A=-1,N=s.length,V=le(v-T,0),B=R(N+V),G=!l;++A<N;)B[A]=s[A];for(;++p<T;)(G||p<v)&&(B[a[p]]=n[p]);for(;V--;)B[A++]=n[p++];return B}function Os(n,s,a,l){for(var p=-1,v=n.length,T=-1,A=a.length,N=-1,V=s.length,B=le(v-A,0),G=R(B+V),Y=!l;++p<B;)G[p]=n[p];for(var ot=p;++N<V;)G[ot+N]=s[N];for(;++T<A;)(Y||p<v)&&(G[ot+a[T]]=n[p++]);return G}function ge(n,s){var a=-1,l=n.length;for(s||(s=R(l));++a<l;)s[a]=n[a];return s}function ln(n,s,a,l){var p=!a;a||(a={});for(var v=-1,T=s.length;++v<T;){var A=s[v],N=l?l(a[A],n[A],A,a,n):x;N===x&&(N=n[A]),p?Jn(a,A,N):cr(a,A,N)}return a}function vo(n,s){return function(a,l){var p=xt(a)?jh:Ai,v=s?s():{};return p(a,n,dt(l,2),v)}}function Qn(n){return Dt(function(s,a){var l=-1,p=a.length,v=p>1?a[p-1]:x,T=p>2?a[2]:x;for(v=n.length>3&&"function"==typeof v?(p--,v):x,T&&en(a[0],a[1],T)&&(v=p<3?x:v,p=1),s=Xt(s);++l<p;){var A=a[l];A&&n(s,A,l,v)}return s})}function Fl(n,s){return function(a,l){if(null==a)return a;if(!Ze(a))return n(a,l);for(var p=a.length,v=s?p:-1,T=Xt(a);(s?v--:++v<p)&&!1!==l(T[v],v,T););return a}}function H(n){return function(s,a,l){for(var p=-1,v=Xt(s),T=l(s),A=T.length;A--;){var N=T[n?A:++p];if(!1===a(v[N],N,v))break}return s}}function ti(n){return function(s){var a=yi(s=Gt(s))?Gn(s):x,l=a?a[0]:s.charAt(0),p=a?ks(a,1).join(""):s.slice(1);return l[n]()+p}}function ei(n){return function(s){return pa(sp(li(s).replace(Fh,"")),n,"")}}function Dn(n){return function(){var s=arguments;switch(s.length){case 0:return new n;case 1:return new n(s[0]);case 2:return new n(s[0],s[1]);case 3:return new n(s[0],s[1],s[2]);case 4:return new n(s[0],s[1],s[2],s[3]);case 5:return new n(s[0],s[1],s[2],s[3],s[4]);case 6:return new n(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new n(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var a=bs(n.prototype),l=n.apply(a,s);return fe(l)?l:a}}function dr(n){return function(s,a,l){var p=Xt(s);if(!Ze(s)){var v=dt(a,3);s=I(s),a=function(A){return v(p[A],A,p)}}var T=n(s,a,l);return T>-1?p[v?s[T]:T]:x}}function yo(n){return es(function(s){var a=s.length,l=a,p=Sn.prototype.thru;for(n&&s.reverse();l--;){var v=s[l];if("function"!=typeof v)throw new $t(kt);if(p&&!T&&"wrapper"==To(v))var T=new Sn([],!0)}for(l=T?l:a;++l<a;){var A=To(v=s[l]),N="wrapper"==A?Ya(v):x;T=N&&te(N[0])&&424==N[1]&&!N[4].length&&1==N[9]?T[To(N[0])].apply(T,N[3]):1==v.length&&te(v)?T[A]():T.thru(v)}return function(){var V=arguments,B=V[0];if(T&&1==V.length&&xt(B))return T.plant(B).value();for(var G=0,Y=a?s[G].apply(this,V):B;++G<a;)Y=s[G].call(this,Y);return Y}})}function fr(n,s,a,l,p,v,T,A,N,V){var B=128&s,G=1&s,Y=2&s,ot=24&s,pt=512&s,Et=Y?x:Dn(n);return function mt(){for(var It=arguments.length,Pt=R(It),Hn=It;Hn--;)Pt[Hn]=arguments[Hn];if(ot)var _n=vr(mt),Yn=function Kh(O,P){for(var R=O.length,J=0;R--;)O[R]===P&&++J;return J}(Pt,_n);if(l&&(Pt=Nl(Pt,l,p,ot)),v&&(Pt=Os(Pt,v,T,ot)),It-=Yn,ot&&It<V){var Oe=ws(Pt,_n);return gr(n,s,fr,mt.placeholder,a,Pt,Oe,A,N,V-It)}var gs=G?a:this,hi=Y?gs[n]:n;return It=Pt.length,A?Pt=function ko(n,s){for(var a=n.length,l=Be(s.length,a),p=ge(n);l--;){var v=s[l];n[l]=tn(v,a)?p[v]:x}return n}(Pt,A):pt&&It>1&&Pt.reverse(),B&&N<It&&(Pt.length=N),this&&this!==Pe&&this instanceof mt&&(hi=Et||Dn(hi)),hi.apply(gs,Pt)}}function Nn(n,s){return function(a,l){return function Ld(n,s,a,l){return Cn(n,function(p,v,T){s(l,a(p),v,T)}),l}(a,n,s(l),{})}}function xo(n,s){return function(a,l){var p;if(a===x&&l===x)return s;if(a!==x&&(p=a),l!==x){if(p===x)return l;"string"==typeof a||"string"==typeof l?(a=ut(a),l=ut(l)):(a=Hd(a),l=Hd(l)),p=n(a,l)}return p}}function En(n){return es(function(s){return s=re(s,cn(dt())),Dt(function(a){var l=this;return n(s,function(p){return an(p,l,a)})})})}function pr(n,s){var a=(s=s===x?" ":ut(s)).length;if(a<2)return a?Wa(s,n):s;var l=Wa(s,Jr(n/xi(s)));return yi(s)?ks(Gn(l),0,n).join(""):l.slice(0,n)}function Ml(n){return function(s,a,l){return l&&"number"!=typeof l&&en(s,a,l)&&(a=l=x),s=ps(s),a===x?(a=s,s=0):a=ps(a),function jd(n,s,a,l){for(var p=-1,v=le(Jr((s-n)/(a||1)),0),T=R(v);v--;)T[l?v:++p]=n,n+=a;return T}(s,a,l=l===x?s<a?1:-1:ps(l),n)}}function mr(n){return function(s,a){return"string"==typeof s&&"string"==typeof a||(s=ae(s),a=ae(a)),n(s,a)}}function gr(n,s,a,l,p,v,T,A,N,V){var B=8&s;s|=B?32:64,4&(s&=~(B?64:32))||(s&=-4);var Et=[n,s,p,B?v:x,B?T:x,B?x:v,B?x:T,A,N,V],mt=a.apply(x,Et);return te(n)&&Oo(mt,Et),mt.placeholder=l,No(mt,n,s)}function Za(n){var s=be[n];return function(a,l){if(a=ae(a),(l=null==l?0:Be(St(l),292))&&Xu(a)){var p=(Gt(a)+"e").split("e");return+((p=(Gt(s(p[0]+"e"+(+p[1]+l)))+"e").split("e"))[0]+"e"+(+p[1]-l))}return s(a)}}var _r=js&&1/Ur(new js([,-0]))[1]==ft?function(n){return new js(n)}:Df;function Qa(n){return function(s){var a=We(s);return a==qe?wa(s):a==Bn?function Gu(O){var P=-1,R=Array(O.size);return O.forEach(function(J){R[++P]=[J,J]}),R}(s):function $h(O,P){return re(P,function(R){return[R,O[R]]})}(s,n(s))}}function hn(n,s,a,l,p,v,T,A){var N=2&s;if(!N&&"function"!=typeof n)throw new $t(kt);var V=l?l.length:0;if(V||(s&=-97,l=p=x),T=T===x?T:le(St(T),0),A=A===x?A:St(A),V-=p?p.length:0,64&s){var B=l,G=p;l=p=x}var Y=N?x:Ya(n),ot=[n,s,a,l,p,B,G,v,T,A];if(Y&&function Co(n,s){var a=n[1],l=s[1],p=a|l;if(!(p<131)&&!(128==l&&8==a||128==l&&256==a&&n[7].length<=s[8]||384==l&&s[7].length<=s[8]&&8==a))return n;1&l&&(n[2]=s[2],p|=1&a?0:4);var A=s[3];if(A){var N=n[3];n[3]=N?Nl(N,A,s[4]):A,n[4]=N?ws(n[3],nn):s[4]}(A=s[5])&&(n[5]=(N=n[5])?Os(N,A,s[6]):A,n[6]=N?ws(n[5],nn):s[6]),(A=s[7])&&(n[7]=A),128&l&&(n[8]=null==n[8]?s[8]:Be(n[8],s[8])),null==n[9]&&(n[9]=s[9]),n[0]=s[0],n[1]=p}(ot,Y),n=ot[0],s=ot[1],a=ot[2],l=ot[3],p=ot[4],!(A=ot[9]=ot[9]===x?N?0:n.length:le(ot[9]-V,0))&&24&s&&(s&=-25),s&&1!=s)pt=8==s||16==s?function ja(n,s,a){var l=Dn(n);return function p(){for(var v=arguments.length,T=R(v),A=v,N=vr(p);A--;)T[A]=arguments[A];var V=v<3&&T[0]!==N&&T[v-1]!==N?[]:ws(T,N);return(v-=V.length)<a?gr(n,s,fr,p.placeholder,x,T,V,x,x,a-v):an(this&&this!==Pe&&this instanceof p?l:n,this,T)}}(n,s,A):32!=s&&33!=s||p.length?fr.apply(x,ot):function wo(n,s,a,l){var p=1&s,v=Dn(n);return function T(){for(var A=-1,N=arguments.length,V=-1,B=l.length,G=R(B+N),Y=this&&this!==Pe&&this instanceof T?v:n;++V<B;)G[V]=l[V];for(;N--;)G[V++]=arguments[++A];return an(Y,p?a:this,G)}}(n,s,a,l);else var pt=function $d(n,s,a){var l=1&s,p=Dn(n);return function v(){return(this&&this!==Pe&&this instanceof v?p:n).apply(l?a:this,arguments)}}(n,s,a);return No((Y?Ba:Oo)(pt,ot),n,s)}function Rl(n,s,a,l){return n===x||Wt(n,wi[a])&&!jt.call(l,a)?s:n}function he(n,s,a,l,p,v){return fe(n)&&fe(s)&&(v.set(s,n),uo(n,s,x,he,v),v.delete(s)),n}function Il(n){return $o(n)?x:n}function Ht(n,s,a,l,p,v){var T=1&a,A=n.length,N=s.length;if(A!=N&&!(T&&N>A))return!1;var V=v.get(n),B=v.get(s);if(V&&B)return V==s&&B==n;var G=-1,Y=!0,ot=2&a?new Ge:x;for(v.set(n,s),v.set(s,n);++G<A;){var pt=n[G],Et=s[G];if(l)var mt=T?l(Et,pt,G,s,n,v):l(pt,Et,G,n,s,v);if(mt!==x){if(mt)continue;Y=!1;break}if(ot){if(!ma(s,function(It,Pt){if(!er(ot,Pt)&&(pt===It||p(pt,It,a,l,v)))return ot.push(Pt)})){Y=!1;break}}else if(pt!==Et&&!p(pt,Et,a,l,v)){Y=!1;break}}return v.delete(n),v.delete(s),Y}function es(n){return wr(yr(n,x,Es),n+"")}function Ds(n){return Ia(n,I,Xa)}function dn(n){return Ia(n,M,Ao)}var Ya=eo?function(n){return eo.get(n)}:Df;function To(n){for(var s=n.name+"",a=Qs[s],l=jt.call(Qs,s)?a.length:0;l--;){var p=a[l],v=p.func;if(null==v||v==n)return p.name}return s}function vr(n){return(jt.call(g,"placeholder")?g:n).placeholder}function dt(){var n=g.iteratee||kf;return n=n===kf?pl:n,arguments.length?n(arguments[0],arguments[1]):n}function bo(n,s){var a=n.__data__;return function Ka(n){var s=typeof n;return"string"==s||"number"==s||"symbol"==s||"boolean"==s?"__proto__"!==n:null===n}(s)?a["string"==typeof s?"string":"hash"]:a.map}function So(n){for(var s=I(n),a=s.length;a--;){var l=s[a],p=n[l];s[a]=[l,p,ql(p)]}return s}function ns(n,s){var a=function Bu(O,P){return null==O?x:O[P]}(n,s);return co(a)?a:x}var Xa=ba?function(n){return null==n?[]:(n=Xt(n),ys(ba(n),function(s){return Hu.call(n,s)}))}:Nf,Ao=ba?function(n){for(var s=[];n;)xs(s,Xa(n)),n=$r(n);return s}:Nf,We=Qe;function fn(n,s,a){for(var l=-1,p=(s=Ke(s,n)).length,v=!1;++l<p;){var T=is(s[l]);if(!(v=null!=n&&a(n,T)))break;n=n[T]}return v||++l!=p?v:!!(p=null==n?0:n.length)&&Yo(p)&&tn(T,p)&&(xt(n)||Fs(n))}function Je(n){return"function"!=typeof n.constructor||ss(n)?{}:bs($r(n))}function Rf(n){return xt(n)||Fs(n)||!!(Yu&&n&&n[Yu])}function tn(n,s){var a=typeof n;return!!(s=s??Z)&&("number"==a||"symbol"!=a&&hu.test(n))&&n>-1&&n%1==0&&n<s}function en(n,s,a){if(!fe(a))return!1;var l=typeof s;return!!("number"==l?Ze(a)&&tn(s,a.length):"string"==l&&s in a)&&Wt(a[s],n)}function Ue(n,s){if(xt(n))return!1;var a=typeof n;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=n&&!gn(n))||Qi.test(n)||!ne.test(n)||null!=s&&n in Xt(s)}function te(n){var s=To(n),a=g[s];if("function"!=typeof a||!(s in it.prototype))return!1;if(n===a)return!0;var l=Ya(a);return!!l&&n===l[0]}(Aa&&We(new Aa(new ArrayBuffer(1)))!=$n||rr&&We(new rr)!=qe||or&&We(or.resolve())!=su||js&&We(new js)!=Bn||Zs&&We(new Zs)!=Ui)&&(We=function(n){var s=Qe(n),a=s==ie?n.constructor:x,l=a?si(a):"";if(l)switch(l){case Ti:return $n;case wd:return qe;case Td:return su;case bd:return Bn;case Ju:return Ui}return s});var Ja=Zr?Ms:Ef;function ss(n){var s=n&&n.constructor;return n===("function"==typeof s&&s.prototype||wi)}function ql(n){return n==n&&!fe(n)}function ze(n,s){return function(a){return null!=a&&a[n]===s&&(s!==x||n in Xt(a))}}function yr(n,s,a){return s=le(s===x?n.length-1:s,0),function(){for(var l=arguments,p=-1,v=le(l.length-s,0),T=R(v);++p<v;)T[p]=l[s+p];p=-1;for(var A=R(s+1);++p<s;)A[p]=l[p];return A[s]=a(T),an(n,this,A)}}function xr(n,s){return s.length<2?n:$s(n,kn(s,0,-1))}function ni(n,s){if(("constructor"!==s||"function"!=typeof n[s])&&"__proto__"!=s)return n[s]}var Oo=nf(Ba),Do=gd||function(n,s){return Pe.setTimeout(n,s)},wr=nf(Al);function No(n,s,a){var l=s+"";return wr(n,function ef(n,s){var a=s.length;if(!a)return n;var l=a-1;return s[l]=(a>1?"& ":"")+s[l],s=s.join(a>2?", ":" "),n.replace(ah,"{\n/* [wrapped with "+s+"] */\n")}(l,function rf(n,s){return Tn(Ps,function(a){var l="_."+a[0];s&a[1]&&!Br(n,l)&&n.push(l)}),n.sort()}(function $a(n){var s=n.match(ch);return s?s[1].split(uh):[]}(l),a)))}function nf(n){var s=0,a=0;return function(){var l=vd(),p=16-(l-a);if(a=l,p>0){if(++s>=800)return arguments[0]}else s=0;return n.apply(x,arguments)}}function pn(n,s){var a=-1,l=n.length,p=l-1;for(s=s===x?l:s;++a<s;){var v=Va(a,p),T=n[v];n[v]=n[a],n[a]=T}return n.length=s,n}var sf=function Di(n){var s=Pi(n,function(l){return 500===a.size&&a.clear(),l}),a=s.cache;return s}(function(n){var s=[];return 46===n.charCodeAt(0)&&s.push(""),n.replace(Bs,function(a,l,p,v){s.push(p?v.replace(ra,"$1"):l||a)}),s});function is(n){if("string"==typeof n||gn(n))return n;var s=n+"";return"0"==s&&1/n==-ft?"-0":s}function si(n){if(null!=n){try{return Qr.call(n)}catch{}try{return n+""}catch{}}return""}function Ns(n){if(n instanceof it)return n.clone();var s=new Sn(n.__wrapped__,n.__chain__);return s.__actions__=ge(n.__actions__),s.__index__=n.__index__,s.__values__=n.__values__,s}var ec=Dt(function(n,s){return oe(n)?ur(n,Ve(s,1,oe,!0)):[]}),Tr=Dt(function(n,s){var a=je(s);return oe(a)&&(a=x),oe(n)?ur(n,Ve(s,1,oe,!0),dt(a,2)):[]}),mn=Dt(function(n,s){var a=je(s);return oe(a)&&(a=x),oe(n)?ur(n,Ve(s,1,oe,!0),x,a):[]});function ic(n,s,a){var l=null==n?0:n.length;if(!l)return-1;var p=null==a?0:St(a);return p<0&&(p=le(l+p,0)),Gr(n,dt(s,3),p)}function Ei(n,s,a){var l=null==n?0:n.length;if(!l)return-1;var p=l-1;return a!==x&&(p=St(a),p=a<0?le(l+p,0):Be(p,l-1)),Gr(n,dt(s,3),p,!0)}function Es(n){return null!=n&&n.length?Ve(n,1):[]}function Fi(n){return n&&n.length?n[0]:x}var Sr=Dt(function(n){var s=re(n,Nt);return s.length&&s[0]===n[0]?qa(s):[]}),Ar=Dt(function(n){var s=je(n),a=re(n,Nt);return s===je(a)?s=x:a.pop(),a.length&&a[0]===n[0]?qa(a,dt(s,2)):[]}),Mi=Dt(function(n){var s=je(n),a=re(n,Nt);return(s="function"==typeof s?s:x)&&a.pop(),a.length&&a[0]===n[0]?qa(a,x,s):[]});function je(n){var s=null==n?0:n.length;return s?n[s-1]:x}var Ll=Dt(Io);function Io(n,s){return n&&n.length&&s&&s.length?ho(n,s):n}var Wl=es(function(n,s){var a=null==n?0:n.length,l=Ea(n,s);return bl(n,re(s,function(p){return tn(p,a)?+p:p}).sort(Dl)),l});function ri(n){return null==n?n:xd.call(n)}var ai=Dt(function(n){return He(Ve(n,1,oe,!0))}),hc=Dt(function(n){var s=je(n);return oe(s)&&(s=x),He(Ve(n,1,oe,!0),dt(s,2))}),Or=Dt(function(n){var s=je(n);return s="function"==typeof s?s:x,He(Ve(n,1,oe,!0),x,s)});function Dr(n){if(!n||!n.length)return[];var s=0;return n=ys(n,function(a){if(oe(a))return s=le(a.length,s),!0}),tr(s,function(a){return re(n,_a(a))})}function Po(n,s){if(!n||!n.length)return[];var a=Dr(n);return null==s?a:re(a,function(l){return an(s,x,l)})}var pc=Dt(function(n,s){return oe(n)?ur(n,s):[]}),mc=Dt(function(n){return _o(ys(n,oe))}),gc=Dt(function(n){var s=je(n);return oe(s)&&(s=x),_o(ys(n,oe),dt(s,2))}),zl=Dt(function(n){var s=je(n);return s="function"==typeof s?s:x,_o(ys(n,oe),x,s)}),_c=Dt(Dr),yc=Dt(function(n){var s=n.length,a=s>1?n[s-1]:x;return a="function"==typeof a?(n.pop(),a):x,Po(n,a)});function Lo(n){var s=g(n);return s.__chain__=!0,s}function xc(n,s){return s(n)}var Vf=es(function(n){var s=n.length,a=s?n[0]:0,l=this.__wrapped__,p=function(v){return Ea(v,n)};return!(s>1||this.__actions__.length)&&l instanceof it&&tn(a)?((l=l.slice(a,+a+(s?1:0))).__actions__.push({func:xc,args:[p],thisArg:x}),new Sn(l,this.__chain__).thru(function(v){return s&&!v.length&&v.push(x),v})):this.thru(p)}),bc=vo(function(n,s,a){jt.call(n,a)?++n[a]:Jn(n,a,1)}),Ri=dr(ic),Cc=dr(Ei);function Wo(n,s){return(xt(n)?Tn:Cs)(n,dt(s,3))}function Bo(n,s){return(xt(n)?Zh:cl)(n,dt(s,3))}var jf=vo(function(n,s,a){jt.call(n,a)?n[a].push(s):Jn(n,a,[s])}),Dc=Dt(function(n,s,a){var l=-1,p="function"==typeof s,v=Ze(n)?R(n.length):[];return Cs(n,function(T){v[++l]=p?an(s,T,a):lr(T,s,a)}),v}),Go=vo(function(n,s,a){Jn(n,a,s)});function Ii(n,s){return(xt(n)?re:gl)(n,dt(s,3))}var Ec=vo(function(n,s,a){n[a?0:1].push(s)},function(){return[[],[]]}),Xf=Dt(function(n,s){if(null==n)return[];var a=s.length;return a>1&&en(n,s[0],s[1])?s=[]:a>2&&en(s[0],s[1],s[2])&&(s=[s[0]]),yl(n,Ve(s,1),[])}),qi=md||function(){return Pe.Date.now()};function cf(n,s,a){return s=a?x:s,hn(n,128,x,x,x,x,s=n&&null==s?n.length:s)}function zo(n,s){var a;if("function"!=typeof s)throw new $t(kt);return n=St(n),function(){return--n>0&&(a=s.apply(this,arguments)),n<=1&&(s=x),a}}var Zl=Dt(function(n,s,a){var l=1;if(a.length){var p=ws(a,vr(Zl));l|=32}return hn(n,l,s,a,p)}),jo=Dt(function(n,s,a){var l=3;if(a.length){var p=ws(a,vr(jo));l|=32}return hn(s,l,n,a,p)});function Zo(n,s,a){var l,p,v,T,A,N,V=0,B=!1,G=!1,Y=!0;if("function"!=typeof n)throw new $t(kt);function ot(Oe){var gs=l,hi=p;return l=p=x,V=Oe,T=n.apply(hi,gs)}function mt(Oe){var gs=Oe-N;return N===x||gs>=s||gs<0||G&&Oe-V>=v}function It(){var Oe=qi();if(mt(Oe))return Pt(Oe);A=Do(It,function Et(Oe){var op=s-(Oe-N);return G?Be(op,v-(Oe-V)):op}(Oe))}function Pt(Oe){return A=x,Y&&l?ot(Oe):(l=p=x,T)}function Yn(){var Oe=qi(),gs=mt(Oe);if(l=arguments,p=this,N=Oe,gs){if(A===x)return function pt(Oe){return V=Oe,A=Do(It,s),B?ot(Oe):T}(N);if(G)return On(A),A=Do(It,s),ot(N)}return A===x&&(A=Do(It,s)),T}return s=ae(s)||0,fe(a)&&(B=!!a.leading,v=(G="maxWait"in a)?le(ae(a.maxWait)||0,s):v,Y="trailing"in a?!!a.trailing:Y),Yn.cancel=function Hn(){A!==x&&On(A),V=0,l=N=p=A=x},Yn.flush=function _n(){return A===x?T:Pt(qi())},Yn}var Ql=Dt(function(n,s){return al(n,1,s)}),uf=Dt(function(n,s,a){return al(n,ae(s)||0,a)});function Pi(n,s){if("function"!=typeof n||null!=s&&"function"!=typeof s)throw new $t(kt);var a=function(){var l=arguments,p=s?s.apply(this,l):l[0],v=a.cache;if(v.has(p))return v.get(p);var T=n.apply(this,l);return a.cache=v.set(p,T)||v,T};return a.cache=new(Pi.Cache||Un),a}function Vc(n){if("function"!=typeof n)throw new $t(kt);return function(){var s=arguments;switch(s.length){case 0:return!n.call(this);case 1:return!n.call(this,s[0]);case 2:return!n.call(this,s[0],s[1]);case 3:return!n.call(this,s[0],s[1],s[2])}return!n.apply(this,s)}}Pi.Cache=Un;var Bc=Ks(function(n,s){var a=(s=1==s.length&&xt(s[0])?re(s[0],cn(dt())):re(Ve(s,1),cn(dt()))).length;return Dt(function(l){for(var p=-1,v=Be(l.length,a);++p<v;)l[p]=s[p].call(this,l[p]);return an(n,this,l)})}),Er=Dt(function(n,s){var a=ws(s,vr(Er));return hn(n,32,x,s,a)}),Qo=Dt(function(n,s){var a=ws(s,vr(Qo));return hn(n,64,x,s,a)}),Hl=es(function(n,s){return hn(n,256,x,x,x,s)});function Wt(n,s){return n===s||n!=n&&s!=s}var Ho=mr(Ci),ci=mr(function(n,s){return n>=s}),Fs=hl(function(){return arguments}())?hl:function(n){return _e(n)&&jt.call(n,"callee")&&!Hu.call(n,"callee")},xt=R.isArray,hf=Nu?cn(Nu):function dl(n){return _e(n)&&Qe(n)==we};function Ze(n){return null!=n&&Yo(n.length)&&!Ms(n)}function oe(n){return _e(n)&&Ze(n)}var rs=_d||Ef,Xc=Eu?cn(Eu):function Vd(n){return _e(n)&&Qe(n)==Wn};function Kl(n){if(!_e(n))return!1;var s=Qe(n);return s==Ee||"[object DOMException]"==s||"string"==typeof n.message&&"string"==typeof n.name&&!$o(n)}function Ms(n){if(!fe(n))return!1;var s=Qe(n);return s==rn||s==Wi||"[object AsyncFunction]"==s||"[object Proxy]"==s}function df(n){return"number"==typeof n&&n==St(n)}function Yo(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=Z}function fe(n){var s=typeof n;return null!=n&&("object"==s||"function"==s)}function _e(n){return null!=n&&"object"==typeof n}var ff=Fu?cn(Fu):function Bd(n){return _e(n)&&We(n)==qe};function pf(n){return"number"==typeof n||_e(n)&&Qe(n)==ce}function $o(n){if(!_e(n)||Qe(n)!=ie)return!1;var s=$r(n);if(null===s)return!0;var a=jt.call(s,"constructor")&&s.constructor;return"function"==typeof a&&a instanceof a&&Qr.call(a)==hd}var Ko=Mu?cn(Mu):function fl(n){return _e(n)&&Qe(n)==Bi},eu=Ru?cn(Ru):function Gd(n){return _e(n)&&We(n)==Bn};function Re(n){return"string"==typeof n||!xt(n)&&_e(n)&&Qe(n)==Gi}function gn(n){return"symbol"==typeof n||_e(n)&&Qe(n)==Rr}var Li=Iu?cn(Iu):function Ud(n){return _e(n)&&Yo(n.length)&&!!se[Qe(n)]},vf=mr(La),yf=mr(function(n,s){return n<=s});function eh(n){if(!n)return[];if(Ze(n))return Re(n)?Gn(n):ge(n);if(sr&&n[sr])return function nr(O){for(var P,R=[];!(P=O.next()).done;)R.push(P.value);return R}(n[sr]());var s=We(n);return(s==qe?wa:s==Bn?Ur:Ct)(n)}function ps(n){return n?(n=ae(n))===ft||n===-ft?17976931348623157e292*(n<0?-1:1):n==n?n:0:0===n?n:0}function St(n){var s=ps(n),a=s%1;return s==s?a?s-a:s:0}function Mn(n){return n?Ys(St(n),0,Ot):0}function ae(n){if("number"==typeof n)return n;if(gn(n))return NaN;if(fe(n)){var s="function"==typeof n.valueOf?n.valueOf():n;n=fe(s)?s+"":s}if("string"!=typeof n)return 0===n?n:+n;n=Vu(n);var a=fh.test(n);return a||mh.test(n)?ye(n.slice(2),a?2:8):dh.test(n)?NaN:+n}function nh(n){return ln(n,M(n))}function Gt(n){return null==n?"":ut(n)}var r=Qn(function(n,s){if(ss(s)||Ze(s))ln(s,I(s),n);else for(var a in s)jt.call(s,a)&&cr(n,a,s[a])}),t=Qn(function(n,s){ln(s,M(s),n)}),e=Qn(function(n,s,a,l){ln(s,M(s),n,l)}),i=Qn(function(n,s,a,l){ln(s,I(s),n,l)}),o=es(Ea),u=Dt(function(n,s){n=Xt(n);var a=-1,l=s.length,p=l>2?s[2]:x;for(p&&en(s[0],s[1],p)&&(l=1);++a<l;)for(var v=s[a],T=M(v),A=-1,N=T.length;++A<N;){var V=T[A],B=n[V];(B===x||Wt(B,wi[V])&&!jt.call(n,V))&&(n[V]=v[V])}return n}),d=Dt(function(n){return n.push(x,he),an(Q,x,n)});function F(n,s,a){var l=null==n?x:$s(n,s);return l===x?a:l}function q(n,s){return null!=n&&fn(n,s,ll)}var L=Nn(function(n,s,a){null!=s&&"function"!=typeof s.toString&&(s=Hr.call(s)),n[s]=a},Cf(In)),z=Nn(function(n,s,a){null!=s&&"function"!=typeof s.toString&&(s=Hr.call(s)),jt.call(n,s)?n[s].push(a):n[s]=[a]},dt),D=Dt(lr);function I(n){return Ze(n)?rl(n):Pa(n)}function M(n){return Ze(n)?rl(n,!0):function ml(n){if(!fe(n))return function Se(n){var s=[];if(null!=n)for(var a in Xt(n))s.push(a);return s}(n);var s=ss(n),a=[];for(var l in n)"constructor"==l&&(s||!jt.call(n,l))||a.push(l);return a}(n)}var U=Qn(function(n,s,a){uo(n,s,a)}),Q=Qn(function(n,s,a,l){uo(n,s,a,l)}),W=es(function(n,s){var a={};if(null==n)return a;var l=!1;s=re(s,function(v){return v=Ke(v,n),l||(l=v.length>1),v}),ln(n,dn(n),a),l&&(a=An(a,7,Il));for(var p=s.length;p--;)mo(a,s[p]);return a}),rt=es(function(n,s){return null==n?{}:function xl(n,s){return wl(n,s,function(a,l){return q(n,l)})}(n,s)});function nt(n,s){if(null==n)return{};var a=re(dn(n),function(l){return[l]});return s=dt(s),wl(n,a,function(l,p){return s(l,p[0])})}var lt=Qa(I),bt=Qa(M);function Ct(n){return null==n?[]:ya(n,I(n))}var os=ei(function(n,s,a){return s=s.toLowerCase(),n+(a?ui(s):s)});function ui(n){return Af(Gt(n).toLowerCase())}function li(n){return(n=Gt(n))&&n.replace(gh,Jh).replace(Mh,"")}var vt=ei(function(n,s,a){return n+(a?"-":"")+s.toLowerCase()}),ke=ei(function(n,s,a){return n+(a?" ":"")+s.toLowerCase()}),de=ti("toLowerCase"),bf=ei(function(n,s,a){return n+(a?"_":"")+s.toLowerCase()}),up=ei(function(n,s,a){return n+(a?" ":"")+Af(s)}),yp=ei(function(n,s,a){return n+(a?" ":"")+s.toUpperCase()}),Af=ti("toUpperCase");function sp(n,s,a){return n=Gt(n),(s=a?x:s)===x?function nd(O){return qh.test(O)}(n)?function od(O){return O.match(Rh)||[]}(n):function Yh(O){return O.match(lh)||[]}(n):n.match(s)||[]}var ip=Dt(function(n,s){try{return an(n,x,s)}catch(a){return Kl(a)?a:new wt(a)}}),xp=es(function(n,s){return Tn(s,function(a){a=is(a),Jn(n,a,Zl(n[a],n))}),n});function Cf(n){return function(){return n}}var Sp=yo(),Ap=yo(!0);function In(n){return n}function kf(n){return pl("function"==typeof n?n:An(n,1))}var Op=Dt(function(n,s){return function(a){return lr(a,n,s)}}),Dp=Dt(function(n,s){return function(a){return lr(n,a,s)}});function Of(n,s,a){var l=I(s),p=oo(s,l);null==a&&(!fe(s)||!p.length&&l.length)&&(a=s,s=n,n=this,p=oo(s,I(s)));var v=!(fe(a)&&"chain"in a&&!a.chain),T=Ms(n);return Tn(p,function(A){var N=s[A];n[A]=N,T&&(n.prototype[A]=function(){var V=this.__chain__;if(v||V){var B=n(this.__wrapped__);return(B.__actions__=ge(this.__actions__)).push({func:N,args:arguments,thisArg:n}),B.__chain__=V,B}return N.apply(n,xs([this.value()],arguments))})}),n}function Df(){}var Fp=En(re),Mp=En(qu),Rp=En(ma);function rp(n){return Ue(n)?_a(is(n)):function Tl(n){return function(s){return $s(s,n)}}(n)}var qp=Ml(),Pp=Ml(!0);function Nf(){return[]}function Ef(){return!1}var zp=xo(function(n,s){return n+s},0),jp=Za("ceil"),Zp=xo(function(n,s){return n/s},1),Qp=Za("floor"),tm=xo(function(n,s){return n*s},1),em=Za("round"),nm=xo(function(n,s){return n-s},0);return g.after=function qc(n,s){if("function"!=typeof s)throw new $t(kt);return n=St(n),function(){if(--n<1)return s.apply(this,arguments)}},g.ary=cf,g.assign=r,g.assignIn=t,g.assignInWith=e,g.assignWith=i,g.at=o,g.before=zo,g.bind=Zl,g.bindAll=xp,g.bindKey=jo,g.castArray=function jc(){if(!arguments.length)return[];var n=arguments[0];return xt(n)?n:[n]},g.chain=Lo,g.chunk=function Eo(n,s,a){s=(a?en(n,s,a):s===x)?1:le(St(s),0);var l=null==n?0:n.length;if(!l||s<1)return[];for(var p=0,v=0,T=R(Jr(l/s));p<l;)T[v++]=kn(n,p,p+=s);return T},g.compact=function of(n){for(var s=-1,a=null==n?0:n.length,l=0,p=[];++s<a;){var v=n[s];v&&(p[l++]=v)}return p},g.concat=function Fo(){var n=arguments.length;if(!n)return[];for(var s=R(n-1),a=arguments[0],l=n;l--;)s[l-1]=arguments[l];return xs(xt(a)?ge(a):[a],Ve(s,1))},g.cond=function wp(n){var s=null==n?0:n.length,a=dt();return n=s?re(n,function(l){if("function"!=typeof l[1])throw new $t(kt);return[a(l[0]),l[1]]}):[],Dt(function(l){for(var p=-1;++p<s;){var v=n[p];if(an(v[0],this,l))return an(v[1],this,l)}})},g.conforms=function Tp(n){return function Md(n){var s=I(n);return function(a){return Fa(a,n,s)}}(An(n,1))},g.constant=Cf,g.countBy=bc,g.create=function c(n,s){var a=bs(n);return null==s?a:ol(a,s)},g.curry=function Pc(n,s,a){var l=hn(n,8,x,x,x,x,x,s=a?x:s);return l.placeholder=Pc.placeholder,l},g.curryRight=function Lc(n,s,a){var l=hn(n,16,x,x,x,x,x,s=a?x:s);return l.placeholder=Lc.placeholder,l},g.debounce=Zo,g.defaults=u,g.defaultsDeep=d,g.defer=Ql,g.delay=uf,g.difference=ec,g.differenceBy=Tr,g.differenceWith=mn,g.drop=function br(n,s,a){var l=null==n?0:n.length;return l?kn(n,(s=a||s===x?1:St(s))<0?0:s,l):[]},g.dropRight=function nc(n,s,a){var l=null==n?0:n.length;return l?kn(n,0,(s=l-(s=a||s===x?1:St(s)))<0?0:s):[]},g.dropRightWhile=function Ni(n,s){return n&&n.length?Ua(n,dt(s,3),!0,!0):[]},g.dropWhile=function sc(n,s){return n&&n.length?Ua(n,dt(s,3),!0):[]},g.fill=function hs(n,s,a,l){var p=null==n?0:n.length;return p?(a&&"number"!=typeof a&&en(n,s,a)&&(a=0,l=p),function Id(n,s,a,l){var p=n.length;for((a=St(a))<0&&(a=-a>p?0:p+a),(l=l===x||l>p?p:St(l))<0&&(l+=p),l=a>l?0:Mn(l);a<l;)n[a++]=s;return n}(n,s,a,l)):[]},g.filter=function Ac(n,s){return(xt(n)?ys:ul)(n,dt(s,3))},g.flatMap=function kc(n,s){return Ve(Ii(n,s),1)},g.flatMapDeep=function Vo(n,s){return Ve(Ii(n,s),ft)},g.flatMapDepth=function Oc(n,s,a){return a=a===x?1:St(a),Ve(Ii(n,s),a)},g.flatten=Es,g.flattenDeep=function Mo(n){return null!=n&&n.length?Ve(n,ft):[]},g.flattenDepth=function Fn(n,s){return null!=n&&n.length?Ve(n,s=s===x?1:St(s)):[]},g.flip=function lf(n){return hn(n,512)},g.flow=Sp,g.flowRight=Ap,g.fromPairs=function Ro(n){for(var s=-1,a=null==n?0:n.length,l={};++s<a;){var p=n[s];l[p[0]]=p[1]}return l},g.functions=function w(n){return null==n?[]:oo(n,I(n))},g.functionsIn=function S(n){return null==n?[]:oo(n,M(n))},g.groupBy=jf,g.initial=function ii(n){return null!=n&&n.length?kn(n,0,-1):[]},g.intersection=Sr,g.intersectionBy=Ar,g.intersectionWith=Mi,g.invert=L,g.invertBy=z,g.invokeMap=Dc,g.iteratee=kf,g.keyBy=Go,g.keys=I,g.keysIn=M,g.map=Ii,g.mapKeys=function E(n,s){var a={};return s=dt(s,3),Cn(n,function(l,p,v){Jn(a,s(l,p,v),l)}),a},g.mapValues=function j(n,s){var a={};return s=dt(s,3),Cn(n,function(l,p,v){Jn(a,p,s(l,p,v))}),a},g.matches=function Cp(n){return _l(An(n,1))},g.matchesProperty=function kp(n,s){return vl(n,An(s,1))},g.memoize=Pi,g.merge=U,g.mergeWith=Q,g.method=Op,g.methodOf=Dp,g.mixin=Of,g.negate=Vc,g.nthArg=function Ep(n){return n=St(n),Dt(function(s){return lo(s,n)})},g.omit=W,g.omitBy=function et(n,s){return nt(n,Vc(dt(s)))},g.once=function Wc(n){return zo(2,n)},g.orderBy=function Nc(n,s,a,l){return null==n?[]:(xt(s)||(s=null==s?[]:[s]),xt(a=l?x:a)||(a=null==a?[]:[a]),yl(n,s,a))},g.over=Fp,g.overArgs=Bc,g.overEvery=Mp,g.overSome=Rp,g.partial=Er,g.partialRight=Qo,g.partition=Ec,g.pick=rt,g.pickBy=nt,g.property=rp,g.propertyOf=function Ip(n){return function(s){return null==n?x:$s(n,s)}},g.pull=Ll,g.pullAll=Io,g.pullAllBy=function Vl(n,s,a){return n&&n.length&&s&&s.length?ho(n,s,dt(a,2)):n},g.pullAllWith=function rc(n,s,a){return n&&n.length&&s&&s.length?ho(n,s,x,a):n},g.pullAt=Wl,g.range=qp,g.rangeRight=Pp,g.rearg=Hl,g.reject=function Fc(n,s){return(xt(n)?ys:ul)(n,Vc(dt(s,3)))},g.remove=function ds(n,s){var a=[];if(!n||!n.length)return a;var l=-1,p=[],v=n.length;for(s=dt(s,3);++l<v;){var T=n[l];s(T,l,n)&&(a.push(T),p.push(l))}return bl(n,p),a},g.rest=function Yl(n,s){if("function"!=typeof n)throw new $t(kt);return Dt(n,s=s===x?s:St(s))},g.reverse=ri,g.sampleSize=function Mc(n,s,a){return s=(a?en(n,s,a):s===x)?1:St(s),(xt(n)?Nd:Sl)(n,s)},g.set=function at(n,s,a){return null==n?n:fo(n,s,a)},g.setWith=function _t(n,s,a,l){return l="function"==typeof l?l:x,null==n?n:fo(n,s,a,l)},g.shuffle=function Rc(n){return(xt(n)?Ed:Ff)(n)},g.slice=function oc(n,s,a){var l=null==n?0:n.length;return l?(a&&"number"!=typeof a&&en(n,s,a)?(s=0,a=l):(s=null==s?0:St(s),a=a===x?l:St(a)),kn(n,s,a)):[]},g.sortBy=Xf,g.sortedUniq=function cc(n){return n&&n.length?Cl(n):[]},g.sortedUniqBy=function uc(n,s){return n&&n.length?Cl(n,dt(s,2)):[]},g.split=function Sf(n,s,a){return a&&"number"!=typeof a&&en(n,s,a)&&(s=a=x),(a=a===x?Ot:a>>>0)?(n=Gt(n))&&("string"==typeof s||null!=s&&!Ko(s))&&!(s=ut(s))&&yi(n)?ks(Gn(n),0,a):n.split(s,a):[]},g.spread=function $f(n,s){if("function"!=typeof n)throw new $t(kt);return s=null==s?0:le(St(s),0),Dt(function(a){var l=a[s],p=ks(a,0,s);return l&&xs(p,l),an(n,this,p)})},g.tail=function lc(n){var s=null==n?0:n.length;return s?kn(n,1,s):[]},g.take=function Lf(n,s,a){return n&&n.length?kn(n,0,(s=a||s===x?1:St(s))<0?0:s):[]},g.takeRight=function fs(n,s,a){var l=null==n?0:n.length;return l?kn(n,(s=l-(s=a||s===x?1:St(s)))<0?0:s,l):[]},g.takeRightWhile=function qo(n,s){return n&&n.length?Ua(n,dt(s,3),!1,!0):[]},g.takeWhile=function oi(n,s){return n&&n.length?Ua(n,dt(s,3)):[]},g.tap=function jl(n,s){return s(n),n},g.throttle=function Gc(n,s,a){var l=!0,p=!0;if("function"!=typeof n)throw new $t(kt);return fe(a)&&(l="leading"in a?!!a.leading:l,p="trailing"in a?!!a.trailing:p),Zo(n,s,{leading:l,maxWait:s,trailing:p})},g.thru=xc,g.toArray=eh,g.toPairs=lt,g.toPairsIn=bt,g.toPath=function Gp(n){return xt(n)?re(n,is):gn(n)?[n]:ge(sf(Gt(n)))},g.toPlainObject=nh,g.transform=function At(n,s,a){var l=xt(n),p=l||rs(n)||Li(n);if(s=dt(s,4),null==a){var v=n&&n.constructor;a=p?l?new v:[]:fe(n)&&Ms(v)?bs($r(n)):{}}return(p?Tn:Cn)(n,function(T,A,N){return s(a,T,A,N)}),a},g.unary=function Uc(n){return cf(n,1)},g.union=ai,g.unionBy=hc,g.unionWith=Or,g.uniq=function dc(n){return n&&n.length?He(n):[]},g.uniqBy=function Ul(n,s){return n&&n.length?He(n,dt(s,2)):[]},g.uniqWith=function fc(n,s){return s="function"==typeof s?s:x,n&&n.length?He(n,x,s):[]},g.unset=function ee(n,s){return null==n||mo(n,s)},g.unzip=Dr,g.unzipWith=Po,g.update=function Ae(n,s,a){return null==n?n:go(n,s,za(a))},g.updateWith=function Ye(n,s,a,l){return l="function"==typeof l?l:x,null==n?n:go(n,s,za(a),l)},g.values=Ct,g.valuesIn=function ms(n){return null==n?[]:ya(n,M(n))},g.without=pc,g.words=sp,g.wrap=function zc(n,s){return Er(za(s),n)},g.xor=mc,g.xorBy=gc,g.xorWith=zl,g.zip=_c,g.zipObject=function Nr(n,s){return un(n||[],s||[],cr)},g.zipObjectDeep=function vc(n,s){return un(n||[],s||[],fo)},g.zipWith=yc,g.entries=lt,g.entriesIn=bt,g.extend=t,g.extendWith=e,Of(g,g),g.add=zp,g.attempt=ip,g.camelCase=os,g.capitalize=ui,g.ceil=jp,g.clamp=function Rs(n,s,a){return a===x&&(a=s,s=x),a!==x&&(a=(a=ae(a))==a?a:0),s!==x&&(s=(s=ae(s))==s?s:0),Ys(ae(n),s,a)},g.clone=function Xl(n){return An(n,4)},g.cloneDeep=function Qc(n){return An(n,5)},g.cloneDeepWith=function $l(n,s){return An(n,5,s="function"==typeof s?s:x)},g.cloneWith=function Zc(n,s){return An(n,4,s="function"==typeof s?s:x)},g.conformsTo=function Hc(n,s){return null==s||Fa(n,s,I(s))},g.deburr=li,g.defaultTo=function bp(n,s){return null==n||n!=n?s:n},g.divide=Zp,g.endsWith=function wf(n,s,a){n=Gt(n),s=ut(s);var l=n.length,p=a=a===x?l:Ys(St(a),0,l);return(a-=s.length)>=0&&n.slice(a,p)==s},g.eq=Wt,g.escape=function Tf(n){return(n=Gt(n))&&oh.test(n)?n.replace(ji,td):n},g.escapeRegExp=function K(n){return(n=Gt(n))&&uu.test(n)?n.replace(_i,"\\$&"):n},g.every=function Sc(n,s,a){var l=xt(n)?qu:Rd;return a&&en(n,s,a)&&(s=x),l(n,dt(s,3))},g.find=Ri,g.findIndex=ic,g.findKey=function h(n,s){return Pu(n,dt(s,3),Cn)},g.findLast=Cc,g.findLastIndex=Ei,g.findLastKey=function f(n,s){return Pu(n,dt(s,3),ro)},g.floor=Qp,g.forEach=Wo,g.forEachRight=Bo,g.forIn=function m(n,s){return null==n?n:Ma(n,dt(s,3),M)},g.forInRight=function _(n,s){return null==n?n:Ra(n,dt(s,3),M)},g.forOwn=function y(n,s){return n&&Cn(n,dt(s,3))},g.forOwnRight=function b(n,s){return n&&ro(n,dt(s,3))},g.get=F,g.gt=Ho,g.gte=ci,g.has=function C(n,s){return null!=n&&fn(n,s,qd)},g.hasIn=q,g.head=Fi,g.identity=In,g.includes=function Zf(n,s,a,l){n=Ze(n)?n:Ct(n),a=a&&!l?St(a):0;var p=n.length;return a<0&&(a=le(p+a,0)),Re(n)?a<=p&&n.indexOf(s,a)>-1:!!p&&zt(n,s,a)>-1},g.indexOf=function af(n,s,a){var l=null==n?0:n.length;if(!l)return-1;var p=null==a?0:St(a);return p<0&&(p=le(l+p,0)),zt(n,s,p)},g.inRange=function $(n,s,a){return s=ps(s),a===x?(a=s,s=0):a=ps(a),function Pd(n,s,a){return n>=Be(s,a)&&n<le(s,a)}(n=ae(n),s,a)},g.invoke=D,g.isArguments=Fs,g.isArray=xt,g.isArrayBuffer=hf,g.isArrayLike=Ze,g.isArrayLikeObject=oe,g.isBoolean=function Yc(n){return!0===n||!1===n||_e(n)&&Qe(n)==Kt},g.isBuffer=rs,g.isDate=Xc,g.isElement=function $c(n){return _e(n)&&1===n.nodeType&&!$o(n)},g.isEmpty=function Kc(n){if(null==n)return!0;if(Ze(n)&&(xt(n)||"string"==typeof n||"function"==typeof n.splice||rs(n)||Li(n)||Fs(n)))return!n.length;var s=We(n);if(s==qe||s==Bn)return!n.size;if(ss(n))return!Pa(n).length;for(var a in n)if(jt.call(n,a))return!1;return!0},g.isEqual=function Jc(n,s){return hr(n,s)},g.isEqualWith=function tu(n,s,a){var l=(a="function"==typeof a?a:x)?a(n,s):x;return l===x?hr(n,s,x,a):!!l},g.isError=Kl,g.isFinite=function Kf(n){return"number"==typeof n&&Xu(n)},g.isFunction=Ms,g.isInteger=df,g.isLength=Yo,g.isMap=ff,g.isMatch=function Jf(n,s){return n===s||ao(n,s,So(s))},g.isMatchWith=function tp(n,s,a){return a="function"==typeof a?a:x,ao(n,s,So(s),a)},g.isNaN=function ep(n){return pf(n)&&n!=+n},g.isNative=function Xo(n){if(Ja(n))throw new wt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return co(n)},g.isNil=function np(n){return null==n},g.isNull=function Jl(n){return null===n},g.isNumber=pf,g.isObject=fe,g.isObjectLike=_e,g.isPlainObject=$o,g.isRegExp=Ko,g.isSafeInteger=function th(n){return df(n)&&n>=-Z&&n<=Z},g.isSet=eu,g.isString=Re,g.isSymbol=gn,g.isTypedArray=Li,g.isUndefined=function mf(n){return n===x},g.isWeakMap=function gf(n){return _e(n)&&We(n)==Ui},g.isWeakSet=function _f(n){return _e(n)&&"[object WeakSet]"==Qe(n)},g.join=function Cr(n,s){return null==n?"":$u.call(n,s)},g.kebabCase=vt,g.last=je,g.lastIndexOf=function Pl(n,s,a){var l=null==n?0:n.length;if(!l)return-1;var p=l;return a!==x&&(p=(p=St(a))<0?le(l+p,0):Be(p,l-1)),s==s?function $e(O,P,R){for(var J=R+1;J--;)if(O[J]===P)return J;return J}(n,s,p):Gr(n,ga,p,!0)},g.lowerCase=ke,g.lowerFirst=de,g.lt=vf,g.lte=yf,g.max=function Hp(n){return n&&n.length?Xs(n,In,Ci):x},g.maxBy=function Yp(n,s){return n&&n.length?Xs(n,dt(s,2),Ci):x},g.mean=function Xp(n){return Lu(n,In)},g.meanBy=function $p(n,s){return Lu(n,dt(s,2))},g.min=function Kp(n){return n&&n.length?Xs(n,In,La):x},g.minBy=function Jp(n,s){return n&&n.length?Xs(n,dt(s,2),La):x},g.stubArray=Nf,g.stubFalse=Ef,g.stubObject=function Lp(){return{}},g.stubString=function Vp(){return""},g.stubTrue=function Wp(){return!0},g.multiply=tm,g.nth=function kr(n,s){return n&&n.length?lo(n,St(s)):x},g.noConflict=function Np(){return Pe._===this&&(Pe._=dd),this},g.noop=Df,g.now=qi,g.pad=function Bt(n,s,a){n=Gt(n);var l=(s=St(s))?xi(n):0;if(!s||l>=s)return n;var p=(s-l)/2;return pr(to(p),a)+n+pr(Jr(p),a)},g.padEnd=function pe(n,s,a){n=Gt(n);var l=(s=St(s))?xi(n):0;return s&&l<s?n+pr(s-l,a):n},g.padStart=function Rn(n,s,a){n=Gt(n);var l=(s=St(s))?xi(n):0;return s&&l<s?pr(s-l,a)+n:n},g.parseInt=function Is(n,s,a){return a||null==s?s=0:s&&(s=+s),yd(Gt(n).replace(Hi,""),s||0)},g.random=function Ce(n,s,a){if(a&&"boolean"!=typeof a&&en(n,s,a)&&(s=a=x),a===x&&("boolean"==typeof s?(a=s,s=x):"boolean"==typeof n&&(a=n,n=x)),n===x&&s===x?(n=0,s=1):(n=ps(n),s===x?(s=n,n=0):s=ps(s)),n>s){var l=n;n=s,s=l}if(a||n%1||s%1){var p=Sa();return Be(n+p*(s-n+Uh("1e-"+((p+"").length-1))),s)}return Va(n,s)},g.reduce=function Qf(n,s,a){var l=xt(n)?pa:ue,p=arguments.length<3;return l(n,dt(s,4),a,p,Cs)},g.reduceRight=function Hf(n,s,a){var l=xt(n)?Qh:ue,p=arguments.length<3;return l(n,dt(s,4),a,p,cl)},g.repeat=function Fr(n,s,a){return s=(a?en(n,s,a):s===x)?1:St(s),Wa(Gt(n),s)},g.replace=function nu(){var n=arguments,s=Gt(n[0]);return n.length<3?s:s.replace(n[1],n[2])},g.result=function st(n,s,a){var l=-1,p=(s=Ke(s,n)).length;for(p||(p=1,n=x);++l<p;){var v=null==n?x:n[is(s[l])];v===x&&(l=p,v=a),n=Ms(v)?v.call(n):v}return n},g.round=em,g.runInContext=O,g.sample=function Uo(n){return(xt(n)?ls:Zd)(n)},g.size=function Ic(n){if(null==n)return 0;if(Ze(n))return Re(n)?xi(n):n.length;var s=We(n);return s==qe||s==Bn?n.size:Pa(n).length},g.snakeCase=bf,g.some=function Yf(n,s,a){var l=xt(n)?ma:Qd;return a&&en(n,s,a)&&(s=x),l(n,dt(s,3))},g.sortedIndex=function ac(n,s){return po(n,s)},g.sortedIndexBy=function If(n,s,a){return Ga(n,s,dt(a,2))},g.sortedIndexOf=function qf(n,s){var a=null==n?0:n.length;if(a){var l=po(n,s);if(l<a&&Wt(n[l],s))return l}return-1},g.sortedLastIndex=function Pf(n,s){return po(n,s,!0)},g.sortedLastIndexBy=function Bl(n,s,a){return Ga(n,s,dt(a,2),!0)},g.sortedLastIndexOf=function Gl(n,s){if(null!=n&&n.length){var l=po(n,s,!0)-1;if(Wt(n[l],s))return l}return-1},g.startCase=up,g.startsWith=function lp(n,s,a){return n=Gt(n),a=null==a?0:Ys(St(a),0,n.length),s=ut(s),n.slice(a,a+s.length)==s},g.subtract=nm,g.sum=function sm(n){return n&&n.length?Ji(n,In):0},g.sumBy=function im(n,s){return n&&n.length?Ji(n,dt(s,2)):0},g.template=function hp(n,s,a){var l=g.templateSettings;a&&en(n,s,a)&&(s=x),n=Gt(n),s=e({},s,l,Rl);var A,N,p=e({},s.imports,l.imports,Rl),v=I(p),T=ya(p,v),V=0,B=s.interpolate||Pr,G="__p += '",Y=Ta((s.escape||Pr).source+"|"+B.source+"|"+(B===Zi?hh:Pr).source+"|"+(s.evaluate||Pr).source+"|$","g"),ot="//# sourceURL="+(jt.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Lh+"]")+"\n";n.replace(Y,function(mt,It,Pt,Hn,_n,Yn){return Pt||(Pt=Hn),G+=n.slice(V,Yn).replace(Lr,ed),It&&(A=!0,G+="' +\n__e("+It+") +\n'"),_n&&(N=!0,G+="';\n"+_n+";\n__p += '"),Pt&&(G+="' +\n((__t = ("+Pt+")) == null ? '' : __t) +\n'"),V=Yn+mt.length,mt}),G+="';\n";var pt=jt.call(s,"variable")&&s.variable;if(pt){if(ia.test(pt))throw new wt("Invalid `variable` option passed into `_.template`")}else G="with (obj) {\n"+G+"\n}\n";G=(N?G.replace(Vs,""):G).replace(iu,"$1").replace(ru,"$1;"),G="function("+(pt||"obj")+") {\n"+(pt?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(A?", __e = _.escape":"")+(N?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+G+"return __p\n}";var Et=ip(function(){return Rt(v,ot+"return "+G).apply(x,T)});if(Et.source=G,Kl(Et))throw Et;return Et},g.times=function Bp(n,s){if((n=St(n))<1||n>Z)return[];var a=Ot,l=Be(n,Ot);s=dt(s),n-=Ot;for(var p=tr(l,s);++a<n;)s(a);return p},g.toFinite=ps,g.toInteger=St,g.toLength=Mn,g.toLower=function dp(n){return Gt(n).toLowerCase()},g.toNumber=ae,g.toSafeInteger=function xf(n){return n?Ys(St(n),-Z,Z):0===n?n:0},g.toString=Gt,g.toUpper=function fp(n){return Gt(n).toUpperCase()},g.trim=function pp(n,s,a){if((n=Gt(n))&&(a||s===x))return Vu(n);if(!n||!(s=ut(s)))return n;var l=Gn(n),p=Gn(s);return ks(l,Wu(l,p),xa(l,p)+1).join("")},g.trimEnd=function mp(n,s,a){if((n=Gt(n))&&(a||s===x))return n.slice(0,Uu(n)+1);if(!n||!(s=ut(s)))return n;var l=Gn(n);return ks(l,0,xa(l,Gn(s))+1).join("")},g.trimStart=function gp(n,s,a){if((n=Gt(n))&&(a||s===x))return n.replace(Hi,"");if(!n||!(s=ut(s)))return n;var l=Gn(n);return ks(l,Wu(l,Gn(s))).join("")},g.truncate=function _p(n,s){var a=30,l="...";if(fe(s)){var p="separator"in s?s.separator:p;a="length"in s?St(s.length):a,l="omission"in s?ut(s.omission):l}var v=(n=Gt(n)).length;if(yi(n)){var T=Gn(n);v=T.length}if(a>=v)return n;var A=a-xi(l);if(A<1)return l;var N=T?ks(T,0,A).join(""):n.slice(0,A);if(p===x)return N+l;if(T&&(A+=N.length-A),Ko(p)){if(n.slice(A).search(p)){var V,B=N;for(p.global||(p=Ta(p.source,Gt(lu.exec(p))+"g")),p.lastIndex=0;V=p.exec(B);)var G=V.index;N=N.slice(0,G===x?A:G)}}else if(n.indexOf(ut(p),A)!=A){var Y=N.lastIndexOf(p);Y>-1&&(N=N.slice(0,Y))}return N+l},g.unescape=function vp(n){return(n=Gt(n))&&ou.test(n)?n.replace(Ws,zu):n},g.uniqueId=function Up(n){var s=++ld;return Gt(n)+s},g.upperCase=yp,g.upperFirst=Af,g.each=Wo,g.eachRight=Bo,g.first=Fi,Of(g,function(){var n={};return Cn(g,function(s,a){jt.call(g.prototype,a)||(n[a]=s)}),n}(),{chain:!1}),g.VERSION="4.17.21",Tn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){g[n].placeholder=g}),Tn(["drop","take"],function(n,s){it.prototype[n]=function(a){a=a===x?1:le(St(a),0);var l=this.__filtered__&&!s?new it(this):this.clone();return l.__filtered__?l.__takeCount__=Be(a,l.__takeCount__):l.__views__.push({size:Be(a,Ot),type:n+(l.__dir__<0?"Right":"")}),l},it.prototype[n+"Right"]=function(a){return this.reverse()[n](a).reverse()}}),Tn(["filter","map","takeWhile"],function(n,s){var a=s+1,l=1==a||3==a;it.prototype[n]=function(p){var v=this.clone();return v.__iteratees__.push({iteratee:dt(p,3),type:a}),v.__filtered__=v.__filtered__||l,v}}),Tn(["head","last"],function(n,s){var a="take"+(s?"Right":"");it.prototype[n]=function(){return this[a](1).value()[0]}}),Tn(["initial","tail"],function(n,s){var a="drop"+(s?"":"Right");it.prototype[n]=function(){return this.__filtered__?new it(this):this[a](1)}}),it.prototype.compact=function(){return this.filter(In)},it.prototype.find=function(n){return this.filter(n).head()},it.prototype.findLast=function(n){return this.reverse().find(n)},it.prototype.invokeMap=Dt(function(n,s){return"function"==typeof n?new it(this):this.map(function(a){return lr(a,n,s)})}),it.prototype.reject=function(n){return this.filter(Vc(dt(n)))},it.prototype.slice=function(n,s){n=St(n);var a=this;return a.__filtered__&&(n>0||s<0)?new it(a):(n<0?a=a.takeRight(-n):n&&(a=a.drop(n)),s!==x&&(a=(s=St(s))<0?a.dropRight(-s):a.take(s-n)),a)},it.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},it.prototype.toArray=function(){return this.take(Ot)},Cn(it.prototype,function(n,s){var a=/^(?:filter|find|map|reject)|While$/.test(s),l=/^(?:head|last)$/.test(s),p=g[l?"take"+("last"==s?"Right":""):s],v=l||/^find/.test(s);p&&(g.prototype[s]=function(){var T=this.__wrapped__,A=l?[1]:arguments,N=T instanceof it,V=A[0],B=N||xt(T),G=function(It){var Pt=p.apply(g,xs([It],A));return l&&Y?Pt[0]:Pt};B&&a&&"function"==typeof V&&1!=V.length&&(N=B=!1);var Y=this.__chain__,pt=v&&!Y,Et=N&&!this.__actions__.length;if(!v&&B){T=Et?T:new it(this);var mt=n.apply(T,A);return mt.__actions__.push({func:xc,args:[G],thisArg:x}),new Sn(mt,Y)}return pt&&Et?n.apply(this,A):(mt=this.thru(G),pt?l?mt.value()[0]:mt.value():mt)})}),Tn(["pop","push","shift","sort","splice","unshift"],function(n){var s=jr[n],a=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",l=/^(?:pop|shift)$/.test(n);g.prototype[n]=function(){var p=arguments;if(l&&!this.__chain__){var v=this.value();return s.apply(xt(v)?v:[],p)}return this[a](function(T){return s.apply(xt(T)?T:[],p)})}}),Cn(it.prototype,function(n,s){var a=g[s];if(a){var l=a.name+"";jt.call(Qs,l)||(Qs[l]=[]),Qs[l].push({name:s,func:a})}}),Qs[fr(x,2).name]=[{name:"wrapper",func:x}],it.prototype.clone=function Me(){var n=new it(this.__wrapped__);return n.__actions__=ge(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=ge(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=ge(this.__views__),n},it.prototype.reverse=function Qt(){if(this.__filtered__){var n=new it(this);n.__dir__=-1,n.__filtered__=!0}else(n=this.clone()).__dir__*=-1;return n},it.prototype.value=function tl(){var n=this.__wrapped__.value(),s=this.__dir__,a=xt(n),l=s<0,p=a?n.length:0,v=function Jd(n,s,a){for(var l=-1,p=a.length;++l<p;){var v=a[l],T=v.size;switch(v.type){case"drop":n+=T;break;case"dropRight":s-=T;break;case"take":s=Be(s,n+T);break;case"takeRight":n=le(n,s-T)}}return{start:n,end:s}}(0,p,this.__views__),T=v.start,A=v.end,N=A-T,V=l?A:T-1,B=this.__iteratees__,G=B.length,Y=0,ot=Be(N,this.__takeCount__);if(!a||!l&&p==N&&ot==N)return kl(n,this.__actions__);var pt=[];t:for(;N--&&Y<ot;){for(var Et=-1,mt=n[V+=s];++Et<G;){var It=B[Et],Hn=It.type,_n=(0,It.iteratee)(mt);if(2==Hn)mt=_n;else if(!_n){if(1==Hn)continue t;break t}}pt[Y++]=mt}return pt},g.prototype.at=Vf,g.prototype.chain=function Wf(){return Lo(this)},g.prototype.commit=function Bf(){return new Sn(this.value(),this.__chain__)},g.prototype.next=function Gf(){this.__values__===x&&(this.__values__=eh(this.value()));var n=this.__index__>=this.__values__.length;return{done:n,value:n?x:this.__values__[this.__index__++]}},g.prototype.plant=function zf(n){for(var s,a=this;a instanceof xe;){var l=Ns(a);l.__index__=0,l.__values__=x,s?p.__wrapped__=l:s=l;var p=l;a=a.__wrapped__}return p.__wrapped__=n,s},g.prototype.reverse=function wc(){var n=this.__wrapped__;if(n instanceof it){var s=n;return this.__actions__.length&&(s=new it(this)),(s=s.reverse()).__actions__.push({func:xc,args:[ri],thisArg:x}),new Sn(s,this.__chain__)}return this.thru(ri)},g.prototype.toJSON=g.prototype.valueOf=g.prototype.value=function Tc(){return kl(this.__wrapped__,this.__actions__)},g.prototype.first=g.prototype.head,sr&&(g.prototype[sr]=function Uf(){return this}),g}();Pe._=zr,(gt=function(){return zr}.call(Yt,Tt,Yt,tt))!==x&&(tt.exports=gt)}.call(this)},3897:tt=>{tt.exports=function Yt(Tt,gt){(null==gt||gt>Tt.length)&&(gt=Tt.length);for(var x=0,k=new Array(gt);x<gt;x++)k[x]=Tt[x];return k},tt.exports.__esModule=!0,tt.exports.default=tt.exports},5372:tt=>{tt.exports=function Yt(Tt){if(Array.isArray(Tt))return Tt},tt.exports.__esModule=!0,tt.exports.default=tt.exports},6690:tt=>{tt.exports=function Yt(Tt,gt){if(!(Tt instanceof gt))throw new TypeError("Cannot call a class as a function")},tt.exports.__esModule=!0,tt.exports.default=tt.exports},9728:(tt,Yt,Tt)=>{var gt=Tt(4062);function x(Ut,Lt){for(var kt=0;kt<Lt.length;kt++){var ve=Lt[kt];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(Ut,gt(ve.key),ve)}}tt.exports=function k(Ut,Lt,kt){return Lt&&x(Ut.prototype,Lt),kt&&x(Ut,kt),Object.defineProperty(Ut,"prototype",{writable:!1}),Ut},tt.exports.__esModule=!0,tt.exports.default=tt.exports},8872:tt=>{tt.exports=function Yt(Tt,gt){var x=null==Tt?null:typeof Symbol<"u"&&Tt[Symbol.iterator]||Tt["@@iterator"];if(null!=x){var k,Ut,Lt,kt,ve=[],qn=!0,qs=!1;try{if(Lt=(x=x.call(Tt)).next,0===gt){if(Object(x)!==x)return;qn=!1}else for(;!(qn=(k=Lt.call(x)).done)&&(ve.push(k.value),ve.length!==gt);qn=!0);}catch(nn){qs=!0,Ut=nn}finally{try{if(!qn&&null!=x.return&&(kt=x.return(),Object(kt)!==kt))return}finally{if(qs)throw Ut}}return ve}},tt.exports.__esModule=!0,tt.exports.default=tt.exports},2218:tt=>{tt.exports=function Yt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},tt.exports.__esModule=!0,tt.exports.default=tt.exports},7424:(tt,Yt,Tt)=>{var gt=Tt(5372),x=Tt(8872),k=Tt(6116),Ut=Tt(2218);tt.exports=function Lt(kt,ve){return gt(kt)||x(kt,ve)||k(kt,ve)||Ut()},tt.exports.__esModule=!0,tt.exports.default=tt.exports},5036:(tt,Yt,Tt)=>{var gt=Tt(8698).default;tt.exports=function x(k,Ut){if("object"!==gt(k)||null===k)return k;var Lt=k[Symbol.toPrimitive];if(void 0!==Lt){var kt=Lt.call(k,Ut||"default");if("object"!==gt(kt))return kt;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===Ut?String:Number)(k)},tt.exports.__esModule=!0,tt.exports.default=tt.exports},4062:(tt,Yt,Tt)=>{var gt=Tt(8698).default,x=Tt(5036);tt.exports=function k(Ut){var Lt=x(Ut,"string");return"symbol"===gt(Lt)?Lt:String(Lt)},tt.exports.__esModule=!0,tt.exports.default=tt.exports},8698:tt=>{function Yt(Tt){return tt.exports=Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(gt){return typeof gt}:function(gt){return gt&&"function"==typeof Symbol&&gt.constructor===Symbol&&gt!==Symbol.prototype?"symbol":typeof gt},tt.exports.__esModule=!0,tt.exports.default=tt.exports,Yt(Tt)}tt.exports=Yt,tt.exports.__esModule=!0,tt.exports.default=tt.exports},6116:(tt,Yt,Tt)=>{var gt=Tt(3897);tt.exports=function x(k,Ut){if(k){if("string"==typeof k)return gt(k,Ut);var Lt=Object.prototype.toString.call(k).slice(8,-1);if("Object"===Lt&&k.constructor&&(Lt=k.constructor.name),"Map"===Lt||"Set"===Lt)return Array.from(k);if("Arguments"===Lt||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Lt))return gt(k,Ut)}},tt.exports.__esModule=!0,tt.exports.default=tt.exports}}]);